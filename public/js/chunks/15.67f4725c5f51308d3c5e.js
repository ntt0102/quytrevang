/*! For license information please see 15.67f4725c5f51308d3c5e.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[15,6],{"+RJL":function(e,t,n){"use strict";var r=n("VKCK"),i=n("E6yd");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(){a=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",c=i.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function d(e,t,n,i){var o=t&&t.prototype instanceof f?t:f,a=Object.create(o.prototype),s=new E(i||[]);return r(a,"_invoke",{value:w(e,n,s)}),a}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=d;var p={};function f(){}function m(){}function g(){}var v={};u(v,s,(function(){return this}));var _=Object.getPrototypeOf,b=_&&_(_(j([])));b&&b!==t&&n.call(b,s)&&(v=b);var y=g.prototype=f.prototype=Object.create(v);function C(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){var i;r(this,"_invoke",{value:function(r,a){function s(){return new t((function(i,s){!function r(i,a,s,l){var c=h(e[i],e,a);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==o(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,s,l)}),(function(e){r("throw",e,s,l)})):t.resolve(d).then((function(e){u.value=e,s(u)}),(function(e){return r("throw",e,s,l)}))}l(c.arg)}(r,a,i,s)}))}return i=i?i.then(s,s):s()}})}function w(e,t,n){var r="suspendedStart";return function(i,o){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw o;return k()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var s=x(a,n);if(s){if(s===p)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=h(e,t,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===p)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function x(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,x(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),p;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,p;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,p):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,p)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function S(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function j(e){if(e){var t=e[s];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=g,r(y,"constructor",{value:g,configurable:!0}),r(g,"constructor",{value:m,configurable:!0}),m.displayName=u(g,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,u(e,c,"GeneratorFunction")),e.prototype=Object.create(y),e},e.awrap=function(e){return{__await:e}},C(O.prototype),u(O.prototype,l,(function(){return this})),e.AsyncIterator=O,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new O(d(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},C(y),u(y,c,"Generator"),u(y,s,(function(){return this})),u(y,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=j,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],a=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),l=n.call(o,"finallyLoc");if(s&&l){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),p},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),S(n),p}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;S(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:j(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),p}},e}function s(e,t,n,r,i,o,a){try{var s=e[o](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(r,i)}var l={components:{DxFileManager:r.DxFileManager},data:function(){return{fileSystemProvider:new i.a({getItems:this.getItems,createDirectory:this.createDirectory,renameItem:this.renameItem,deleteItem:this.deleteItem,copyItem:this.copyItem,moveItem:this.moveItem,uploadFileChunk:this.uploadFileChunk}),currentFolderItems:[]}},props:{clientPath:{type:String,default:""}},computed:{fileManager:function(){return this.$refs.fileManager.instance}},watch:{clientPath:function(){this.fileManager.refresh()}},methods:{getItems:function(e){var t=this;return new Promise((function(n,r){axios.get("settings/files/getItems?clientPath=".concat(t.clientPath,"&path=").concat(e.path)).then((function(e){n(e.data),t.currentFolderItems=e.data}))}))},createDirectory:function(e,t){var n=this;return new Promise((function(r,i){axios.post("settings/files/createDirectory",{clientPath:n.clientPath,path:e.path,name:t}).then((function(e){e.data?r():i()}))}))},renameItem:function(e,t){var n=this;return new Promise((function(r,i){axios.post("settings/files/renameItem",{clientPath:n.clientPath,path:e.parentPath,oldName:e.name,newName:t}).then((function(e){e.data?r():i()}))}))},deleteItem:function(e){var t=this;return new Promise((function(n,r){axios.post("settings/files/deleteItem",{clientPath:t.clientPath,path:e.path,isDirectory:e.isDirectory}).then((function(e){e.data?n():r()}))}))},copyItem:function(e,t){var n=this;return new Promise((function(r,i){axios.post("settings/files/copyItem",{clientPath:n.clientPath,fromPath:e.parentPath,toPath:t.path,name:e.name}).then((function(e){e.data?r():i()})),r()}))},moveItem:function(e,t){var n=this;return new Promise((function(r,i){axios.post("settings/files/moveItem",{clientPath:n.clientPath,fromPath:e.parentPath,toPath:t.path,name:e.name}).then((function(e){e.data?r():i()})),r()}))},uploadFileChunk:function(e,t,n){var r,i=this;return(r=a().mark((function t(){var r,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.name,!e.type.match(/image.*/)){t.next=6;break}return o={file:e,maxSize:i.$mc.MAX_SIZE_IMAGE_UPLOAD},t.next=5,i.$mf.resizeImage(o);case 5:e=t.sent;case 6:return t.abrupt("return",new Promise((function(t,o){var a=new FormData;a.append("clientPath",i.clientPath),a.append("file",e),a.append("name",r),a.append("path",n.path),axios.post("settings/files/uploadFileChunk",a,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){e.data?t():o()}))})));case 7:case"end":return t.stop()}}),t)})),function(){var e=this,t=arguments;return new Promise((function(n,i){var o=r.apply(e,t);function a(e){s(o,n,i,a,l,"next",e)}function l(e){s(o,n,i,a,l,"throw",e)}a(void 0)}))})()},copyUrl:function(){var e=this,t=this.fileManager.getSelectedItems();if(t.length>1)this.$toasted.info(this.$t("settings.files.messages.multiFile"));else if(t[0].isDirectory)this.$toasted.info(this.$t("settings.files.messages.notIsFile"));else{var n="".concat(window.baseURL,"/storage/").concat(this.clientPath,"/").concat(t[0].path);navigator.clipboard.writeText(n).then((function(){e.$toasted.success(e.$t("settings.files.messages.copiedUrl")),e.$emit("copiedUrl",n)}),(function(t){return e.$toasted.error(e.$t("settings.files.messages.notCopiedUrl")+"<br>ERROR: "+t)}))}},onSelectedFileOpened:function(e){var t=this,n=e.file;if(n.name.match(/.(jpg|jpeg|png|gif)$/i)){var r=this.currentFolderItems.reduce((function(e,r){return r.isDirectory||e.push({src:"".concat(window.baseURL,"/storage/").concat(t.clientPath,"/").concat(n.parentPath,"/").concat(r.name),title:r.name}),e}),[]),i=this.$Pswp.open({items:r,options:{index:r.findIndex((function(e){return e.src.includes(n.name)}))}});i.listen("close",(function(){return t.$mf.popRouteHistoryState()})),this.$mf.pushPhotoswipeToHistoryState(i)}else this.$toasted.info(this.$t("settings.files.messages.notIsImage"))},onErrorOccurred:function(e){var t=this;setTimeout((function(){return t.fileManager.repaint()}),3e3)}}},c=(n("mdXo"),n("KHd+")),u=Object(c.a)(l,(function(){return(0,this._self._c)("DxFileManager",{ref:"fileManager",attrs:{"file-system-provider":this.fileSystemProvider,permissions:{create:!0,copy:!0,move:!0,delete:!0,rename:!0,upload:!0},itemView:{mode:"thumbnails"},toolbar:{fileSelectionItems:[{widget:"dxButton",options:{text:this.$t("settings.files.copyUrl"),hint:this.$t("settings.files.copyUrl"),icon:"link"},location:"before",onClick:this.copyUrl},"separator","move","copy","rename","separator","delete","clearSelection"]}},on:{errorOccurred:this.onErrorOccurred,selectedFileOpened:this.onSelectedFileOpened}})}),[],!1,null,null,null);t.a=u.exports},"+sxU":function(e,t,n){"use strict";n.r(t);var r=n("W2II"),i=n("ua+q"),o=n("v5W6"),a=n("zAdP"),s=n("a8dJ"),l=n("3CDA"),c=n("CF5h"),u=n("9lSq"),d=n("P6tt"),h=n("demn"),p=n("RfjA"),f=n("UnSs"),m=n("xPQU"),g=n("FrS1"),v=n("j+Lh"),_=n("jyIZ"),b=n("gDEn"),y=n("IRHc"),C=Object(p.d)(),O=g.a.add,w=["info","warning","error","success"],x=[],I=null,S={top:{my:"top",at:"top",of:null,offset:"0 0"},bottom:{my:"bottom",at:"bottom",of:null,offset:"0 -20"},center:{my:"center",at:"center",of:null,offset:"0 0"},right:{my:"center right",at:"center right",of:null,offset:"0 0"},left:{my:"center left",at:"center left",of:null,offset:"0 0"}},E={h:0,v:0};O((function(){m.a.subscribeGlobal(f.default.getDocument(),_.a.down,(function(e){for(var t=x.length-1;t>=0;t--)if(!x[t]._proxiedDocumentDownHandler(e))return}))}));var j=b.a.inherit({_getDefaultOptions:function(){return Object(i.a)(this.callBase(),{message:"",type:"info",displayTime:2e3,position:"bottom center",animation:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},shading:!1,height:"auto",hideTopOverlayHandler:null,closeOnSwipe:!0,closeOnClick:!1,resizeEnabled:!1})},_defaultOptionsRules:function(){return this.callBase().concat([{device:{platform:"android"},options:{closeOnOutsideClick:!0,width:"auto",position:{at:"bottom left",my:"bottom left",offset:"20 -20"},animation:{show:{type:"slide",duration:200,from:{position:{my:"top",at:"bottom",of:C}}},hide:{type:"slide",duration:200,to:{position:{my:"top",at:"bottom",of:C}}}}}},{device:function(e){var t="phone"===e.deviceType,n="android"===e.platform;return t&&n},options:{width:"100vw",position:{at:"bottom center",my:"bottom center",offset:"0 0"}}},{device:function(e){return"phone"===e.deviceType},options:{width:"100vw"}},{device:function(){return Object(y.d)()},options:{minWidth:344,maxWidth:568,displayTime:4e3}}])},_init:function(){this.callBase(),this._posStringToObject()},_renderContentImpl:function(){this.option("message")&&(this._message=Object(r.a)("<div>").addClass("dx-toast-message").text(this.option("message")).appendTo(this.$content())),this.setAria("role","alert",this._message),Object(v.d)(this.option("type").toLowerCase(),w)>-1&&this.$content().prepend(Object(r.a)("<div>").addClass("dx-toast-icon")),this.callBase()},_render:function(){this.callBase(),this.$element().addClass("dx-toast"),this.$wrapper().addClass("dx-toast-wrapper"),this.$content().addClass("dx-toast-"+String(this.option("type")).toLowerCase()),this.$content().addClass("dx-toast-content"),this._toggleCloseEvents("Swipe"),this._toggleCloseEvents("Click")},_renderScrollTerminator:s.n,_toggleCloseEvents:function(e){var t="dx"+e.toLowerCase();m.a.off(this.$content(),t),this.option("closeOn"+e)&&m.a.on(this.$content(),t,this.hide.bind(this))},_posStringToObject:function(){if(Object(o.o)(this.option("position"))){var e=this.option("position").split(" ")[0],t=this.option("position").split(" ")[1];switch(this.option("position",Object(i.a)({boundaryOffset:E},S[e])),t){case"center":case"left":case"right":this.option("position").at+=" "+t,this.option("position").my+=" "+t}}},_show:function(){return I&&I!==this&&(clearTimeout(I._hideTimeout),I.hide()),I=this,this.callBase.apply(this,arguments).done(function(){clearTimeout(this._hideTimeout),this._hideTimeout=setTimeout(this.hide.bind(this),this.option("displayTime"))}.bind(this))},_hide:function(){return I=null,this.callBase.apply(this,arguments)},_overlayStack:function(){return x},_zIndexInitValue:function(){return this.callBase()+8e3},_dispose:function(){clearTimeout(this._hideTimeout),I=null,this.callBase()},_optionChanged:function(e){switch(e.name){case"type":this.$content().removeClass("dx-toast-"+e.previousValue),this.$content().addClass("dx-toast-"+String(e.value).toLowerCase());break;case"message":this._message&&this._message.text(e.value);break;case"closeOnSwipe":this._toggleCloseEvents("Swipe");break;case"closeOnClick":this._toggleCloseEvents("Click");break;case"displayTime":break;default:this.callBase(e)}}});Object(c.a)("dxToast",j);var k=j,T=null,A=function(e,t,n){var a=Object(o.k)(e)?e:{message:e},s=a.onHidden;Object(i.a)(a,{type:t,displayTime:n,onHidden:function(e){Object(r.a)(e.element).remove(),new d.a(s,{context:e.model}).execute(arguments)}}),T=Object(r.a)("<div>").appendTo(Object(h.c)()),new k(T,a).show()},D=function(e,t,n){t=t||s.n,n=n||s.n,Array.isArray(e)||(e=[e]);var r=e.map((e,r)=>Object(a.c)(e).then(n=>(Object(o.h)(t)&&t({item:e,index:r,result:n}),n),e=>(e||(e={}),e.index=r,Object(o.h)(n)&&n(e),(new a.a).resolve().promise())));return a.c.apply(null,r)},P=function(e){for(var t=["B","KB","MB","GB","TB"],n=0,r=e;r>=1024&&n<=t.length-1;)r/=1024,n++;return r=Math.round(10*r)/10,"".concat(r," ").concat(t[n])},M=function(e,t,n){return n.forEach(n=>{Object(i.a)(!0,e,Object(o.d)(t[n])?{[n]:t[n]}:{})}),e},F=function(e){var t=Object.keys(e),n=[];return t.forEach(t=>n.push(e[t])),{keys:t,values:n}},N=n("hpbx"),R=n("lU5B"),B=n("t66f"),L=n("3VAS"),q=n("P9VE"),H=n("fWfm"),$=n("s6U3"),U=n("xOOu"),z=n.n(U);var V=class{constructor(e,t,n){this.errorCode=e,this.fileSystemItem=t,this.errorText=n}},K={NoAccess:0,FileExists:1,FileNotFound:2,DirectoryExists:3,DirectoryNotFound:4,WrongFileExtension:5,MaxFileSizeExceeded:6,InvalidSymbols:7,Other:32767},W=n("ADaq"),G=Object(p.d)();class Z extends N.a{constructor(e){super(e=Object(s.g)(e,{}));var t=e.data;if(t&&!Array.isArray(t))throw q.a.Error("E4006");var n=e.itemsExpr||"items";this._subFileItemsGetter=Object(B.a)(n),this._subFileItemsSetter=this._getSetter(n);var r=e.contentExpr||"content";this._contentGetter=Object(B.a)(r),this._contentSetter=this._getSetter(r);var i=this._getNameExpr(e);this._nameSetter=this._getSetter(i);var o=this._getIsDirExpr(e);this._getIsDirSetter=this._getSetter(o);var a=this._getKeyExpr(e);this._keySetter=this._getSetter(a);var l=this._getSizeExpr(e);this._sizeSetter=this._getSetter(l);var c=this._getDateModifiedExpr(e);this._dateModifiedSetter=this._getSetter(c),this._data=t||[]}getItems(e){return this._executeActionAsDeferred(()=>this._getItems(e),!0)}renameItem(e,t){return this._executeActionAsDeferred(()=>this._renameItemCore(e,t))}_renameItemCore(e,t){if(e){var n=this._findDataObject(e);this._nameSetter(n,t),e.name=t,e.key=this._ensureDataObjectKey(n)}}createDirectory(e,t){return this._executeActionAsDeferred(()=>{this._validateDirectoryExists(e),this._createDataObject(e,t,!0)})}deleteItems(e){return e.map(e=>this._executeActionAsDeferred(()=>this._deleteItem(e)))}moveItems(e,t){var n=this._findDataObject(t),r=this._getDirectoryDataItems(n);return e.map(e=>this._executeActionAsDeferred(()=>{this._checkAbilityToMoveOrCopyItem(e,t);var n=this._findDataObject(e);this._deleteItem(e),r.push(n)}))}copyItems(e,t){var n=this._findDataObject(t),r=this._getDirectoryDataItems(n);return e.map(e=>this._executeActionAsDeferred(()=>{this._checkAbilityToMoveOrCopyItem(e,t);var n=this._findDataObject(e),i=this._createCopy(n);r.push(i)}))}uploadFileChunk(e,t,n){if(t.chunkIndex>0)return t.customData.deferred;this._validateDirectoryExists(n);var r=t.customData.deferred=new a.a,i=this._createFileReader();return i.readAsDataURL(e),i.onload=()=>{var t=i.result.split(",")[1],o=this._createDataObject(n,e.name,!1);this._sizeSetter(o,e.size),this._dateModifiedSetter(o,e.lastModifiedDate),this._contentSetter(o,t),r.resolve()},i.onerror=e=>r.reject(e),r}downloadItems(e){1===e.length?this._downloadSingleFile(e[0]):this._downloadMultipleFiles(e)}_downloadSingleFile(e){for(var t=this._getFileContent(e),n=G.atob(t),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o++)i[o]=n.charCodeAt(o);var a=new G.Blob([r],{type:"application/octet-stream"});H.b.saveAs(e.name,null,a)}_downloadMultipleFiles(e){var t=new(function(){if(!z.a)throw $.a.Error("E1041","JSZip");return z.a}());e.forEach(e=>t.file(e.name,this._getFileContent(e),{base64:!0}));var n={type:"blob",compression:"DEFLATE",mimeType:"application/zip"},r=new a.a;t.generateAsync?t.generateAsync(n).then(r.resolve):r.resolve(t.generate(n)),r.done(e=>H.b.saveAs("files.zip",null,e))}_getFileContent(e){var t=this._findDataObject(e);return this._contentGetter(t)||""}_validateDirectoryExists(e){if(!this._isFileItemExists(e)||this._isDirGetter(e.fileItem))throw new V(K.DirectoryNotFound,e)}_checkAbilityToMoveOrCopyItem(e,t){var n=this._findDataObject(e),r=this._getKeyFromDataObject(n,e.parentPath),i=t.getFullPathInfo(),o="";i.forEach(t=>{if(o=Object(W.f)(o,t.name),this._getDataObjectKey(t.key,o)===r)throw new V(K.Other,e)})}_createDataObject(e,t,n){var r={};this._nameSetter(r,t),this._getIsDirSetter(r,n),this._keySetter(r,String(new L.a));var i=this._findDataObject(e);return this._getDirectoryDataItems(i).push(r),r}_createCopy(e){var t={};this._nameSetter(t,this._nameGetter(e)),this._getIsDirSetter(t,this._isDirGetter(e));var n=this._subFileItemsGetter(e);if(Array.isArray(n)){var r=[];n.forEach(e=>{var t=this._createCopy(e);r.push(t)}),this._subFileItemsSetter(t,r)}return t}_deleteItem(e){var t=this._findDataObject(e),n=this._findFileItemObj(e.pathInfo),r=this._getDirectoryDataItems(n),i=r.indexOf(t);r.splice(i,1)}_getDirectoryDataItems(e){if(!e)return this._data;var t=this._subFileItemsGetter(e);return Array.isArray(t)||(t=[],this._subFileItemsSetter(e,t)),t}_getItems(e){this._validateDirectoryExists(e);var t=e.getFullPathInfo(),n=t&&t.length>0?t[t.length-1].key:null,r=this._data;if(n){var i=this._findFileItemObj(t);r=i&&this._subFileItemsGetter(i)||[]}return this._ensureKeysForDuplicateNameItems(r),this._convertDataObjectsToFileItems(r,t)}_ensureKeysForDuplicateNameItems(e){var t={};e.forEach(e=>{var n=this._nameGetter(e);t[n]?this._ensureDataObjectKey(e):t[n]=!0})}_findDataObject(e){if(e.isRoot())return null;var t=this._findFileItemObj(e.getFullPathInfo());if(!t){var n=e.isDirectory?K.DirectoryNotFound:K.FileNotFound;throw new V(n,e)}return t}_findFileItemObj(e){var t=this;Array.isArray(e)||(e=[]);for(var n="",r=null,i=this._data,o=function(o){(r=Object(v.a)(i,r=>{var i=t._isDirGetter(r)||o===e.length-1;return t._getKeyFromDataObject(r,n)===e[o].key&&t._nameGetter(r)===e[o].name&&i}))&&(n=Object(W.f)(n,t._nameGetter(r)),i=t._subFileItemsGetter(r))},a=0;a<e.length&&(0===a||r);a++)o(a);return r}_getKeyFromDataObject(e,t){var n=this._keyGetter(e),r=Object(W.f)(t,this._nameGetter(e));return this._getDataObjectKey(n,r)}_getDataObjectKey(e,t){return e||t}_ensureDataObjectKey(e){var t=this._keyGetter(e);return t||(t=String(new L.a),this._keySetter(e,t)),t}_hasSubDirs(e){var t=Object(s.g)(this._subFileItemsGetter(e),[]);if(!Array.isArray(t))return!0;for(var n=0;n<t.length;n++)if(!0===this._isDirGetter(t[n]))return!0;return!1}_getSetter(e){return Object(o.h)(e)?e:Object(B.b)(e)}_isFileItemExists(e){return e.isDirectory&&e.isRoot()||!!this._findFileItemObj(e.getFullPathInfo())}_createFileReader(){return new G.FileReader}}var Q=Z,X=n("P27Q"),Y=n("sUSw"),J=Object(p.d)(),ee="GetDirContents",te="CreateDir",ne="Rename",re="Move",ie="Copy",oe="Remove",ae="UploadChunk",se="AbortUpload",le="Download",ce="GET",ue="POST";class de extends N.a{constructor(e){super(e=Object(s.g)(e,{})),this._endpointUrl=e.endpointUrl,this._beforeAjaxSend=e.beforeAjaxSend,this._beforeSubmit=e.beforeSubmit,this._requestHeaders=e.requestHeaders,this._hasSubDirsGetter=Object(B.a)(e.hasSubDirectoriesExpr||"hasSubDirectories")}getItems(e){var t=e.getFullPathInfo();return this._executeRequest(ee,{pathInfo:t}).then(e=>this._convertDataObjectsToFileItems(e.result,t))}renameItem(e,t){return this._executeRequest(ne,{pathInfo:e.getFullPathInfo(),isDirectory:e.isDirectory,name:t})}createDirectory(e,t){return this._executeRequest(te,{pathInfo:e.getFullPathInfo(),name:t})}deleteItems(e){return e.map(e=>this._executeRequest(oe,{pathInfo:e.getFullPathInfo(),isDirectory:e.isDirectory}))}moveItems(e,t){return e.map(e=>this._executeRequest(re,{sourcePathInfo:e.getFullPathInfo(),sourceIsDirectory:e.isDirectory,destinationPathInfo:t.getFullPathInfo()}))}copyItems(e,t){return e.map(e=>this._executeRequest(ie,{sourcePathInfo:e.getFullPathInfo(),sourceIsDirectory:e.isDirectory,destinationPathInfo:t.getFullPathInfo()}))}uploadFileChunk(e,t,n){0===t.chunkIndex&&(t.customData.uploadId=new L.a);var r={destinationPathInfo:n.getFullPathInfo(),chunkMetadata:JSON.stringify({UploadId:t.customData.uploadId,FileName:e.name,Index:t.chunkIndex,TotalCount:t.chunkCount,FileSize:e.size})},i={url:this._endpointUrl,headers:this._requestHeaders||{},method:ue,dataType:"json",data:{chunk:t.chunkBlob,arguments:JSON.stringify(r),command:ae},upload:{onprogress:s.n,onloadstart:s.n,onabort:s.n},xhrFields:{},cache:!1},o=new a.a;return this._beforeSendInternal(i),X.a.sendRequest(i).done(e=>{!e.success&&o.reject(e)||o.resolve()}).fail(o.reject),o.promise()}abortFileUpload(e,t,n){return this._executeRequest(se,{uploadId:t.customData.uploadId})}downloadItems(e){var t=this._getDownloadArgs(e),n=Object(r.a)("<form>").css({display:"none"}).attr({method:ue,action:t.url}),i={command:t.command,arguments:t.arguments};this._beforeSubmitInternal(i),this._appendFormDataInputsToForm(i,n),n.appendTo("body"),m.a.trigger(n,"submit"),setTimeout(()=>n.remove())}getItemsContent(e){var t=this._getDownloadArgs(e),n={url:t.url,headers:this._requestHeaders||{},method:ue,responseType:"arraybuffer",data:{command:t.command,arguments:t.arguments},upload:{onprogress:s.n,onloadstart:s.n,onabort:s.n},xhrFields:{},cache:!1};return this._beforeSendInternal(n),X.a.sendRequest(n)}_getDownloadArgs(e){var t={pathInfoList:e.map(e=>e.getFullPathInfo())},n=JSON.stringify(t);return{url:this._endpointUrl,arguments:n,command:le}}_getItemsIds(e){return e.map(e=>e.relativeName)}_executeRequest(e,t){var n=e===ee?ce:ue,r=new a.a,i={url:this._getEndpointUrl(e,t),headers:this._requestHeaders||{},method:n,dataType:"json",data:{},xhrFields:{},cache:!1};return this._beforeSendInternal(i),X.a.sendRequest(i).then(e=>{!e.success&&r.reject(e)||r.resolve(e)},e=>r.reject(e)),r.promise()}_beforeSubmitInternal(e){Object(o.h)(this._beforeSubmit)&&this._beforeSubmit({formData:e})}_beforeSendInternal(e){if(Object(o.h)(this._beforeAjaxSend)){var t={headers:e.headers,formData:e.data,xhrFields:e.xhrFields};this._beforeAjaxSend(t),e.headers=t.headers,e.data=t.formData,e.xhrFields=t.xhrFields}Object(o.e)(e.data)?delete e.data:(e.responseType||e.upload)&&(e.data=this._createFormData(e.data))}_createFormData(e){var t=new J.FormData;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&Object(o.d)(e[n])&&t.append(n,e[n]);return t}_appendFormDataInputsToForm(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&Object(o.d)(e[n])&&Object(r.a)("<input>").attr({type:"hidden",name:n,value:e[n]}).appendTo(t)}_getEndpointUrl(e,t){var n=this._getQueryString({command:e,arguments:JSON.stringify(t)}),r=this._endpointUrl&&this._endpointUrl.indexOf("?")>0?"&":"?";return this._endpointUrl+r+n}_getQueryString(e){for(var t=[],n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],o=e[i];if(void 0!==o)if(null===o&&(o=""),Array.isArray(o))this._processQueryStringArrayParam(i,o,t);else{var a=this._getQueryStringPair(i,o);t.push(a)}}return t.join("&")}_processQueryStringArrayParam(e,t,n){Object(Y.a)(t,(t,r)=>{var i=this._getQueryStringPair(e,r);n.push(i)})}_getQueryStringPair(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}_hasSubDirs(e){var t=this._hasSubDirsGetter(e);return"boolean"!=typeof t||t}_getKeyExpr(e){return e.keyExpr||"key"}}var he=de,pe=n("E6yd");class fe{constructor(e){e=e||{},this._options=Object(i.a)({},e),this._isInitialized=!1,this._dataLoading=!1,this._dataLoadingDeferred=null,this._rootDirectoryInfo=this._createRootDirectoryInfo(e.rootText),this._currentDirectoryInfo=this._rootDirectoryInfo,this._defaultIconMap=this._createDefaultIconMap(),this.startSingleLoad(),this._setSecurityController(),this._setProvider(e.fileProvider),this._initialize()}_initialize(){var e=this._options.currentPathKeys&&this._options.currentPathKeys.length?this.setCurrentPathByKeys(this._options.currentPathKeys):this.setCurrentPath(this._options.currentPath),t=()=>{this._isInitialized=!0,this._raiseInitialized()};e?Object(a.c)(e).always(t):t()}_setSecurityController(){this._securityController=new me({allowedFileExtensions:this._options.allowedFileExtensions,maxFileSize:this._options.uploadMaxFileSize}),this._resetState()}setAllowedFileExtensions(e){Object(o.d)(e)&&(this._options.allowedFileExtensions=e),this._setSecurityController(),this.refresh()}setUploadOptions(e){var{maxFileSize:t,chunkSize:n}=e;Object(o.d)(n)&&(this._options.uploadChunkSize=n),Object(o.d)(t)&&(this._options.uploadMaxFileSize=t,this._setSecurityController(),this.refresh())}_setProvider(e){this._fileProvider=this._createFileProvider(e),this._resetState()}updateProvider(e,t){return Object(o.d)(t)?Object(a.c)(this._getDirectoryByPathParts(this._rootDirectoryInfo,t,!0)).then(t=>{t!==this._rootDirectoryInfo&&this._resetCurrentDirectory(),this._setProvider(e)}).then(()=>this.setCurrentPathByKeys(t)):this._updateProviderOnly(e)}_updateProviderOnly(e){return this._resetCurrentDirectory(),this._setProvider(e),Object(a.c)(this.refresh())}_createFileProvider(e){if(e||(e=[]),Array.isArray(e))return new Q({data:e});if(e instanceof N.a)return e;switch(e.type){case"remote":return new he(e);case"custom":return new pe.a(e)}return new Q(e)}setCurrentPath(e){var t=Object(W.e)(e),n=Object(W.f)(...t);return this.getCurrentDirectory().fileItem.relativeName===n?(new a.a).resolve().promise():this._setCurrentDirectoryByPathParts(t)}setCurrentPathByKeys(e){return Object(s.h)(this.getCurrentDirectory().fileItem.pathKeys,e,0,!0)?(new a.a).resolve().promise():this._setCurrentDirectoryByPathParts(e,!0)}getCurrentPath(){for(var e="",t=this.getCurrentDirectory();t&&!t.fileItem.isRoot();){var n=Object(W.b)(t.fileItem.name);e=Object(W.f)(n,e),t=t.parentDirectory}return e}getCurrentPathKeys(){return this.getCurrentDirectory().fileItem.pathKeys}getCurrentDirectory(){return this._currentDirectoryInfo}setCurrentDirectory(e,t){if(e)if(t&&(e=this._getActualDirectoryInfo(e)),this._currentDirectoryInfo&&this._currentDirectoryInfo===e)this._raisePathPotentiallyChanged();else{var n=this._currentDirectoryInfo.fileItem.key!==e.fileItem.key;this._currentDirectoryInfo=e,n&&this._isInitialized&&(this._dataLoading||this._raiseDataLoading("navigation"),this._raiseSelectedDirectoryChanged(e))}}_resetCurrentDirectory(){this._currentDirectoryInfo=this._rootDirectoryInfo}getCurrentItems(e){return this._dataLoadingDeferred?this._dataLoadingDeferred.then(()=>this._getCurrentItemsInternal(e)):this._getCurrentItemsInternal(e)}_getCurrentItemsInternal(e){var t=this.getCurrentDirectory();return this.getDirectoryContents(t).then(n=>{var r=this._separateItemsByType(n);return t.fileItem.hasSubDirectories=!!r.folders.length,e?r.files:n})}getDirectories(e,t){return this.getDirectoryContents(e,t).then(e=>e.filter(e=>e.fileItem.isDirectory))}_separateItemsByType(e){var t=[],n=[];return e.forEach(e=>e.fileItem.isDirectory?t.push(e):n.push(e)),{folders:t,files:n}}getDirectoryContents(e,t){if(!e)return(new a.a).resolve([this._rootDirectoryInfo]).promise();if(e.itemsLoaded)return(new a.a).resolve(e.items).promise();if(this._singleOperationLockId&&e.itemsSingleLoadErrorId===this._singleOperationLockId)return this._changeDirectoryOnError(e,t,!0),(new a.a).reject().promise();var n=e.getInternalKey(),r=this._loadedItems[n];return r||(r=this._getFileItems(e,t).then(t=>(t=t||[],e.items=t.map(t=>t.isDirectory&&this._createDirectoryInfo(t,e)||this._createFileInfo(t,e)),e.itemsLoaded=!0,e.items),()=>(this._singleOperationLockId&&e.itemsSingleLoadErrorId!==this._singleOperationLockId&&(e.itemsSingleLoadErrorId=this._singleOperationLockId),[])),this._loadedItems[n]=r,r.always(()=>{delete this._loadedItems[n]}),r)}_getFileItems(e,t){var n=null;try{n=this._fileProvider.getItems(e.fileItem)}catch(n){return this._handleItemLoadError(e,n,t)}return Object(a.c)(n).then(e=>this._securityController.getAllowedItems(e),n=>this._handleItemLoadError(e,n,t))}createDirectory(e,t){var n=e.fileItem,r=this._createDirInfoByName(t,e),i=this._createEditActionInfo("create",r,e);return this._processEditAction(i,e=>{e.parentDirectory=n,e.name=t,this._editingEvents.onDirectoryCreating(e)},()=>this._fileProvider.createDirectory(n,t).done(e=>(n.isRoot()||(n.hasSubDirectories=!0),e)),()=>{var e={parentDirectory:n,name:t};this._editingEvents.onDirectoryCreated(e)},()=>this._resetDirectoryState(e,!0))}renameItem(e,t){var n=e.fileItem.createClone(),r=this._createEditActionInfo("rename",e,e.parentDirectory,{itemNewName:t});return this._processEditAction(r,(e,r)=>{r.fileItem.isDirectory||this._securityController.validateExtension(t),e.item=n,e.newName=t,this._editingEvents.onItemRenaming(e)},e=>this._fileProvider.renameItem(e,t),()=>{var e={sourceItem:n,itemName:t};this._editingEvents.onItemRenamed(e)},()=>{var t=this._getActualDirectoryInfo(e.parentDirectory);this._resetDirectoryState(t),this.setCurrentDirectory(t)})}moveItems(e,t){var n=this._createEditActionInfo("move",e,t);return this._processEditAction(n,(e,n)=>{e.item=n.fileItem,e.destinationDirectory=t.fileItem,this._editingEvents.onItemMoving(e)},e=>this._fileProvider.moveItems([e],t.fileItem),e=>{var n={sourceItem:e.fileItem,parentDirectory:t.fileItem,itemName:e.fileItem.name,itemPath:Object(W.f)(t.fileItem.path,e.fileItem.name)};this._editingEvents.onItemMoved(n)},n=>{e.forEach(e=>this._resetDirectoryState(e.parentDirectory,!0)),n&&(this._resetDirectoryState(t),this.setCurrentPathByKeys(t.fileItem.pathKeys),t.expanded=!0)})}copyItems(e,t){var n=this._createEditActionInfo("copy",e,t);return this._processEditAction(n,(e,n)=>{e.item=n.fileItem,e.destinationDirectory=t.fileItem,this._editingEvents.onItemCopying(e)},e=>this._fileProvider.copyItems([e],t.fileItem),e=>{var n={sourceItem:e.fileItem,parentDirectory:t.fileItem,itemName:e.fileItem.name,itemPath:Object(W.f)(t.fileItem.path,e.fileItem.name)};this._editingEvents.onItemCopied(n)},e=>{e&&(t=this._getActualDirectoryInfo(t),this._resetDirectoryState(t),this.setCurrentDirectory(t),t.expanded=!0)})}deleteItems(e){var t=e.length>0?e[0].parentDirectory:null,n=this._createEditActionInfo("delete",e,t);return this._processEditAction(n,(e,t)=>{e.item=t.fileItem,this._editingEvents.onItemDeleting(e)},e=>this._fileProvider.deleteItems([e]),e=>this._editingEvents.onItemDeleted({item:e.fileItem}),()=>{e.forEach(e=>{var t=this._getActualDirectoryInfo(e.parentDirectory);this._resetDirectoryState(t),this.setCurrentDirectory(t)})})}processUploadSession(e,t){var n=this._getItemInfosForUploaderFiles(e.files,t),r=this._createEditActionInfo("upload",n,t,{sessionInfo:e});return this._processEditAction(r,()=>{},(t,n)=>e.deferreds[n],()=>{},()=>this._resetDirectoryState(t,!0))}uploadFileChunk(e,t,n){var r=null;0===t.chunkIndex?(this._securityController.validateMaxFileSize(e.size),this._securityController.validateExtension(e.name),r=this._processBeforeItemEditAction(t=>{t.fileData=e,t.destinationDirectory=n,this._editingEvents.onFileUploading(t)})):r=(new a.a).resolve().promise();var i=r.then(()=>this._fileProvider.uploadFileChunk(e,t,n));return t.chunkIndex===t.chunkCount-1&&(i=i.done(()=>{var t={fileData:e,parentDirectory:n};this._editingEvents.onFileUploaded(t)})),i}abortFileUpload(e,t,n){return Object(a.c)(this._fileProvider.abortFileUpload(e,t,n))}getFileUploadChunkSize(){var e=this._options.uploadChunkSize;return e&&e>0?e:this._fileProvider.getFileUploadChunkSize()}downloadItems(e){var t=e.map(e=>this._processBeforeItemEditAction(t=>{t.item=e.fileItem,this._editingEvents.onItemDownloading(t)},e));return Object(a.c)(...t).then(()=>{var t=e.map(e=>e.fileItem);return Object(a.c)(this._getItemActionResult(this._fileProvider.downloadItems(t))).then(()=>{},t=>{this._raiseDownloadItemsError(e,e[0].parentDirectory,t)})},t=>{this._raiseDownloadItemsError(e,e[0].parentDirectory,t)})}getItemContent(e){var t=e.map(e=>e.fileItem);return Object(a.c)(this._fileProvider.getItemsContent(t))}_handleItemLoadError(e,t,n){return e=this._getActualDirectoryInfo(e),this._raiseGetItemsError(e,t),this._changeDirectoryOnError(e,n),(new a.a).reject().promise()}_raiseGetItemsError(e,t){var n=this._createEditActionInfo("getItems",e,e);this._raiseEditActionStarting(n),this._raiseEditActionResultAcquired(n),this._raiseEditActionError(n,{errorCode:t.errorCode,errorText:t.errorText,fileItem:e.fileItem,index:0})}_raiseDownloadItemsError(e,t,n){var r=this._createEditActionInfo("download",e,t),i=e.length;r.singleRequest=1===i,this._raiseEditActionStarting(r),this._raiseEditActionResultAcquired(r);for(var o=0;o<i-1;o++)this._raiseEditActionItemError(r,{errorCode:n.errorCode,errorText:n.errorText,fileItem:e[o].fileItem,index:o});this._raiseEditActionError(r,{errorCode:n.errorCode,errorText:n.errorText,fileItem:e[i-1].fileItem,index:i-1})}_changeDirectoryOnError(e,t,n){n&&(e=this._getActualDirectoryInfo(e)),this._resetDirectoryState(e),e.expanded=!1,t||this.setCurrentDirectory(e.parentDirectory)}_getItemActionResult(e){return Array.isArray(e)?e[0]:e}_processEditAction(e,t,n,r,i){var o=!1;this._raiseEditActionStarting(e);var a=e.itemInfos.map((e,i)=>this._processBeforeItemEditAction(t,e).then(()=>this._getItemActionResult(n(e.fileItem,i)).done(()=>r(e))));return e.singleRequest=1===a.length,this._raiseEditActionResultAcquired(e),D(a,t=>{o=!0,this._raiseCompleteEditActionItem(e,t)},t=>this._raiseEditActionItemError(e,t)).then(()=>{i(o),this._raiseCompleteEditAction(e)})}_createEditActionInfo(e,t,n,r){r=r||{};var i=(t=Array.isArray(t)?t:[t]).map(e=>e.fileItem);return{name:e,itemInfos:t,items:i,directory:n,customData:r,singleRequest:!0}}_processBeforeItemEditAction(e,t){var n=new a.a,r=this._createBeforeActionArgs();try{e(r,t)}catch(e){return n.reject(e).promise()}if(r.cancel){if(!0===r.cancel)return n.reject({errorText:r.errorText,errorCode:r.errorCode});Object(o.m)(r.cancel)&&Object(a.c)(r.cancel).then(e=>{!0===e?n.reject():Object(o.j)(e)&&!0===e.cancel&&n.reject({errorText:e.errorText,errorCode:e.errorCode}),n.resolve()},n.resolve)}else n.resolve();return n.promise()}_createBeforeActionArgs(){return{errorCode:void 0,errorText:"",cancel:!1}}_getItemInfosForUploaderFiles(e,t){for(var n=this._getPathInfo(t),r=[],i=0;i<e.length;i++){var o=e[i],a=new R.a(n,o.name,!1),s=this._createFileInfo(a,t);r.push(s)}return r}refresh(){return this._lockRefresh?this._refreshDeferred:(this._lockRefresh=!0,this._executeDataLoad(()=>this._refreshDeferred=this._refreshInternal(),"refresh"))}startSingleLoad(){this._singleOperationLockId=(new L.a).toString()}endSingleLoad(){delete this._singleOperationLockId}_refreshInternal(){var e={items:this._rootDirectoryInfo.items},t=this._getDirectoryPathKeyParts(this.getCurrentDirectory());return this._resetDirectoryState(this._rootDirectoryInfo),this._loadItemsRecursive(this._rootDirectoryInfo,e).then(()=>{var e=this._findDirectoryByPathKeyParts(t);this.setCurrentDirectory(e),delete this._lockRefresh})}_loadItemsRecursive(e,t){var n=this;return this.getDirectories(e).then(e=>{for(var r=[],i=function(i){var o=Object(v.a)(t.items,t=>e[i].fileItem.key===t.fileItem.key);if(!o)return"continue";e[i].expanded=o.expanded,e[i].expanded&&r.push(n._loadItemsRecursive(e[i],o))},o=0;o<e.length;o++)i(o);return D(r)},()=>null)}_setCurrentDirectoryByPathParts(e,t){return this._executeDataLoad(()=>this._setCurrentDirectoryByPathPartsInternal(e,t),"navigation")}_setCurrentDirectoryByPathPartsInternal(e,t){return this._getDirectoryByPathParts(this._rootDirectoryInfo,e,t).then(e=>{for(var t=e.parentDirectory;t;t=t.parentDirectory)t.expanded=!0;this.setCurrentDirectory(e)},()=>{this._raisePathPotentiallyChanged()})}_executeDataLoad(e,t){return this._dataLoadingDeferred?this._dataLoadingDeferred.then(()=>this._executeDataLoad(e,t)):(this._dataLoading=!0,this._dataLoadingDeferred=new a.a,this._isInitialized&&this._raiseDataLoading(t),e().always(()=>{var e=this._dataLoadingDeferred;this._dataLoadingDeferred=null,this._dataLoading=!1,e.resolve()}))}_getDirectoryByPathParts(e,t,n){if(t.length<1)return(new a.a).resolve(e).promise();var r=n?"key":"name";return this.getDirectories(e).then(e=>{var i=Object(v.a)(e,e=>e.fileItem[r]===t[0]);if(!i)return(new a.a).reject().promise();var o=[...t].splice(1);return this._getDirectoryByPathParts(i,o,n)})}_getDirectoryPathKeyParts(e){for(var t=[];e&&e.parentDirectory;)t.unshift(e.fileItem.key),e=e.parentDirectory;return t}_findDirectoryByPathKeyParts(e){var t=this._rootDirectoryInfo;if(0===e.length)return t;for(var n=0,r=t;r&&n<e.length;)(r=Object(v.a)(t.items,t=>t.fileItem.key===e[n]))&&(t=r),n++;return t}_getActualDirectoryInfo(e){var t=this._getDirectoryPathKeyParts(e);return this._findDirectoryByPathKeyParts(t)}_createDirInfoByName(e,t){var n=this._getPathInfo(t),r=new R.a(n,e,!0);return this._createDirectoryInfo(r,t)}_createDirectoryInfo(e,t){return Object(i.a)(this._createFileInfo(e,t),{icon:"folder",expanded:e.isRoot(),items:[]})}_createFileInfo(e,t){return{fileItem:e,parentDirectory:t,icon:this._getFileItemDefaultIcon(e),getInternalKey(){return"FIK_".concat(this.fileItem.key)},getDisplayName(){return this.displayName||this.fileItem.name}}}_resetDirectoryState(e,t){t&&(e=this._getActualDirectoryInfo(e)),e.itemsLoaded=!1,e.items=[]}_getFileItemDefaultIcon(e){if(e.isDirectory)return"folder";var t=e.getFileExtension();return this._defaultIconMap[t]||"doc"}_createDefaultIconMap(){var e={".txt":"txtfile",".rtf":"rtffile",".doc":"docfile",".docx":"docxfile",".xls":"xlsfile",".xlsx":"xlsxfile",".ppt":"pptfile",".pptx":"pptxfile",".pdf":"pdffile"};return[".png",".gif",".jpg",".jpeg",".ico",".bmp"].forEach(t=>{e[t]="image"}),e}_createRootDirectoryInfo(e){var t=new R.a(null,"",!0),n=this._createDirectoryInfo(t,null);return n.displayName=e||"Files",n}setRootText(e){this._rootDirectoryInfo.displayName=e||"Files"}_raiseInitialized(){this._tryCallAction("onInitialized",{controller:this})}_raiseDataLoading(e){this._tryCallAction("onDataLoading",{operation:e})}_raiseSelectedDirectoryChanged(e){this._tryCallAction("onSelectedDirectoryChanged",{selectedDirectoryInfo:e})}_raiseEditActionStarting(e){this._tryCallAction("onEditActionStarting",e)}_raiseEditActionResultAcquired(e){this._tryCallAction("onEditActionResultAcquired",e)}_raiseEditActionError(e,t){this._tryCallAction("onEditActionError",e,t)}_raiseEditActionItemError(e,t){this._tryCallAction("onEditActionItemError",e,t)}_raiseCompleteEditActionItem(e,t){this._tryCallAction("onCompleteEditActionItem",e,t)}_raiseCompleteEditAction(e){this._tryCallAction("onCompleteEditAction",e)}_raisePathPotentiallyChanged(){this._tryCallAction("onPathPotentiallyChanged")}_tryCallAction(e){var t=Array.prototype.slice.call(arguments,1);this._isInitialized&&this._options[e]&&this._options[e](...t)}_resetState(){this._selectedDirectory=null,this._rootDirectoryInfo.items=[],this._rootDirectoryInfo.itemsLoaded=!1,this._loadedItems={}}_getPathInfo(e){for(var t=[],n=e;n&&!n.fileItem.isRoot();n=n.parentDirectory)t.unshift({key:n.fileItem.key,name:n.fileItem.name});return t}on(e,t){var n="on".concat(e);this._options[n]=t}get _editingEvents(){return this._options.editingEvents}}class me{constructor(e){this._options=Object(i.a)({allowedFileExtensions:[],maxFileSize:0},e),this._extensionsMap={},this._allowedFileExtensions.forEach(e=>{this._extensionsMap[e.toUpperCase()]=!0})}getAllowedItems(e){return 0===this._allowedFileExtensions.length?e:e.filter(e=>e.isDirectory||this._isValidExtension(e.name))}validateExtension(e){if(!this._isValidExtension(e))throw new V(K.WrongFileExtension,null)}validateMaxFileSize(e){if(this._maxFileSize&&e>this._maxFileSize)throw new V(K.MaxFileSizeExceeded,null)}_isValidExtension(e){if(0===this._allowedFileExtensions.length)return!0;var t=Object(W.c)(e).toUpperCase();return this._extensionsMap[t]}get _allowedFileExtensions(){return this._options.allowedFileExtensions}get _maxFileSize(){return this._options.maxFileSize}}var ge={create:!1,copy:!1,move:!1,delete:!1,rename:!1,upload:!1,download:!1};class ve{constructor(e){this._actions={},this._permissions=e||{},this._initCommands()}_initCommands(){this._commands=[{name:"create",text:l.a.format("dxFileManager-commandCreate"),icon:"newfolder",enabled:this._permissions.create,noFileItemRequired:!0},{name:"rename",text:l.a.format("dxFileManager-commandRename"),icon:"rename",enabled:this._permissions.rename,isSingleFileItemCommand:!0},{name:"move",text:l.a.format("dxFileManager-commandMove"),icon:"movetofolder",enabled:this._permissions.move},{name:"copy",text:l.a.format("dxFileManager-commandCopy"),icon:"copy",enabled:this._permissions.copy},{name:"delete",text:l.a.format("dxFileManager-commandDelete"),icon:"trash",enabled:this._permissions.delete},{name:"download",text:l.a.format("dxFileManager-commandDownload"),icon:"download",enabled:this._permissions.download},{name:"upload",text:l.a.format("dxFileManager-commandUpload"),icon:"upload",enabled:this._permissions.upload,noFileItemRequired:!0},{name:"refresh",text:l.a.format("dxFileManager-commandRefresh"),icon:"dx-filemanager-i dx-filemanager-i-refresh",enabled:!0,noFileItemRequired:!0},{name:"thumbnails",text:l.a.format("dxFileManager-commandThumbnails"),icon:"mediumiconslayout",enabled:!0,noFileItemRequired:!0},{name:"details",text:l.a.format("dxFileManager-commandDetails"),icon:"detailslayout",enabled:!0,noFileItemRequired:!0},{name:"clearSelection",text:l.a.format("dxFileManager-commandClearSelection"),icon:"remove",enabled:!0},{name:"showNavPane",hint:l.a.format("dxFileManager-commandShowNavPane"),icon:"menu",enabled:!1,noFileItemRequired:!0}],this._commandMap={},this._commands.forEach(e=>{this._commandMap[e.name]=e})}registerActions(e){this._actions=Object(i.a)(this._actions,e)}executeCommand(e,t){var n=Object(o.o)(e)?e:e.name,r=this._actions[n];if(r)return r(t)}updatePermissions(e){var t=Object(i.a)({},ge,e);this._permissions=t,Object(Y.a)(this._permissions,e=>{this._commandMap[e].enabled=this._permissions[e]})}setCommandEnabled(e,t){var n=this.getCommandByName(e);n&&(n.enabled=t)}getCommandByName(e){return this._commandMap[e]}isCommandAvailable(e,t){var n=this.getCommandByName(e);if(!n||!n.enabled)return!1;if(n.noFileItemRequired)return!0;var r=t&&t.length||0;return 0!==r&&!t.some(e=>e.fileItem.isRoot()||e.fileItem.isParentFolder)&&("download"===e?t.every(e=>!e.fileItem.isDirectory):!n.isSingleFileItemCommand||1===r)}}var _e=n("hc4w"),be={create:{},upload:{},download:{},rename:{},move:{},copy:{},delete:{},refresh:{beginGroup:!0}},ye=["beginGroup","closeMenuOnClick","disabled","icon","selectable","selected","text","visible"];class Ce extends u.a{_initMarkup(){this._initActions(),this._isVisible=!1;var e=Object(r.a)("<div>").appendTo(this.$element());this._contextMenu=this._createComponent(e,_e.a,{cssClass:"dx-filemanager-context-menu",showEvent:"",onItemClick:e=>this._onContextMenuItemClick(e.itemData.name,e),onShowing:e=>this._onContextMenuShowing(e),onShown:()=>this._onContextMenuShown(),onHidden:()=>this._onContextMenuHidden()}),super._initMarkup()}showAt(e,t,n,r){var{itemData:i,itemElement:o,isActionButton:a=!1}=r;this._isVisible&&this._onContextMenuHidden(),this._menuShowingContext={targetElement:o,itemData:i,fileItems:e,event:n,isActionButton:a};var s={of:t,at:"top left",my:"top left",offset:""};n?s.offset=n.offsetX+" "+n.offsetY:(s.my="left top",s.at="left bottom",s.boundaryOffset="1"),this._contextMenu.option({target:t,position:s}),this._contextMenu.show()}createContextMenuItems(e,t,n){this._targetFileItems=e,this._targetFileItem=Object(o.d)(n)?n:null==e?void 0:e[0];var r=[];return(t||this.option("items")).forEach(t=>{var n=Object(o.o)(t)?t:t.name,i=this._configureItemByCommandName(n,t,e,this._targetFileItem);this._isContextMenuItemAvailable(i,e)&&r.push(i)}),r}_isContextMenuItemAvailable(e,t){return this._isDefaultItem(e.name)&&e._autoHide?!(this._isIsolatedCreationItemCommand(e.name)&&t&&t.length)&&this._commandManager.isCommandAvailable(e.name,t):Object(s.g)(e.visible,!0)}_isIsolatedCreationItemCommand(e){return("create"===e||"upload"===e)&&this.option("isolateCreationItemCommands")}_isDefaultItem(e){return!!be[e]}_configureItemByCommandName(e,t,n,r){if(!this._isDefaultItem(e)){var a=Object(i.a)(!0,{},t);return a.originalItemData=t,this._addItemClickHandler(e,a),Array.isArray(t.items)&&(a.items=this.createContextMenuItems(n,t.items,r)),a}var s=this._createMenuItemByCommandName(e),l=be[e];return Object(i.a)(s,l),s.originalItemData=t,M(s,t,ye),Object(o.d)(s.visible)||(s._autoHide=!0),e&&!s.name&&Object(i.a)(s,{name:e}),s}_createMenuItemByCommandName(e){var{text:t,icon:n}=this._commandManager.getCommandByName(e),r={name:e,text:t,icon:n};return this._addItemClickHandler(e,r),r}_addItemClickHandler(e,t){t.onItemClick=t=>this._onContextMenuItemClick(e,t)}_onContextMenuItemClick(e,t){var n,r=Object(i.a)(!0,{},t);if(r.itemData=t.itemData.originalItemData,r.fileSystemItem=null===(n=this._targetFileItem)||void 0===n?void 0:n.fileItem,r.viewArea=this.option("viewArea"),this._actions.onItemClick(r),this._isDefaultItem(e)){var o=this._isIsolatedCreationItemCommand(e)?null:this._targetFileItems;this._commandManager.executeCommand(e,o)}}_initActions(){this._actions={onContextMenuHidden:this._createActionByOption("onContextMenuHidden"),onContextMenuShowing:this._createActionByOption("onContextMenuShowing"),onItemClick:this._createActionByOption("onItemClick")}}_onContextMenuShowing(e){if(this._isVisible&&this._onContextMenuHidden(!0),e=Object(i.a)(e,this._menuShowingContext,{options:this.option(),cancel:!1}),this._actions.onContextMenuShowing(e),!e.cancel){var t=this.createContextMenuItems(this._menuShowingContext.fileItems,null,this._menuShowingContext.fileSystemItem);this._contextMenu.option("dataSource",t)}}tryUpdateVisibleContextMenu(){if(this._isVisible){var e=this.createContextMenuItems(this._targetFileItems);this._contextMenu.option("dataSource",e)}}_onContextMenuShown(){this._isVisible=!0}_onContextMenuHidden(e){this._isVisible=!1,e||(this._menuShowingContext={}),this._contextMenu.option("visible",!1),this._raiseContextMenuHidden()}_raiseContextMenuHidden(){this._actions.onContextMenuHidden()}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{commandManager:null,onContextMenuHidden:null,onItemClick:null})}_optionChanged(e){var t=e.name;switch(t){case"commandManager":this.repaint();break;case"items":this.tryUpdateVisibleContextMenu();break;case"onItemClick":case"onContextMenuShowing":case"onContextMenuHidden":this._actions[t]=this._createActionByOption(t);break;default:super._optionChanged(e)}}get _commandManager(){return this.option("commandManager")}}var Oe=Ce,we=n("HieS"),xe=n("JL4z"),Ie=n("B61+");class Se extends u.a{_initMarkup(){this._createClickAction();var e=Object(r.a)("<div>");this.$element().append(e).addClass("dx-filemanager-file-actions-button"),this._button=this._createComponent(e,Ie.default,{icon:"overflow",stylingMode:"text",onClick:e=>this._raiseClick(e)}),super._initMarkup()}_createClickAction(){this._clickAction=this._createActionByOption("onClick")}_raiseClick(e){this._clickAction(e)}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{cssClass:"",onClick:null})}_optionChanged(e){switch(e.name){case"cssClass":this.repaint();break;case"onClick":this._createClickAction();break;default:super._optionChanged(e)}}setActive(e){this.$element().toggleClass("dx-filemanager-file-actions-button-activated",e),setTimeout(()=>this._button.$element().toggleClass("dx-state-active",e))}}var Ee=Se;class je extends u.a{_initMarkup(){this._initActions(),this._getCurrentDirectory=this.option("getCurrentDirectory"),this._createFileActionsButton=s.n,this._storeExpandedState=this.option("storeExpandedState")||!1;var e=Object(r.a)("<div>").addClass("dx-filemanager-dirs-tree").appendTo(this.$element()),t={dataStructure:"plain",rootValue:"",createChildren:this._onFilesTreeViewCreateSubDirectories.bind(this),itemTemplate:this._createFilesTreeViewItemTemplate.bind(this),keyExpr:"getInternalKey",parentIdExpr:"parentDirectory.getInternalKey",displayExpr:e=>e.getDisplayName(),hasItemsExpr:"fileItem.hasSubDirectories",onItemClick:e=>this._actions.onDirectoryClick(e),onItemExpanded:e=>this._onFilesTreeViewItemExpanded(e),onItemCollapsed:e=>this._onFilesTreeViewItemCollapsed(e),onItemRendered:e=>this._onFilesTreeViewItemRendered(e),onContentReady:()=>this._actions.onFilesTreeViewContentReady()};this._contextMenu&&(this._contextMenu.option("onContextMenuHidden",()=>this._onContextMenuHidden()),t.onItemContextMenu=e=>this._onFilesTreeViewItemContextMenu(e),this._createFileActionsButton=(e,t)=>this._createComponent(e,Ee,t)),this._filesTreeView=this._createComponent(e,xe.a,t)}_initActions(){this._actions={onDirectoryClick:this._createActionByOption("onDirectoryClick"),onFilesTreeViewContentReady:this._createActionByOption("onFilesTreeViewContentReady")}}_render(){super._render();var e=this;setTimeout(()=>{e._updateFocusedElement()})}_onFilesTreeViewCreateSubDirectories(e){var t=this.option("getDirectories"),n=e&&e.itemData||null;return t&&t(n,!0)}_onFilesTreeViewItemRendered(e){var{itemData:t}=e,n=this._getCurrentDirectory();n&&n.fileItem.equals(t.fileItem)&&(this._updateFocusedElement(),this._restoreScrollTopPosition())}_onFilesTreeViewItemExpanded(e){var{itemData:t}=e;this._storeExpandedState&&(t.expanded=!0)}_onFilesTreeViewItemCollapsed(e){var{itemData:t}=e;this._storeExpandedState&&(t.expanded=!1)}_createFilesTreeViewItemTemplate(e,t,n){var i=Object(r.a)(n);i.closest(this._filesTreeViewItemSelector).data("item",e);var o=Object(we.a)(e.icon),a=Object(r.a)("<span>").text(e.getDisplayName()).addClass("dx-filemanager-dirs-tree-item-text"),s=Object(r.a)("<div>");i.append(o,a,s),this._createFileActionsButton(s,{onClick:e=>this._onFileItemActionButtonClick(e)})}_onFilesTreeViewItemContextMenu(e){var{itemElement:t,event:n}=e;n.preventDefault(),n.stopPropagation();var i=Object(r.a)(t).data("item");this._contextMenu.showAt([i],t,n,{itemData:i,itemElement:t})}_onFileItemActionButtonClick(e){var{component:t,element:n,event:r}=e;r.stopPropagation();var i=t.$element().closest(this._filesTreeViewItemSelector),o=i.data("item"),a={itemData:o,itemElement:i,isActionButton:!0};this._contextMenu.showAt([o],n,r,a),this._activeFileActionsButton=t,this._activeFileActionsButton.setActive(!0)}_onContextMenuHidden(){this._activeFileActionsButton&&this._activeFileActionsButton.setActive(!1)}toggleNodeDisabledState(e,t){var n=this._getNodeByKey(e);if(n){var r=this._filesTreeView.option("items").map(e=>e.getInternalKey()).indexOf(n.getInternalKey());-1!==r&&this._filesTreeView.option("items[".concat(r,"].disabled"),t)}}_saveScrollTopPosition(){Object(p.f)()&&(this._scrollTopPosition=this._filesTreeView.getScrollable().scrollTop())}_restoreScrollTopPosition(){Object(p.f)()&&Object(o.i)(this._scrollTopPosition)&&setTimeout(()=>this._filesTreeView.getScrollable().scrollTo(this._scrollTopPosition))}_updateFocusedElement(){var e=this._getCurrentDirectory(),t=this._getItemElementByKey(null==e?void 0:e.getInternalKey());this._$focusedElement&&this._$focusedElement.toggleClass("dx-filemanager-focused-item",!1),this._$focusedElement=t||Object(r.a)(),this._$focusedElement.toggleClass("dx-filemanager-focused-item",!0)}_getNodeByKey(e){var t;return null===(t=this._filesTreeView)||void 0===t?void 0:t._getNode(e)}_getPublicNode(e){for(var t,n=[...null===(t=this._filesTreeView)||void 0===t?void 0:t.getNodes()];n.length;){var r=n.shift();if(r.itemData.getInternalKey()===e)return r;r.children.length&&n.push(...r.children)}}_getItemElementByKey(e){var t=this._getNodeByKey(e);if(t){var n=this._filesTreeView._getNodeElement(t);if(n)return n.children(this._filesTreeViewItemSelector)}return null}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{storeExpandedState:!1,initialFolder:null,contextMenu:null,getItems:null,getCurrentDirectory:null,onDirectoryClick:null})}_optionChanged(e){var t=e.name;switch(t){case"storeExpandedState":this._storeExpandedState=this.option(t);break;case"getItems":case"rootFolderDisplayName":case"initialFolder":case"contextMenu":this.repaint();break;case"getCurrentDirectory":this.getCurrentDirectory=this.option(t);break;case"onDirectoryClick":case"onFilesTreeViewContentReady":this._actions[t]=this._createActionByOption(t);break;default:super._optionChanged(e)}}get _filesTreeViewItemSelector(){return".".concat("dx-treeview-item")}get _contextMenu(){return this.option("contextMenu")}toggleDirectoryExpandedState(e,t){var n=new a.a,r=this._getPublicNode(null==e?void 0:e.getInternalKey());if(!r)return n.reject().promise();if(r.expanded===t||r.itemsLoaded&&!r.itemData.fileItem.hasSubDirectories)return n.resolve().promise();var i=t?"expandItem":"collapseItem";return this._filesTreeView[i](e.getInternalKey())}refresh(){this._$focusedElement=null,this._saveScrollTopPosition(),this._filesTreeView.option("dataSource",[])}updateCurrentDirectory(){this._disposed||(this._updateFocusedElement(),this._storeExpandedState&&this._updateExpandedStateToCurrentDirectory())}_updateExpandedStateToCurrentDirectory(){return this.toggleDirectoryExpandedStateRecursive(this._getCurrentDirectory().parentDirectory,!0)}toggleDirectoryExpandedStateRecursive(e,t){for(var n=[],r=e;r;r=r.parentDirectory)n.unshift(r);return this.toggleDirectoryLineExpandedState(n,t)}toggleDirectoryLineExpandedState(e,t){return e.length?this.toggleDirectoryExpandedState(e.shift(),t).then(()=>this.toggleDirectoryLineExpandedState(e,t)):(new a.a).resolve().promise()}}var ke=je,Te=n("oisP"),Ae=n("f4eO"),De=n("AmyY"),Pe=n("TE0E"),Me=n("ySCK");class Fe extends u.a{_init(){this._initActions(),this._lockFocusedItemProcessing=!1,this._focusedItemKey=this.option("focusedItemKey"),super._init()}_initMarkup(){this.$element().addClass("dx-filemanager-files-view");var e=Object(De.a)(Ae.a,"dxFileManager_open");m.a.on(this.$element(),e,this._getItemSelector(),this._onItemDblClick.bind(this)),super._initMarkup()}_initActions(){this._actions={onError:this._createActionByOption("onError"),onSelectionChanged:this._createActionByOption("onSelectionChanged"),onFocusedItemChanged:this._createActionByOption("onFocusedItemChanged"),onSelectedItemOpened:this._createActionByOption("onSelectedItemOpened"),onContextMenuShowing:this._createActionByOption("onContextMenuShowing"),onItemListDataLoaded:this._createActionByOption("onItemListDataLoaded")}}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{selectionMode:"single",selectedItemKeys:[],focusedItemKey:void 0,contextMenu:null,getItems:null,getItemThumbnail:null,onError:null,onSelectionChanged:null,onFocusedItemChanged:null,onSelectedItemOpened:null,onContextMenuShowing:null})}_optionChanged(e){var t=e.name;switch(t){case"selectionMode":case"contextMenu":case"getItems":case"getItemThumbnail":this.repaint();break;case"selectedItemKeys":this._setSelectedItemKeys(e.value);break;case"focusedItemKey":this._lockFocusedItemProcessing||this._setFocusedItemKey(e.value);break;case"onError":case"onSelectedItemOpened":case"onSelectionChanged":case"onFocusedItemChanged":case"onContextMenuShowing":case"onItemListDataLoaded":this._actions[t]=this._createActionByOption(t);break;default:super._optionChanged(e)}}_getItems(){return this._getItemsInternal().done(e=>{this._itemCount=e.length,0===this._itemCount&&this._resetFocus();var t=this._findParentDirectoryItem(e);this._hasParentDirectoryItem=!!t,this._parentDirectoryItemKey=t?t.fileItem.key:null}).always(()=>{this._onDataLoaded()})}_getItemsInternal(){var e=this.option("getItems"),t=e?e():[];return Object(a.c)(t)}_raiseOnError(e){this._actions.onError({error:e})}_raiseSelectionChanged(e){this._actions.onSelectionChanged(e)}_raiseFocusedItemChanged(e){this._actions.onFocusedItemChanged(e)}_raiseSelectedItemOpened(e){this._actions.onSelectedItemOpened({fileItemInfo:e})}_raiseContextMenuShowing(e){this._actions.onContextMenuShowing(e)}_raiseItemListDataLoaded(){this._actions.onItemListDataLoaded()}_onDataLoaded(){var e;this._raiseItemListDataLoaded(),null===(e=this._refreshDeferred)||void 0===e||e.resolve()}_tryRaiseSelectionChanged(e){var{selectedItemInfos:t,selectedItems:n,selectedItemKeys:r,currentSelectedItemKeys:i,currentDeselectedItemKeys:o}=e,a=this._findParentDirectoryItem(this.getSelectedItems());a&&this._deselectItem(a);var s=!this._hasParentDirectoryItem;(s=s||this._hasValidKeys(i)||this._hasValidKeys(o))&&(t=this._filterOutItemByPredicate(t,e=>e.fileItem.key===this._parentDirectoryItemKey),n=this._filterOutParentDirectory(n),r=this._filterOutParentDirectoryKey(r,!0),i=this._filterOutParentDirectoryKey(i,!0),o=this._filterOutParentDirectoryKey(o,!0),this._raiseSelectionChanged({selectedItemInfos:t,selectedItems:n,selectedItemKeys:r,currentSelectedItemKeys:i,currentDeselectedItemKeys:o}))}_onFocusedItemChanged(e){this._focusedItemKey!==e.itemKey&&(this._focusedItemKey=e.itemKey,this._lockFocusedItemProcessing=!0,this.option("focusedItemKey",e.itemKey),this._lockFocusedItemProcessing=!1,this._raiseFocusedItemChanged(e))}_resetFocus(){}_getItemThumbnail(e){var t=this.option("getItemThumbnail");return t?t(e):{thumbnail:""}}_getItemThumbnailContainer(e){var{thumbnail:t,cssClass:n}=this._getItemThumbnail(e),r=Object(we.a)(t).addClass(this._getItemThumbnailCssClass());return n&&r.addClass(n),r}_getItemThumbnailCssClass(){return""}_getItemSelector(){}_onItemDblClick(e){}_isDesktop(){return"desktop"===Pe.a.real().deviceType}_showContextMenu(e,t,n,r){this._contextMenu.showAt(e,t,n,r)}get _contextMenu(){return this.option("contextMenu")}_findParentDirectoryItem(e){for(var t=0;t<e.length;t++){var n=e[t];if(this._isParentDirectoryItem(n))return n}return null}_getFileItemsForContextMenu(e){var t=this.getSelectedItems();return this._isParentDirectoryItem(e)&&t.push(e),t}_isParentDirectoryItem(e){return e.fileItem.isParentFolder}_hasValidKeys(e){return e.length>1||1===e.length&&e[0]!==this._parentDirectoryItemKey}_filterOutParentDirectory(e,t){return this._filterOutItemByPredicate(e,e=>e.key===this._parentDirectoryItemKey,t)}_filterOutParentDirectoryKey(e,t){return this._filterOutItemByPredicate(e,e=>e===this._parentDirectoryItemKey,t)}_filterOutItemByPredicate(e,t,n){for(var r=e,i=-1,o=0;o<e.length;o++)if(t(e[o])){i=o;break}return-1!==i&&(n&&(r=[...e]),r.splice(i,1)),r}_isMultipleSelectionMode(){return"multiple"===this.option("selectionMode")}_deselectItem(e){}_setSelectedItemKeys(e){}_setFocusedItemKey(e){}_createDataSource(){return{store:new Me.a({key:"fileItem.key",load:this._getItems.bind(this)})}}getSelectedItems(){}clearSelection(){}selectItem(){}}var Ne=Fe,Re={thumbnail:{caption:"",calculateSortValue:"isDirectory",width:36,alignment:"center",cssClass:"dx-filemanager-details-item-is-directory"},name:{caption:l.a.format("dxFileManager-listDetailsColumnCaptionName")},dateModified:{caption:l.a.format("dxFileManager-listDetailsColumnCaptionDateModified"),width:110,hidingPriority:1},size:{caption:l.a.format("dxFileManager-listDetailsColumnCaptionFileSize"),width:90,alignment:"right",hidingPriority:0},isParentFolder:{caption:"isParentFolder",visible:!1,sortIndex:0,sortOrder:"asc"}};var Be=class extends Ne{_initMarkup(){this._itemCount=0,this._focusedItem=null,this._hasParentDirectoryItem=!1,this._parentDirectoryItemKey=null,this._selectAllCheckBox=null,this._selectAllCheckBoxUpdating=!1,this.$element().addClass("dx-filemanager-details"),this._createFilesView(),this._contextMenu.option("onContextMenuHidden",()=>this._onContextMenuHidden()),super._initMarkup()}_createFilesView(){var e=Object(r.a)("<div>").appendTo(this.$element()),t=this._isMultipleSelectionMode()?"multiple":"none";this._filesView=this._createComponent(e,Te.a,{dataSource:this._createDataSource(),hoverStateEnabled:!0,selection:{mode:t,showCheckBoxesMode:this._isDesktop()?"onClick":"none"},selectedRowKeys:this.option("selectedItemKeys"),focusedRowKey:this.option("focusedItemKey"),focusedRowEnabled:!0,allowColumnResizing:!0,scrolling:{mode:"virtual"},sorting:{mode:"single",showSortIndexes:!1},loadPanel:{shading:!0},showColumnLines:!1,showRowLines:!1,columnHidingEnabled:!1,columns:this._createColumns(),onEditorPreparing:this._onEditorPreparing.bind(this),onRowPrepared:this._onRowPrepared.bind(this),onContextMenuPreparing:this._onContextMenuPreparing.bind(this),onSelectionChanged:this._onFilesViewSelectionChanged.bind(this),onFocusedRowChanged:this._onFilesViewFocusedRowChanged.bind(this),onOptionChanged:this._onFilesViewOptionChanged.bind(this)})}_createColumns(){var e=this.option("detailColumns");e=(e=e.slice(0)).map(e=>{var t=e;return Object(o.o)(e)&&(t={dataField:e}),this._getPreparedColumn(t)});var t=this.option("customizeDetailColumns");return Object(o.h)(t)&&(e=t(e)),e.push(this._getPreparedColumn({dataField:"isParentFolder"})),e.forEach(e=>this._updateColumnDataField(e)),e}_getPreparedColumn(e){var t={},n="";if(this._isDefaultColumn(e.dataField)){var r=Object(i.a)(!0,{},Re[e.dataField]);switch(n=r.cssClass||"",e.dataField){case"thumbnail":r.cellTemplate=this._createThumbnailColumnCell.bind(this),r.calculateSortValue="fileItem.".concat(r.calculateSortValue);break;case"name":r.cellTemplate=this._createNameColumnCell.bind(this),r.caption=l.a.format("dxFileManager-listDetailsColumnCaptionName");break;case"size":r.calculateCellValue=this._calculateSizeColumnCellValue.bind(this),r.caption=l.a.format("dxFileManager-listDetailsColumnCaptionFileSize"),r.calculateSortValue=e=>e.fileItem.isDirectory?-1:e.fileItem.size;break;case"dateModified":r.caption=l.a.format("dxFileManager-listDetailsColumnCaptionDateModified")}Object(i.a)(!0,t,r)}return M(t,e,["alignment","caption","dataField","dataType","hidingPriority","sortIndex","sortOrder","visible","visibleIndex","width"]),e.cssClass&&(n="".concat(n," ").concat(e.cssClass)),n&&(t.cssClass=n),t}_updateColumnDataField(e){var t=this._isDefaultColumn(e.dataField)?"":"dataItem.";return e.dataField="fileItem."+t+e.dataField,e}_isDefaultColumn(e){return!!Re[e]}_onFileItemActionButtonClick(e){var{component:t,element:n,event:r}=e;r.stopPropagation();var i=t.$element().closest(this._getItemSelector()),o=i.data("item");this._selectItem(o);var a={itemData:o,itemElement:i,isActionButton:!0},s=this._getFileItemsForContextMenu(o);this._showContextMenu(s,n,r,a),this._activeFileActionsButton=t,this._activeFileActionsButton.setActive(!0)}_onContextMenuHidden(){this._activeFileActionsButton&&this._activeFileActionsButton.setActive(!1)}_getItemThumbnailCssClass(){return"dx-filemanager-details-item-thumbnail"}_getItemSelector(){return".".concat("dx-data-row")}_onItemDblClick(e){var t=Object(r.a)(e.currentTarget).data("item");this._raiseSelectedItemOpened(t)}_isAllItemsSelected(){var e=this._hasParentDirectoryItem?this._itemCount-1:this._itemCount,t=this._filesView.option("selectedRowKeys");return!!t.length&&(t.length>=e||void 0)}_onEditorPreparing(e){var{component:t,command:n,row:r,parentType:i,editorOptions:o}=e;this._filesView||(this._filesView=t),"select"===n&&r?this._isParentDirectoryItem(r.data)&&(o.disabled=!0):"headerRow"===i&&(o.onInitialized=e=>{var{component:t}=e;this._selectAllCheckBox=t},o.value=this._isAllItemsSelected(),o.onValueChanged=e=>this._onSelectAllCheckBoxValueChanged(e))}_onSelectAllCheckBoxValueChanged(e){var{event:t,previousValue:n,value:r}=e;t?this._isAllItemsSelected()!==r&&(r?this._filesView.selectAll():this._filesView.deselectAll(),t.preventDefault()):n&&!this._selectAllCheckBoxUpdating&&this._selectAllCheckBox&&this._selectAllCheckBox.option("value",n)}_onRowPrepared(e){var{rowType:t,rowElement:n,data:i}=e;if("data"===t){var o=Object(r.a)(n);o.data("item",i),this._isParentDirectoryItem(i)&&o.addClass("dx-filemanager-parent-directory-item")}}_onContextMenuPreparing(e){if(this._isDesktop()){var t=null,n={};e.row&&"data"===e.row.rowType&&(n=e.row.data,this._selectItem(n),t=this._getFileItemsForContextMenu(n));var r=Object(i.a)({},{targetElement:"content"===e.target&&Object(o.d)(e.row)?this._filesView.getRowElement(e.rowIndex):void 0,itemData:n,options:this._contextMenu.option(),event:e.event,isActionButton:!1,cancel:!1});this._raiseContextMenuShowing(r),e.items=r.cancel?[]:this._contextMenu.createContextMenuItems(t,null,n)}}_onFilesViewSelectionChanged(e){var{component:t,selectedRowsData:n,selectedRowKeys:r,currentSelectedRowKeys:i,currentDeselectedRowKeys:o}=e;this._filesView=this._filesView||t,this._selectAllCheckBox&&(this._selectAllCheckBoxUpdating=!0,this._selectAllCheckBox.option("value",this._isAllItemsSelected()),this._selectAllCheckBoxUpdating=!1);var a=n.map(e=>e.fileItem);this._tryRaiseSelectionChanged({selectedItemInfos:n,selectedItems:a,selectedItemKeys:r,currentSelectedItemKeys:i,currentDeselectedItemKeys:o})}_onFilesViewFocusedRowChanged(e){var t,n;this._isMultipleSelectionMode()||this._selectItemSingleSelection(null===(n=e.row)||void 0===n?void 0:n.data);var r=(null===(t=e.row)||void 0===t?void 0:t.data.fileItem)||null;this._onFocusedItemChanged({item:r,itemKey:null==r?void 0:r.key,itemElement:e.rowElement})}_onFilesViewOptionChanged(e){var{fullName:t}=e;t.indexOf("sortOrder")>-1&&this._filesView.columnOption("isParentFolder",{sortOrder:"asc",sortIndex:0})}_resetFocus(){this._setFocusedItemKey(void 0)}_createThumbnailColumnCell(e,t){this._getItemThumbnailContainer(t.data).appendTo(e)}_createNameColumnCell(e,t){var n=Object(r.a)("<div>"),i=Object(r.a)("<span>").text(t.data.fileItem.name).addClass("dx-filemanager-details-item-name"),o=Object(r.a)("<div>").append(i,n).addClass("dx-filemanager-details-item-name-wrapper");Object(r.a)(e).append(o),this._createComponent(n,Ee,{onClick:e=>this._onFileItemActionButtonClick(e)})}_calculateSizeColumnCellValue(e){return e.fileItem.isDirectory?"":P(e.fileItem.size)}_selectItem(e){(this._isMultipleSelectionMode()?this._selectItemMultipleSelection:this._selectItemSingleSelection).call(this,e)}_deselectItem(e){this._filesView.deselectRows([e.fileItem.key])}_selectItemSingleSelection(e){if(!this._focusedItem||!e||this._focusedItem.fileItem.key!==e.fileItem.key){var t=this._focusedItem;this._focusedItem=e;var n=[];t&&n.push(t.fileItem.key);var r=[],i=[];e&&!this._isParentDirectoryItem(e)&&(r.push(e.fileItem),i.push(e.fileItem.key)),this._raiseSelectionChanged({selectedItems:r,selectedItemKeys:i,currentSelectedItemKeys:[...i],currentDeselectedItemKeys:n})}}_selectItemMultipleSelection(e){var{fileItem:t}=e;if(!this._filesView.isRowSelected(t.key)){var n=this._filesView.getController("selection").isSelectionWithCheckboxes();this._filesView.selectRows([t.key],n)}}_setSelectedItemKeys(e){this._filesView.option("selectedRowKeys",e)}_setFocusedItemKey(e){var t;null===(t=this._filesView)||void 0===t||t.option("focusedRowKey",e)}clearSelection(){this._isMultipleSelectionMode()?this._filesView.clearSelection():this._filesView.option("focusedRowIndex",-1)}refresh(e){var t={dataSource:this._createDataSource()};return e&&Object.prototype.hasOwnProperty.call(e,"focusedItemKey")&&(Object(o.d)(e.focusedItemKey)?t.focusedRowKey=e.focusedItemKey:t.focusedRowIndex=-1),this._filesView.option(t),this._refreshDeferred=new a.a,this._refreshDeferred.promise()}getSelectedItems(){return this._isMultipleSelectionMode()?this._filesView.getSelectedRowsData():this._focusedItem&&!this._isParentDirectoryItem(this._focusedItem)?[this._focusedItem]:[]}},Le=n("c3XC"),qe=n("+dKZ"),He=n("dCj/"),$e=n("hjKj"),Ue=n("Z6Ap"),ze=n("DaY9"),Ve=n("pC4B"),Ke=Object(De.a)(He.a.name,"dxFileManagerThumbnailsListBox");class We extends ze.a{_initMarkup(){this._initActions(),this._lockFocusedItemProcessing=!1,this.$element().addClass("dx-filemanager-thumbnails-view-port"),this._renderScrollView(),this._renderItemsContainer(),this._createScrollViewControl(),super._initMarkup(),this.onFocusedItemChanged=this._onFocusedItemChanged.bind(this),this._layoutUtils=new Ge(this._scrollView,this.$element(),this._$itemContainer,this.itemElements().first()),this._syncFocusedItemKey()}_initActions(){this._actions={onItemEnterKeyPressed:this._createActionByOption("onItemEnterKeyPressed"),onFocusedItemChanged:this._createActionByOption("onFocusedItemChanged")}}_initTemplates(){super._initTemplates(),this._itemThumbnailTemplate=this.option("itemThumbnailTemplate"),this._getTooltipText=this.option("getTooltipText"),this._templateManager.addDefaultTemplates({item:new $e.a(function(e,t,n){var r=this._getDefaultItemTemplate(n,e);e.append(r)}.bind(this),["fileItem"],this.option("integrationOptions.watchMethod"))})}_createScrollViewControl(){this._scrollView||(this._scrollView=this._createComponent(this._$scrollView,Ue.default,{scrollByContent:!0,scrollByThumb:!0,useKeyboard:!1,showScrollbar:"onHover"}))}_renderScrollView(){this._$scrollView||(this._$scrollView=Object(r.a)("<div>").appendTo(this.$element()))}_renderItemsContainer(){this._$itemContainer||(this._$itemContainer=Object(r.a)("<div>").addClass("dx-filemanager-thumbnails-container").appendTo(this._$scrollView))}_render(){super._render(),this._detachEventHandlers(),this._attachEventHandlers()}_clean(){this._detachEventHandlers(),super._clean()}_supportedKeys(){return Object(i.a)(super._supportedKeys(),{upArrow(e){this._beforeKeyProcessing(e),this._processArrowKeys(-1,!1,e)},downArrow(e){this._beforeKeyProcessing(e),this._processArrowKeys(1,!1,e)},home(e){this._beforeKeyProcessing(e),this._processHomeEndKeys(0,!0,e)},end(e){this._beforeKeyProcessing(e),this._processHomeEndKeys(this._getItemsLength()-1,!0,e)},pageUp(e){this._beforeKeyProcessing(e),this._processPageChange(!0,e)},pageDown(e){this._beforeKeyProcessing(e),this._processPageChange(!1,e)},enter(e){this._beforeKeyProcessing(e),this._actions.onItemEnterKeyPressed(this._getFocusedItem())},A(e){this._beforeKeyProcessing(e),Object(De.i)(e)&&this.selectAll()}})}_beforeKeyProcessing(e){e.preventDefault(),this._layoutUtils.reset()}_processArrowKeys(e,t,n){var r=this._getFocusedItem();if(r){if(!t){var i=this._layoutUtils.getLayoutModel();if(!i)return;e*=i.itemPerRowCount}var o=this._getIndexByItem(r)+e;this._focusItemByIndex(o,!0,n)}}_processHomeEndKeys(e,t,n){this._focusItemByIndex(e,t,n)}_processPageChange(e,t){var n=this._getFocusedItem();if(n){var r=this._layoutUtils.getLayoutModel();if(r){var i=this._layoutUtils.createItemLayoutModel(this._getIndexByItem(n)),o=e?r.rowPerPageRate:-r.rowPerPageRate,a=i.itemRowIndex-o,s=(e?Math.ceil:Math.floor)(a)*r.itemPerRowCount+i.itemColumnIndex;s<0?s=0:s>=this._getItemsLength()&&(s=this._getItemsLength()-1),this._focusItemByIndex(s,!0,t)}}}_processLongTap(e){var t=this._closestItemElement(Object(r.a)(e.target)),n=this._getIndexByItemElement(t);this._selection.changeItemSelection(n,{control:!0})}_attachEventHandlers(){"multiple"===this.option("selectionMode")&&m.a.on(this._itemContainer(),Ke,".".concat(this._itemContentClass()),e=>{this._processLongTap(e),e.stopPropagation()}),m.a.on(this._itemContainer(),"mousedown selectstart",e=>{e.shiftKey&&e.preventDefault()})}_detachEventHandlers(){m.a.off(this._itemContainer(),Ke),m.a.off(this._itemContainer(),"mousedown selectstart")}_itemContainer(){return this._$itemContainer}_itemClass(){return"dx-filemanager-thumbnails-item"}_itemDataKey(){return"dxFileManagerItemData"}_getDefaultItemTemplate(e,t){t.attr("title",this._getTooltipText(e));var n=this._itemThumbnailTemplate(e),i=Object(r.a)("<div>").addClass("dx-filemanager-thumbnails-item-spacer"),o=Object(r.a)("<div>").addClass("dx-filemanager-thumbnails-item-name").text(e.fileItem.name);t.append(n,i,o)}_itemSelectHandler(e){var t={};"multiple"===this.option("selectionMode")&&(this._isPreserveSelectionMode||(this._isPreserveSelectionMode=Object(De.i)(e)||e.shiftKey),t={control:this._isPreserveSelectionMode,shift:e.shiftKey});var n=this._getIndexByItemElement(e.currentTarget);this._selection.changeItemSelection(n,t)}_initSelectionModule(){super._initSelectionModule();var e=Object(i.a)(this._selection.options,{selectedKeys:this.option("selectedItemKeys"),onSelectionChanged:e=>{this.option("selectedItems",this._getItemsByKeys(e.selectedItemKeys,e.selectedItems)),this._updateSelectedItems(e)}});this._selection=new Ve.a(e)}_updateSelectedItems(e){var t=e.addedItemKeys,n=e.removedItemKeys;if(this._rendered&&(t.length||n.length)){var r=this._selectionChangePromise;if(!this._rendering){var i,o=[],s=[];this._editStrategy.beginCache();for(var l=0;l<n.length;l++)i=this._getIndexByKey(n[l]),s.push(i),this._removeSelection(i);for(var c=0;c<t.length;c++)i=this._getIndexByKey(t[c]),o.push(i),this._addSelection(i);this._editStrategy.endCache(),this._updateSelection(o,s)}Object(a.c)(r).done(()=>this._fireSelectionChangeEvent(e))}}_fireSelectionChangeEvent(e){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})(e)}_updateSelection(e,t){0===this.getSelectedItems().length&&(this._isPreserveSelectionMode=!1)}_normalizeSelectedItems(){var e=this._getKeysByItems(this.option("selectedItems")),t=this._selection.getSelectedItemKeys();return this._compareKeys(t,e)||this._selection.setSelection(e),(new a.a).resolve().promise()}_focusOutHandler(){}_getItems(){return this.option("items")||[]}_getItemsLength(){return this._getItems().length}_getIndexByItemElement(e){return this._editStrategy.getNormalizedIndex(e)}_getItemByIndex(e){return this._getItems()[e]}_getFocusedItem(){return this.getItemByItemElement(this.option("focusedElement"))}_focusItem(e,t){this.option("focusedElement",this.getItemElementByItem(e)),t&&this._layoutUtils.scrollToItem(this._getIndexByItem(e))}_focusItemByIndex(e,t,n){if(e>=0&&e<this._getItemsLength()){var r=this._getItemByIndex(e);this._focusItem(r,t,n)}}_syncFocusedItemKey(){this._syncFocusedItemKeyDeferred||(this._syncFocusedItemKeyDeferred=new a.a);var e=this._syncFocusedItemKeyDeferred;if(this._dataSource&&this._dataSource.isLoading())return e.promise();var t=this.option("focusedItemKey");if(Object(o.d)(t)){var n=this.option("items"),r=Object(v.a)(n,e=>this.keyOf(e)===t);r?(this._focusItem(r,!0),e.resolve()):(this.option("focusedItemKey",void 0),e.reject())}else e.resolve();return this._syncFocusedItemKeyDeferred=null,e.promise()}_onFocusedItemChanged(){var e=this._getFocusedItem(),t=this.keyOf(e);t!==this.option("focusedItemKey")&&(this._lockFocusedItemProcessing=!0,this.option("focusedItemKey",t),this._lockFocusedItemProcessing=!1,this._raiseFocusedItemChanged(e))}_raiseFocusedItemChanged(e){var t={item:e,itemElement:this.option("focusedElement")};this._actions.onFocusedItemChanged(t)}_changeItemSelection(e,t){if(this.isItemSelected(e)!==t){var n=this.getItemElementByItem(e),r=this._getIndexByItemElement(n);this._selection.changeItemSelection(r,{control:this._isPreserveSelectionMode})}}_chooseSelectOption(){return"selectedItemKeys"}getSelectedItems(){return this._selection.getSelectedItems()}getItemElementByItem(e){return this._editStrategy.getItemElement(e)}getItemByItemElement(e){return this._getItemByIndex(this._getIndexByItemElement(e))}selectAll(){"multiple"===this.option("selectionMode")&&(this._selection.selectAll(),this._isPreserveSelectionMode=!0)}selectItem(e){this._changeItemSelection(e,!0)}deselectItem(e){this._changeItemSelection(e,!1)}clearSelection(){this._selection.deselectAll()}_optionChanged(e){switch(e.name){case"items":this._layoutUtils&&this._layoutUtils.updateItems(this.itemElements().first()),super._optionChanged(e);break;case"focusedItemKey":if(this._lockFocusedItemProcessing)break;Object(o.d)(e.value)?this._syncFocusedItemKey().done(()=>{var e=this._getFocusedItem();this._raiseFocusedItemChanged(e)}):(this.option("focusedElement",null),this._raiseFocusedItemChanged(null));break;case"onItemEnterKeyPressed":case"onFocusedItemChanged":this._actions[e.name]=this._createActionByOption(e.name);break;default:super._optionChanged(e)}}}class Ge{constructor(e,t,n,r){this._layoutModel=null,this._scrollView=e,this._$viewPort=t,this._$itemContainer=n,this._$item=r}updateItems(e){this._$item=e}reset(){this._layoutModel=null}getLayoutModel(){return this._layoutModel||(this._layoutModel=this._createLayoutModel()),this._layoutModel}_createLayoutModel(){if(!this._$item)return null;var e=Object(qe.i)(this._$item,!0);if(0===e)return null;var t=Object(qe.h)(this._$item,!0),n=Object(qe.f)(this._$itemContainer),r=Object(qe.e)(this._$viewPort),i=this._scrollView.scrollTop();return{itemWidth:e,itemHeight:t,viewPortWidth:n,viewPortHeight:r,viewPortScrollTop:i,viewPortScrollBottom:i+r,itemPerRowCount:Math.floor(n/e),rowPerPageRate:r/t}}createItemLayoutModel(e){var t=this.getLayoutModel();if(!t)return null;var n=Math.floor(e/t.itemPerRowCount),r=e%t.itemPerRowCount,i=n*t.itemHeight;return{itemRowIndex:n,itemColumnIndex:r,itemTop:i,itemBottom:i+t.itemHeight}}scrollToItem(e){var t=this.getLayoutModel();if(t){var n=Math.floor(e/t.itemPerRowCount)*t.itemHeight,r=n+t.itemHeight,i=t.viewPortScrollTop;n<t.viewPortScrollTop?i=n:r>t.viewPortScrollBottom&&(i=r-t.viewPortHeight),this._scrollView.scrollTo(i)}}}var Ze=We;var Qe=class extends Ne{_initMarkup(){super._initMarkup(),this.$element().addClass("dx-filemanager-thumbnails");var e=Object(De.a)(Le.a,"dxFileManager_thumbnails");m.a.on(this.$element(),e,this._onContextMenu.bind(this)),this._createItemList()}_createItemList(){var e=this._isMultipleSelectionMode()?"multiple":"single",t=Object(r.a)("<div>").appendTo(this.$element());this._itemList=this._createComponent(t,Ze,{dataSource:this._createDataSource(),selectionMode:e,selectedItemKeys:this.option("selectedItemKeys"),focusedItemKey:this.option("focusedItemKey"),activeStateEnabled:!0,hoverStateEnabled:!0,loopItemFocus:!1,focusStateEnabled:!0,onItemEnterKeyPressed:this._tryOpen.bind(this),itemThumbnailTemplate:this._getItemThumbnailContainer.bind(this),getTooltipText:this._getTooltipText.bind(this),onSelectionChanged:this._onItemListSelectionChanged.bind(this),onFocusedItemChanged:this._onItemListFocusedItemChanged.bind(this)})}_onContextMenu(e){if(e.preventDefault(),e.stopPropagation(),this._isDesktop()){var t=null,n=Object(r.a)(e.target).closest(this._getItemSelector()),i=null;n.length>0&&(i=this._itemList.getItemByItemElement(n),this._itemList.selectItem(i),t=this._getFileItemsForContextMenu(i));var o={itemData:i,itemElement:n.length?n:void 0};this._showContextMenu(t,e.target,e,o)}}_getItemThumbnailCssClass(){return"dx-filemanager-thumbnails-item-thumbnail"}_getItemSelector(){return".".concat("dx-filemanager-thumbnails-item")}_getTooltipText(e){var t=e.fileItem;if(t.tooltipText)return t.tooltipText;var n="".concat(t.name,"\r\n");return t.isDirectory||(n+="".concat(l.a.format("dxFileManager-listThumbnailsTooltipTextSize"),": ").concat(P(t.size),"\r\n")),n+="".concat(l.a.format("dxFileManager-listThumbnailsTooltipTextDateModified"),": ").concat(t.dateModified)}_onItemDblClick(e){var t=Object(r.a)(e.currentTarget),n=this._itemList.getItemByItemElement(t);this._tryOpen(n)}_tryOpen(e){e&&this._raiseSelectedItemOpened(e)}_getItemsInternal(){return super._getItemsInternal().then(e=>{var t=new a.a;return setTimeout(()=>t.resolve(e)),t.promise()})}_disableDragging(){return!1}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{focusStateEnabled:!0})}_onItemListSelectionChanged(e){var{addedItemKeys:t,removedItemKeys:n}=e,r=this.getSelectedItems(),i=r.map(e=>e.fileItem),o=i.map(e=>e.key);this._tryRaiseSelectionChanged({selectedItemInfos:r,selectedItems:i,selectedItemKeys:o,currentSelectedItemKeys:t,currentDeselectedItemKeys:n})}_onItemListFocusedItemChanged(e){var{item:t,itemElement:n}=e;this._isMultipleSelectionMode()||this._selectItemSingleSelection(t);var r=(null==t?void 0:t.fileItem)||null;this._onFocusedItemChanged({item:r,itemKey:null==r?void 0:r.key,itemElement:n||void 0})}_setSelectedItemKeys(e){this._itemList.option("selectedItemKeys",e)}_setFocusedItemKey(e){this._itemList.option("focusedItemKey",e)}refresh(e){var t={dataSource:this._createDataSource()};return e&&Object.prototype.hasOwnProperty.call(e,"focusedItemKey")&&(t.focusedItemKey=e.focusedItemKey),e&&Object.prototype.hasOwnProperty.call(e,"selectedItemKeys")&&(t.selectedItemKeys=e.selectedItemKeys),this._itemList.option(t),this._refreshDeferred=new a.a,this._refreshDeferred.promise()}_deselectItem(e){var t=this._itemList.getItemElementByItem(e);this._itemList.unselectItem(t)}_selectItemSingleSelection(e){e?this._itemList.selectItem(e):this._itemList.clearSelection()}clearSelection(){this._itemList.clearSelection()}getSelectedItems(){return this._itemList.getSelectedItems()}},Xe=n("4ivh"),Ye=(n("fS3q"),{showNavPane:{location:"before"},create:{location:"before",compactMode:{showText:"inMenu",locateInMenu:"auto"}},upload:{location:"before",compactMode:{showText:"inMenu",locateInMenu:"auto"}},refresh:{location:"after",showText:"inMenu",cssClass:"dx-filemanager-toolbar-has-large-icon",compactMode:{showText:"inMenu",locateInMenu:"auto"}},switchView:{location:"after"},download:{location:"before",compactMode:{showText:"inMenu",locateInMenu:"auto"}},move:{location:"before",compactMode:{showText:"inMenu",locateInMenu:"auto"}},copy:{location:"before",compactMode:{showText:"inMenu",locateInMenu:"auto"}},rename:{location:"before",compactMode:{showText:"inMenu",locateInMenu:"auto"}},delete:{location:"before",compactMode:{showText:"inMenu"}},clearSelection:{location:"after",locateInMenu:"never",compactMode:{showText:"inMenu"}},separator:{location:"before"}}),Je=["visible","location","locateInMenu","disabled","showText"],et=["accessKey","elementAttr","height","hint","icon","stylingMode","tabIndex","text","width"],tt=["separator","switchView"],nt={default:"dx-filemanager-i dx-filemanager-i-refresh",progress:"dx-filemanager-i dx-filemanager-i-progress",success:"dx-filemanager-i dx-filemanager-i-done",error:"dx-filemanager-i dx-filemanager-i-danger"};class rt extends u.a{_init(){super._init(),this._generalToolbarVisible=!0,this._refreshItemState={message:"",status:"default"}}_initMarkup(){this._createItemClickedAction(),this._$viewSwitcherPopup=Object(r.a)("<div>").addClass("dx-filemanager-view-switcher-popup"),this._generalToolbar=this._createToolbar(this.option("generalItems"),!this._generalToolbarVisible),this._fileToolbar=this._createToolbar(this.option("fileItems"),this._generalToolbarVisible),this._$viewSwitcherPopup.appendTo(this.$element()),this.$element().addClass("dx-filemanager-toolbar dx-filemanager-general-toolbar")}_render(){super._render();var e=this._getVisibleToolbar();this._checkCompactMode(e)}_clean(){delete this._commandManager,delete this._itemClickedAction,delete this._$viewSwitcherPopup,delete this._generalToolbar,delete this._fileToolbar,super._clean()}_dimensionChanged(e){if(!e||"height"!==e){var t=this._getVisibleToolbar();this._checkCompactMode(t)}}_getVisibleToolbar(){return this._generalToolbarVisible?this._generalToolbar:this._fileToolbar}_createToolbar(e,t){var n=this._getPreparedItems(e),i=Object(r.a)("<div>").appendTo(this.$element()),o=this._createComponent(i,Xe.default,{items:n,visible:!t,onItemClick:e=>this._raiseItemClicked(e)});return o.compactMode=!1,o}_getPreparedItems(e){return e=e.map(e=>{var t=e;Object(o.o)(e)&&(t={name:e});var n=t.name,r=this._configureItemByCommandName(n,t);return r.originalItemData=e,"separator"!==n&&this._setItemVisibleAvailable(r),r}),this._updateSeparatorsVisibility(e),e}_updateSeparatorsVisibility(e,t){var n=!1,r=this._getMenuItems(t),i={before:!1,center:!1,after:!1},o={before:this._getItemsInGroup(e,r,"before"),center:this._getItemsInGroup(e,r,"center"),after:this._getItemsInGroup(e,r,"after")};return e.forEach((e,t)=>{var a=e.location;if("separator"===e.name){var s=i[a]&&this._groupHasItemsAfter(o[a]);e.visible!==s&&(n=!0,e.visible=s),i[a]=!1}else this._isItemInMenu(r,e)||(i[a]=i[a]||e.visible),o[a].shift()}),t&&n&&t.repaint(),n}_getMenuItems(e){return(e?e._getMenuItems():[]).map(e=>e.originalItemData)}_isItemInMenu(e,t){return!!e.length&&"never"!==Object(s.g)(t.locateInMenu,"never")&&-1!==e.indexOf(t.originalItemData)}_getItemsInGroup(e,t,n){return e.filter(e=>e.location===n&&!this._isItemInMenu(t,e))}_groupHasItemsAfter(e){for(var t=0;t<e.length;t++)if("separator"!==e[t].name&&e[t].visible)return!0;return!1}_configureItemByCommandName(e,t){var n,r={},a=this._commandManager.getCommandByName(e);switch(a&&(r=this._createCommandItem(a)),e){case"separator":r=this._createSeparatorItem();break;case"switchView":r=this._createViewModeItem()}if(this._isDefaultItem(e)){var l=Ye[e];Object(i.a)(!0,r,l);var c=r.cssClass||"";M(r,t,Je),Object(o.d)(t.options)&&M(r.options,t.options,et),M(r.options,t,["text","icon"]),t.cssClass&&(c="".concat(c," ").concat(t.cssClass)),c&&(r.cssClass=c),Object(o.d)(t.visible)||(r._autoHide=!0),"dxButton"===r.widget&&("inMenu"!==r.showText||Object(o.d)(r.options.hint)||(r.options.hint=r.options.text),r.compactMode&&!Object(o.d)(r.options.hint)&&this._configureHintForCompactMode(r))}else Object(i.a)(!0,r,t),r.widget||(r.widget="dxButton"),"dxButton"===r.widget&&!r.compactMode&&!r.showText&&r.options&&r.options.icon&&r.options.text&&(r.compactMode={showText:"inMenu"});return e&&!r.name&&Object(i.a)(r,{name:e}),r.location=Object(s.g)(r.location,"before"),Object(o.d)(null===(n=r.options)||void 0===n?void 0:n.stylingMode)||("dxButton"===r.widget&&Object(i.a)(!0,r,{options:{stylingMode:"text"}}),"dxSelectBox"===r.widget&&Object(i.a)(!0,r,{options:{stylingMode:"filled"}})),r}_isDefaultItem(e){return!!Ye[e]}_createCommandItem(e){return{widget:"dxButton",options:{text:e.text,hint:e.hint,commandText:e.text,icon:e.icon,stylingMode:"text",onClick:t=>this._executeCommand(e)}}}_createSeparatorItem(){return{template:(e,t,n)=>{Object(r.a)(n).addClass("dx-filemanager-toolbar-separator-item")}}}_createViewModeItem(){var e=["details","thumbnails"].map(e=>{var{text:t,icon:n}=this._commandManager.getCommandByName(e);return{name:e,text:t,icon:n}}),t="thumbnails"===this.option("itemViewMode")?1:0;return{cssClass:"dx-filemanager-toolbar-viewmode-item",widget:"dxDropDownButton",options:{items:e,keyExpr:"name",selectedItemKey:this.option("itemViewMode"),displayExpr:" ",hint:e[t].text,stylingMode:"text",showArrowIcon:!1,useSelectMode:!0,dropDownOptions:{container:this._$viewSwitcherPopup},onItemClick:e=>this._executeCommand(e.itemData.name)}}}_configureHintForCompactMode(e){e.options.hint="",e.compactMode.options=e.compactMode.options||{},e.compactMode.options.hint=e.options.text}_checkCompactMode(e){e.compactMode&&this._toggleCompactMode(e,!1);var t=this._toolbarHasItemsOverflow(e);e.compactMode!==t?(e.compactMode||this._toggleCompactMode(e,t),e.compactMode=t):e.compactMode&&this._toggleCompactMode(e,!0)}_toolbarHasItemsOverflow(e){return Object(qe.l)(e.$element())<e._getItemsWidth()}_toggleCompactMode(e,t){var n=!1,r=e.option("items");r.forEach(e=>{if(e.compactMode){var r=null;t?(e.saved=this._getCompactModeOptions(e,e._available),r=e.compactMode):r=e.saved;var o=this._getCompactModeOptions(r,e._available);Object(i.a)(!0,e,o),n=!0}}),(n=this._updateSeparatorsVisibility(r)||n)&&e.repaint(),this._updateSeparatorsVisibility(r,e)}_getCompactModeOptions(e,t){var{showText:n,locateInMenu:r,options:i}=e;return{visible:t,showText:Object(s.g)(n,"always"),locateInMenu:Object(s.g)(r,"never"),options:{hint:null==i?void 0:i.hint}}}_ensureAvailableCommandsVisible(e){var t=!1,n=e.option("items");n.forEach(e=>{if("separator"!==e.name){var n=e._available;this._setItemVisibleAvailable(e),e._available!==n&&(t=!0)}}),(t=this._updateSeparatorsVisibility(n)||t)&&e.repaint(),this._updateSeparatorsVisibility(n,e)}_setItemVisibleAvailable(e){var t,n=null===(t=e.originalItemData)||void 0===t?void 0:t.visible;e._available=this._isToolbarItemAvailable(e),e.visible=Object(o.d)(n)?n:e._available}_fileToolbarHasEffectiveItems(){return this._fileToolbar.option("items").some(e=>this._isFileToolbarItemAvailable(e))}_executeCommand(e){this._commandManager.executeCommand(e)}_isToolbarItemAvailable(e){return this._isDefaultItem(e.name)&&e._autoHide?"refresh"===e.name?this._generalToolbarVisible||!!this._isRefreshVisibleInFileToolbar:tt.indexOf(e.name)>-1||this._isCommandAvailable(e.name):Object(s.g)(e.visible,!0)}_isFileToolbarItemAvailable(e){var{name:t,visible:n}=e;return!this._isDefaultItem(t)&&Object(s.g)(n,!0)||"clearSelection"!==t&&"refresh"!==t&&this._isCommandAvailable(t)}_isCommandAvailable(e){return this._commandManager.isCommandAvailable(e,this.option("contextItems"))}_updateItemInToolbar(e,t,n){e.beginUpdate();for(var r=e.option("items"),i=0;i<r.length;i++){if(r[i].name===t){e.option("items[".concat(i,"]"),n);break}}e.endUpdate()}_raiseItemClicked(e){var t=Object(i.a)(!0,{},e);t.itemData=e.itemData.originalItemData,this._itemClickedAction(t)}_createItemClickedAction(){this._itemClickedAction=this._createActionByOption("onItemClick")}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{commandManager:null,generalItems:[],fileItems:[],contextItems:[],itemViewMode:"details",onItemClick:null})}_optionChanged(e){var t=e.name;switch(t){case"commandManager":case"itemViewMode":case"generalItems":case"fileItems":this.repaint();break;case"contextItems":this._update();break;case"onItemClick":this._itemClickedAction=this._createActionByOption(t);break;default:super._optionChanged(e)}}updateItemPermissions(){this.repaint(),this._restoreRefreshItemState()}_restoreRefreshItemState(){this.updateRefreshItem(this._refreshItemState.message,this._refreshItemState.status)}updateRefreshItem(e,t){var n=null,r=l.a.format("dxFileManager-commandRefresh"),o="inMenu";this._isRefreshVisibleInFileToolbar=!1,this._refreshItemState={message:e,status:t},"default"===t?n={options:{icon:nt.default}}:(n={options:{icon:nt[t]}},this._isRefreshVisibleInFileToolbar=!0,r=e,o="always");var a=Object(i.a)({},n,{visible:this._isRefreshVisibleInFileToolbar});this._applyRefreshItemOptions(n,a),this._refreshItemTextTimeout=this._updateRefreshItemText("progress"===t,r,o)}_updateRefreshItemText(e,t,n){var r={showText:n,options:{text:t}};return e?setTimeout(()=>{this._applyRefreshItemOptions(r),this._refreshItemTextTimeout=void 0},500):(this._refreshItemTextTimeout&&clearTimeout(this._refreshItemTextTimeout),void this._applyRefreshItemOptions(r))}_applyRefreshItemOptions(e,t){t||(t=Object(i.a)({},e)),this._updateItemInToolbar(this._generalToolbar,"refresh",e),this._updateItemInToolbar(this._fileToolbar,"refresh",t)}_update(){var e=0===this.option("contextItems").length||!this._fileToolbarHasEffectiveItems();this._generalToolbarVisible!==e&&(this._generalToolbar.option("visible",e),this._fileToolbar.option("visible",!e),this._generalToolbarVisible=e,this.$element().toggleClass("dx-filemanager-general-toolbar",e),this.$element().toggleClass("dx-filemanager-file-toolbar",!e));var t=this._getVisibleToolbar();this._ensureAvailableCommandsVisible(t),this._checkCompactMode(t)}get _commandManager(){return this.option("commandManager")}}var it=rt,ot=n("oHs6"),at=n("EuXN"),st=n("MtyI"),lt=n("Ss0b"),ct=st.a.inherit({_getDefaultOptions:function(){return Object(i.a)(this.callBase(),{min:0,max:100,value:0})},_initMarkup:function(){this.$element().addClass("dx-trackbar"),this._renderWrapper(),this._renderContainer(),this._renderRange(),this._renderValue(),this._setRangeStyles(),this.callBase()},_render:function(){this.callBase(),this._setRangeStyles(this._rangeStylesConfig())},_renderWrapper:function(){this._$wrapper=Object(r.a)("<div>").addClass("dx-trackbar-wrapper").appendTo(this.$element())},_renderContainer:function(){this._$bar=Object(r.a)("<div>").addClass("dx-trackbar-container").appendTo(this._$wrapper)},_renderRange:function(){this._$range=Object(r.a)("<div>").addClass("dx-trackbar-range").appendTo(this._$bar)},_renderValue:function(){var e=this.option("value"),t=this.option("min"),n=this.option("max");if(!(t>n)){if(e<t)return this.option("value",t),void(this._currentRatio=0);if(e>n)return this.option("value",n),void(this._currentRatio=1);var r=t===n?0:(e-t)/(n-t);!this._needPreventAnimation&&this._setRangeStyles({width:100*r+"%"}),this.setAria({valuemin:this.option("min"),valuemax:n,valuenow:e}),this._currentRatio=r}},_rangeStylesConfig:function(){return{width:100*this._currentRatio+"%"}},_setRangeStyles:function(e){lt.a.stop(this._$range),e?!this._needPreventAnimation&&Object(p.f)()&&lt.a.animate(this._$range,{type:"custom",duration:100,to:e}):this._$range.css({width:0})},_optionChanged:function(e){switch(e.name){case"value":this._renderValue(),this.callBase(e);break;case"max":case"min":this._renderValue();break;default:this.callBase(e)}},_dispose:function(){lt.a.stop(this._$range),this.callBase()}});Object(c.a)("dxTrackBar",ct);var ut=ct.inherit({_getDefaultOptions:function(){return Object(i.a)(this.callBase(),{value:0,statusFormat:function(e){return"Progress: "+Math.round(100*e)+"%"},showStatus:!0,onComplete:null,activeStateEnabled:!1,statusPosition:"bottom left",_animatingSegmentCount:0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(e){return"android"===e.platform},options:{_animatingSegmentCount:2}}])},_initMarkup:function(){this._renderStatus(),this._createCompleteAction(),this.callBase(),this.$element().addClass("dx-progressbar"),this._$wrapper.addClass("dx-progressbar-wrapper"),this._$bar.addClass("dx-progressbar-container"),this.setAria("role","progressbar"),Object(r.a)("<div>").addClass("dx-progressbar-range-container").appendTo(this._$wrapper).append(this._$bar),this._$range.addClass("dx-progressbar-range"),this._toggleStatus(this.option("showStatus"))},_useTemplates:function(){return!1},_createCompleteAction:function(){this._completeAction=this._createActionByOption("onComplete")},_renderStatus:function(){this._$status=Object(r.a)("<div>").addClass("dx-progressbar-status")},_renderIndeterminateState:function(){this._$segmentContainer=Object(r.a)("<div>").addClass("dx-progressbar-animating-container");for(var e=this.option("_animatingSegmentCount"),t=0;t<e;t++)Object(r.a)("<div>").addClass("dx-progressbar-animating-segment").addClass("dx-progressbar-animating-segment-"+(t+1)).appendTo(this._$segmentContainer);this._$segmentContainer.appendTo(this._$wrapper)},_toggleStatus:function(e){var t=this.option("statusPosition").split(" ");e?"top"===t[0]||"left"===t[0]?this._$status.prependTo(this._$wrapper):this._$status.appendTo(this._$wrapper):this._$status.detach(),this._togglePositionClass()},_togglePositionClass:function(){var e=this.option("statusPosition").split(" ");this._$wrapper.removeClass("dx-position-top-left dx-position-top-right dx-position-bottom-left dx-position-bottom-right dx-position-left dx-position-right");var t="dx-position-"+e[0];e[1]&&(t+="-"+e[1]),this._$wrapper.addClass(t)},_toggleIndeterminateState:function(e){e?(this._renderIndeterminateState(),this._$bar.toggle(!1)):(this._$bar.toggle(!0),this._$segmentContainer.remove(),delete this._$segmentContainer)},_renderValue:function(){var e=this.option("value"),t=this.option("max");e||0===e?(this._$segmentContainer&&this._toggleIndeterminateState(!1),e===t&&this._completeAction(),this.callBase(),this._setStatus()):this._toggleIndeterminateState(!0)},_setStatus:function(){var e=this.option("statusFormat"),t=(e=Object(o.h)(e)?e.bind(this):function(e){return e})(this._currentRatio,this.option("value"));this._$status.text(t)},_dispose:function(){this._$status.remove(),this.callBase()},_optionChanged:function(e){switch(e.name){case"statusFormat":this._setStatus();break;case"showStatus":this._toggleStatus(e.value);break;case"statusPosition":this._toggleStatus(this.option("showStatus"));break;case"onComplete":this._createCompleteAction();break;case"_animatingSegmentCount":break;default:this.callBase(e)}}});Object(c.a)("dxProgressBar",ut);var dt=ut,ht="".concat("dx-filemanager-progress-panel","-container"),pt="".concat("dx-filemanager-progress-panel","-title"),ft="".concat("dx-filemanager-progress-panel","-title-text"),mt="".concat("dx-filemanager-progress-panel","-close-button"),gt="".concat("dx-filemanager-progress-panel","-infos-container"),vt="".concat("dx-filemanager-progress-panel","-separator"),_t="".concat("dx-filemanager-progress-panel","-info"),bt="".concat("dx-filemanager-progress-panel","-common"),yt="".concat("dx-filemanager-progress-panel","-info-with-details"),Ct="".concat("dx-filemanager-progress-panel","-details"),Ot="".concat("dx-filemanager-progress-box","-error"),wt="".concat("dx-filemanager-progress-box","-without-close-button"),xt="".concat("dx-filemanager-progress-box","-image"),It="".concat("dx-filemanager-progress-box","-wrapper"),St="".concat("dx-filemanager-progress-box","-common"),Et="".concat("dx-filemanager-progress-box","-progress-bar"),jt="".concat("dx-filemanager-progress-box","-close-button");class kt extends u.a{_initMarkup(){super._initMarkup(),this._initActions(),this._operationCount=0,this.$element().addClass("dx-filemanager-progress-panel");var e=Object(r.a)("<div>").appendTo(this.$element()),t=Object(r.a)("<div>").addClass(ht).appendTo(e);this._scrollView=this._createComponent(e,Ue.default,{scrollByContent:!0,scrollByThumb:!0,showScrollbar:"onScroll"});var n=Object(r.a)("<div>").addClass(pt).appendTo(t);Object(r.a)("<div>").text(l.a.format("dxFileManager-notificationProgressPanelTitle")).addClass(ft).appendTo(n);var i=Object(r.a)("<div>").addClass(mt).appendTo(n);this._createComponent(i,Ie.default,{icon:"close",stylingMode:"text",onClick:()=>this._raisePanelClosed()}),this._$infosContainer=Object(r.a)("<div>").addClass(gt).appendTo(t),this._renderEmptyListText()}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{onOperationClosed:null,onOperationCanceled:null,onOperationItemCanceled:null,onPanelClosed:null})}_initActions(){this._actions={onOperationClosed:this._createActionByOption("onOperationClosed"),onOperationCanceled:this._createActionByOption("onOperationCanceled"),onOperationItemCanceled:this._createActionByOption("onOperationItemCanceled"),onPanelClosed:this._createActionByOption("onPanelClosed")}}_optionChanged(e){var t=e.name;switch(t){case"test":break;case"onOperationClosed":case"onOperationCanceled":case"onOperationItemCanceled":this._actions[t]=this._createActionByOption(t);break;default:super._optionChanged(e)}}addOperation(e,t,n){this._operationCount?Object(r.a)("<div>").addClass(vt).prependTo(this._$infosContainer):this._$infosContainer.empty(),this._operationCount++;var i={customCloseHandling:t,allowProgressAutoUpdate:Object(s.g)(n,!0)},o=Object(r.a)("<div>").addClass(_t).prependTo(this._$infosContainer);i.$info=o;var a=Object(r.a)("<div>").addClass(bt).appendTo(o);return i.common=this._createProgressBox(a,{commonText:e,showCloseButton:!0,showCloseButtonAlways:t,onCloseButtonClick:()=>this._closeOperation(i)}),i}addOperationDetails(e,t,n){e.$info.addClass(yt);var i=Object(r.a)("<div>").addClass(Ct).appendTo(e.$info);e.details=t.map((t,r)=>(t.info=e,this._createDetailsItem(i,t,r,!1,n)))}_createDetailsItem(e,t,n,i,o){var a=Object(r.a)("<div>").appendTo(e);return-1!==n&&a.addClass("dx-card"),this._createProgressBox(a,{commonText:t.commonText,imageUrl:t.imageUrl,skipProgressBox:i,showCloseButton:o,showCloseButtonAlways:o,onCloseButtonClick:()=>this._cancelOperationItem(t,n)})}completeOperationItem(e,t,n){e.allowProgressAutoUpdate&&this.updateOperationItemProgress(e,t,100,n),this._setCloseButtonVisible(e.details[t],!1)}updateOperationItemProgress(e,t,n,r){(this.updateOperationCommonProgress(e,r),e.details)&&e.details[t].progressBar.option("value",n)}updateOperationCommonProgress(e,t){var n;null===(n=e.common.progressBar)||void 0===n||n.option("value",t)}completeOperation(e,t,n,r){e.completed=!0,e.common.$commonText.text(t),n?this._removeProgressBar(e.common):e.allowProgressAutoUpdate&&this.updateOperationCommonProgress(e,100),r&&this._setProgressBarText(e.common,r),this._setCloseButtonVisible(e.common,!0)}completeSingleOperationWithError(e,t){var n,r=null===(n=e.details)||void 0===n?void 0:n[0];e.completed=!0,this._renderOperationError(r||e.common,t),this._setCloseButtonVisible(e.common,!0),r&&this._setCloseButtonVisible(r,!1)}addOperationDetailsError(e,t,n){var r=e.details[t];this._renderOperationError(r,n),this._setCloseButtonVisible(r,!1)}_renderError(e,t,n){Object(r.a)("<div>").text(n).addClass(Ot).appendTo(e)}_renderEmptyListText(){this._$infosContainer.text(l.a.format("dxFileManager-notificationProgressPanelEmptyListText"))}_renderOperationError(e,t){this._removeProgressBar(e),this._renderError(e.$wrapper,e.$commonText,t)}_removeProgressBar(e){e.progressBar&&(e.progressBar.dispose(),e.progressBar.$element().remove(),e.progressBar=null)}_createProgressBox(e,t){e.addClass("dx-filemanager-progress-box"),t.showCloseButtonAlways||e.addClass(wt),t.imageUrl&&Object(we.a)(t.imageUrl).addClass(xt).appendTo(e);var n=Object(r.a)("<div>").addClass(It).appendTo(e),i=Object(r.a)("<div>").addClass(St).text(t.commonText).appendTo(n),o=null;if(!t.skipProgressBox){var a=Object(r.a)("<div>").addClass(Et).appendTo(n);o=this._createComponent(a,dt,{min:0,max:100,width:"100%",validationMessageMode:"always",statusFormat:(e,t)=>this._getStatusString(e,t)})}var s=null;if(t.showCloseButton){var l=Object(r.a)("<div>").addClass(jt).appendTo(e);s=this._createComponent(l,Ie.default,{icon:"dx-filemanager-i dx-filemanager-i-cancel",stylingMode:"text",visible:t.showCloseButtonAlways,onClick:t.onCloseButtonClick})}return{$commonText:i,progressBar:o,$element:e,$wrapper:n,closeButton:s}}_setCloseButtonVisible(e,t){e.closeButton&&(e.$element.toggleClass(wt,!t),e.closeButton.option("visible",t))}_setProgressBarText(e,t){e.progressBar.option("statusFormat",()=>t)}_closeOperation(e){e.customCloseHandling&&!e.completed?(this._raiseOperationCanceled(e),this._setCloseButtonVisible(e.common,!1),e.details.forEach(e=>this._displayClosedOperationItem(e))):(this._raiseOperationClosed(e),e.$info.next(".".concat(vt)).remove(),e.$info.remove(),this._operationCount--,this._operationCount||this._renderEmptyListText())}_cancelOperationItem(e,t){this._raiseOperationItemCanceled(e,t);var n=e.info.details[t];this._displayClosedOperationItem(n)}_displayClosedOperationItem(e){this._setProgressBarText(e,l.a.format("dxFileManager-notificationProgressPanelOperationCanceled")),this._setCloseButtonVisible(e,!1)}_getStatusString(e,t){return 1===e?l.a.format("Done"):Math.round(100*e)+"%"}_raiseOperationClosed(e){this._actions.onOperationClosed({info:e})}_raiseOperationCanceled(e){this._actions.onOperationCanceled({info:e})}_raiseOperationItemCanceled(e,t){this._actions.onOperationItemCanceled({item:e,itemIndex:t})}_raisePanelClosed(){this._actions.onPanelClosed()}}var Tt=kt,At="".concat("dx-filemanager-progress-box","-error"),Dt="".concat("dx-filemanager-progress-box","-image"),Pt="".concat("dx-filemanager-progress-box","-wrapper"),Mt="".concat("dx-filemanager-progress-box","-common"),Ft="default",Nt="progress",Rt="error",Bt="success";class Lt{constructor(e){var{onActionProgressStatusChanged:t,isActual:n}=e;this._id=(new L.a).toString(),this._isActual=n||!1,this._actionProgressStatus=Ft,this._raiseActionProgress=t}getId(){return this._id}isActual(){return this._isActual}createErrorDetailsProgressBox(e,t,n){var r=this._createDetailsItem(e,t);this.renderError(r.$wrapper,n)}renderError(e,t){Object(r.a)("<div>").text(t).addClass(At).appendTo(e)}isActionProgressStatusDefault(){return this._actionProgressStatus===Ft}_createDetailsItem(e,t){var n=Object(r.a)("<div>").appendTo(e);return this._createProgressBox(n,{commonText:t.commonText,imageUrl:t.imageUrl})}_createProgressBox(e,t){e.addClass("dx-filemanager-progress-box"),t.imageUrl&&Object(we.a)(t.imageUrl).addClass(Dt).appendTo(e);var n=Object(r.a)("<div>").addClass(Pt).appendTo(e);return{$commonText:Object(r.a)("<div>").addClass(Mt).text(t.commonText).appendTo(n),$element:e,$wrapper:n}}}class qt extends Lt{addOperation(){return{__operationInfoManager:this._id}}addOperationDetails(){}updateOperationItemProgress(){}completeOperationItem(){}completeOperation(){}completeSingleOperationWithError(){}addOperationDetailsError(){}handleDimensionChanged(){return!1}ensureProgressPanelCreated(){}tryHideActionProgress(){this._updateActionProgress("",Ft)}updateActionProgressStatus(){this._updateActionProgress("",Ft)}_updateActionProgress(e,t){t!==Ft&&t!==Nt||(this._actionProgressStatus=t,this._raiseActionProgress(e,t))}hasNoOperations(){return!0}get _operationInProgressCount(){return 0}set _operationInProgressCount(e){}get _failedOperationCount(){return 0}set _failedOperationCount(e){}}class Ht extends Lt{constructor(e){super(e),this._failedOperationCount=0,this._operationInProgressCount=0}addOperation(e,t,n){this._operationInProgressCount++;var r=this._progressPanel.addOperation(e,t,n);return r.__operationInfoManager=this._id,this._updateActionProgress(e,Nt),r}addOperationDetails(e,t,n){this._progressPanel.addOperationDetails(e,t,n)}updateOperationItemProgress(e,t,n,r){this._progressPanel.updateOperationItemProgress(e,t,n,r)}completeOperationItem(e,t,n){this._progressPanel.completeOperationItem(e,t,n)}finishOperation(e,t){this._progressPanel.updateOperationCommonProgress(e,t)}completeOperation(e,t,n,r){this._operationInProgressCount--,n&&this._failedOperationCount++,this._progressPanel.completeOperation(e,t,n,r)}completeSingleOperationWithError(e,t){this._progressPanel.completeSingleOperationWithError(e,t.detailErrorText),this._notifyError(t)}addOperationDetailsError(e,t){this._progressPanel.addOperationDetailsError(e,t.itemIndex,t.detailErrorText),this._notifyError(t)}handleDimensionChanged(){return this._progressPanel&&this._progressPanel.$element().detach(),!0}ensureProgressPanelCreated(e,t){if(this._progressPanel)this._progressPanel.$element().appendTo(e);else{var n=Object(r.a)("<div>").appendTo(e),o=this._getProgressPanelComponent();this._progressPanel=new o(n,Object(i.a)({},t,{onOperationClosed:e=>{var{info:t}=e;return this._onProgressPanelOperationClosed(t)}}))}}_getProgressPanelComponent(){return Tt}_onProgressPanelOperationClosed(e){e.hasError&&(this._failedOperationCount--,this.tryHideActionProgress())}tryHideActionProgress(){this.hasNoOperations()&&this._updateActionProgress("",Ft)}updateActionProgressStatus(e){if(e){var t=0===this._failedOperationCount?Bt:Rt;this._updateActionProgress("",t)}}_notifyError(e){var t=this.hasNoOperations()?Ft:Rt;this._updateActionProgress(e.commonErrorText,t)}_updateActionProgress(e,t){this._actionProgressStatus=t,this._raiseActionProgress(e,t)}hasNoOperations(){return 0===this._operationInProgressCount&&0===this._failedOperationCount}get _operationInProgressCount(){return this._operationInProgressCountInternal}set _operationInProgressCount(e){this._operationInProgressCountInternal=e}get _failedOperationCount(){return this._failedOperationCountInternal}set _failedOperationCount(e){this._failedOperationCountInternal=e}}var $t=Object(p.d)(),Ut="".concat("dx-filemanager-notification","-drawer"),zt="".concat(Ut,"-panel"),Vt="".concat("dx-filemanager-notification","-popup"),Kt="".concat("dx-filemanager-notification","-popup-error"),Wt="".concat("dx-filemanager-notification","-common"),Gt="".concat("dx-filemanager-notification","-separator"),Zt="".concat("dx-filemanager-notification","-details"),Qt="".concat("dx-filemanager-notification","-common-no-item");class Xt extends u.a{_initMarkup(){super._initMarkup(),this._initActions(),this._isInAdaptiveState=this._isSmallScreen(),this._managerMap={},this._notificationManagerStubId=null,this._setNotificationManager();var e=this.option("progressPanelContainer"),t=Object(r.a)("<div>").addClass(Ut).appendTo(e);Object(r.a)("<div>").addClass(zt).appendTo(t);var n=Object(i.a)({opened:!1,position:"right",template:e=>this._ensureProgressPanelCreated(e)},this._getProgressDrawerAdaptiveOptions());this._progressDrawer=this._createComponent(t,at.a,n);var a=t.find(".".concat(zt)).first(),s=this.option("contentTemplate");Object(o.h)(s)&&s(a,this)}_setNotificationManager(e){if(e=Object(i.a)({onActionProgressStatusChanged:this._raiseActionProgress.bind(this)},e),!this._notificationManagerStubId){var t=new qt(e);this._notificationManagerStubId=t.getId(),this._managerMap[this._notificationManagerStubId]=t}if(!this._isProgressDrawerDisabled()){var n=this._getProgressManagerComponent();e.isActual=!0;var r=new n(e);this._managerMap[r.getId()]=r}}_getNotificationManager(e){var t=(null==e?void 0:e.__operationInfoManager)||this._getActualNotificationManagerId();return this._managerMap[t]||this._managerMap[this._notificationManagerStubId]}_clearManagerMap(){var e=this._managerMap[this._notificationManagerStubId];delete this._managerMap,this._managerMap={[this._notificationManagerStubId]:e}}_getActualNotificationManagerId(){return Object.keys(this._managerMap).filter(e=>this._managerMap[e].isActual())[0]}tryShowProgressPanel(){var e=new a.a,t=this._getNotificationManager();return t.isActionProgressStatusDefault()||this._isProgressDrawerOpened()||this._isProgressDrawerDisabled()?e.resolve().promise():(setTimeout(()=>{this._progressDrawer.show().done(e.resolve),this._hidePopup(),t.tryHideActionProgress()}),e.promise())}addOperation(e,t,n){return this._getNotificationManager().addOperation(e,t,n)}addOperationDetails(e,t,n){this._getNotificationManager(e).addOperationDetails(e,t,n)}updateOperationItemProgress(e,t,n,r){this._getNotificationManager(e).updateOperationItemProgress(e,t,n,r)}completeOperationItem(e,t,n){this._getNotificationManager(e).completeOperationItem(e,t,n)}finishOperation(e,t){this._getNotificationManager(e).finishOperation(e,t)}completeOperation(e,t,n,r){var i=this._getNotificationManager(e);n||this._showPopup(t),i.completeOperation(e,t,n,r),this._isProgressDrawerOpened()&&i.hasNoOperations()?i.tryHideActionProgress():i.updateActionProgressStatus(e)}completeSingleOperationWithError(e,t){this._getNotificationManager(e).completeSingleOperationWithError(e,t),this._showPopupError(t)}addOperationDetailsError(e,t){this._getNotificationManager(e).addOperationDetailsError(e,t),this._showPopupError(t)}_hideProgressPanel(){setTimeout(()=>this._progressDrawer.hide())}_isSmallScreen(){return!!Object(p.f)()&&Object(qe.l)($t)<=1e3}_dimensionChanged(e){e&&"height"===e||this._checkAdaptiveState()}_checkAdaptiveState(){var e=this._isInAdaptiveState;if((this._isInAdaptiveState=this._isSmallScreen(),e!==this._isInAdaptiveState&&this._progressDrawer)&&this._getNotificationManager().handleDimensionChanged()){var t=this._getProgressDrawerAdaptiveOptions();this._progressDrawer.option(t)}}_getProgressDrawerAdaptiveOptions(){return this._isInAdaptiveState?{openedStateMode:"overlap",shading:!0,closeOnOutsideClick:!0}:{openedStateMode:"shrink",shading:!1,closeOnOutsideClick:!1}}_ensureProgressPanelCreated(e){this._getNotificationManager().ensureProgressPanelCreated(e,{onOperationCanceled:e=>{var{info:t}=e;return this._raiseOperationCanceled(t)},onOperationItemCanceled:e=>{var{item:t,itemIndex:n}=e;return this._raiseOperationItemCanceled(t,n)},onPanelClosed:()=>this._hideProgressPanel()})}_getProgressManagerComponent(){return Ht}_isProgressDrawerDisabled(){return!this.option("showProgressPanel")}_isProgressDrawerOpened(){return this._progressDrawer.option("opened")}_hidePopup(e){(this.option("showNotificationPopup")||e)&&this._getNotificationPopup().hide()}_showPopup(e,t){!this._isProgressDrawerOpened()&&this.option("showNotificationPopup")&&(this._getNotificationPopup().$wrapper().toggleClass(Kt,!!t),this._getNotificationPopup().option("contentTemplate",e),this._getNotificationPopup().option("visible")||this._getNotificationPopup().show())}_showPopupError(e){if(this.option("showNotificationPopup")){var t=this._getNotificationManager(),n=Object(r.a)("<div>"),i=Object(r.a)("<div>").addClass(Wt).text(e.commonErrorText),o=Object(r.a)("<div>").addClass(Gt);Object(r.a)("<div>").appendTo(o);var a=Object(r.a)("<div>").addClass(Zt);e.item?t.createErrorDetailsProgressBox(a,e.item,e.detailErrorText):(i.addClass(Qt),t.renderError(a,e.detailErrorText)),n.append(i,o,a),this._showPopup(n,!0)}}_getNotificationPopup(){if(!this._notificationPopup){var e=Object(r.a)("<div>").addClass(Vt).appendTo(this.$element());this._notificationPopup=this._createComponent(e,ot.default,{container:this.$element(),width:"auto",height:"auto",showTitle:!1,dragEnabled:!1,shading:!1,visible:!1,closeOnOutsideClick:!0,animation:{duration:0},position:{my:"right top",at:"right top",of:this.option("positionTarget"),offset:"-10 -5"},_wrapperClassExternal:Vt})}return this._notificationPopup}_raiseActionProgress(e,t){this._actions.onActionProgress({message:e,status:t})}_raiseOperationCanceled(e){this._actions.onOperationCanceled({info:e})}_raiseOperationItemCanceled(e,t){this._actions.onOperationItemCanceled({item:e,itemIndex:t})}_initActions(){this._actions={onActionProgress:this._createActionByOption("onActionProgress"),onOperationCanceled:this._createActionByOption("onOperationCanceled"),onOperationItemCanceled:this._createActionByOption("onOperationItemCanceled")}}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{progressPanelContainer:null,contentTemplate:null,onActionProgress:null,onOperationCanceled:null,onOperationItemCanceled:null,showProgressPanel:!0,showNotificationPopup:!0})}_optionChanged(e){var t=e.name;switch(t){case"progressPanelContainer":case"contentTemplate":break;case"showProgressPanel":this._setNotificationManager(),this._getNotificationManager().updateActionProgressStatus(),e.value||(this._hideProgressPanel(),this._clearManagerMap()),this._progressDrawer.repaint();break;case"showNotificationPopup":e.value||this._hidePopup(!0);break;case"onActionProgress":case"onOperationCanceled":case"onOperationItemCanceled":this._actions[t]=this._createActionByOption(t);break;default:super._optionChanged(e)}}}var Yt=n("lXBL"),Jt=n("VABh");class en extends u.a{_initMarkup(){var e;super._initMarkup(),this._createOnClosedAction();var t=this._getDialogOptions(),n=Object(r.a)("<div>").addClass("dx-filemanager-dialog-popup").appendTo(this.$element());t.popupCssClass&&n.addClass(t.popupCssClass);var i={showTitle:!0,title:t.title,visible:!1,closeOnOutsideClick:!0,copyRootClassesToWrapper:!0,_ignoreCopyRootClassesToWrapperDeprecation:!0,contentTemplate:this._createContentTemplate.bind(this),toolbarItems:[{widget:"dxButton",toolbar:"bottom",location:"after",options:{text:t.buttonText,onClick:this._applyDialogChanges.bind(this)}},{widget:"dxButton",toolbar:"bottom",location:"after",options:{text:l.a.format("dxFileManager-dialogButtonCancel"),onClick:this._closeDialog.bind(this)}}],onInitialized:e=>{var{component:t}=e;t.registerKeyHandler("enter",this._applyDialogChanges.bind(this))},onHidden:this._onPopupHidden.bind(this),onShown:this._onPopupShown.bind(this),_wrapperClassExternal:"".concat("dx-filemanager-dialog-popup"," ").concat(null!==(e=t.popupCssClass)&&void 0!==e?e:"")};Object(o.d)(t.height)&&(i.height=t.height),Object(o.d)(t.maxHeight)&&(i.maxHeight=t.maxHeight),this._popup=this._createComponent(n,ot.default,i)}show(){this._dialogResult=null,this._popup.show()}_getDialogOptions(){return{title:"Title",buttonText:"ButtonText",contentCssClass:"",popupCssClass:""}}_createContentTemplate(e){this._$contentElement=Object(r.a)("<div>").appendTo(e).addClass("dx-filemanager-dialog");var t=this._getDialogOptions().contentCssClass;t&&this._$contentElement.addClass(t)}_getDialogResult(){return null}_applyDialogChanges(){var e=this._getDialogResult();e&&(this._dialogResult=e,this._closeDialog())}_closeDialog(){this._popup.hide()}_onPopupHidden(){this._onClosedAction({dialogResult:this._dialogResult})}_onPopupShown(){}_createOnClosedAction(){this._onClosedAction=this._createActionByOption("onClosed")}_setTitle(e){this._popup.option("title",e)}_setApplyButtonOptions(e){this._popup.option("toolbarItems[0].options",e)}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{onClosed:null})}_optionChanged(e){switch(e.name){case"onClosed":this._createOnPathChangedAction();break;default:super._optionChanged(e)}}}var tn=en;var nn=class extends tn{show(e){e=e||"",this._nameTextBox?this._nameTextBox.option("value",e):this._initialNameValue=e,super.show()}_onPopupShown(){if(this._nameTextBox){var e=this._nameTextBox._input();e.length&&e[0].select(),this._nameTextBox.focus()}}_getDialogOptions(){return Object(i.a)(super._getDialogOptions(),{title:this.option("title"),buttonText:this.option("buttonText"),contentCssClass:"dx-filemanager-dialog-name-editor",popupCssClass:"dx-filemanager-dialog-name-editor-popup"})}_createContentTemplate(e){super._createContentTemplate(e),this._nameTextBox=this._createComponent(Object(r.a)("<div>"),Jt.default,{value:this._initialNameValue,onEnterKey:()=>this._hasCompositionJustEnded&&this._applyDialogChanges(),onKeyDown:e=>this._checkCompositionEnded(e)}),this._$contentElement.append(this._nameTextBox.$element())}_checkCompositionEnded(e){var{event:t}=e;this._hasCompositionJustEnded=229!==t.which}_getDialogResult(){var e=this._nameTextBox.option("value");return e?{name:e}:null}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{title:"",buttonText:""})}};var rn=class extends tn{show(){var e;this._setSelectedDirInfo(null),null===(e=this._filesTreeView)||void 0===e||e.refresh(),super.show()}switchToCopyDialog(e){this._targetItemInfos=e,this._setTitle(l.a.format("dxFileManager-dialogDirectoryChooserCopyTitle")),this._setApplyButtonOptions({text:l.a.format("dxFileManager-dialogDirectoryChooserCopyButtonText"),disabled:!0})}switchToMoveDialog(e){this._targetItemInfos=e,this._setTitle(l.a.format("dxFileManager-dialogDirectoryChooserMoveTitle")),this._setApplyButtonOptions({text:l.a.format("dxFileManager-dialogDirectoryChooserMoveButtonText"),disabled:!0})}_getDialogOptions(){return Object(i.a)(super._getDialogOptions(),{contentCssClass:"dx-filemanager-dialog-folder-chooser",popupCssClass:"dx-filemanager-dialog-folder-chooser-popup"})}_createContentTemplate(e){super._createContentTemplate(e),this._filesTreeView=this._createComponent(Object(r.a)("<div>"),ke,{getDirectories:this.option("getDirectories"),getCurrentDirectory:()=>this._getDialogSelectedDirectory(),onDirectoryClick:e=>this._onFilesTreeViewDirectoryClick(e),onFilesTreeViewContentReady:()=>this._toggleUnavailableLocationsDisabled(!0)}),this._$contentElement.append(this._filesTreeView.$element())}_getDialogResult(){var e=this._getDialogSelectedDirectory();return e?{folder:e}:e}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{getItems:null})}_getDialogSelectedDirectory(){return this._selectedDirectoryInfo}_onFilesTreeViewDirectoryClick(e){var{itemData:t}=e;this._setSelectedDirInfo(t),this._filesTreeView.updateCurrentDirectory()}_setSelectedDirInfo(e){this._selectedDirectoryInfo=e,this._setApplyButtonOptions({disabled:!e})}_onPopupShown(){this._toggleUnavailableLocationsDisabled(!0),super._onPopupShown()}_onPopupHidden(){this._toggleUnavailableLocationsDisabled(!1),super._onPopupHidden()}_toggleUnavailableLocationsDisabled(e){if(this._filesTreeView){var t=this._getLocationsToProcess(e);this._filesTreeView.toggleDirectoryExpandedStateRecursive(t.locationsToExpand[0],e).then(()=>this._filesTreeView.toggleDirectoryLineExpandedState(t.locationsToCollapse,!e).then(()=>t.locationKeysToDisable.forEach(t=>this._filesTreeView.toggleNodeDisabledState(t,e))))}}_getLocationsToProcess(e){var t={},n={};this._targetItemInfos.forEach(e=>{e.parentDirectory&&(t[e.parentDirectory.getInternalKey()]=e.parentDirectory),e.fileItem.isDirectory&&(n[e.getInternalKey()]=e)});var r=F(t),i=F(n);return{locationsToExpand:e?r.values:[],locationsToCollapse:e?i.values:[],locationKeysToDisable:r.keys.concat(...i.keys)}}};var on=class extends tn{show(e){var{itemName:t,itemCount:n}=e,r=1===n?l.a.format("dxFileManager-dialogDeleteItemSingleItemConfirmation",t):l.a.format("dxFileManager-dialogDeleteItemMultipleItemsConfirmation",n);this._$text?this._$text.text(r):this._initialText=r,super.show()}_getDialogOptions(){return Object(i.a)(super._getDialogOptions(),{title:l.a.format("dxFileManager-dialogDeleteItemTitle"),buttonText:l.a.format("dxFileManager-dialogDeleteItemButtonText"),contentCssClass:"dx-filemanager-dialog-delete-item",popupCssClass:"dx-filemanager-dialog-delete-item-popup",height:"auto",maxHeight:"80vh"})}_createContentTemplate(e){super._createContentTemplate(e),this._$text=Object(r.a)("<div>").text(this._initialText).appendTo(this._$contentElement),this._createComponent(this._$contentElement,Ue.default,{width:"100%",height:"100%"})}_getDialogResult(){return{}}};var an=class{constructor(e,t){this._$element=e,this._options=t;var n={onClosed:this._options.onDialogClosed,rtlEnabled:this._options.rtlEnabled},o=Object(r.a)("<div>").appendTo(this._$element);this._chooseDirectoryDialog=new rn(o,Object(i.a)(n,this._options.chooseDirectoryDialog));var a=Object(r.a)("<div>").appendTo(this._$element);this._renameItemDialog=new nn(a,Object(i.a)(n,{title:l.a.format("dxFileManager-dialogRenameItemTitle"),buttonText:l.a.format("dxFileManager-dialogRenameItemButtonText")}));var s=Object(r.a)("<div>").appendTo(this._$element);this._createItemDialog=new nn(s,Object(i.a)(n,{title:l.a.format("dxFileManager-dialogCreateDirectoryTitle"),buttonText:l.a.format("dxFileManager-dialogCreateDirectoryButtonText")}));var c=Object(r.a)("<div>").appendTo(this._$element);this._deleteItemDialog=new on(c,n)}getCopyDialog(e){return this._chooseDirectoryDialog.switchToCopyDialog(e),this._chooseDirectoryDialog}getMoveDialog(e){return this._chooseDirectoryDialog.switchToMoveDialog(e),this._chooseDirectoryDialog}getRenameItemDialog(){return this._renameItemDialog}getCreateItemDialog(){return this._createItemDialog}getDeleteItemDialog(){return this._deleteItemDialog}updateDialogRtl(e){[this._chooseDirectoryDialog,this._renameItemDialog,this._createItemDialog,this._deleteItemDialog].forEach(t=>{t.option("rtlEnabled",e)})}},sn=n("EZme"),ln=n("6SE/"),cn=Object(p.d)(),un=()=>!!cn.FormData;class dn extends st.a{_supportedKeys(){var e=e=>{e.preventDefault();var t=this._selectButton.$element();m.a.trigger(t,ln.a)};return Object(i.a)(super._supportedKeys(),{space:e,enter:e})}_setOptionsByReference(){super._setOptionsByReference(),Object(i.a)(this._optionsByReference,{value:!0})}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{chunkSize:0,value:[],selectButtonText:l.a.format("dxFileUploader-selectFile"),uploadButtonText:l.a.format("dxFileUploader-upload"),labelText:l.a.format("dxFileUploader-dropFile"),name:"files[]",multiple:!1,accept:"",uploadUrl:"/",allowCanceling:!0,showFileList:!0,progress:0,dialogTrigger:void 0,dropZone:void 0,readyToUploadMessage:l.a.format("dxFileUploader-readyToUpload"),uploadedMessage:l.a.format("dxFileUploader-uploaded"),uploadFailedMessage:l.a.format("dxFileUploader-uploadFailedMessage"),uploadAbortedMessage:l.a.format("dxFileUploader-uploadAbortedMessage"),uploadMode:"instantly",uploadMethod:"POST",uploadHeaders:{},uploadCustomData:{},onBeforeSend:null,onUploadStarted:null,onUploaded:null,onFilesUploaded:null,onProgress:null,onUploadError:null,onUploadAborted:null,onDropZoneEnter:null,onDropZoneLeave:null,allowedFileExtensions:[],maxFileSize:0,minFileSize:0,inputAttr:{},invalidFileExtensionMessage:l.a.format("dxFileUploader-invalidFileExtension"),invalidMaxFileSizeMessage:l.a.format("dxFileUploader-invalidMaxFileSize"),invalidMinFileSizeMessage:l.a.format("dxFileUploader-invalidMinFileSize"),extendSelection:!0,validationMessageMode:"always",uploadFile:null,uploadChunk:null,abortUpload:null,validationMessageOffset:{h:0,v:0},hoverStateEnabled:!0,useNativeInputClick:!1,useDragOver:!0,nativeDropSupported:!0,_uploadButtonType:"normal"})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>"desktop"===Pe.a.real().deviceType&&!Pe.a.isSimulator(),options:{focusStateEnabled:!0}},{device:[{platform:"android"}],options:{validationMessageOffset:{v:0}}},{device:()=>"desktop"!==Pe.a.real().deviceType,options:{useDragOver:!1}},{device:()=>!un(),options:{uploadMode:"useForm"}},{device:()=>"desktop"!==Pe.a.real().deviceType,options:{nativeDropSupported:!1}},{device:()=>Object(y.d)(),options:{_uploadButtonType:"default"}}])}_initOptions(e){var t="labelText"in e;super._initOptions(e),t||this._shouldDragOverBeRendered()||this.option("labelText","")}_init(){super._init(),this._initFileInput(),this._initLabel(),this._setUploadStrategy(),this._createFiles(),this._createBeforeSendAction(),this._createUploadStartedAction(),this._createUploadedAction(),this._createFilesUploadedAction(),this._createProgressAction(),this._createUploadErrorAction(),this._createUploadAbortedAction(),this._createDropZoneEnterAction(),this._createDropZoneLeaveAction()}_setUploadStrategy(){var e=null;if(this.option("chunkSize")>0){var t=this.option("uploadChunk");e=t&&Object(o.h)(t)?new gn(this):new mn(this)}else{var n=this.option("uploadFile");e=n&&Object(o.h)(n)?new bn(this):new _n(this)}this._uploadStrategy=e}_initFileInput(){this._isCustomClickEvent=!1,this._$fileInput||(this._$fileInput=Object(r.a)("<input>").attr("type","file"),m.a.on(this._$fileInput,"change",this._inputChangeHandler.bind(this)),m.a.on(this._$fileInput,"click",e=>(e.stopPropagation(),this._resetInputValue(),this.option("useNativeInputClick")||this._isCustomClickEvent))),this._$fileInput.prop({multiple:this.option("multiple"),accept:this.option("accept"),tabIndex:-1})}_inputChangeHandler(){if(!this._doPreventInputChange){var e=this._$fileInput.val().replace(/^.*\\/,""),t=this._$fileInput.prop("files");if(!t||t.length||"useForm"===this.option("uploadMode")){var n=t?this._getFiles(t):[{name:e}];this._changeValue(n),"instantly"===this.option("uploadMode")&&this._uploadFiles()}}}_shouldFileListBeExtended(){return"useForm"!==this.option("uploadMode")&&this.option("extendSelection")&&this.option("multiple")}_changeValue(e){var t=this._shouldFileListBeExtended()?this.option("value").slice():[];this.option("value",t.concat(e))}_getFiles(e){var t=[];return Object(Y.a)(e,(e,n)=>t.push(n)),t}_getFile(e){var t=Object(o.i)(e)?this.option("value")[e]:e;return this._files.filter(e=>e.value===t)[0]}_initLabel(){this._$inputLabel||(this._$inputLabel=Object(r.a)("<div>")),this._updateInputLabelText()}_updateInputLabelText(){var e=this._isInteractionDisabled()?"":this.option("labelText");this._$inputLabel.text(e)}_focusTarget(){return this.$element().find(".dx-fileuploader-button")}_getSubmitElement(){return this._$fileInput}_initMarkup(){super._initMarkup(),this.$element().addClass("dx-fileuploader"),this._renderWrapper(),this._renderInputWrapper(),this._renderSelectButton(),this._renderInputContainer(),this._renderUploadButton(),this._preventRecreatingFiles=!0,this._activeDropZone=null}_render(){this._preventRecreatingFiles=!1,this._attachDragEventHandlers(this._$inputWrapper),this._attachDragEventHandlers(this.option("dropZone")),this._renderFiles(),super._render()}_createFileProgressBar(e){e.progressBar=this._createProgressBar(e.value.size),e.progressBar.$element().appendTo(e.$file),this._initStatusMessage(e),this._ensureCancelButtonInitialized(e)}_setStatusMessage(e,t){setTimeout(()=>{this.option("showFileList")&&e.$statusMessage&&(e.$statusMessage.text(t),e.$statusMessage.css("display",""),e.progressBar.$element().remove())},400)}_getUploadAbortedStatusMessage(){return"instantly"===this.option("uploadMode")?this.option("uploadAbortedMessage"):this.option("readyToUploadMessage")}_createFiles(){var e=this.option("value");!this._files||0!==e.length&&this._shouldFileListBeExtended()||(this._preventFilesUploading(this._files),this._files=null),this._files||(this._files=[]),Object(Y.a)(e.slice(this._files.length),(e,t)=>{var n=this._createFile(t);this._validateFile(n),this._files.push(n)})}_preventFilesUploading(e){e.forEach(e=>this._uploadStrategy.abortUpload(e))}_validateFile(e){e.isValidFileExtension=this._validateFileExtension(e),e.isValidMinSize=this._validateMinFileSize(e),e.isValidMaxSize=this._validateMaxFileSize(e)}_validateFileExtension(e){var t=this.option("allowedFileExtensions"),n=this.option("accept"),r=this._getAllowedFileTypes(n),i=e.value.name.substring(e.value.name.lastIndexOf(".")).toLowerCase();if(0!==n.length&&!this._isFileTypeAllowed(e.value,r))return!1;if(0===t.length)return!0;for(var o=0;o<t.length;o++)if(i===t[o].toLowerCase())return!0;return!1}_validateMaxFileSize(e){var t=e.value.size,n=this.option("maxFileSize");return!(n>0)||t<=n}_validateMinFileSize(e){var t=e.value.size,n=this.option("minFileSize");return!(n>0)||t>=n}_createBeforeSendAction(){this._beforeSendAction=this._createActionByOption("onBeforeSend",{excludeValidators:["readOnly"]})}_createUploadStartedAction(){this._uploadStartedAction=this._createActionByOption("onUploadStarted",{excludeValidators:["readOnly"]})}_createUploadedAction(){this._uploadedAction=this._createActionByOption("onUploaded",{excludeValidators:["readOnly"]})}_createFilesUploadedAction(){this._filesUploadedAction=this._createActionByOption("onFilesUploaded",{excludeValidators:["readOnly"]})}_createProgressAction(){this._progressAction=this._createActionByOption("onProgress",{excludeValidators:["readOnly"]})}_createUploadAbortedAction(){this._uploadAbortedAction=this._createActionByOption("onUploadAborted",{excludeValidators:["readOnly"]})}_createUploadErrorAction(){this._uploadErrorAction=this._createActionByOption("onUploadError",{excludeValidators:["readOnly"]})}_createDropZoneEnterAction(){this._dropZoneEnterAction=this._createActionByOption("onDropZoneEnter")}_createDropZoneLeaveAction(){this._dropZoneLeaveAction=this._createActionByOption("onDropZoneLeave")}_createFile(e){return{value:e,loadedSize:0,onProgress:Object(sn.default)(),onAbort:Object(sn.default)(),onLoad:Object(sn.default)(),onError:Object(sn.default)(),onLoadStart:Object(sn.default)(),isValidFileExtension:!0,isValidMaxSize:!0,isValidMinSize:!0,isValid(){return this.isValidFileExtension&&this.isValidMaxSize&&this.isValidMinSize},isInitialized:!1}}_resetFileState(e){e.isAborted=!1,e.uploadStarted=!1,e.isStartLoad=!1,e.loadedSize=0,e.chunksData=void 0,e.request=void 0}_renderFiles(){var e,t=this.option("value");this._$filesContainer?this._shouldFileListBeExtended()&&0!==t.length||this._$filesContainer.empty():this._$filesContainer=Object(r.a)("<div>").addClass("dx-fileuploader-files-container").appendTo(this._$content);var n=this.option("showFileList");n&&Object(Y.a)(this._files,(e,t)=>{t.$file||this._renderFile(t)}),this.$element().toggleClass("dx-fileuploader-show-file-list",n),this._toggleFileUploaderEmptyClassName(),this._updateFileNameMaxWidth(),null===(e=this._validationMessage)||void 0===e||e.repaint()}_renderFile(e){var t=e.value,n=Object(r.a)("<div>").addClass("dx-fileuploader-file-container").appendTo(this._$filesContainer);this._renderFileButtons(e,n),e.$file=Object(r.a)("<div>").addClass("dx-fileuploader-file").appendTo(n);var i=Object(r.a)("<div>").addClass("dx-fileuploader-file-info").appendTo(e.$file);e.$statusMessage=Object(r.a)("<div>").addClass("dx-fileuploader-file-status-message").appendTo(e.$file),Object(r.a)("<div>").addClass("dx-fileuploader-file-name").text(t.name).appendTo(i),Object(o.d)(t.size)&&Object(r.a)("<div>").addClass("dx-fileuploader-file-size").text(this._getFileSize(t.size)).appendTo(i),e.isValid()?e.$statusMessage.text(this.option("readyToUploadMessage")):(e.isValidFileExtension||e.$statusMessage.append(this._createValidationElement("invalidFileExtensionMessage")),e.isValidMaxSize||e.$statusMessage.append(this._createValidationElement("invalidMaxFileSizeMessage")),e.isValidMinSize||e.$statusMessage.append(this._createValidationElement("invalidMinFileSizeMessage")),n.addClass("dx-fileuploader-invalid"))}_createValidationElement(e){return Object(r.a)("<span>").text(this.option(e))}_updateFileNameMaxWidth(){var e=this.option("allowCanceling")&&"useForm"!==this.option("uploadMode")?1:0,t="useButtons"===this.option("uploadMode")?1:0,n=Object(qe.l)(this._$filesContainer.find(".dx-fileuploader-file-container").first())||Object(qe.l)(this._$filesContainer),r=this._$filesContainer.find(".dx-fileuploader-button-container").eq(0),i=Object(qe.l)(r)*(e+t),o=this._$filesContainer.find(".dx-fileuploader-file-size").eq(0),a=o.text();o.text("1000 Mb");var s=Object(qe.l)(o);o.text(a),this._$filesContainer.find(".dx-fileuploader-file-name").css("maxWidth",n-i-s)}_renderFileButtons(e,t){var n=this._getCancelButton(e);n&&t.append(n);var r=this._getUploadButton(e);r&&t.append(r)}_getCancelButton(e){return"useForm"===this.option("uploadMode")?null:(e.cancelButton=this._createComponent(Object(r.a)("<div>").addClass("dx-fileuploader-button dx-fileuploader-cancel-button"),Ie.default,{onClick:()=>this._removeFile(e),icon:"close",visible:this.option("allowCanceling"),disabled:this.option("readOnly"),integrationOptions:{},hoverStateEnabled:this.option("hoverStateEnabled")}),Object(r.a)("<div>").addClass("dx-fileuploader-button-container").append(e.cancelButton.$element()))}_getUploadButton(e){return e.isValid()&&"useButtons"===this.option("uploadMode")?(e.uploadButton=this._createComponent(Object(r.a)("<div>").addClass("dx-fileuploader-button dx-fileuploader-upload-button"),Ie.default,{onClick:()=>this._uploadFile(e),icon:"upload",hoverStateEnabled:this.option("hoverStateEnabled")}),e.onLoadStart.add(()=>e.uploadButton.option({visible:!1,disabled:!0})),e.onAbort.add(()=>e.uploadButton.option({visible:!0,disabled:!1})),Object(r.a)("<div>").addClass("dx-fileuploader-button-container").append(e.uploadButton.$element())):null}_removeFile(e){var t;null===(t=e.$file)||void 0===t||t.parent().remove(),this._files.splice(Object(v.d)(e,this._files),1);var n=this.option("value").slice();n.splice(Object(v.d)(e.value,n),1),this._preventRecreatingFiles=!0,this.option("value",n),this._preventRecreatingFiles=!1,this._toggleFileUploaderEmptyClassName(),this._resetInputValue(!0)}removeFile(e){if("useForm"!==this.option("uploadMode")&&Object(o.d)(e)){var t=this._getFile(e);t&&(t.uploadStarted&&this._preventFilesUploading([t]),this._removeFile(t))}}_toggleFileUploaderEmptyClassName(){this.$element().toggleClass("dx-fileuploader-empty",!this._files.length||this._hasInvalidFile(this._files))}_hasInvalidFile(e){for(var t=0;t<e.length;t++)if(!e[t].isValid())return!0;return!1}_getFileSize(e){for(var t=0,n=[l.a.format("dxFileUploader-bytes"),l.a.format("dxFileUploader-kb"),l.a.format("dxFileUploader-Mb"),l.a.format("dxFileUploader-Gb")],r=n.length-1;t<r&&e>=1024;)e/=1024,t++;return Math.round(e)+" "+n[t]}_renderSelectButton(){var e=Object(r.a)("<div>").addClass("dx-fileuploader-button").appendTo(this._$inputWrapper);this._selectButton=this._createComponent(e,Ie.default,{text:this.option("selectButtonText"),focusStateEnabled:!1,integrationOptions:{},disabled:this.option("readOnly"),hoverStateEnabled:this.option("hoverStateEnabled")}),this._selectFileDialogHandler=this._selectButtonClickHandler.bind(this),"desktop"===Pe.a.real().deviceType?this._selectButton.option("onClick",this._selectFileDialogHandler):this._attachSelectFileDialogHandler(this._selectButton.$element()),this._attachSelectFileDialogHandler(this.option("dialogTrigger"))}_selectButtonClickHandler(){if(!this.option("useNativeInputClick")){if(this._isInteractionDisabled())return!1;this._isCustomClickEvent=!0,m.a.trigger(this._$fileInput,"click"),this._isCustomClickEvent=!1}}_attachSelectFileDialogHandler(e){Object(o.d)(e)&&(this._detachSelectFileDialogHandler(e),m.a.on(Object(r.a)(e),"click",this._selectFileDialogHandler))}_detachSelectFileDialogHandler(e){Object(o.d)(e)&&m.a.off(Object(r.a)(e),"click",this._selectFileDialogHandler)}_renderUploadButton(){if("useButtons"===this.option("uploadMode")){var e=Object(r.a)("<div>").addClass("dx-fileuploader-button").addClass("dx-fileuploader-upload-button").appendTo(this._$content);this._uploadButton=this._createComponent(e,Ie.default,{text:this.option("uploadButtonText"),onClick:this._uploadButtonClickHandler.bind(this),type:this.option("_uploadButtonType"),integrationOptions:{},hoverStateEnabled:this.option("hoverStateEnabled")})}}_uploadButtonClickHandler(){this._uploadFiles()}_shouldDragOverBeRendered(){return!this.option("readOnly")&&("useForm"!==this.option("uploadMode")||this.option("nativeDropSupported"))}_isInteractionDisabled(){return this.option("readOnly")||this.option("disabled")}_renderInputContainer(){this._$inputContainer=Object(r.a)("<div>").addClass("dx-fileuploader-input-container").appendTo(this._$inputWrapper),this._$fileInput.addClass("dx-fileuploader-input"),this._renderInput();var e="dx-fileuploader-input-label-".concat(new L.a);this._$inputLabel.attr("id",e).addClass("dx-fileuploader-input-label").appendTo(this._$inputContainer),this.setAria("labelledby",e,this._$fileInput)}_renderInput(){this.option("useNativeInputClick")?this._selectButton.option("template",this._selectButtonInputTemplate.bind(this)):(this._$fileInput.appendTo(this._$inputContainer),this._selectButton.option("template","content")),this._applyInputAttributes(this.option("inputAttr"))}_selectButtonInputTemplate(e,t){var n=Object(r.a)(t),i=Object(r.a)("<span>").addClass("dx-button-text").text(e.text);return n.append(i).append(this._$fileInput),n}_renderInputWrapper(){this._$inputWrapper=Object(r.a)("<div>").addClass("dx-fileuploader-input-wrapper").appendTo(this._$content)}_detachDragEventHandlers(e){Object(o.d)(e)&&m.a.off(Object(r.a)(e),Object(De.a)("",this.NAME))}_attachDragEventHandlers(e){var t=e!==this._$inputWrapper;Object(o.d)(e)&&this._shouldDragOverBeRendered()&&(this._detachDragEventHandlers(e),e=Object(r.a)(e),m.a.on(e,Object(De.a)("dragenter",this.NAME),this._dragEnterHandler.bind(this,t)),m.a.on(e,Object(De.a)("dragover",this.NAME),this._dragOverHandler.bind(this,t)),m.a.on(e,Object(De.a)("dragleave",this.NAME),this._dragLeaveHandler.bind(this,t)),m.a.on(e,Object(De.a)("drop",this.NAME),this._dropHandler.bind(this,t)))}_applyInputAttributes(e){this._$fileInput.attr(e)}_useInputForDrop(){return this.option("nativeDropSupported")&&"useForm"===this.option("uploadMode")}_getDropZoneElement(e,t){var n=e?Array.from(Object(r.a)(this.option("dropZone"))):[this._$inputWrapper];return(n=n.map(e=>Object(r.a)(e).get(0)))[n.indexOf(t.currentTarget)]}_dragEnterHandler(e,t){if(this.option("disabled"))return!1;this._useInputForDrop()||t.preventDefault();var n=this._getDropZoneElement(e,t);Object(o.d)(n)&&null===this._activeDropZone&&this.isMouseOverElement(t,n,!1)&&(this._activeDropZone=n,this._tryToggleDropZoneActive(!0,e,t))}_dragOverHandler(e,t){if(this._useInputForDrop()||t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy",!e){var n=this._getDropZoneElement(!1,t);null===this._activeDropZone&&this.isMouseOverElement(t,n,!1)&&this._dragEnterHandler(!1,t),null!==this._activeDropZone&&this._shouldRaiseDragLeave(t,!1)&&this._dragLeaveHandler(!1,t)}}_dragLeaveHandler(e,t){this._useInputForDrop()||t.preventDefault(),null!==this._activeDropZone&&this._shouldRaiseDragLeave(t,e)&&(this._tryToggleDropZoneActive(!1,e,t),this._activeDropZone=null)}_shouldRaiseDragLeave(e,t){return!this.isMouseOverElement(e,this._activeDropZone,!t)}_tryToggleDropZoneActive(e,t,n){var r=e?"addClass":"removeClass";this[e?"_dropZoneEnterAction":"_dropZoneLeaveAction"]({event:n,dropZoneElement:this._activeDropZone}),t||this.$element()[r]("dx-fileuploader-dragover")}_dropHandler(e,t){if(this._activeDropZone=null,e||this.$element().removeClass("dx-fileuploader-dragover"),!(this._useInputForDrop()||e&&this._isInteractionDisabled())){t.preventDefault();var n=t.originalEvent.dataTransfer.files,r=this._getFiles(n);!this.option("multiple")&&r.length>1||(this._changeValue(r),"instantly"===this.option("uploadMode")&&this._uploadFiles())}}_areAllFilesLoaded(){return this._files.every(e=>!e.isValid()||e._isError||e._isLoaded||e.isAborted)}_handleAllFilesUploaded(){this._recalculateProgress(),this._areAllFilesLoaded()&&this._filesUploadedAction()}_getAllowedFileTypes(e){return e.length?e.split(",").map(e=>e.trim()):[]}_isFileTypeAllowed(e,t){for(var n=0,r=t.length;n<r;n++){var i=t[n];if("."===i[0]){if(i=i.replace(".","\\."),e.name.match(new RegExp(i+"$","i")))return!0}else if(i=i.replace(new RegExp("\\*","g"),""),e.type.match(new RegExp(i,"i")))return!0}return!1}_renderWrapper(){var e=Object(r.a)("<div>").addClass("dx-fileuploader-wrapper").appendTo(this.$element()),t=Object(r.a)("<div>").addClass("dx-fileuploader-container").appendTo(e);this._$content=Object(r.a)("<div>").addClass("dx-fileuploader-content").appendTo(t)}_clean(){this._$fileInput.detach(),delete this._$filesContainer,this._detachSelectFileDialogHandler(this.option("dialogTrigger")),this._detachDragEventHandlers(this.option("dropZone")),this._files&&this._files.forEach(e=>{e.$file=null,e.$statusMessage=null}),super._clean()}abortUpload(e){if("useForm"!==this.option("uploadMode"))if(Object(o.d)(e)){var t=this._getFile(e);t&&this._preventFilesUploading([t])}else this._preventFilesUploading(this._files)}upload(e){if("useForm"!==this.option("uploadMode"))if(Object(o.d)(e)){var t=this._getFile(e);t&&un()&&this._uploadFile(t)}else this._uploadFiles()}_uploadFiles(){un()&&Object(Y.a)(this._files,(e,t)=>this._uploadFile(t))}_uploadFile(e){this._uploadStrategy.upload(e)}_updateProgressBar(e,t){e.progressBar&&e.progressBar.option({value:t.loaded,showStatus:!0}),this._progressAction({file:e.value,segmentSize:t.currentSegmentSize,bytesLoaded:t.loaded,bytesTotal:t.total,event:t.event,request:e.request})}_updateTotalProgress(e,t){var n=0;Object(o.d)(e)&&(this._files.length>0&&this._areAllFilesLoaded()&&0===e&&0===t?n=this._getProgressValue(1):e&&(n=this._getProgressValue(t/e))),this.option("progress",n),this._setLoadedSize(t)}_getProgressValue(e){return Math.floor(100*e)}_initStatusMessage(e){e.$statusMessage.css("display","none")}_ensureCancelButtonInitialized(e){if(!e.isInitialized){e.cancelButton.option("onClick",()=>{this._preventFilesUploading([e]),this._removeFile(e)});var t=()=>{setTimeout(()=>{e.cancelButton.option({visible:!1})},400)};e.onLoad.add(t),e.onError.add(t)}}_createProgressBar(e){return this._createComponent(Object(r.a)("<div>"),dt,{value:void 0,min:0,max:e,statusFormat:e=>this._getProgressValue(e)+"%",showStatus:!1,statusPosition:"right"})}_getTotalFilesSize(){return this._totalFilesSize||(this._totalFilesSize=0,Object(Y.a)(this._files,(e,t)=>{this._totalFilesSize+=t.value.size})),this._totalFilesSize}_getTotalLoadedFilesSize(){return this._totalLoadedFilesSize||(this._totalLoadedFilesSize=0,Object(Y.a)(this._files,(e,t)=>{this._totalLoadedFilesSize+=t.loadedSize})),this._totalLoadedFilesSize}_setLoadedSize(e){this._totalLoadedFilesSize=e}_recalculateProgress(){this._totalFilesSize=0,this._totalLoadedFilesSize=0,this._updateTotalProgress(this._getTotalFilesSize(),this._getTotalLoadedFilesSize())}isMouseOverElement(e,t,n){if(!t)return!1;var r=n?parseFloat(cn.getComputedStyle(t,":before").height):0,i=n?parseFloat(cn.getComputedStyle(t,":after").height):0,o=Object(qe.g)(t).left,a=Object(qe.g)(t).top+r,s=t.offsetWidth,l=t.offsetHeight-r-i,c=this._getEventX(e),u=this._getEventY(e);return c>=o&&c<o+s&&u>=a&&u<a+l}_getEventX(e){return Object(De.m)(e)?this._getTouchEventX(e):e.clientX+this._getDocumentScrollLeft()}_getEventY(e){return Object(De.m)(e)?this._getTouchEventY(e):e.clientY+this._getDocumentScrollTop()}_getTouchEventX(e){var t=null;return e.changedTouches.length>0?t=e.changedTouches:e.targetTouches.length>0&&(t=e.targetTouches),t?t[0].pageX:0}_getTouchEventY(e){var t=null;return e.changedTouches.length>0?t=e.changedTouches:e.targetTouches.length>0&&(t=e.targetTouches),t?t[0].pageY:0}_getDocumentScrollTop(){var e=f.default.getDocument();return e.documentElement.scrollTop||e.body.scrollTop}_getDocumentScrollLeft(){var e=f.default.getDocument();return e.documentElement.scrollLeft||e.body.scrollLeft}_updateReadOnlyState(){var e=this.option("readOnly");this._selectButton.option("disabled",e),this._files.forEach(t=>{var n;return null===(n=t.cancelButton)||void 0===n?void 0:n.option("disabled",e)}),this._updateInputLabelText(),this._attachDragEventHandlers(this._$inputWrapper)}_updateHoverState(){var e,t,n=this.option("hoverStateEnabled");null===(e=this._selectButton)||void 0===e||e.option("hoverStateEnabled",n),null===(t=this._uploadButton)||void 0===t||t.option("hoverStateEnabled",n),this._files.forEach(e=>{var t,r;null===(t=e.uploadButton)||void 0===t||t.option("hoverStateEnabled",n),null===(r=e.cancelButton)||void 0===r||r.option("hoverStateEnabled",n)})}_optionChanged(e){var{name:t,value:n,previousValue:r}=e;switch(t){case"height":case"width":this._updateFileNameMaxWidth(),super._optionChanged(e);break;case"value":!n.length&&this._$fileInput.val(""),this._preventRecreatingFiles||(this._createFiles(),this._renderFiles()),this._recalculateProgress(),super._optionChanged(e);break;case"name":this._initFileInput(),super._optionChanged(e);break;case"accept":this._initFileInput();break;case"multiple":this._initFileInput(),e.value||this.reset();break;case"readOnly":this._updateReadOnlyState(),super._optionChanged(e);break;case"disabled":this._updateInputLabelText(),super._optionChanged(e);break;case"selectButtonText":this._selectButton.option("text",n);break;case"uploadButtonText":this._uploadButton&&this._uploadButton.option("text",n);break;case"_uploadButtonType":this._uploadButton&&this._uploadButton.option("type",n);break;case"dialogTrigger":this._detachSelectFileDialogHandler(r),this._attachSelectFileDialogHandler(n);break;case"dropZone":this._detachDragEventHandlers(r),this._attachDragEventHandlers(n);break;case"maxFileSize":case"minFileSize":case"allowedFileExtensions":case"invalidFileExtensionMessage":case"invalidMaxFileSizeMessage":case"invalidMinFileSizeMessage":case"readyToUploadMessage":case"uploadedMessage":case"uploadFailedMessage":case"uploadAbortedMessage":this._invalidate();break;case"labelText":this._updateInputLabelText();break;case"showFileList":this._preventRecreatingFiles||this._renderFiles();break;case"uploadFile":case"uploadChunk":case"chunkSize":this._setUploadStrategy();break;case"abortUpload":case"uploadUrl":case"progress":case"uploadMethod":case"uploadHeaders":case"uploadCustomData":case"extendSelection":break;case"hoverStateEnabled":this._updateHoverState(),super._optionChanged(e);break;case"allowCanceling":case"uploadMode":this.reset(),this._invalidate();break;case"onBeforeSend":this._createBeforeSendAction();break;case"onUploadStarted":this._createUploadStartedAction();break;case"onUploaded":this._createUploadedAction();break;case"onFilesUploaded":this._createFilesUploadedAction();break;case"onProgress":this._createProgressAction();break;case"onUploadError":this._createUploadErrorAction();break;case"onUploadAborted":this._createUploadAbortedAction();break;case"onDropZoneEnter":this._createDropZoneEnterAction();break;case"onDropZoneLeave":this._createDropZoneLeaveAction();break;case"useNativeInputClick":this._renderInput();break;case"useDragOver":this._attachDragEventHandlers(this._$inputWrapper);break;case"nativeDropSupported":this._invalidate();break;case"inputAttr":this._applyInputAttributes(this.option(t));break;default:super._optionChanged(e)}}_resetInputValue(e){("useForm"!==this.option("uploadMode")||e)&&(this._doPreventInputChange=!0,this._$fileInput.val(""),this._doPreventInputChange=!1)}reset(){this.option("value",[])}}class hn{constructor(e,t){this.file=e,this.chunkSize=t,this.index=0}read(){if(!this.file)return null;var e=this.createBlobResult(this.file,this.index,this.chunkSize);return e.isCompleted&&(this.file=null),this.index++,e}createBlobResult(e,t,n){var r=t*n;return{blob:this.sliceFile(e,r,n),index:t,isCompleted:r+n>=e.size}}sliceFile(e,t,n){return e.slice?e.slice(t,t+n):e.webkitSlice?e.webkitSlice(t,t+n):null}}class pn{constructor(e){this.fileUploader=e}upload(e){e.isInitialized&&e.isAborted&&this.fileUploader._resetFileState(e),e.isValid()&&!e.uploadStarted&&(this._prepareFileBeforeUpload(e),this._uploadCore(e))}abortUpload(e){if(!(e._isError||e._isLoaded||e.isAborted)&&e.uploadStarted&&(e.isAborted=!0,e.request&&e.request.abort(),this._isCustomCallback("abortUpload"))){var t=this.fileUploader.option("abortUpload"),n=this._createUploadArgument(e),r=null;try{var i=t(e.value,n);r=Object(a.b)(i)}catch(e){r=(new a.a).reject(e).promise()}r.done(()=>e.onAbort.fire()).fail(t=>this._handleFileError(e,t))}}_beforeSend(e,t){var n=this._createUploadArgument(t);this.fileUploader._beforeSendAction({request:e,file:t.value,uploadInfo:n}),t.request=e}_createUploadArgument(e){}_uploadCore(e){}_isCustomCallback(e){var t=this.fileUploader.option(e);return t&&Object(o.h)(t)}_handleProgress(e,t){e._isError||(e._isProgressStarted=!0,this._handleProgressCore(e,t))}_handleProgressCore(e,t){}_handleFileError(e,t){e._isError=!0,e.onError.fire(t)}_prepareFileBeforeUpload(e){var t;e.$file&&(null===(t=e.progressBar)||void 0===t||t.dispose(),this.fileUploader._createFileProgressBar(e));e.isInitialized||(e.onLoadStart.add(this._onUploadStarted.bind(this,e)),e.onLoad.add(this._onLoadedHandler.bind(this,e)),e.onError.add(this._onErrorHandler.bind(this,e)),e.onAbort.add(this._onAbortHandler.bind(this,e)),e.onProgress.add(this._onProgressHandler.bind(this,e)),e.isInitialized=!0)}_shouldHandleError(e,t){return(this._isStatusError(t.status)||!e._isProgressStarted)&&!e.isAborted}_isStatusError(e){return 400<=e&&e<500||500<=e&&e<600}_onUploadStarted(e,t){e.uploadStarted=!0,this.fileUploader._uploadStartedAction({file:e.value,event:t,request:e.request})}_onAbortHandler(e,t){var n={file:e.value,event:t,request:e.request,message:this.fileUploader._getUploadAbortedStatusMessage()};this.fileUploader._uploadAbortedAction(n),this.fileUploader._setStatusMessage(e,n.message),this.fileUploader._handleAllFilesUploaded()}_onErrorHandler(e,t){var n={file:e.value,event:void 0,request:e.request,error:t,message:this.fileUploader.option("uploadFailedMessage")};this.fileUploader._uploadErrorAction(n),this.fileUploader._setStatusMessage(e,n.message),this.fileUploader._handleAllFilesUploaded()}_onLoadedHandler(e,t){var n={file:e.value,event:t,request:e.request,message:this.fileUploader.option("uploadedMessage")};e._isLoaded=!0,this.fileUploader._uploadedAction(n),this.fileUploader._setStatusMessage(e,n.message),this.fileUploader._handleAllFilesUploaded()}_onProgressHandler(e,t){if(e){var n=this.fileUploader._getTotalFilesSize(),r=this.fileUploader._getTotalLoadedFilesSize(),i=Math.min(t.loaded,e.value.size),o=i-e.loadedSize;e.loadedSize=i,this.fileUploader._updateTotalProgress(n,r+o),this.fileUploader._updateProgressBar(e,this._getLoadedData(i,t.total,o,t))}}_getLoadedData(e,t,n,r){return{loaded:e,total:t,currentSegmentSize:n}}_extendFormData(e){var t=this.fileUploader.option("uploadCustomData");for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&Object(o.d)(t[n])&&e.append(n,t[n])}}class fn extends pn{constructor(e){super(e),this.chunkSize=this.fileUploader.option("chunkSize")}_uploadCore(e){var t=e.value,n={name:t.name,loadedBytes:0,type:t.type,blobReader:new hn(t,this.chunkSize),guid:new L.a,fileSize:t.size,count:this._getFileChunksCount(t),customData:{}};e.chunksData=n,this._sendChunk(e,n)}_getFileChunksCount(e){return 0===e.size?1:Math.ceil(e.size/this.chunkSize)}_sendChunk(e,t){var n=t.blobReader.read();t.currentChunk=n,n&&this._sendChunkCore(e,t,n).done(()=>{e.isAborted||(t.loadedBytes+=n.blob.size,e.onProgress.fire({loaded:t.loadedBytes,total:e.value.size}),n.isCompleted&&e.onLoad.fire(),setTimeout(()=>this._sendChunk(e,t)))}).fail(t=>{this._shouldHandleError(e,t)&&this._handleFileError(e,t)})}_sendChunkCore(e,t,n){}_tryRaiseStartLoad(e){e.isStartLoad||(e.isStartLoad=!0,e.onLoadStart.fire())}_getEvent(e){return null}_createUploadArgument(e){return this._createChunksInfo(e.chunksData)}_createChunksInfo(e){return{bytesUploaded:e.loadedBytes,chunkCount:e.count,customData:e.customData,chunkBlob:e.currentChunk.blob,chunkIndex:e.currentChunk.index}}}class mn extends fn{_sendChunkCore(e,t,n){return X.a.sendRequest({url:this.fileUploader.option("uploadUrl"),method:this.fileUploader.option("uploadMethod"),headers:this.fileUploader.option("uploadHeaders"),beforeSend:t=>this._beforeSend(t,e),upload:{onprogress:t=>this._handleProgress(e,t),onloadstart:()=>this._tryRaiseStartLoad(e),onabort:()=>e.onAbort.fire()},data:this._createFormData({fileName:t.name,blobName:this.fileUploader.option("name"),blob:n.blob,index:n.index,count:t.count,type:t.type,guid:t.guid,size:t.fileSize})})}_createFormData(e){var t=new cn.FormData;return t.append(e.blobName,e.blob),t.append("chunkMetadata",JSON.stringify({FileName:e.fileName,Index:e.index,TotalCount:e.count,FileSize:e.size,FileType:e.type,FileGuid:e.guid})),this._extendFormData(t),t}}class gn extends fn{_sendChunkCore(e,t){this._tryRaiseStartLoad(e);var n=this._createChunksInfo(t),r=this.fileUploader.option("uploadChunk");try{var i=r(e.value,n);return Object(a.b)(i)}catch(e){return(new a.a).reject(e).promise()}}_shouldHandleError(e,t){return!0}}class vn extends pn{_uploadCore(e){e.loadedSize=0,this._uploadFile(e).done(()=>{e.isAborted||e.onLoad.fire()}).fail(t=>{this._shouldHandleError(e,t)&&this._handleFileError(e,t)})}_uploadFile(e){}_handleProgressCore(e,t){e.onProgress.fire(t)}_getLoadedData(e,t,n,r){var i=super._getLoadedData(e,t,n,r);return i.event=r,i}}class _n extends vn{_uploadFile(e){return X.a.sendRequest({url:this.fileUploader.option("uploadUrl"),method:this.fileUploader.option("uploadMethod"),headers:this.fileUploader.option("uploadHeaders"),beforeSend:t=>this._beforeSend(t,e),upload:{onprogress:t=>this._handleProgress(e,t),onloadstart:()=>e.onLoadStart.fire(),onabort:()=>e.onAbort.fire()},data:this._createFormData(this.fileUploader.option("name"),e.value)})}_createFormData(e,t){var n=new cn.FormData;return n.append(e,t,t.name),this._extendFormData(n),n}}class bn extends vn{_uploadFile(e){e.onLoadStart.fire();var t=this.fileUploader.option("uploadFile");try{var n=t(e.value,t=>{var n={loaded:t,total:e.value.size};this._handleProgress(e,n)});return Object(a.b)(n)}catch(e){return(new a.a).reject(e).promise()}}_shouldHandleError(e,t){return!0}}Object(c.a)("dxFileUploader",dn);var yn=dn;class Cn extends u.a{_initMarkup(){this._initActions(),this.$element().addClass("dx-filemanager-fileuploader"),this._uploaderInfos=[],this._createInternalFileUploader(),this._createDropZonePlaceholder(),this._setDropZonePlaceholderVisible(!1),super._initMarkup()}_createInternalFileUploader(){var e=this._getController().chunkSize,t=Object(r.a)("<div>").appendTo(this.$element()),n=this._createComponent(t,yn,{name:"file",multiple:!0,showFileList:!1,activeStateEnabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,labelText:"",readyToUploadMessage:"",accept:"*",chunkSize:e,dropZone:this.option("dropZone"),onValueChanged:e=>this._onFileUploaderValueChanged(e),onProgress:e=>this._onFileUploaderProgress(e),onUploaded:e=>this._onFileUploaderUploaded(e),onFilesUploaded:e=>this._onFileUploaderAllFilesUploaded(e),onUploadAborted:e=>this._onFileUploaderUploadAborted(e),onUploadError:e=>this._onFileUploaderUploadError(e),onDropZoneEnter:()=>this._setDropZonePlaceholderVisible(!0),onDropZoneLeave:()=>this._setDropZonePlaceholderVisible(!1)});n.option({uploadChunk:(e,t)=>this._fileUploaderUploadChunk(n,e,t),abortUpload:(e,t)=>this._fileUploaderAbortUpload(n,e,t)}),n._shouldRaiseDragLeaveBase=n._shouldRaiseDragLeave,n._shouldRaiseDragLeave=e=>this._shouldRaiseDragLeave(e,n);var i={fileUploader:n};this._uploaderInfos.push(i)}tryUpload(){var e=this._findAndUpdateAvailableUploaderInfo();e&&e.fileUploader._selectButtonClickHandler()}cancelUpload(e){this._cancelUpload(e)}cancelFileUpload(e,t){this._cancelUpload(e,t)}_cancelUpload(e,t){var{fileUploader:n}=this._findUploaderInfoBySessionId(e);n.abortUpload(t)}_fileUploaderUploadChunk(e,t,n){var{session:r,fileIndex:i}=this._findSessionByFile(e,t),o=r.controller;return n.fileIndex=i,o.uploadFileChunk(t,n)}_fileUploaderAbortUpload(e,t,n){var{session:r,fileIndex:i}=this._findSessionByFile(e,t),o=r.controller;return n.fileIndex=i,o.abortFileUpload(t,n)}_onFileUploaderValueChanged(e){var{component:t,value:n}=e;if(0!==n.length){var r=n.slice(),i=this._findUploaderInfo(t);this._uploadFiles(i,r),setTimeout(()=>{this._findAndUpdateAvailableUploaderInfo()||this._createInternalFileUploader()})}}_onFileUploaderProgress(e){var{component:t,file:n,bytesLoaded:r,bytesTotal:i}=e,{session:o,fileIndex:a}=this._findSessionByFile(t,n),s=0!==i?r/i:1,l=t.option("progress")/100,c={sessionId:o.id,fileIndex:a,commonValue:l,fileValue:s};this._raiseUploadProgress(c)}_onFileUploaderAllFilesUploaded(e){var{component:t}=e,{session:n}=this._findSessionByFile(t,t._files[0].value);this._raiseUploadFinished({sessionId:n.id,commonValue:t.option("progress")/100})}_onFileUploaderUploaded(e){var{component:t,file:n}=e;this._getDeferredForFile(t,n).resolve()}_onFileUploaderUploadAborted(e){var{component:t,file:n}=e;this._getDeferredForFile(t,n).resolve({canceled:!0})}_onFileUploaderUploadError(e){var{component:t,file:n,error:r}=e;this._getDeferredForFile(t,n).reject(r)}_createDropZonePlaceholder(){this._$dropZonePlaceholder=Object(r.a)("<div>").addClass("dx-filemanager-fileuploader-dropzone-placeholder").appendTo(this.option("dropZonePlaceholderContainer"))}_adjustDropZonePlaceholder(){var e=this.option("dropZone");if(Object(p.f)()&&0!==e.length){var t=parseFloat(this._$dropZonePlaceholder.css("borderTopWidth")),n=parseFloat(this._$dropZonePlaceholder.css("borderLeftWidth")),r=this.option("dropZonePlaceholderContainer"),i=parseFloat(r.css("borderBottomWidth")),o=parseFloat(r.css("borderLeftWidth")),a=Object(qe.e)(r),s=r.offset(),l=e.offset();this._$dropZonePlaceholder.css({top:l.top-s.top-a-i,left:l.left-s.left-o}),Object(qe.o)(this._$dropZonePlaceholder,e.get(0).offsetHeight-2*t),Object(qe.r)(this._$dropZonePlaceholder,e.get(0).offsetWidth-2*n)}}_setDropZonePlaceholderVisible(e){e?(this._adjustDropZonePlaceholder(),this._$dropZonePlaceholder.css("display","")):this._$dropZonePlaceholder.css("display","none")}_shouldRaiseDragLeave(e,t){return t.isMouseOverElement(e,this.option("splitterElement"))||t._shouldRaiseDragLeaveBase(e,!0)}_uploadFiles(e,t){this._setDropZonePlaceholderVisible(!1);var n=(new L.a).toString(),r=this._getController(),i=t.map(()=>new a.a),o={id:n,controller:r,files:t,deferreds:i};e.session=o;var s={sessionId:n,deferreds:i,files:t};return this._raiseUploadSessionStarted(s),D(i).always(()=>setTimeout(()=>{e.fileUploader.reset(),e.session=null}))}_getDeferredForFile(e,t){var{session:n,fileIndex:r}=this._findSessionByFile(e,t);return n.deferreds[r]}_findSessionByFile(e,t){var n=this._findUploaderInfo(e).session,r=n.files.indexOf(t);return{session:n,fileIndex:r}}_findUploaderInfoBySessionId(e){for(var t=0;t<this._uploaderInfos.length;t++){var n=this._uploaderInfos[t],r=n.session;if(r&&r.id===e)return n}return null}_findAndUpdateAvailableUploaderInfo(){for(var e,t=null,n=0;n<this._uploaderInfos.length;n++){var r=this._uploaderInfos[n];r.fileUploader.option("dropZone",""),t||r.session||(t=r)}return null===(e=t)||void 0===e||e.fileUploader.option("dropZone",this.option("dropZone")),t}_findUploaderInfo(e){for(var t=0;t<this._uploaderInfos.length;t++){var n=this._uploaderInfos[t];if(n.fileUploader===e)return n}return null}_getController(){return this.option("getController")()}_raiseUploadSessionStarted(e){this._actions.onUploadSessionStarted({sessionInfo:e})}_raiseUploadProgress(e){this._actions.onUploadProgress(e)}_raiseUploadFinished(e){this._actions.onUploadFinished(e)}_initActions(){this._actions={onUploadSessionStarted:this._createActionByOption("onUploadSessionStarted"),onUploadProgress:this._createActionByOption("onUploadProgress"),onUploadFinished:this._createActionByOption("onUploadFinished")}}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{getController:null,onUploadSessionStarted:null,onUploadProgress:null,onUploadFinished:null,splitterElement:null})}_optionChanged(e){var t=e.name;switch(t){case"getController":this.repaint();break;case"onUploadSessionStarted":case"onUploadProgress":case"onUploadFinished":this._actions[t]=this._createActionByOption(t);break;case"dropZone":this._findAndUpdateAvailableUploaderInfo(),this._adjustDropZonePlaceholder();break;case"dropZonePlaceholderContainer":this._$dropZonePlaceholder.detach(),this._$dropZonePlaceholder.appendTo(e.value);break;case"splitterElement":break;default:super._optionChanged(e)}}}var On=Cn,wn=(e,t)=>{switch(e){case K.NoAccess:return l.a.format("dxFileManager-errorNoAccess");case K.FileExists:return l.a.format("dxFileManager-errorFileExistsFormat",t);case K.FileNotFound:return l.a.format("dxFileManager-errorFileNotFoundFormat",t);case K.DirectoryExists:return l.a.format("dxFileManager-errorDirectoryExistsFormat",t);case K.DirectoryNotFound:return l.a.format("dxFileManager-errorDirectoryNotFoundFormat",t);case K.WrongFileExtension:return l.a.format("dxFileManager-errorWrongFileExtension");case K.MaxFileSizeExceeded:return l.a.format("dxFileManager-errorMaxFileSizeExceeded");case K.InvalidSymbols:return l.a.format("dxFileManager-errorInvalidSymbols")}return l.a.format("dxFileManager-errorDefault")};class xn extends u.a{_initMarkup(){super._initMarkup(),this._initActions(),this._controller=this.option("controller"),this._controller.on("EditActionStarting",this._onEditActionStarting.bind(this)),this._controller.on("EditActionResultAcquired",this._onEditActionResultAcquired.bind(this)),this._controller.on("EditActionItemError",this._onEditActionItemError.bind(this)),this._controller.on("EditActionError",this._onEditActionError.bind(this)),this._controller.on("CompleteEditActionItem",this._onCompleteEditActionItem.bind(this)),this._controller.on("CompleteEditAction",this._onCompleteEditAction.bind(this)),this._model=this.option("model"),this._uploadOperationInfoMap={},this._dialogManager=new an(this.$element(),{chooseDirectoryDialog:{provider:this._controller._fileProvider,getDirectories:this._controller.getDirectories.bind(this._controller),getCurrentDirectory:this._controller.getCurrentDirectory.bind(this._controller)},rtlEnabled:this.option("rtlEnabled"),onDialogClosed:this._onDialogClosed.bind(this)}),this._fileUploader=this._createFileUploader();var e=this.option("notificationControl");e&&this._initNotificationControl(e),this._createMetadataMap()}_initNotificationControl(e){this._notificationControl=e,this._notificationControl.option({onOperationCanceled:e=>{var{info:t}=e;return this._onCancelUploadSession(t)},onOperationItemCanceled:e=>{var{item:t,itemIndex:n}=e;return this._onCancelFileUpload(t,n)}})}_getFileUploaderComponent(){return On}_createFileUploader(){var e=Object(r.a)("<div>").appendTo(this.$element());return this._createComponent(e,this._getFileUploaderComponent(),{getController:this._getFileUploaderController.bind(this),dropZonePlaceholderContainer:this.option("uploadDropZonePlaceholderContainer"),onUploadSessionStarted:e=>this._onUploadSessionStarted(e),onUploadProgress:e=>this._onUploadProgress(e),onUploadFinished:e=>this._onUploadFinished(e)})}setUploaderDropZone(e){this._fileUploader.option("dropZone",e)}setUploaderSplitterElement(e){this._fileUploader.option("splitterElement",e)}_getFileUploaderController(){var e=this.uploadDirectoryInfo.fileItem;return{chunkSize:this._controller.getFileUploadChunkSize(),uploadFileChunk:(t,n)=>this._controller.uploadFileChunk(t,n,e),abortFileUpload:(t,n)=>this._controller.abortFileUpload(t,n,e)}}_createMetadataMap(){this._metadataMap={create:{action:e=>this._tryCreate(e),affectsAllItems:!0,singleItemProcessingMessage:l.a.format("dxFileManager-editingCreateSingleItemProcessingMessage"),singleItemSuccessMessage:l.a.format("dxFileManager-editingCreateSingleItemSuccessMessage"),singleItemErrorMessage:l.a.format("dxFileManager-editingCreateSingleItemErrorMessage"),commonErrorMessage:l.a.format("dxFileManager-editingCreateCommonErrorMessage")},rename:{action:e=>this._tryRename(e),singleItemProcessingMessage:l.a.format("dxFileManager-editingRenameSingleItemProcessingMessage"),singleItemSuccessMessage:l.a.format("dxFileManager-editingRenameSingleItemSuccessMessage"),singleItemErrorMessage:l.a.format("dxFileManager-editingRenameSingleItemErrorMessage"),commonErrorMessage:l.a.format("dxFileManager-editingRenameCommonErrorMessage")},delete:{action:e=>this._tryDelete(e),singleItemProcessingMessage:l.a.format("dxFileManager-editingDeleteSingleItemProcessingMessage"),multipleItemsProcessingMessage:l.a.format("dxFileManager-editingDeleteMultipleItemsProcessingMessage"),singleItemSuccessMessage:l.a.format("dxFileManager-editingDeleteSingleItemSuccessMessage"),multipleItemsSuccessMessage:l.a.format("dxFileManager-editingDeleteMultipleItemsSuccessMessage"),singleItemErrorMessage:l.a.format("dxFileManager-editingDeleteSingleItemErrorMessage"),multipleItemsErrorMessage:l.a.format("dxFileManager-editingDeleteMultipleItemsErrorMessage"),commonErrorMessage:l.a.format("dxFileManager-editingDeleteCommonErrorMessage")},move:{action:e=>this._tryMove(e),singleItemProcessingMessage:l.a.format("dxFileManager-editingMoveSingleItemProcessingMessage"),multipleItemsProcessingMessage:l.a.format("dxFileManager-editingMoveMultipleItemsProcessingMessage"),singleItemSuccessMessage:l.a.format("dxFileManager-editingMoveSingleItemSuccessMessage"),multipleItemsSuccessMessage:l.a.format("dxFileManager-editingMoveMultipleItemsSuccessMessage"),singleItemErrorMessage:l.a.format("dxFileManager-editingMoveSingleItemErrorMessage"),multipleItemsErrorMessage:l.a.format("dxFileManager-editingMoveMultipleItemsErrorMessage"),commonErrorMessage:l.a.format("dxFileManager-editingMoveCommonErrorMessage")},copy:{action:e=>this._tryCopy(e),singleItemProcessingMessage:l.a.format("dxFileManager-editingCopySingleItemProcessingMessage"),multipleItemsProcessingMessage:l.a.format("dxFileManager-editingCopyMultipleItemsProcessingMessage"),singleItemSuccessMessage:l.a.format("dxFileManager-editingCopySingleItemSuccessMessage"),multipleItemsSuccessMessage:l.a.format("dxFileManager-editingCopyMultipleItemsSuccessMessage"),singleItemErrorMessage:l.a.format("dxFileManager-editingCopySingleItemErrorMessage"),multipleItemsErrorMessage:l.a.format("dxFileManager-editingCopyMultipleItemsErrorMessage"),commonErrorMessage:l.a.format("dxFileManager-editingCopyCommonErrorMessage")},upload:{action:e=>this._tryUpload(e),allowCancel:!0,allowItemProgress:!0,singleItemProcessingMessage:l.a.format("dxFileManager-editingUploadSingleItemProcessingMessage"),multipleItemsProcessingMessage:l.a.format("dxFileManager-editingUploadMultipleItemsProcessingMessage"),singleItemSuccessMessage:l.a.format("dxFileManager-editingUploadSingleItemSuccessMessage"),multipleItemsSuccessMessage:l.a.format("dxFileManager-editingUploadMultipleItemsSuccessMessage"),singleItemErrorMessage:l.a.format("dxFileManager-editingUploadSingleItemErrorMessage"),multipleItemsErrorMessage:l.a.format("dxFileManager-editingUploadMultipleItemsErrorMessage"),canceledMessage:l.a.format("dxFileManager-editingUploadCanceledMessage")},download:{action:e=>this._download(e),singleItemProcessingMessage:"",multipleItemsProcessingMessage:"",singleItemErrorMessage:l.a.format("dxFileManager-editingDownloadSingleItemErrorMessage"),multipleItemsErrorMessage:l.a.format("dxFileManager-editingDownloadMultipleItemsErrorMessage")},getItemContent:{action:e=>this._getItemContent(e)},getItems:{singleItemProcessingMessage:"",singleItemErrorMessage:l.a.format("dxFileManager-errorDirectoryOpenFailed"),commonErrorMessage:l.a.format("dxFileManager-errorDirectoryOpenFailed")}}}getCommandActions(){var e={};return Object(Y.a)(this._metadataMap,t=>{Object.prototype.hasOwnProperty.call(this._metadataMap,t)&&(e[t]=e=>this._executeAction(t,e))}),e}_executeAction(e,t){var n=this._metadataMap[e];return n?n.action(t):null}_onCancelUploadSession(e){this._fileUploader.cancelUpload(e.uploadSessionId)}_onCancelFileUpload(e,t){this._fileUploader.cancelFileUpload(e.info.uploadSessionId,t)}_onUploadProgress(e){var{sessionId:t,fileIndex:n,commonValue:r,fileValue:i}=e,{operationInfo:o}=this._uploadOperationInfoMap[t];this._notificationControl.updateOperationItemProgress(o,n,100*i,100*r)}_onUploadFinished(e){var{sessionId:t,commonValue:n}=e,{operationInfo:r}=this._uploadOperationInfoMap[t];this._notificationControl.finishOperation(r,100*n),this._scheduleUploadSessionDisposal(t,"uploader")}_onUploadSessionStarted(e){var{sessionInfo:t}=e;this._controller.processUploadSession(t,this.uploadDirectoryInfo)}_onEditActionStarting(e){var t=this._metadataMap[e.name],n=new In(t,e.itemInfos,e.directory),r=this._notificationControl.addOperation(n.processingMessage,t.allowCancel,!t.allowItemProgress);switch(Object(i.a)(e.customData,{context:n,operationInfo:r}),e.name){case"upload":var o=e.customData.sessionInfo.sessionId;r.uploadSessionId=o,this._uploadOperationInfoMap[o]={operationInfo:r};break;case"rename":e.customData.context.itemNewName=e.customData.itemNewName}}_onEditActionResultAcquired(e){var{context:t,operationInfo:n}=e.customData;t.singleRequest=e.singleRequest;var r=t.itemInfos.map(e=>this._getItemProgressDisplayInfo(e));this._notificationControl.addOperationDetails(n,r,t.actionMetadata.allowCancel)}_onEditActionError(e,t){var{context:n,operationInfo:r}=e.customData;n.singleRequest=e.singleRequest,this._handleActionError(r,n,t),this._completeAction(r,n)}_onEditActionItemError(e,t){var{context:n,operationInfo:r}=e.customData;this._handleActionError(r,n,t)}_onCompleteEditActionItem(e,t){var{context:n,operationInfo:r}=e.customData;t.result&&t.result.canceled||(n.completeOperationItem(t.index),this._notificationControl.completeOperationItem(r,t.index,n.commonProgress))}_onCompleteEditAction(e){var{context:t,operationInfo:n}=e.customData;this._completeAction(n,t),"upload"===e.name&&this._scheduleUploadSessionDisposal(e.customData.sessionInfo.sessionId,"controller")}_scheduleUploadSessionDisposal(e,t){Object(o.d)(this._uploadOperationInfoMap[e].requester)&&this._uploadOperationInfoMap[e].requester!==t?delete this._uploadOperationInfoMap[e]:this._uploadOperationInfoMap[e].requester=t}_tryCreate(e){var t=e&&e[0]||this._getCurrentDirectory(),n=l.a.format("dxFileManager-newDirectoryName");return this._showDialog(this._dialogManager.getCreateItemDialog(),n).then(e=>{var{name:n}=e;return this._controller.createDirectory(t,n)})}_tryRename(e){var t=e&&e[0]||this._model.getMultipleSelectedItems()[0];return t?this._showDialog(this._dialogManager.getRenameItemDialog(),t.fileItem.name).then(e=>{var{name:n}=e;return this._controller.renameItem(t,n)}):(new a.a).reject().promise()}_tryDelete(e){if(0===(e=e||this._model.getMultipleSelectedItems()).length)return(new a.a).reject().promise();var t=e[0].fileItem.name,n=e.length;return this._showDialog(this._dialogManager.getDeleteItemDialog(),{itemName:t,itemCount:n}).then(()=>this._controller.deleteItems(e))}_tryMove(e){return 0===(e=e||this._model.getMultipleSelectedItems()).length?(new a.a).reject().promise():this._showDialog(this._dialogManager.getMoveDialog(e)).then(t=>{var{folder:n}=t;return this._controller.moveItems(e,n)})}_tryCopy(e){return 0===(e=e||this._model.getMultipleSelectedItems()).length?(new a.a).reject().promise():this._showDialog(this._dialogManager.getCopyDialog(e)).then(t=>{var{folder:n}=t;return this._controller.copyItems(e,n)})}_tryUpload(e){this._uploadDirectoryInfo=null==e?void 0:e[0],this._fileUploader.tryUpload()}_download(e){return 0===(e=e||this._model.getMultipleSelectedItems()).length?(new a.a).reject().promise():this._controller.downloadItems(e)}_getItemContent(e){return e=e||this._model.getMultipleSelectedItems(),this._controller.getItemContent(e)}_completeAction(e,t){this._notificationControl.completeOperation(e,t.completionMessage,!t.success,t.statusText),t.hasModifiedItems()&&this._raiseOnSuccess(t.onlyFiles)}_handleActionError(e,t,n){e.hasError=!0,t.singleRequest?this._handleSingleRequestActionError(e,t,n):this._handleMultipleRequestActionError(e,t,n)}_handleSingleRequestActionError(e,t,n){var r=t.getItemForSingleRequestError(),i=t.getItemName(n.errorCode),o=this._getErrorText(n,r,i);t.processSingleRequestError(o);var a=this._getOperationErrorInfo(t);this._notificationControl.completeSingleOperationWithError(e,a),t.multipleItems&&this._raiseOnSuccess(t.onlyFiles)}_handleMultipleRequestActionError(e,t,n){var r=t.getItemForMultipleRequestError(n.index),i=t.getItemName(n.errorCode,n.index),o=this._getErrorText(n,r,i);t.processMultipleRequestError(n.index,o);var a=this._getOperationErrorInfo(t);this._notificationControl.addOperationDetailsError(e,a)}_getOperationErrorInfo(e){var t=e.errorState.currentDetailError;return{commonErrorText:e.errorState.commonErrorText,item:t.itemInfo?this._getItemProgressDisplayInfo(t.itemInfo):null,itemIndex:t.itemIndex,detailErrorText:t.errorText}}_getErrorText(e,t,n){var r=e.errorText||wn(e.errorCode,n),i={fileSystemItem:null==t?void 0:t.fileItem,errorCode:e.errorCode,errorText:r};return this._raiseOnError(i),i.errorText}_getItemProgressDisplayInfo(e){return{commonText:e.fileItem.name,imageUrl:this._getItemThumbnail(e)}}_showDialog(e,t){return this._dialogDeferred=new a.a,e.show(t),this._dialogDeferred.promise()}_onDialogClosed(e){var t=e.dialogResult;t?this._dialogDeferred.resolve(t):this._dialogDeferred.reject()}updateDialogRtl(e){this._dialogManager.updateDialogRtl(e)}_getItemThumbnail(e){var t=this.option("getItemThumbnail");if(!t)return null;var n=t(e);return n?n.thumbnail:null}_initActions(){this._actions={onSuccess:this._createActionByOption("onSuccess"),onError:this._createActionByOption("onError")}}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{model:{getMultipleSelectedItems:null},notificationControl:null,getItemThumbnail:null,onSuccess:null,onError:null})}_optionChanged(e){var t=e.name;switch(t){case"model":this.repaint();break;case"notificationControl":this._initNotificationControl(e.value);break;case"getItemThumbnail":break;case"uploadDropZonePlaceholderContainer":this._fileUploader.option("dropZonePlaceholderContainer",e.value);break;case"onSuccess":case"onError":this._actions[t]=this._createActionByOption(t);break;default:super._optionChanged(e)}}_raiseOnSuccess(e){this._actions.onSuccess({updatedOnlyFiles:e})}_raiseOnError(e){this._actions.onError(e)}_getCurrentDirectory(){return this._controller.getCurrentDirectory()}get uploadDirectoryInfo(){return this._uploadDirectoryInfo||this._getCurrentDirectory()}}class In{constructor(e,t,n){this._actionMetadata=e,this._itemInfos=t,this._onlyFiles=!this._actionMetadata.affectsAllItems&&this._itemInfos.every(e=>!e.fileItem.isDirectory),this._items=this._itemInfos.map(e=>e.fileItem),this._multipleItems=this._items.length>1,this._location=n.getDisplayName(),this._singleRequest=!0,this._completedItems=[],this._commonProgress=0,this._errorState={failedCount:0},this._itemNewName=""}completeOperationItem(e){if(this._singleRequest)this._completedItems=[...this._items];else{var t=this._items[e];this._completedItems.push(t)}this._actionMetadata.allowItemProgress||(this._commonProgress=this._completedItems.length/this._items.length*100)}processSingleRequestError(e){this._errorState.failedCount=1,this._errorState.commonErrorText=this._multipleItems?this._actionMetadata.commonErrorMessage:this._actionMetadata.singleItemErrorMessage;var t=this._multipleItems?-1:1,n=this.getItemForSingleRequestError();this._setCurrentDetailError(t,n,e)}processMultipleRequestError(e,t){this._errorState.failedCount++,this._errorState.commonErrorText=this._errorState.failedCount>1?Object(Yt.b)(this._actionMetadata.multipleItemsErrorMessage,this._errorState.failedCount):this._actionMetadata.singleItemErrorMessage;var n=this.getItemForMultipleRequestError(e);this._setCurrentDetailError(e,n,t)}hasModifiedItems(){return this._hasCompletedItems()||this._singleRequest&&!this.success&&this._multipleItems}getItemForSingleRequestError(){return this._multipleItems?null:this._itemInfos[0]}getItemForMultipleRequestError(e){return this._itemInfos[e]}getItemName(e,t){var n=this.singleRequest?this.getItemForSingleRequestError():this.getItemForMultipleRequestError(t),r=null==n?void 0:n.fileItem.name;return this.itemNewName&&this._isItemExistsErrorCode(e)&&(r=this.itemNewName),r}_isItemExistsErrorCode(e){return e===K.DirectoryExists||e===K.FileExists}_setCurrentDetailError(e,t,n){this._errorState.currentDetailError={itemIndex:e,itemInfo:t,errorText:n}}_hasCompletedItems(){return this._completedItems.length>0}get actionMetadata(){return this._actionMetadata}get itemInfos(){return this._itemInfos}get itemNewName(){return this._itemNewName}set itemNewName(e){this._itemNewName=e}get errorState(){return this._errorState}get singleRequest(){return this._singleRequest}set singleRequest(e){this._singleRequest=e}get multipleItems(){return this._multipleItems}get onlyFiles(){return this._onlyFiles}get processingMessage(){return this._multipleItems?Object(Yt.b)(this._actionMetadata.multipleItemsProcessingMessage,this._items.length,this._location):Object(Yt.b)(this._actionMetadata.singleItemProcessingMessage,this._location)}get successMessage(){return this._hasCompletedItems()?this._multipleItems?Object(Yt.b)(this._actionMetadata.multipleItemsSuccessMessage,this._completedItems.length,this._location):Object(Yt.b)(this._actionMetadata.singleItemSuccessMessage,this._location):this._multipleItems?Object(Yt.b)(this._actionMetadata.multipleItemsErrorMessage,this._items.length):this._actionMetadata.singleItemErrorMessage}get completionMessage(){return this.success?this.successMessage:this.errorState.commonErrorText}get statusText(){return this.success&&!this._hasCompletedItems()?this._actionMetadata.canceledMessage:void 0}get commonProgress(){return this._commonProgress}get success(){return!this._errorState.failedCount}}var Sn=xn,En=n("R7+b");class jn extends u.a{_init(){super._init(),this._currentDirectory=null}_initMarkup(){super._initMarkup(),this._initActions(),this._currentDirectory&&this._renderMenu(),this.$element().addClass("dx-filemanager-breadcrumbs")}setCurrentDirectory(e){this._areDirsEqual(this._currentDirectory,e)||(this._currentDirectory=e,this.repaint())}_renderMenu(){var e=Object(r.a)("<div>").appendTo(this.$element());this._menu=this._createComponent(e,En.a,{dataSource:this._getMenuItems(),onItemClick:this._onItemClick.bind(this),onItemRendered:this._onItemRendered.bind(this)})}_getMenuItems(){var e=this._getParentDirsLine(),t=[{icon:"arrowup",directory:this._currentDirectory.parentDirectory,isPathItem:!0,cssClass:"dx-filemanager-breadcrumbs-parent-folder-item"},{text:"",cssClass:"dx-filemanager-breadcrumbs-separator-item"}];return e.forEach((n,r)=>{t.push({text:n.getDisplayName(),directory:n,isPathItem:!0}),r!==e.length-1&&t.push({icon:"spinnext",cssClass:"dx-filemanager-breadcrumbs-path-separator-item"})}),t}_onItemClick(e){var{itemData:t}=e;if(t.isPathItem){var n=t.directory;this._areDirsEqual(n,this._currentDirectory)||this._raiseCurrentDirectoryChanged(n)}}_onItemRendered(e){var{itemElement:t,itemData:n}=e;n.cssClass&&Object(r.a)(t).addClass(n.cssClass)}_getParentDirsLine(){for(var e=this._currentDirectory,t=[];e;)t.unshift(e),e=e.parentDirectory;return t}_areDirsEqual(e,t){return e&&t&&e===t&&e.fileItem.key===t.fileItem.key}_initActions(){this._actions={onCurrentDirectoryChanging:this._createActionByOption("onCurrentDirectoryChanging")}}_raiseCurrentDirectoryChanged(e){this._actions.onCurrentDirectoryChanging({currentDirectory:e})}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{rootFolderDisplayName:"Files",onCurrentDirectoryChanging:null})}_optionChanged(e){var t=e.name;switch(t){case"rootFolderDisplayName":this.repaint();break;case"onCurrentDirectoryChanging":this._actions[t]=this._createActionByOption(t);break;default:super._optionChanged(e)}}}var kn=jn,Tn=Object(p.d)(),An="".concat("dx-splitter","-wrapper"),Dn="".concat("dx-splitter","-inactive"),Pn="".concat("dx-splitter","-border"),Mn="".concat("dx-splitter","-initial");class Fn extends u.a{_init(){super._init();var e=(new L.a).toString();this.SPLITTER_POINTER_DOWN_EVENT_NAME=Object(De.a)(_.a.down,"dxSplitterResizing"+e),this.SPLITTER_POINTER_MOVE_EVENT_NAME=Object(De.a)(_.a.move,"dxSplitterResizing"+e),this.SPLITTER_POINTER_UP_EVENT_NAME=Object(De.a)(_.a.up,"dxSplitterResizing"+e)}_initMarkup(){super._initMarkup(),this._initActions(),this._$container=this.option("container"),this._$leftElement=this.option("leftElement"),this._$rightElement=this.option("rightElement"),this.$element().addClass(An).addClass(Mn),this._$splitterBorder=Object(r.a)("<div>").addClass(Pn).appendTo(this.$element()),this._$splitter=Object(r.a)("<div>").addClass("dx-splitter").addClass(Dn).appendTo(this._$splitterBorder)}_initActions(){this._actions={onApplyPanelSize:this._createActionByOption("onApplyPanelSize"),onActiveStateChanged:this._createActionByOption("onActiveStateChanged")}}_render(){super._render(),this._detachEventHandlers(),this._attachEventHandlers()}_clean(){this._detachEventHandlers(),super._clean()}_attachEventHandlers(){var e=f.default.getDocument();m.a.on(this._$splitterBorder,this.SPLITTER_POINTER_DOWN_EVENT_NAME,this._onMouseDownHandler.bind(this)),m.a.on(e,this.SPLITTER_POINTER_MOVE_EVENT_NAME,this._onMouseMoveHandler.bind(this)),m.a.on(e,this.SPLITTER_POINTER_UP_EVENT_NAME,this._onMouseUpHandler.bind(this))}_detachEventHandlers(){var e=f.default.getDocument();m.a.off(this._$splitterBorder,this.SPLITTER_POINTER_DOWN_EVENT_NAME),m.a.off(e,this.SPLITTER_POINTER_MOVE_EVENT_NAME),m.a.off(e,this.SPLITTER_POINTER_UP_EVENT_NAME)}_dimensionChanged(e){e&&"height"===e||(this._containerWidth=this._$container.get(0).clientWidth,this._setSplitterPositionLeft({needUpdatePanels:!0,usePercentagePanelsWidth:!0}))}_onMouseDownHandler(e){e.preventDefault(),this._offsetX=e.pageX-this._$splitterBorder.offset().left<=this._getSplitterBorderWidth()?e.pageX-this._$splitterBorder.offset().left:0,this._containerWidth=this._$container.get(0).clientWidth,this.$element().removeClass(Mn),this._toggleActive(!0),this._setSplitterPositionLeft({needUpdatePanels:!0})}_onMouseMoveHandler(e){this._isSplitterActive&&this._setSplitterPositionLeft({splitterPositionLeft:this._getNewSplitterPositionLeft(e),needUpdatePanels:!0})}_onMouseUpHandler(){this._isSplitterActive&&(this._leftPanelPercentageWidth=null,this._toggleActive(!1),this._setSplitterPositionLeft({needUpdatePanels:!0,usePercentagePanelsWidth:!0}))}_getNewSplitterPositionLeft(e){var t=e.pageX-this._getContainerLeftOffset()-this._offsetX;return t=Math.max(0-this._getSplitterOffset(),t),t=Math.min(this._containerWidth-this._getSplitterOffset()-this._getSplitterWidth(),t)}_getContainerLeftOffset(){var e=this._$container.offset().left;if(Tn){var t=Tn.getComputedStyle(this._$container.get(0));e+=(parseFloat(t.paddingLeft)||0)+(parseFloat(t.borderLeftWidth)||0)}return e}_getSplitterOffset(){return(this._getSplitterBorderWidth()-this._getSplitterWidth())/2}_getSplitterWidth(){return this._$splitter.get(0).clientWidth}_getSplitterBorderWidth(){return this._$splitterBorder.get(0).clientWidth}_getLeftPanelWidth(){return this._$leftElement.get(0).clientWidth}getSplitterBorderElement(){return this._$splitterBorder}_toggleActive(e){this.$element().toggleClass(Dn,!e),this._$splitter.toggleClass(Dn,!e),this._isSplitterActive=e,this._actions.onActiveStateChanged({isActive:e})}toggleDisabled(e){this.$element().toggleClass("dx-state-disabled",e),this._$splitter.toggleClass("dx-state-disabled",e)}isSplitterMoved(){return!this.$element().hasClass(Mn)}disableSplitterCalculation(e){this._isSplitterCalculationDisabled=e}_setSplitterPositionLeft(){var{splitterPositionLeft:e=null,needUpdatePanels:t=!1,usePercentagePanelsWidth:n=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=(e=e||this._getLeftPanelWidth()-this._getSplitterOffset())+this._getSplitterOffset(),i=this._containerWidth-r;this._isSplitterCalculationDisabled||this.$element().css("left",e),this._leftPanelPercentageWidth=this._leftPanelPercentageWidth||this._convertToPercentage(r);var o=this._convertToPercentage(this._containerWidth-this._convertToPixels(this._leftPanelPercentageWidth));t&&this._actions.onApplyPanelSize({leftPanelWidth:n?"".concat(this._leftPanelPercentageWidth,"%"):r,rightPanelWidth:n?"".concat(o,"%"):i})}_optionChanged(e){switch(e.name){case"initialLeftPanelWidth":this._leftPanelPercentageWidth=this._convertToPercentage(e.value),this._dimensionChanged();break;case"leftElement":this.repaint();break;case"onActiveStateChanged":case"onApplyPanelSize":this._actions[e.name]=this._createActionByOption(e.name);break;default:super._optionChanged(e)}}_convertToPercentage(e){return e/this._$container.get(0).clientWidth*100}_convertToPixels(e){return e/100*this._$container.get(0).clientWidth}}var Nn=Object(p.d)();class Rn extends u.a{_initMarkup(){super._initMarkup(),this._initActions(),this._isInAdaptiveState=!1;var e=Object(r.a)("<div>").appendTo(this.$element());Object(r.a)("<div>").addClass("dx-filemanager-adaptivity-drawer-panel").appendTo(e),this._drawer=this._createComponent(e,at.a),this._drawer.option({opened:!0,template:this._createDrawerTemplate.bind(this)}),Object(r.a)(this._drawer.content()).addClass("dx-drawer-panel-content-initial");var t=e.find(".".concat("dx-filemanager-adaptivity-drawer-panel")).first(),n=this.option("contentTemplate");Object(o.h)(n)&&n(t),this._updateDrawerMaxSize()}_createDrawerTemplate(e){this.option("drawerTemplate")(e),this._splitter=this._createComponent("<div>",Fn,{container:this.$element(),leftElement:Object(r.a)(this._drawer.content()),rightElement:Object(r.a)(this._drawer.viewContent()),onApplyPanelSize:this._onApplyPanelSize.bind(this),onActiveStateChanged:this._onActiveStateChanged.bind(this)}),this._splitter.$element().appendTo(e),this._splitter.disableSplitterCalculation(!0)}_render(){super._render(),this._checkAdaptiveState()}_onApplyPanelSize(e){Object(p.f)()&&(this._splitter.isSplitterMoved()?(Object(r.a)(this._drawer.content()).removeClass("dx-drawer-panel-content-initial"),this._setDrawerWidth(e.leftPanelWidth)):this._setDrawerWidth(""))}_onActiveStateChanged(e){var{isActive:t}=e;this._splitter.disableSplitterCalculation(!t),!t&&this._splitter.$element().css("left","auto")}_setDrawerWidth(e){Object(r.a)(this._drawer.content()).css("width",e),this._updateDrawerMaxSize(),this._drawer.resizeViewContent()}_updateDrawerMaxSize(){this._drawer.option("maxSize",this._drawer.getRealPanelWidth())}_dimensionChanged(e){e&&"height"===e||this._checkAdaptiveState()}_checkAdaptiveState(){var e=this._isInAdaptiveState;this._isInAdaptiveState=this._isSmallScreen(),e!==this._isInAdaptiveState&&(this.toggleDrawer(!this._isInAdaptiveState,!0),Object(r.a)(this._drawer.content()).toggleClass("dx-drawer-panel-content-adaptive",this._isInAdaptiveState),this._raiseAdaptiveStateChanged(this._isInAdaptiveState)),this._isInAdaptiveState&&this._isDrawerOpened()&&this._updateDrawerMaxSize()}_isSmallScreen(){return Object(qe.l)(Nn)<=573}_isDrawerOpened(){return this._drawer.option("opened")}_initActions(){this._actions={onAdaptiveStateChanged:this._createActionByOption("onAdaptiveStateChanged")}}_raiseAdaptiveStateChanged(e){this._actions.onAdaptiveStateChanged({enabled:e})}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{drawerTemplate:null,contentTemplate:null,onAdaptiveStateChanged:null})}_optionChanged(e){var t=e.name;switch(t){case"drawerTemplate":case"contentTemplate":this.repaint();break;case"onAdaptiveStateChanged":this._actions[t]=this._createActionByOption(t);break;default:super._optionChanged(e)}}isInAdaptiveState(){return this._isInAdaptiveState}toggleDrawer(e,t){this._updateDrawerMaxSize(),this._drawer.option("animationEnabled",!t),this._drawer.toggle(e);var n=this._isDrawerOpened()&&!this.isInAdaptiveState();this._splitter.toggleDisabled(!n)}getSplitterElement(){return this._splitter.getSplitterBorderElement().get(0)}}var Bn=Rn,Ln=n("zvzf"),qn=n("JyGS"),Hn="navPane",$n="itemView";class Un extends u.a{_initTemplates(){}_init(){super._init(),this._initActions(),this._providerUpdateDeferred=null,this._lockCurrentPathProcessing=!1,this._wasRendered=!1,this._controller=new fe({currentPath:this.option("currentPath"),currentPathKeys:this.option("currentPathKeys"),rootText:this.option("rootFolderName"),fileProvider:this.option("fileSystemProvider"),allowedFileExtensions:this.option("allowedFileExtensions"),uploadMaxFileSize:this.option("upload").maxFileSize,uploadChunkSize:this.option("upload").chunkSize,onInitialized:this._onControllerInitialized.bind(this),onDataLoading:this._onDataLoading.bind(this),onSelectedDirectoryChanged:this._onSelectedDirectoryChanged.bind(this),onPathPotentiallyChanged:this._checkPathActuality.bind(this),editingEvents:this._actions.editing})}_initMarkup(){super._initMarkup(),this._firstItemViewLoad=!0,this._lockSelectionProcessing=!1,this._lockFocusedItemProcessing=!1,this._itemKeyToFocus=void 0,this._loadedWidgets=[],this._commandManager=new ve(this.option("permissions")),this.$element().addClass("dx-filemanager"),this._wasRendered?this._prepareToLoad():this._wasRendered=!0,this._createNotificationControl(),this._initCommandManager()}_createNotificationControl(){var e=Object(r.a)("<div>").addClass("dx-filemanager-notification-container").appendTo(this.$element());this._notificationControl=this._createComponent(e,Xt,{progressPanelContainer:this.$element(),contentTemplate:(e,t)=>this._createWrapper(e,t),onActionProgress:e=>this._onActionProgress(e),positionTarget:".".concat("dx-filemanager-container"),showProgressPanel:this.option("notifications.showPanel"),showNotificationPopup:this.option("notifications.showPopup")})}_createWrapper(e,t){this._$wrapper=Object(r.a)("<div>").addClass("dx-filemanager-wrapper").appendTo(e),this._createEditing(t);var n=Object(r.a)("<div>").appendTo(this._$wrapper);this._toolbar=this._createComponent(n,it,{commandManager:this._commandManager,generalItems:this.option("toolbar.items"),fileItems:this.option("toolbar.fileSelectionItems"),itemViewMode:this.option("itemView").mode,onItemClick:e=>this._actions.onToolbarItemClick(e)}),this._createAdaptivityControl()}_createAdaptivityControl(){var e=Object(r.a)("<div>").addClass("dx-filemanager-container").appendTo(this._$wrapper);this._adaptivityControl=this._createComponent(e,Bn,{drawerTemplate:e=>this._createFilesTreeView(e),contentTemplate:e=>this._createItemsPanel(e),onAdaptiveStateChanged:e=>this._onAdaptiveStateChanged(e)}),this._editing.setUploaderSplitterElement(this._adaptivityControl.getSplitterElement())}_createEditing(e){var t=Object(r.a)("<div>").addClass("dx-filemanager-editing-container").appendTo(this.$element());this._editing=this._createComponent(t,Sn,{controller:this._controller,model:{getMultipleSelectedItems:this._getSelectedItemInfos.bind(this)},getItemThumbnail:this._getItemThumbnailInfo.bind(this),notificationControl:e,uploadDropZonePlaceholderContainer:this.$element(),rtlEnabled:this.option("rtlEnabled"),onSuccess:e=>{var{updatedOnlyFiles:t}=e;return this._redrawComponent(t)},onError:e=>this._onEditingError(e)})}_createItemsPanel(e){this._$itemsPanel=Object(r.a)("<div>").addClass("dx-filemanager-items-panel").appendTo(e),this._createBreadcrumbs(this._$itemsPanel),this._createItemView(this._$itemsPanel),this._updateUploadDropZone()}_updateUploadDropZone(){var e=this._commandManager.isCommandAvailable("upload")?this._$itemsPanel:Object(r.a)();this._editing.setUploaderDropZone(e)}_createFilesTreeView(e){this._filesTreeViewContextMenu=this._createContextMenu(!1,Hn);var t=Object(r.a)("<div>").addClass("dx-filemanager-dirs-panel").appendTo(e);this._filesTreeView=this._createComponent(t,ke,{storeExpandedState:!0,contextMenu:this._filesTreeViewContextMenu,getDirectories:this.getDirectories.bind(this),getCurrentDirectory:this._getCurrentDirectory.bind(this),onDirectoryClick:e=>{var{itemData:t}=e;return this._setCurrentDirectory(t)},onItemListDataLoaded:()=>this._tryEndLoading(Hn)}),this._filesTreeView.updateCurrentDirectory()}_createItemView(e,t){this._itemViewContextMenu=this._createContextMenu(!0,$n);var n=this.option("itemView"),i={selectionMode:this.option("selectionMode"),selectedItemKeys:this.option("selectedItemKeys"),focusedItemKey:this.option("focusedItemKey"),contextMenu:this._itemViewContextMenu,getItems:this._getItemViewItems.bind(this),onError:e=>{var{error:t}=e;return this._showError(t)},onSelectionChanged:this._onItemViewSelectionChanged.bind(this),onFocusedItemChanged:this._onItemViewFocusedItemChanged.bind(this),onSelectedItemOpened:this._onSelectedItemOpened.bind(this),onContextMenuShowing:e=>this._onContextMenuShowing($n,e),onItemListItemsLoaded:()=>this._tryEndLoading($n),getItemThumbnail:this._getItemThumbnailInfo.bind(this),customizeDetailColumns:this.option("customizeDetailColumns"),detailColumns:this.option("itemView.details.columns")},o=Object(r.a)("<div>").appendTo(e),a="thumbnails"===(t=t||n.mode)?Qe:Be;this._itemView=this._createComponent(o,a,i)}_createBreadcrumbs(e){var t=Object(r.a)("<div>").appendTo(e);this._breadcrumbs=this._createComponent(t,kn,{rootFolderDisplayName:this.option("rootFolderName"),onCurrentDirectoryChanging:e=>{var{currentDirectory:t}=e;return this._setCurrentDirectory(t,!0)}}),this._breadcrumbs.setCurrentDirectory(this._getCurrentDirectory())}_createContextMenu(e,t){var n=Object(r.a)("<div>").appendTo(this._$wrapper);return this._createComponent(n,Oe,{commandManager:this._commandManager,items:this.option("contextMenu.items"),onItemClick:e=>this._actions.onContextMenuItemClick(e),onContextMenuShowing:e=>this._onContextMenuShowing(t,e),isolateCreationItemCommands:e,viewArea:t})}_initCommandManager(){var e=Object(i.a)(this._editing.getCommandActions(),{refresh:()=>this._refreshAndShowProgress(),thumbnails:()=>this.option("itemView.mode","thumbnails"),details:()=>this.option("itemView.mode","details"),clearSelection:()=>this._clearSelection(),showNavPane:()=>this._adaptivityControl.toggleDrawer()});this._commandManager.registerActions(e)}_onItemViewSelectionChanged(e){var{selectedItemInfos:t,selectedItems:n,selectedItemKeys:r,currentSelectedItemKeys:i,currentDeselectedItemKeys:o}=e;this._lockSelectionProcessing=!0,this.option("selectedItemKeys",r),this._lockSelectionProcessing=!1,this._actions.onSelectionChanged({selectedItems:n,selectedItemKeys:r,currentSelectedItemKeys:i,currentDeselectedItemKeys:o}),this._updateToolbar(t)}_onItemViewFocusedItemChanged(e){this._lockFocusedItemProcessing=!0,this.option("focusedItemKey",e.itemKey),this._lockFocusedItemProcessing=!1,this._actions.onFocusedItemChanged({item:e.item,itemElement:e.itemElement})}_onAdaptiveStateChanged(e){var{enabled:t}=e;this._commandManager.setCommandEnabled("showNavPane",t),this._updateToolbar()}_onActionProgress(e){var{message:t,status:n}=e;this._toolbar.updateRefreshItem(t,n),this._updateToolbar()}_onEditingError(e){var t=M({},e,["errorCode","errorText","fileSystemItem"]);this._actions.onErrorOccurred(t),e.errorText=t.errorText}_refreshAndShowProgress(){return this._prepareToLoad(),Object(a.c)(this._notificationControl.tryShowProgressPanel(),this._controller.refresh()).then(()=>this._filesTreeView.refresh())}_isAllWidgetsLoaded(){return 2===this._loadedWidgets.length&&-1!==this._loadedWidgets.indexOf(Hn)&&-1!==this._loadedWidgets.indexOf($n)}_tryEndLoading(e){this._loadedWidgets.push(e),this._isAllWidgetsLoaded()&&this._controller.endSingleLoad()}_prepareToLoad(){this._loadedWidgets=[],this._controller.startSingleLoad()}_updateToolbar(e){var t=e||this._getSelectedItemInfos();this._toolbar.option("contextItems",Object(s.g)(t,[]))}_switchView(e){this._disposeWidget(this._itemView.option("contextMenu")),this._disposeWidget(this._itemView),this._createItemView(this._$itemsPanel,e),this._toolbar.option({itemViewMode:e})}_disposeWidget(e){e.dispose(),e.$element().remove()}_clearSelection(){this._itemView.clearSelection()}_showError(e){this._showNotification(e,!1)}_showNotification(e,t){A({message:e,width:450},t?"success":"error",5e3)}_redrawComponent(e){this._itemView.refresh().then(()=>!e&&this._filesTreeView.refresh())}_getItemViewItems(){var e=this.option("itemView").showFolders,t=this._controller.getCurrentItems(!e);return this._updateToolbarWithSelectionOnFirstLoad(t),this.option("itemView.showParentFolder")&&(t=Object(a.c)(t).then(e=>this._getPreparedItemViewItems(e))),t}_updateToolbarWithSelectionOnFirstLoad(e){if(this._firstItemViewLoad){this._firstItemViewLoad=!1;var t=this.option("selectedItemKeys");t.length>0&&Object(a.c)(e).done(e=>{var n=((e,t)=>{var n={};t.forEach(e=>{n[e]=null}),e.forEach(e=>{var t=e.fileItem.key;Object.prototype.hasOwnProperty.call(n,t)&&(n[t]=e)});var r=[];return t.forEach(e=>{var t=n[e];t&&r.push(t)}),r})(e,t);n.length>0&&this._updateToolbar(n)})}}_getPreparedItemViewItems(e){var t=this._getCurrentDirectory();if(t.fileItem.isRoot())return e;var n=t.fileItem.createClone();n.isParentFolder=!0,n.name="..",n.relativeName="..",n.key="".concat("[*DXPDK*]$40F96F03-FBD8-43DF-91BE-F55F4B8BA871$").concat(t.fileItem.key);var r=[...e];return r.unshift({fileItem:n,icon:"parentfolder"}),r}_onContextMenuShowing(e,t){var n,r=M({},t,["targetElement","cancel","event"]);r=Object(i.a)(r,{viewArea:e,fileSystemItem:null===(n=t.itemData)||void 0===n?void 0:n.fileItem,_isActionButton:t.isActionButton}),this._actions.onContextMenuShowing(r),t.cancel=Object(s.g)(r.cancel,!1)}_getItemThumbnailInfo(e){var t=this.option("customizeThumbnail"),n=Object(o.h)(t)?t(e.fileItem):e.fileItem.thumbnail;return n?{thumbnail:n,cssClass:"dx-filemanager-item-custom-thumbnail"}:{thumbnail:e.icon}}_getDefaultOptions(){return Object(i.a)(super._getDefaultOptions(),{fileSystemProvider:null,currentPath:"",currentPathKeys:[],rootFolderName:l.a.format("dxFileManager-rootDirectoryName"),selectionMode:"multiple",selectedItemKeys:[],focusedItemKey:void 0,toolbar:{items:["showNavPane","create","upload","switchView",{name:"separator",location:"after"},"refresh"],fileSelectionItems:["download","separator","move","copy","rename","separator","delete","clearSelection",{name:"separator",location:"after"},"refresh"]},contextMenu:{items:["create","upload","rename","move","copy","delete","refresh","download"]},itemView:{details:{columns:["thumbnail","name","dateModified","size"]},mode:"details",showFolders:!0,showParentFolder:!0},customizeThumbnail:null,customizeDetailColumns:null,onContextMenuItemClick:null,onContextMenuShowing:null,onCurrentDirectoryChanged:null,onSelectedFileOpened:null,onSelectionChanged:null,onFocusedItemChanged:null,onToolbarItemClick:null,onErrorOccurred:null,onDirectoryCreating:null,onDirectoryCreated:null,onItemRenaming:null,onItemRenamed:null,onItemDeleting:null,onItemDeleted:null,onItemCopying:null,onItemCopied:null,onItemMoving:null,onItemMoved:null,onFileUploading:null,onFileUploaded:null,onItemDownloading:null,allowedFileExtensions:[],upload:{maxFileSize:0,chunkSize:2e5},permissions:Object(i.a)({},ge),notifications:{showPanel:!0,showPopup:!0}})}option(e,t){var n=Object(Ln.f)(e,t),r=arguments.length<2&&"object"!==Object(o.q)(e),i=e=>Object(o.d)(n[e]),s=e=>{if(!i(e))return!1;var t=this.option(e),r=n[e];return!Object(qn.a)(t,r)};return!r&&i("fileSystemProvider")&&(this._providerUpdateDeferred=new a.a,(s("currentPath")||s("currentPathKeys"))&&(this._lockCurrentPathProcessing=!0)),super.option(...arguments)}_optionChanged(e){var t=e.name;switch(t){case"currentPath":var n=()=>(this._lockCurrentPathProcessing=!1,this._controller.setCurrentPath(e.value));this._lockCurrentPathProcessing=!0,this._providerUpdateDeferred?this._providerUpdateDeferred.then(n):n();break;case"currentPathKeys":var r=()=>(this._lockCurrentPathProcessing=!1,this._controller.setCurrentPathByKeys(e.value));this._lockCurrentPathProcessing=!0,this._providerUpdateDeferred?this._providerUpdateDeferred.then(r):r();break;case"selectedItemKeys":!this._lockSelectionProcessing&&this._itemView&&this._itemView.option("selectedItemKeys",e.value);break;case"focusedItemKey":!this._lockFocusedItemProcessing&&this._itemView&&this._itemView.option("focusedItemKey",e.value);break;case"rootFolderName":this._controller.setRootText(e.value),this._invalidate();break;case"fileSystemProvider":this._lockCurrentPathProcessing||(this._providerUpdateDeferred=new a.a);var i=this._lockCurrentPathProcessing?void 0:this.option("currentPathKeys");this._controller.updateProvider(e.value,i).then(()=>this._providerUpdateDeferred.resolve()).always(()=>{this._providerUpdateDeferred=null,this.repaint()});break;case"allowedFileExtensions":this._controller.setAllowedFileExtensions(e.value),this._invalidate();break;case"upload":this._controller.setUploadOptions(this.option("upload")),this._invalidate();break;case"permissions":this._commandManager.updatePermissions(this.option("permissions")),this._filesTreeViewContextMenu.tryUpdateVisibleContextMenu(),this._itemViewContextMenu.tryUpdateVisibleContextMenu(),this._toolbar.updateItemPermissions(),this._updateUploadDropZone();break;case"selectionMode":case"customizeThumbnail":case"customizeDetailColumns":this._invalidate();break;case"itemView":"itemView.mode"===e.fullName?this._switchView(e.value):this._invalidate();break;case"toolbar":var o={};"toolbar"===e.fullName&&(e.value.items&&(o.generalItems=e.value.items),e.value.fileSelectionItems&&(o.fileItems=e.value.fileSelectionItems)),0===e.fullName.indexOf("toolbar.items")&&(o.generalItems=this.option("toolbar.items")),0===e.fullName.indexOf("toolbar.fileSelectionItems")&&(o.fileItems=this.option("toolbar.fileSelectionItems")),this._toolbar.option(o);break;case"contextMenu":if("contextMenu"===e.fullName&&e.value.items||0===e.fullName.indexOf("contextMenu.items")){var s=this.option("contextMenu.items");this._filesTreeViewContextMenu.option("items",s),this._itemViewContextMenu.option("items",s)}break;case"notifications":this._notificationControl.option("showProgressPanel",this.option("notifications.showPanel")),this._notificationControl.option("showNotificationPopup",this.option("notifications.showPopup"));break;case"onContextMenuItemClick":case"onContextMenuShowing":case"onCurrentDirectoryChanged":case"onSelectedFileOpened":case"onSelectionChanged":case"onFocusedItemChanged":case"onToolbarItemClick":case"onErrorOccurred":this._actions[t]=this._createActionByOption(t);break;case"onDirectoryCreating":case"onDirectoryCreated":case"onItemRenaming":case"onItemRenamed":case"onItemDeleting":case"onItemDeleted":case"onItemCopying":case"onItemCopied":case"onItemMoving":case"onItemMoved":case"onFileUploading":case"onFileUploaded":case"onItemDownloading":this._actions.editing[t]=this._createActionByOption(t);break;case"rtlEnabled":this._editing.updateDialogRtl(e.value),super._optionChanged(e);break;default:super._optionChanged(e)}}_initActions(){this._actions={onContextMenuItemClick:this._createActionByOption("onContextMenuItemClick"),onContextMenuShowing:this._createActionByOption("onContextMenuShowing"),onCurrentDirectoryChanged:this._createActionByOption("onCurrentDirectoryChanged"),onSelectedFileOpened:this._createActionByOption("onSelectedFileOpened"),onSelectionChanged:this._createActionByOption("onSelectionChanged"),onFocusedItemChanged:this._createActionByOption("onFocusedItemChanged"),onToolbarItemClick:this._createActionByOption("onToolbarItemClick"),onErrorOccurred:this._createActionByOption("onErrorOccurred"),editing:{onDirectoryCreating:this._createActionByOption("onDirectoryCreating"),onDirectoryCreated:this._createActionByOption("onDirectoryCreated"),onItemRenaming:this._createActionByOption("onItemRenaming"),onItemRenamed:this._createActionByOption("onItemRenamed"),onItemDeleting:this._createActionByOption("onItemDeleting"),onItemDeleted:this._createActionByOption("onItemDeleted"),onItemCopying:this._createActionByOption("onItemCopying"),onItemCopied:this._createActionByOption("onItemCopied"),onItemMoving:this._createActionByOption("onItemMoving"),onItemMoved:this._createActionByOption("onItemMoved"),onFileUploading:this._createActionByOption("onFileUploading"),onFileUploaded:this._createActionByOption("onFileUploaded"),onItemDownloading:this._createActionByOption("onItemDownloading")}}}executeCommand(e){return this._commandManager.executeCommand(e)}_setCurrentDirectory(e,t){this._controller.setCurrentDirectory(e,t)}_getCurrentDirectory(){return this._controller.getCurrentDirectory()}_onControllerInitialized(e){var{controller:t}=e;this._controller=this._controller||t,this._syncToCurrentDirectory()}_onDataLoading(e){var{operation:t}=e,n=null;"navigation"===t&&(n={focusedItemKey:this._itemKeyToFocus,selectedItemKeys:this.option("selectedItemKeys")},this._itemKeyToFocus=void 0),this._itemView.refresh(n)}_onSelectedDirectoryChanged(){var e=this._getCurrentDirectory();this._syncToCurrentDirectory(),this._actions.onCurrentDirectoryChanged({directory:e.fileItem})}_syncToCurrentDirectory(){var e=this._getCurrentDirectory();this._filesTreeView&&this._filesTreeView.updateCurrentDirectory(),this._breadcrumbs&&this._breadcrumbs.setCurrentDirectory(e),this._checkPathActuality()}_checkPathActuality(){if(!this._lockCurrentPathProcessing){var e=this._controller.getCurrentPath(),t=this._controller.getCurrentPathKeys(),n={};this.option("currentPath")!==e&&(n.currentPath=e),Object(s.h)(this.option("currentPathKeys"),t)||(n.currentPathKeys=t),Object(o.e)(n)||this.option(n)}}getDirectories(e,t){return this._controller.getDirectories(e,t)}_getSelectedItemInfos(){return this._itemView?this._itemView.getSelectedItems():[]}refresh(){return this.executeCommand("refresh")}getCurrentDirectory(){var e=this._getCurrentDirectory();return e&&e.fileItem||null}getSelectedItems(){return this._getSelectedItemInfos().map(e=>e.fileItem)}_onSelectedItemOpened(e){var{fileItemInfo:t}=e,n=t.fileItem;if(n.isDirectory){n.isParentFolder&&(this._itemKeyToFocus=this._getCurrentDirectory().fileItem.key);var r=n.isParentFolder?this._getCurrentDirectory().parentDirectory:t;this._setCurrentDirectory(r),r&&this._filesTreeView.toggleDirectoryExpandedState(r.parentDirectory,!0)}else this._actions.onSelectedFileOpened({file:n})}}Object(c.a)("dxFileManager",Un);var zn=Un;t.default=zn},"5fwT":function(e,t,n){"use strict";n.r(t);var r=n("L2JU"),i=n("0woa"),o=n("uPXb"),a=n.n(o),s=n("anAt"),l=n.n(s),c=n("PUqs");function u(){return{faqs:[]}}var d={namespaced:!0,state:u,getters:{faqs:function(e){return e.faqs}},actions:{fetch:function(e){var t=e.commit;e.dispatch,e.getters,e.state,e.rootGetters;return new Promise((function(e,n){axios.get("settings/faqs").then((function(n){t("setState",n.data),e()}))}))},save:function(e,t){e.commit;var n=e.dispatch;e.getters,e.state,e.rootGetters;return new Promise((function(e,r){axios.post("settings/faqs",{changes:t.changes}).then((function(t){e(),n("fetch")}))}))},resetState:function(e){(0,e.commit)("resetState")}},mutations:{setState:function(e,t){e.faqs=t},resetState:function(e){e=Object.assign(e,{faqs:[]})}}};function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===h(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g={components:{DxDataGrid:i.DxDataGrid,DxColumn:i.DxColumn,DxTextArea:a.a,DxHtmlEditor:l.a,PickImagePopup:c.a},data:function(){return{gridData:null,validationRules:{topic:[{type:"required",message:this.$t("settings.faqs.topic")+this.$mt.validations.required}],question:[{type:"required",message:this.$t("settings.faqs.question")+this.$mt.validations.required}],answer:[{type:"required",message:this.$t("settings.faqs.answer")+this.$mt.validations.required}]}}},beforeCreate:function(){this.$store.registerModule("Settings.faqs",d)},created:function(){this.fetch()},destroyed:function(){this.$store.unregisterModule("Settings.faqs")},computed:f(f({},Object(r.c)("Settings.faqs",["faqs"])),{},{dataGrid:function(){return this.$refs.dataGrid.instance}}),watch:{faqs:function(){this.cloneDeepData()}},methods:f(f({},Object(r.b)("Settings.faqs",["fetch","save","resetState"])),{},{onSave:function(e){this.save(e)},cloneDeepData:function(){this.gridData=this.$mf.cloneDeep(this.faqs)},onUseHtmlChange:function(e){this.dataGrid.option("editing.form.items[2].editorOptions.value",e.value),this.dataGrid.option("editing.form.items[3].visible",!e.value),this.dataGrid.option("editing.form.items[4].visible",e.value)},onInitNewRow:function(e){this.dataGrid.option("editing.popup.title",this.$t("settings.faqs.popup.create"))},onEditingStart:function(e){var t=/<\/?[a-z][\s\S]*>/i.test(e.data.answer);this.onUseHtmlChange({value:t}),this.dataGrid.option("editing.popup.title",this.$t("settings.faqs.popup.edit"))},onShown:function(e){var t=this;this.$mf.checkPinDataGrid(e,this);var n=e.component.option("toolbarItems");n.push({toolbar:"bottom",location:"before",widget:"dxButton",options:{icon:"image",text:this.$t("titles.chooseImage"),onClick:function(){return t.$refs.pickImagePopup.show({clientPath:"faqs"})}}}),e.component.option("toolbarItems",n),this.$mf.pushPopupToHistoryState((function(){return t.dataGrid.cancelEditData()}))}})},v=n("KHd+"),_=Object(v.a)(g,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"settings-page"},[t("h2",{staticClass:"content-block"},[e._v("\n        "+e._s(e.$t("settings.faqs.title"))+"\n    ")]),e._v(" "),t("div",{staticClass:"content-block dx-card responsive-paddings"},[t("div",[t("DxDataGrid",{ref:"dataGrid",attrs:{"data-source":e.gridData,"key-expr":"id","show-borders":!0,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",paging:{pageSize:10},headerFilter:{visible:!0},loadPanel:{enabled:!0},selection:{mode:"single"},editing:{allowAdding:!0,allowUpdating:!0,allowDeleting:!0,confirmDelete:!1,mode:"popup",popup:{showTitle:!0,onShown:e.onShown,onHiding:e.$mf.popRouteHistoryState},form:{labelLocation:e.$devices.phone?"top":"left",items:[{dataField:"topic",colSpan:2},{dataField:"question",colSpan:2},{editorType:"dxCheckBox",colSpan:2,editorOptions:{value:!1,onValueChanged:e.onUseHtmlChange},label:{text:e.$t("settings.faqs.useHtml")}},{visible:!0,colSpan:2,dataField:"answer",editorType:"dxTextArea",editorOptions:{stylingMode:"filled",height:150}},{visible:!1,dataField:"answer",colSpan:2,editorType:"dxHtmlEditor",editorOptions:{mediaResizing:{enabled:!0},toolbar:{items:["undo","redo","separator","bold","italic","strike","underline","separator","alignLeft","alignCenter","alignRight","alignJustify","separator","orderedList","bulletList","separator","color","background","separator","link","image","separator","clear","insertTable"]}}}]},startEditAction:"dblClick"}},on:{contentReady:function(t){return e.$mf.dataGridPreload(e.gridData,e.dataGrid)},"init-new-row":e.onInitNewRow,"editing-start":e.onEditingStart,saved:e.onSave},scopedSlots:e._u([{key:"commandCellTemplate",fn:function(n){var r=n.data;return[t("DxToolbar",{attrs:{items:[{visible:4!=r.data.status,locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"edit",hint:e.$t("buttons.edit"),text:e.$t("buttons.edit"),onClick:function(){e.dataGrid.editRow(r.rowIndex)}}},{locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"trash",hint:e.$t("buttons.delete"),text:e.$t("buttons.delete"),onClick:function(){return e.$bus.emit("checkPin",(function(){return e.dataGrid.deleteRow(r.rowIndex)}))}}}]}})]}}])},[t("DxColumn",{attrs:{fixed:!0,width:e.$devices.phone?35:65,type:"buttons",cssClass:"dx-datagrid-command-column","cell-template":"commandCellTemplate",caption:e.$t("titles.commandHeaderTitle".concat(e.$devices.phone?"Short":""))}}),e._v(" "),t("DxColumn",{attrs:{"data-field":"topic","header-filter":{allowSearch:!0},caption:e.$t("settings.faqs.topic"),"validation-rules":e.validationRules.topic}}),e._v(" "),t("DxColumn",{attrs:{"data-field":"question","header-filter":{allowSearch:!0},caption:e.$t("settings.faqs.question"),"validation-rules":e.validationRules.question}}),e._v(" "),t("DxColumn",{attrs:{visible:!1,"data-field":"answer","header-filter":{allowSearch:!0},caption:e.$t("settings.faqs.answer"),"validation-rules":e.validationRules.answer}})],1),e._v(" "),t("PickImagePopup",{ref:"pickImagePopup"})],1)])])}),[],!1,null,"675c8a1a",null);t.default=_.exports},ADaq:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"e",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return c}));var r=n("sUSw"),i="/",o=e=>{var t=e.lastIndexOf(".");return-1!==t?e.substr(t):""},a=e=>{var t=e.lastIndexOf(i);return-1!==t?e.substr(t+i.length):e},s=(e,t)=>{if(!e||"/"===e)return[];for(var n=[],r="",o=0;o<e.length;o++){var a=e.charAt(o);if(a===i){var s=e.charAt(o+1);s!==i&&(r&&(n.push(r),r=""),a=s),o++}r+=a}if(r&&n.push(r),t)for(var u=0;u<n.length;u++)n[u]=c(0===u?"":n[u-1],l(n[u]));return n},l=function(e){return e.replace(/\//g,"//")},c=function(){var e="";return Object(r.a)(arguments,(t,n)=>{n&&(e&&(e+=i),e+=n)}),e}},E6yd:function(e,t,n){"use strict";var r=n("a8dJ"),i=n("v5W6"),o=n("t66f"),a=n("hpbx");class s extends a.a{constructor(e){super(e=Object(r.g)(e,{})),this._hasSubDirsGetter=Object(o.a)(e.hasSubDirectoriesExpr||"hasSubDirectories"),this._getItemsFunction=this._ensureFunction(e.getItems,()=>[]),this._renameItemFunction=this._ensureFunction(e.renameItem),this._createDirectoryFunction=this._ensureFunction(e.createDirectory),this._deleteItemFunction=this._ensureFunction(e.deleteItem),this._moveItemFunction=this._ensureFunction(e.moveItem),this._copyItemFunction=this._ensureFunction(e.copyItem),this._uploadFileChunkFunction=this._ensureFunction(e.uploadFileChunk),this._abortFileUploadFunction=this._ensureFunction(e.abortFileUpload),this._downloadItemsFunction=this._ensureFunction(e.downloadItems),this._getItemsContentFunction=this._ensureFunction(e.getItemsContent)}getItems(e){var t=e.getFullPathInfo();return this._executeActionAsDeferred(()=>this._getItemsFunction(e),!0).then(e=>this._convertDataObjectsToFileItems(e,t))}renameItem(e,t){return this._executeActionAsDeferred(()=>this._renameItemFunction(e,t))}createDirectory(e,t){return this._executeActionAsDeferred(()=>this._createDirectoryFunction(e,t))}deleteItems(e){return e.map(e=>this._executeActionAsDeferred(()=>this._deleteItemFunction(e)))}moveItems(e,t){return e.map(e=>this._executeActionAsDeferred(()=>this._moveItemFunction(e,t)))}copyItems(e,t){return e.map(e=>this._executeActionAsDeferred(()=>this._copyItemFunction(e,t)))}uploadFileChunk(e,t,n){return this._executeActionAsDeferred(()=>this._uploadFileChunkFunction(e,t,n))}abortFileUpload(e,t,n){return this._executeActionAsDeferred(()=>this._abortFileUploadFunction(e,t,n))}downloadItems(e){return this._executeActionAsDeferred(()=>this._downloadItemsFunction(e))}getItemsContent(e){return this._executeActionAsDeferred(()=>this._getItemsContentFunction(e))}_hasSubDirs(e){var t=this._hasSubDirsGetter(e);return"boolean"!=typeof t||t}_getKeyExpr(e){return e.keyExpr||"key"}_ensureFunction(e,t){return t=t||r.n,Object(i.h)(e)?e:t}}t.a=s},G188:function(e,t,n){var r=n("xf0j");"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(r,i);r.locals&&(e.exports=r.locals)},MRXl:function(e,t,n){var r;r=function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=176)}([function(e,t,n){"use strict";n.d(t,"c",(function(){return x})),n.d(t,"b",(function(){return S})),n.d(t,"d",(function(){return j})),n.d(t,"a",(function(){return I}));var r=n(1),i=n.n(r),o=n(16),a=n.n(o),s=n(37),l=n.n(s),c=n(2),u=n(4),d=n(3),h=n(12),p=n(7),f=n(44),m=n(23),g=n(57);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=Object(m.a)("quill"),x=new c.Registry;c.ParentBlot.uiClass="ql-ui";var I=function(){function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(C(this,e),this.options=S(t,r),this.container=this.options.container,null==this.container)return w.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var i=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",f.a.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new d.a;var o=this.options.registry.query(c.ScrollBlot.blotName);this.scroll=new o(this.options.registry,this.root,{emitter:this.emitter,toggleBlankClass:this.toggleBlankClass.bind(this)}),this.editor=new u.a(this.scroll),this.selection=new p.b(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.init(),this.emitter.on(d.a.events.EDITOR_CHANGE,(function(e){e===d.a.events.TEXT_CHANGE&&n.toggleBlankClass()})),this.emitter.on(d.a.events.SCROLL_UPDATE,(function(e,t){var r=n.selection.lastRange,i=b(n.selection.getRange(),1)[0],o=r&&i?{oldRange:r,newRange:i}:void 0;E.call(n,(function(){return n.editor.update(null,t,o)}),e)})),this.setContents(this.getInitialContent(i)),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}var t,n,r;return t=e,r=[{key:"debug",value:function(e){!0===e&&(e="log"),m.a.level(e)}},{key:"find",value:function(e){return f.a.get(e)||x.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&w.error("Cannot import ".concat(e,". Are you sure it was registered?")),this.imports[e]}},{key:"register",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e){var i=e.attrName||e.blotName;"string"==typeof i?this.register("formats/".concat(i),e,t):Object.keys(e).forEach((function(r){n.register(r,e[r],t)}))}else null==this.imports[e]||r||w.warn("Overwriting ".concat(e," with"),t),this.imports[e]=t,0!==e.indexOf("blots/")&&0!==e.indexOf("formats/")||"abstract"===t.blotName||x.register(t),"function"==typeof t.register&&t.register(x)}}],(n=[{key:"getInitialContent",value:function(e){return this.clipboard.convert({html:"".concat(e,"<p><br></p>"),text:"\n"})}},{key:"toggleBlankClass",value:function(){var e=this.selection.composing;this.root.classList.toggle("ql-blank",this.editor.isBlank(e))}},{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e){var n=e;(e=document.createElement("div")).classList.add(n)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,n){var r=this,i=b(j(e,t,n),4);return e=i[0],t=i[1],n=i[3],E.call(this,(function(){return r.editor.deleteText(e,t)}),n,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"editReadOnly",value:function(e){this.allowReadOnlyEdits=!0;var t=e();return this.allowReadOnlyEdits=!1,t}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.a.sources.API;return E.call(this,(function(){var r=n.getSelection(!0),o=new i.a;if(null==r)return o;if(n.scroll.query(e,c.Scope.BLOCK))o=n.editor.formatLine(r.index,r.length,_({},e,t));else{if(0===r.length)return n.selection.format(e,t),o;o=n.editor.formatText(r.index,r.length,_({},e,t))}return n.setSelection(r,d.a.sources.SILENT),o}),r)}},{key:"formatLine",value:function(e,t,n,r,i){var o,a=this,s=b(j(e,t,n,r,i),4);return e=s[0],t=s[1],o=s[2],i=s[3],E.call(this,(function(){return a.editor.formatLine(e,t,o)}),i,e,0)}},{key:"formatText",value:function(e,t,n,r,i){var o,a=this,s=b(j(e,t,n,r,i),4);return e=s[0],t=s[1],o=s[2],i=s[3],E.call(this,(function(){return a.editor.formatText(e,t,o)}),i,e,0)}},{key:"getBounds",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t="number"==typeof e?this.selection.getBounds(e,n):this.selection.getBounds(e.index,e.length);var r=this.container.getBoundingClientRect();return{bottom:t.bottom-r.top,height:t.height,left:t.left-r.left,right:t.right-r.left,top:t.top-r.top,width:t.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=j(e,t),r=b(n,2);return e=r[0],t=r[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length)}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getSemanticHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=j(e,t),r=b(n,2);return e=r[0],t=r[1],this.editor.getHTML(e,t)}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,n=j(e,t),r=b(n,2);return e=r[0],t=r[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,n,r){var i=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return E.call(this,(function(){return i.editor.insertEmbed(t,n,r)}),o,t)}},{key:"insertText",value:function(e,t,n,r,i){var o,a=this,s=b(j(e,0,n,r,i),4);return e=s[0],o=s[2],i=s[3],E.call(this,(function(){return a.editor.insertText(e,t,o)}),i,e,t.length)}},{key:"isEnabled",value:function(){return this.scroll.isEnabled()}},{key:"off",value:function(){var e;return(e=this.emitter).off.apply(e,arguments)}},{key:"on",value:function(){var e;return(e=this.emitter).on.apply(e,arguments)}},{key:"once",value:function(){var e;return(e=this.emitter).once.apply(e,arguments)}},{key:"removeFormat",value:function(e,t,n){var r=this,i=b(j(e,t,n),4);return e=i[0],t=i[1],n=i[3],E.call(this,(function(){return r.editor.removeFormat(e,t)}),n,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.a.sources.API;return E.call(this,(function(){t=new i.a(t);var r=n.getLength(),o=n.editor.deleteText(0,r),a=n.editor.applyDelta(t),s=n.editor.deleteText(n.getLength()-1,1);return n.emitter.emit(e.events.CONTENT_SETTED),o.compose(a).compose(s)}),r)}},{key:"setSelection",value:function(t,n,r){if(null==t)this.selection.setRange(null,n||e.sources.API);else{var i=b(j(t,n,r),4);t=i[0],n=i[1],r=i[3],this.selection.setRange(new p.a(Math.max(0,t),n),r),r!==d.a.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.a.sources.API,n=(new i.a).insert(e);return this.setContents(n,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.a.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.a.sources.API;return E.call(this,(function(){return e=new i.a(e),t.editor.applyDelta(e,n)}),n,!0)}}])&&O(t.prototype,n),r&&O(t,r),e}();function S(e,t){if((t=l()({container:e,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0}},t)).theme&&t.theme!==I.DEFAULTS.theme){if(t.theme=I.import("themes/".concat(t.theme)),null==t.theme)throw new Error("Invalid theme ".concat(t.theme,". Did you register it?"))}else t.theme=g.a;var n=a()(t.theme.DEFAULTS);[n,t].forEach((function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach((function(t){!0===e.modules[t]&&(e.modules[t]={})}))}));var r=Object.keys(n.modules).concat(Object.keys(t.modules)).reduce((function(e,t){var n=I.import("modules/".concat(t));return null==n?w.error("Cannot load ".concat(t," module. Are you sure you registered it?")):e[t]=n.DEFAULTS||{},e}),{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=l()({},I.DEFAULTS,{modules:r},n,t),["bounds","container","scrollingContainer"].forEach((function(e){"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))})),t.modules=Object.keys(t.modules).reduce((function(e,n){return t.modules[n]&&(e[n]=t.modules[n]),e}),{}),t}function E(e,t,n,r){if(!this.isEnabled()&&t===d.a.sources.USER&&!this.allowReadOnlyEdits)return new i.a;var o=null==n?null:this.getSelection(),a=this.editor.delta,s=e();if(null!=o&&(!0===n&&(n=o.index),null==r?o=k(o,s,t):0!==r&&(o=k(o,n,r,t)),this.setSelection(o,d.a.sources.SILENT)),s.length()>0){var l,c,u=[d.a.events.TEXT_CHANGE,s,a,t];(l=this.emitter).emit.apply(l,[d.a.events.EDITOR_CHANGE].concat(u)),t!==d.a.sources.SILENT&&(c=this.emitter).emit.apply(c,u)}return s}function j(e,t,n,r,i){var o={};return"number"==typeof e.index&&"number"==typeof e.length?"number"!=typeof t?(i=r,r=n,n=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!=typeof t&&(i=r,r=n,n=t,t=0),"object"===v(n)?(o=n,i=r):"string"==typeof n&&(null!=r?o[n]=r:i=n),[e,t,o,i=i||d.a.sources.API]}function k(e,t,n,r){if(null==e)return null;var o,a;if(t instanceof i.a){var s=b([e.index,e.index+e.length].map((function(e){return t.transformPosition(e,r!==d.a.sources.USER)})),2);o=s[0],a=s[1]}else{var l=b([e.index,e.index+e.length].map((function(e){return e<t||e===t&&r===d.a.sources.USER?e:n>=0?e+n:Math.max(t,e+n)})),2);o=l[0],a=l[1]}return new p.a(o,a-o)}I.DEFAULTS={bounds:null,modules:{},placeholder:"",readOnly:!1,registry:x,scrollingContainer:null,theme:"default"},I.events=d.a.events,I.sources=d.a.sources,I.version="1.5.20",I.imports={delta:i.a,parchment:c,"core/module":h.a,"core/theme":g.a}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},i=r(n(118)),o=r(n(16)),a=r(n(30)),s=r(n(119)),l=r(n(94)),c=String.fromCharCode(0),u=function(){function e(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}return e.prototype.insert=function(e,t){var n={};return"string"==typeof e&&0===e.length?this:(n.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n))},e.prototype.delete=function(e){return e<=0?this:this.push({delete:e})},e.prototype.retain=function(e,t){if(e<=0)return this;var n={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(n.attributes=t),this.push(n)},e.prototype.push=function(e){var t=this.ops.length,n=this.ops[t-1];if(e=o.default(e),"object"==typeof n){if("number"==typeof e.delete&&"number"==typeof n.delete)return this.ops[t-1]={delete:n.delete+e.delete},this;if("number"==typeof n.delete&&null!=e.insert&&(t-=1,"object"!=typeof(n=this.ops[t-1])))return this.ops.unshift(e),this;if(a.default(e.attributes,n.attributes)){if("string"==typeof e.insert&&"string"==typeof n.insert)return this.ops[t-1]={insert:n.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof n.retain)return this.ops[t-1]={retain:n.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this},e.prototype.chop=function(){var e=this.ops[this.ops.length-1];return e&&e.retain&&!e.attributes&&this.ops.pop(),this},e.prototype.filter=function(e){return this.ops.filter(e)},e.prototype.forEach=function(e){this.ops.forEach(e)},e.prototype.map=function(e){return this.ops.map(e)},e.prototype.partition=function(e){var t=[],n=[];return this.forEach((function(r){(e(r)?t:n).push(r)})),[t,n]},e.prototype.reduce=function(e,t){return this.ops.reduce(e,t)},e.prototype.changeLength=function(){return this.reduce((function(e,t){return t.insert?e+l.default.length(t):t.delete?e-t.delete:e}),0)},e.prototype.length=function(){return this.reduce((function(e,t){return e+l.default.length(t)}),0)},e.prototype.slice=function(t,n){void 0===t&&(t=0),void 0===n&&(n=1/0);for(var r=[],i=l.default.iterator(this.ops),o=0;o<n&&i.hasNext();){var a=void 0;o<t?a=i.next(t-o):(a=i.next(n-o),r.push(a)),o+=l.default.length(a)}return new e(r)},e.prototype.compose=function(t){var n=l.default.iterator(this.ops),r=l.default.iterator(t.ops),i=[],o=r.peek();if(null!=o&&"number"==typeof o.retain&&null==o.attributes){for(var c=o.retain;"insert"===n.peekType()&&n.peekLength()<=c;)c-=n.peekLength(),i.push(n.next());o.retain-c>0&&r.next(o.retain-c)}for(var u=new e(i);n.hasNext()||r.hasNext();)if("insert"===r.peekType())u.push(r.next());else if("delete"===n.peekType())u.push(n.next());else{var d=Math.min(n.peekLength(),r.peekLength()),h=n.next(d),p=r.next(d);if("number"==typeof p.retain){var f={};"number"==typeof h.retain?f.retain=d:f.insert=h.insert;var m=s.default.compose(h.attributes,p.attributes,"number"==typeof h.retain);if(m&&(f.attributes=m),u.push(f),!r.hasNext()&&a.default(u.ops[u.ops.length-1],f)){var g=new e(n.rest());return u.concat(g).chop()}}else"number"==typeof p.delete&&"number"==typeof h.retain&&u.push(p)}return u.chop()},e.prototype.concat=function(t){var n=new e(this.ops.slice());return t.ops.length>0&&(n.push(t.ops[0]),n.ops=n.ops.concat(t.ops.slice(1))),n},e.prototype.diff=function(t,n){if(this.ops===t.ops)return new e;var r=[this,t].map((function(e){return e.map((function(n){if(null!=n.insert)return"string"==typeof n.insert?n.insert:c;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join("")})),o=new e,u=i.default(r[0],r[1],n),d=l.default.iterator(this.ops),h=l.default.iterator(t.ops);return u.forEach((function(e){for(var t=e[1].length;t>0;){var n=0;switch(e[0]){case i.default.INSERT:n=Math.min(h.peekLength(),t),o.push(h.next(n));break;case i.default.DELETE:n=Math.min(t,d.peekLength()),d.next(n),o.delete(n);break;case i.default.EQUAL:n=Math.min(d.peekLength(),h.peekLength(),t);var r=d.next(n),l=h.next(n);a.default(r.insert,l.insert)?o.retain(n,s.default.diff(r.attributes,l.attributes)):o.push(l).delete(n)}t-=n}})),o.chop()},e.prototype.eachLine=function(t,n){void 0===n&&(n="\n");for(var r=l.default.iterator(this.ops),i=new e,o=0;r.hasNext();){if("insert"!==r.peekType())return;var a=r.peek(),s=l.default.length(a)-r.peekLength(),c="string"==typeof a.insert?a.insert.indexOf(n,s)-s:-1;if(c<0)i.push(r.next());else if(c>0)i.push(r.next(c));else{if(!1===t(i,r.next(1).attributes||{},o))return;o+=1,i=new e}}i.length()>0&&t(i,{},o)},e.prototype.invert=function(t){var n=new e;return this.reduce((function(e,r){if(r.insert)n.delete(l.default.length(r));else{if(r.retain&&null==r.attributes)return n.retain(r.retain),e+r.retain;if(r.delete||r.retain&&r.attributes){var i=r.delete||r.retain;return t.slice(e,e+i).forEach((function(e){r.delete?n.push(e):r.retain&&r.attributes&&n.retain(l.default.length(e),s.default.invert(r.attributes,e.attributes))})),e+i}}return e}),0),n.chop()},e.prototype.transform=function(t,n){if(void 0===n&&(n=!1),n=!!n,"number"==typeof t)return this.transformPosition(t,n);for(var r=t,i=l.default.iterator(this.ops),o=l.default.iterator(r.ops),a=new e;i.hasNext()||o.hasNext();)if("insert"!==i.peekType()||!n&&"insert"===o.peekType())if("insert"===o.peekType())a.push(o.next());else{var c=Math.min(i.peekLength(),o.peekLength()),u=i.next(c),d=o.next(c);if(u.delete)continue;d.delete?a.push(d):a.retain(c,s.default.transform(u.attributes,d.attributes,n))}else a.retain(l.default.length(i.next()));return a.chop()},e.prototype.transformPosition=function(e,t){void 0===t&&(t=!1),t=!!t;for(var n=l.default.iterator(this.ops),r=0;n.hasNext()&&r<=e;){var i=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(r<e||!t)&&(e+=i),r+=i):e-=Math.min(i,e-r)}return e},e.Op=l.default,e.AttributeMap=s.default,e}();e.exports=u},function(e,t,n){"use strict";var r;n.r(t),n.d(t,"ParentBlot",(function(){return p})),n.d(t,"ContainerBlot",(function(){return m})),n.d(t,"LeafBlot",(function(){return v})),n.d(t,"EmbedBlot",(function(){return A})),n.d(t,"ScrollBlot",(function(){return M})),n.d(t,"BlockBlot",(function(){return k})),n.d(t,"InlineBlot",(function(){return E})),n.d(t,"TextBlot",(function(){return N})),n.d(t,"Attributor",(function(){return _})),n.d(t,"ClassAttributor",(function(){return C})),n.d(t,"StyleAttributor",(function(){return x})),n.d(t,"AttributorStore",(function(){return I})),n.d(t,"Registry",(function(){return c})),n.d(t,"Scope",(function(){return o})),function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(r||(r={}));var i,o=r,a=function(){function e(){this.head=null,this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.insertBefore(e[0],null),e.length>1){var n=e.slice(1);this.append.apply(this,n)}},e.prototype.at=function(e){for(var t=this.iterator(),n=t();n&&e>0;)e-=1,n=t();return n},e.prototype.contains=function(e){for(var t=this.iterator(),n=t();n;){if(n===e)return!0;n=t()}return!1},e.prototype.indexOf=function(e){for(var t=this.iterator(),n=t(),r=0;n;){if(n===e)return r;r+=1,n=t()}return-1},e.prototype.insertBefore=function(e,t){null!=e&&(this.remove(e),e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,n=this.head;null!=n;){if(n===e)return t;t+=n.length(),n=n.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var n=this.iterator(),r=n();r;){var i=r.length();if(e<i||t&&e===i&&(null==r.next||0!==r.next.length()))return[r,e];e-=i,r=n()}return[null,0]},e.prototype.forEach=function(e){for(var t=this.iterator(),n=t();n;)e(n),n=t()},e.prototype.forEachAt=function(e,t,n){if(!(t<=0))for(var r=this.find(e),i=r[0],o=e-r[1],a=this.iterator(i),s=a();s&&o<e+t;){var l=s.length();e>o?n(s,e-o,Math.min(t,o+l-e)):n(s,0,Math.min(l,e+t-o)),o+=l,s=a()}},e.prototype.map=function(e){return this.reduce((function(t,n){return t.push(e(n)),t}),[])},e.prototype.reduce=function(e,t){for(var n=this.iterator(),r=n();r;)t=e(t,r),r=n();return t},e}(),s=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),l=function(e){function t(t){var n=this;return t="[Parchment] "+t,(n=e.call(this,t)||this).message=t,n.name=n.constructor.name,n}return s(t,e),t}(Error),c=function(){function e(){this.attributes={},this.classes={},this.tags={},this.types={}}return e.find=function(e,t){return void 0===t&&(t=!1),null==e?null:this.blots.has(e)?this.blots.get(e)||null:t?this.find(e.parentNode,t):null},e.prototype.create=function(t,n,r){var i=this.query(n);if(null==i)throw new l("Unable to create "+n+" blot");var o=i,a=n instanceof Node||n.nodeType===Node.TEXT_NODE?n:o.create(r),s=new o(t,a,r);return e.blots.set(s.domNode,s),s},e.prototype.find=function(t,n){return void 0===n&&(n=!1),e.find(t,n)},e.prototype.query=function(e,t){var n,r=this;return void 0===t&&(t=o.ANY),"string"==typeof e?n=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?n=this.types.text:"number"==typeof e?e&o.LEVEL&o.BLOCK?n=this.types.block:e&o.LEVEL&o.INLINE&&(n=this.types.inline):e instanceof HTMLElement&&((e.getAttribute("class")||"").split(/\s+/).some((function(e){return!!(n=r.classes[e])})),n=n||this.tags[e.tagName]),null==n?null:t&o.LEVEL&n.scope&&t&o.TYPE&n.scope?n:null},e.prototype.register=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(t.length>1)return t.map((function(t){return e.register(t)}));var r=t[0];if("string"!=typeof r.blotName&&"string"!=typeof r.attrName)throw new l("Invalid definition");if("abstract"===r.blotName)throw new l("Cannot register abstract class");if(this.types[r.blotName||r.attrName]=r,"string"==typeof r.keyName)this.attributes[r.keyName]=r;else if(null!=r.className&&(this.classes[r.className]=r),null!=r.tagName){Array.isArray(r.tagName)?r.tagName=r.tagName.map((function(e){return e.toUpperCase()})):r.tagName=r.tagName.toUpperCase();var i=Array.isArray(r.tagName)?r.tagName:[r.tagName];i.forEach((function(t){null!=e.tags[t]&&null!=r.className||(e.tags[t]=r)}))}return r},e.blots=new WeakMap,e}(),u=function(){function e(e,t){this.scroll=e,this.domNode=t,c.blots.set(t,this),this.prev=null,this.next=null}return e.create=function(e){if(null==this.tagName)throw new l("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"==typeof e&&(e=e.toUpperCase(),parseInt(e,10).toString()===e&&(e=parseInt(e,10))),t="number"==typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!1,configurable:!0}),e.prototype.attach=function(){},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return this.scroll.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),c.blots.delete(this.domNode)},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,n,r){var i=this.isolate(e,t);if(null!=this.scroll.query(n,o.BLOT)&&r)i.wrap(n,r);else if(null!=this.scroll.query(n,o.ATTRIBUTE)){var a=this.scroll.create(this.statics.scope);i.wrap(a),a.format(n,r)}},e.prototype.insertAt=function(e,t,n){var r=null==n?this.scroll.create("text",t):this.scroll.create(t,n),i=this.split(e);this.parent.insertBefore(r,i||void 0)},e.prototype.isolate=function(e,t){var n=this.split(e);if(null==n)throw new Error("Attempt to isolate at end");return n.split(t),n},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName)},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replaceWith=function(e,t){var n="string"==typeof e?this.scroll.create(e,t):e;return null!=this.parent&&(this.parent.insertBefore(n,this.next||void 0),this.remove()),n},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var n="string"==typeof e?this.scroll.create(e,t):e;if(null!=this.parent&&this.parent.insertBefore(n,this.next||void 0),"function"!=typeof n.appendChild)throw new l("Cannot wrap "+e);return n.appendChild(this),n},e.blotName="abstract",e}(),d=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function h(e,t){var n=t.find(e);if(null==n)try{n=t.create(e)}catch(r){n=t.create(o.INLINE),Array.from(e.childNodes).forEach((function(e){n.domNode.appendChild(e)})),e.parentNode&&e.parentNode.replaceChild(n.domNode,e),n.attach()}return n}var p=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.uiNode=null,r.build(),r}return d(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach((function(e){e.attach()}))},t.prototype.attachUI=function(e){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=e,t.uiClass&&this.uiNode.classList.add(t.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)},t.prototype.build=function(){var e=this;this.children=new a,Array.from(this.domNode.childNodes).filter((function(t){return t!==e.uiNode})).reverse().forEach((function(t){try{var n=h(t,e.scroll);e.insertBefore(n,e.children.head||void 0)}catch(e){if(e instanceof l)return;throw e}}))},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,(function(e,t,n){e.deleteAt(t,n)}))},t.prototype.descendant=function(e,n){void 0===n&&(n=0);var r=this.children.find(n),i=r[0],o=r[1];return null==e.blotName&&e(i)||null!=e.blotName&&i instanceof e?[i,o]:i instanceof t?i.descendant(e,o):[null,-1]},t.prototype.descendants=function(e,n,r){void 0===n&&(n=0),void 0===r&&(r=Number.MAX_VALUE);var i=[],o=r;return this.children.forEachAt(n,r,(function(n,r,a){(null==e.blotName&&e(n)||null!=e.blotName&&n instanceof e)&&i.push(n),n instanceof t&&(i=i.concat(n.descendants(e,r,o))),o-=a})),i},t.prototype.detach=function(){this.children.forEach((function(e){e.detach()})),e.prototype.detach.call(this)},t.prototype.enforceAllowedChildren=function(){var e=this,n=!1;this.children.forEach((function(r){n||e.statics.allowedChildren.some((function(e){return r instanceof e}))||(r.statics.scope===o.BLOCK_BLOT?(null!=r.next&&e.splitAfter(r),null!=r.prev&&e.splitAfter(r.prev),r.parent.unwrap(),n=!0):r instanceof t?r.unwrap():r.remove())}))},t.prototype.formatAt=function(e,t,n,r){this.children.forEachAt(e,t,(function(e,t,i){e.formatAt(t,i,n,r)}))},t.prototype.insertAt=function(e,t,n){var r=this.children.find(e),i=r[0],o=r[1];if(i)i.insertAt(o,t,n);else{var a=null==n?this.scroll.create("text",t):this.scroll.create(t,n);this.appendChild(a)}},t.prototype.insertBefore=function(e,t){null!=e.parent&&e.parent.children.remove(e);var n=null;this.children.insertBefore(e,t||null),e.parent=this,null!=t&&(n=t.domNode),this.domNode.parentNode===e.domNode&&this.domNode.nextSibling===n||this.domNode.insertBefore(e.domNode,n),e.attach()},t.prototype.length=function(){return this.children.reduce((function(e,t){return e+t.length()}),0)},t.prototype.moveChildren=function(e,t){this.children.forEach((function(n){e.insertBefore(n,t)}))},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){var n=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(n)}else this.remove()},t.prototype.path=function(e,n){void 0===n&&(n=!1);var r=this.children.find(e,n),i=r[0],o=r[1],a=[[this,e]];return i instanceof t?a.concat(i.path(o,n)):(null!=i&&a.push([i,o]),a)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replaceWith=function(n,r){var i="string"==typeof n?this.scroll.create(n,r):n;return i instanceof t&&this.moveChildren(i),e.prototype.replaceWith.call(this,i)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=this.clone();return this.parent&&this.parent.insertBefore(n,this.next||void 0),this.children.forEachAt(e,this.length(),(function(e,r,i){var o=e.split(r,t);null!=o&&n.appendChild(o)})),n},t.prototype.splitAfter=function(e){for(var t=this.clone();null!=e.next;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t},t.prototype.unwrap=function(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()},t.prototype.update=function(e,t){var n=this,r=[],i=[];e.forEach((function(e){e.target===n.domNode&&"childList"===e.type&&(r.push.apply(r,e.addedNodes),i.push.apply(i,e.removedNodes))})),i.forEach((function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=n.scroll.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==n.domNode||t.detach())}})),r.filter((function(e){return e.parentNode===n.domNode||e===n.uiNode})).sort((function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(e){var t=null;null!=e.nextSibling&&(t=n.scroll.find(e.nextSibling));var r=h(e,n.scroll);r.next===t&&null!=r.next||(null!=r.parent&&r.parent.removeChild(n),n.insertBefore(r,t||void 0))})),this.enforceAllowedChildren()},t.uiClass="",t}(u),f=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return f(t,e),t.prototype.checkMerge=function(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName},t.prototype.deleteAt=function(t,n){e.prototype.deleteAt.call(this,t,n),this.enforceAllowedChildren()},t.prototype.formatAt=function(t,n,r,i){e.prototype.formatAt.call(this,t,n,r,i),this.enforceAllowedChildren()},t.prototype.insertAt=function(t,n,r){e.prototype.insertAt.call(this,t,n,r),this.enforceAllowedChildren()},t.prototype.optimize=function(t){e.prototype.optimize.call(this,t),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())},t.blotName="container",t.scope=o.BLOCK_BLOT,t}(p),g=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return g(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var n=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(n+=1),[this.parent.domNode,n]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=o.INLINE_BLOT,t}(u),_=function(){function e(e,t,n){void 0===n&&(n={}),this.attrName=e,this.keyName=t;var r=o.TYPE&o.ATTRIBUTE;this.scope=null!=n.scope?n.scope&o.LEVEL|r:o.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}return e.keys=function(e){return Array.from(e.attributes).map((function(e){return e.name}))},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null==this.whitelist||("string"==typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1)},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}(),b=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function y(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter((function(e){return 0===e.indexOf(t+"-")}))}var C=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map((function(e){return e.split("-").slice(0,-1).join("-")}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add(this.keyName+"-"+t),!0)},t.prototype.remove=function(e){y(e,this.keyName).forEach((function(t){e.classList.remove(t)})),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(y(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(_),O=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();function w(e){var t=e.split("-"),n=t.slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("");return t[0]+n}var x=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return O(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map((function(e){return e.split(":")[0].trim()}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[w(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[w(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[w(this.keyName)];return this.canAdd(e,t)?t:""},t}(_),I=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=c.find(this.domNode);if(null!=t){var n=_.keys(this.domNode),r=C.keys(this.domNode),i=x.keys(this.domNode);n.concat(r).concat(i).forEach((function(n){var r=t.scroll.query(n,o.ATTRIBUTE);r instanceof _&&(e.attributes[r.attrName]=r)}))}},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach((function(n){var r=t.attributes[n].value(t.domNode);e.format(n,r)}))},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach((function(e){t.attributes[e].remove(t.domNode)})),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce((function(t,n){return t[n]=e.attributes[n].value(e.domNode),t}),{})},e}(),S=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),E=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.attributes=new I(r.domNode),r}return S(t,e),t.formats=function(e,n){var r=n.query(t.blotName);if(null==r||e.tagName!==r.tagName)return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,n){var r=this;if(e!==this.statics.blotName||n){var i=this.scroll.query(e,o.INLINE);if(null==i)return;i instanceof _?this.attributes.attribute(i,n):!n||e===this.statics.blotName&&this.formats()[e]===n||this.replaceWith(e,n)}else this.children.forEach((function(e){e instanceof t||(e=e.wrap(t.blotName,!0)),r.attributes.copy(e)})),this.unwrap()},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.formatAt=function(t,n,r,i){null!=this.formats()[r]||this.scroll.query(r,o.ATTRIBUTE)?this.isolate(t,n).format(r,i):e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n);var r=this.formats();if(0===Object.keys(r).length)return this.unwrap();var i=this.next;i instanceof t&&i.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var n in e)if(e[n]!==t[n])return!1;return!0}(r,i.formats())&&(i.moveChildren(this),i.remove())},t.prototype.replaceWith=function(t,n){var r=e.prototype.replaceWith.call(this,t,n);return this.attributes.copy(r),r},t.prototype.update=function(t,n){var r=this;e.prototype.update.call(this,t,n),t.some((function(e){return e.target===r.domNode&&"attributes"===e.type}))&&this.attributes.build()},t.prototype.wrap=function(n,r){var i=e.prototype.wrap.call(this,n,r);return i instanceof t&&this.attributes.move(i),i},t.allowedChildren=[t,v],t.blotName="inline",t.scope=o.INLINE_BLOT,t.tagName="SPAN",t}(p),j=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),k=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.attributes=new I(r.domNode),r}return j(t,e),t.formats=function(e,n){var r=n.query(t.blotName);if(null==r||e.tagName!==r.tagName)return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,n){var r=this.scroll.query(e,o.BLOCK);null!=r&&(r instanceof _?this.attributes.attribute(r,n):e!==this.statics.blotName||n?!n||e===this.statics.blotName&&this.formats()[e]===n||this.replaceWith(e,n):this.replaceWith(t.blotName))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.formatAt=function(t,n,r,i){null!=this.scroll.query(r,o.BLOCK)?this.format(r,i):e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.insertAt=function(t,n,r){if(null==r||null!=this.scroll.query(n,o.INLINE))e.prototype.insertAt.call(this,t,n,r);else{var i=this.split(t);if(null==i)throw new Error("Attempt to insertAt after block boundaries");var a=this.scroll.create(n,r);i.parent.insertBefore(a,i)}},t.prototype.replaceWith=function(t,n){var r=e.prototype.replaceWith.call(this,t,n);return this.attributes.copy(r),r},t.prototype.update=function(t,n){var r=this;e.prototype.update.call(this,t,n),t.some((function(e){return e.target===r.domNode&&"attributes"===e.type}))&&this.attributes.build()},t.blotName="block",t.scope=o.BLOCK_BLOT,t.tagName="P",t.allowedChildren=[E,t,v],t}(p),T=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),A=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return T(t,e),t.formats=function(e,t){},t.prototype.format=function(t,n){e.prototype.formatAt.call(this,0,this.length(),t,n)},t.prototype.formatAt=function(t,n,r,i){0===t&&n===this.length()?this.format(r,i):e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.formats=function(){return this.statics.formats(this.domNode,this.scroll)},t}(v),D=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),P={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},M=function(e){function t(t,n){var r=e.call(this,null,n)||this;return r.registry=t,r.scroll=r,r.build(),r.observer=new MutationObserver((function(e){r.update(e)})),r.observer.observe(r.domNode,P),r.attach(),r}return D(t,e),t.prototype.create=function(e,t){return this.registry.create(this,e,t)},t.prototype.find=function(e,t){return void 0===t&&(t=!1),this.registry.find(e,t)},t.prototype.query=function(e,t){return void 0===t&&(t=o.ANY),this.registry.query(e,t)},t.prototype.register=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return(e=this.registry).register.apply(e,t)},t.prototype.build=function(){null!=this.scroll&&e.prototype.build.call(this)},t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,n){this.update(),0===t&&n===this.length()?this.children.forEach((function(e){e.remove()})):e.prototype.deleteAt.call(this,t,n)},t.prototype.formatAt=function(t,n,r,i){this.update(),e.prototype.formatAt.call(this,t,n,r,i)},t.prototype.insertAt=function(t,n,r){this.update(),e.prototype.insertAt.call(this,t,n,r)},t.prototype.optimize=function(t,n){var r=this;void 0===t&&(t=[]),void 0===n&&(n={}),e.prototype.optimize.call(this,n);for(var i=n.mutationsMap||new WeakMap,o=Array.from(this.observer.takeRecords());o.length>0;)t.push(o.pop());for(var a=function e(t,n){void 0===n&&(n=!0),null!=t&&t!==r&&null!=t.domNode.parentNode&&(i.has(t.domNode)||i.set(t.domNode,[]),n&&e(t.parent))},s=function e(t){i.has(t.domNode)&&(t instanceof p&&t.children.forEach(e),i.delete(t.domNode),t.optimize(n))},l=t,c=0;l.length>0;c+=1){if(c>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach((function(e){var t=r.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(a(r.find(e.previousSibling,!1)),Array.from(e.addedNodes).forEach((function(e){var t=r.find(e,!1);a(t,!1),t instanceof p&&t.children.forEach((function(e){a(e,!1)}))}))):"attributes"===e.type&&a(t.prev)),a(t))})),this.children.forEach(s),o=(l=Array.from(this.observer.takeRecords())).slice();o.length>0;)t.push(o.pop())}},t.prototype.update=function(t,n){var r=this;void 0===n&&(n={}),t=t||this.observer.takeRecords();var i=new WeakMap;t.map((function(e){var t=c.find(e.target,!0);return null==t?null:i.has(t.domNode)?(i.get(t.domNode).push(e),null):(i.set(t.domNode,[e]),t)})).forEach((function(e){null!=e&&e!==r&&i.has(e.domNode)&&e.update(i.get(e.domNode)||[],n)})),n.mutationsMap=i,i.has(this.domNode)&&e.prototype.update.call(this,i.get(this.domNode),n),this.optimize(t,n)},t.blotName="scroll",t.defaultChild=k,t.allowedChildren=[k,m],t.scope=o.BLOCK_BLOT,t.tagName="DIV",t}(p),F=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),N=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.text=r.statics.value(r.domNode),r}return F(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){return e.data},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,n,r){null==r?(this.text=this.text.slice(0,t)+n+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,n,r)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(n){e.prototype.optimize.call(this,n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var n=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(n,this.next||void 0),this.text=this.statics.value(this.domNode),n},t.prototype.update=function(e,t){var n=this;e.some((function(e){return"characterData"===e.type&&e.target===n.domNode}))&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=o.INLINE_BLOT,t}(v)},function(e,t,n){"use strict";var r=n(95),i=n.n(r),o=n(15),a=n(44),s=n(23);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=Object(s.a)("quill:events");Object(o.a)()&&["selectionchange","mousedown","mouseup","click"].forEach((function(e){document.addEventListener(e,(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach((function(e){var n,r=a.a.get(e);r&&r.emitter&&(n=r.emitter).handleDOM.apply(n,t)}))}))}));var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,e);var t,n,r,i=h(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(e=i.call(this)).listeners={},e.on("error",m.error),e}return t=o,(n=[{key:"emit",value:function(){for(var e,t,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];(e=m.log).call.apply(e,[m].concat(r)),(t=u(f(o.prototype),"emit",this)).call.apply(t,[this].concat(r))}},{key:"handleDOM",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];(this.listeners[e.type]||[]).forEach((function(t){var r=t.node,i=t.handler;(e.target===r||r.contains(e.target))&&i.apply(void 0,[e].concat(n))}))}},{key:"listenDOM",value:function(e,t,n){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:n})}}])&&c(t.prototype,n),r&&c(t,r),o}(i.a);g.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",CONTENT_SETTED:"content-setted"},g.sources={API:"api",SILENT:"silent",USER:"user"},t.a=g},function(e,t,n){"use strict";var r=n(16),i=n.n(r),o=n(30),a=n.n(o),s=n(37),l=n.n(s),c=n(1),u=n.n(c),d=n(2),h=n(7),p=n(24),f=n(6),m=n(10),g=n(9);function v(e){return S(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||w()}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){return S(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||x(e,t)||w()}function w(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e){if(Array.isArray(e))return e}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j=/^[ -~]*$/,k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta(),this.immediateFormats=new Set}var t,n,r;return t=e,(n=[{key:"addImmediateFormat",value:function(e){this.immediateFormats.add(e)}},{key:"applyDelta",value:function(e){var t=this;this.scroll.update();var n=this.scroll.length();this.scroll.batchStart();var r=function(e){return e.reduce((function(e,t){if("string"==typeof t.insert){var n=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(n,t.attributes)}return e.push(t)}),new u.a)}(e),i=new u.a;return r.reduce((function(e,r){var o=c.Op.length(r),a=r.attributes||{},s=!1;if(null!=r.insert){if(i.retain(o),"string"==typeof r.insert){var u=r.insert;s=!u.endsWith("\n")&&(n<=e||t.scroll.descendant(f.a,e)[0]),t.scroll.insertAt(e,u);var h=O(t.scroll.line(e),2),p=h[0],m=h[1],g=l()({},Object(f.c)(p));if(p instanceof f.d){var v=O(p.descendant(d.LeafBlot,m),1)[0];g=l()(g,Object(f.c)(v))}a=c.AttributeMap.diff(g,a)||{}}else if("object"===C(r.insert)){var _=Object.keys(r.insert)[0];if(null==_)return e;s=null!=t.scroll.query(_,d.Scope.INLINE)&&(n<=e||t.scroll.descendant(f.a,e)[0]),t.scroll.insertAt(e,_,r.insert[_])}n+=o}else i.push(r);var b=Object.keys(a);t.immediateFormats.forEach((function(n){b.indexOf(n)>-1&&(t.scroll.formatAt(e,o,n,a[n]),delete a[n])})),Object.keys(a).forEach((function(n){t.scroll.formatAt(e,o,n,a[n])}));var y=s?1:0;return n+=y,i.delete(y),e+o+y}),0),i.reduce((function(e,n){return"number"==typeof n.delete?(t.scroll.deleteAt(e,n.delete),e):e+c.Op.length(n)}),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(r)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new u.a).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(r).forEach((function(i){n.scroll.lines(e,Math.max(t,1)).forEach((function(e){e.format(i,r[i])}))})),this.scroll.optimize();var o=(new u.a).retain(e).retain(t,i()(r));return this.update(o)}},{key:"formatText",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(r).forEach((function(i){n.scroll.formatAt(e,t,i,r[i])}));var o=(new u.a).retain(e).retain(t,i()(r));return this.update(o)}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(e,t){return e.concat(t.delta())}),new u.a)}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],r=[];0===t?this.scroll.path(e).forEach((function(e){var t=O(e,1)[0];t instanceof f.d?n.push(t):t instanceof d.LeafBlot&&r.push(t)})):(n=this.scroll.lines(e,t),r=this.scroll.descendants(d.LeafBlot,e,t));var i=[n,r].map((function(e){if(0===e.length)return{};for(var t=Object(f.c)(e.shift());Object.keys(t).length>0;){var n=e.shift();if(null==n)return t;t=M(Object(f.c)(n),t)}return t})),o=O(i,2);return n=o[0],r=o[1],b(b({},n),r)}},{key:"getHTML",value:function(e,t){var n=O(this.scroll.line(e),2),r=n[0],i=n[1];return r.length()>=i+t?A(r,i,t,!0):A(this.scroll,e,t,!0)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter((function(e){return"string"==typeof e.insert})).map((function(e){return e.insert})).join("")}},{key:"insertEmbed",value:function(e,t,n){return this.scroll.insertAt(e,t,n),this.update((new u.a).retain(e).insert(y({},t,n)))}},{key:"insertText",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(r).forEach((function(i){n.scroll.formatAt(e,t.length,i,r[i])})),this.update((new u.a).retain(e).insert(t,i()(r)))}},{key:"isBlank",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0===this.scroll.children.length)return!0;if(e)return!1;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;return t.statics.blotName===f.d.blotName&&!(t.children.length>1)&&t.children.head instanceof m.a}},{key:"removeFormat",value:function(e,t){var n=this.getText(e,t),r=O(this.scroll.line(e+t),2),i=r[0],o=r[1],a=0,s=new u.a;null!=i&&(a=i.length()-o,s=i.delta().slice(o,o+a-1).insert("\n"));var l=this.getContents(e,t+a).diff((new u.a).insert(n).concat(s)),c=(new u.a).retain(e).concat(l);return this.applyDelta(c)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,r=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(j)&&this.scroll.find(t[0].target)){var i=this.scroll.find(t[0].target),o=Object(f.c)(i),s=i.offset(this.scroll),l=t[0].oldValue.replace(p.a.CONTENTS,""),c=(new u.a).insert(l),d=(new u.a).insert(i.value()),h=n&&{oldRange:N(n.oldRange,-s),newRange:N(n.newRange,-s)},m=(new u.a).retain(s).concat(c.diff(d,h));e=m.reduce((function(e,t){return t.insert?e.insert(t.insert,o):e.push(t)}),new u.a),this.delta=r.compose(e)}else this.delta=this.getDelta(),e&&a()(r.compose(e),this.delta)||(e=r.diff(this.delta,n));return e}}])&&E(t.prototype,n),r&&E(t,r),e}();function T(e,t,n){if(0===e.length){var r=O(F(n.pop()),1)[0];return t<=0?"</li></".concat(r,">"):"</li></".concat(r,">").concat(T([],t-1,n))}var i=v(e),o=i[0],a=o.child,s=o.offset,l=o.length,c=o.indent,u=o.type,d=i.slice(1),h=O(F(u,a),2),p=h[0],f=h[1];if(c>t)return n.push(u),c===t+1?"<".concat(p,"><li").concat(f,">").concat(A(a,s,l)).concat(T(d,c,n)):"<".concat(p,"><li>").concat(T(e,t+1,n));var m=n[n.length-1];if(c===t&&u===m)return"</li><li".concat(f,">").concat(A(a,s,l)).concat(T(d,c,n));var g=O(F(n.pop()),1)[0];return"</li></".concat(g,">").concat(T(e,t-1,n))}function A(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("function"==typeof e.html)return e.html(t,n);if(e instanceof g.a)return Object(g.b)(e.value().slice(t,t+n));if(e.children){if("list-container"===e.statics.blotName){var i=[];return e.children.forEachAt(t,n,(function(e,t,n){var r=e.formats();i.push({child:e,offset:t,length:n,indent:r.indent||0,type:r.list})})),T(i,-1,[])}var o=[];if(e.children.forEachAt(t,n,(function(e,t,n){o.push(A(e,t,n))})),D(e.children,o),r||"list"===e.statics.blotName)return o.join("");var a=P(e),s=a.outerHTML,l=a.innerHTML,c=s.split(">".concat(l,"<")),u=O(c,2),d=u[0],h=u[1];return 0===d.indexOf("<table")?"".concat(d.replace(/(\sdata-.+?=["'].*?["'])/g,""),">").concat(o.join("").replace(/(\sdata-table.+?=["'].*?["'])/g,""),"<").concat(h):"".concat(d,">").concat(o.join(""),"<").concat(h)}return e.domNode.outerHTML}function D(e,t){1===e.length&&e.head instanceof m.a&&t.push("<br>")}function P(e){var t=e.domNode.cloneNode(!0);return function(e,t){var n,r;return["tableCellLine","tableHeaderCellLine","tableCell","tableHeaderCell"].includes(e.statics.blotName)&&(n=t,r=e.statics.className,n.classList.remove(r),0===n.classList.length&&n.removeAttribute("class")),t}(e,t)}function M(e,t){return Object.keys(t).reduce((function(n,r){return null==e[r]||(t[r]===e[r]?n[r]=t[r]:Array.isArray(t[r])?t[r].indexOf(e[r])<0&&(n[r]=t[r].concat([e[r]])):n[r]=[t[r],e[r]]),n}),{})}function F(e,t){var n="ordered"===e?"ol":"ul",r=t?"".concat(function(e){var t=e.domNode;if(!t.hasAttributes())return"";for(var n=t.attributes,r=" ",i=0;i<n.length;i+=1){var o=n[i].name,a=n[i].value;"class"===o&&(a=a.replace(/ql-indent-\d/g,"").trim()),a.length&&-1===o.indexOf("data-")&&(r+="".concat(o,'="').concat(a,'"'))}return r.length>1?r:""}(t)):"";switch(e){case"checked":return[n,"".concat(r,' data-list="checked"')];case"unchecked":return[n,"".concat(r,' data-list="unchecked"')];default:return[n,r]}}function N(e,t){var n=e.index,r=e.length;return new h.a(n+t,r)}t.a=k},function(e,t,n){"use strict";function r(e){return null!=e}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"b",(function(){return S})),n.d(t,"c",(function(){return E})),n.d(t,"a",(function(){return I})),n.d(t,"d",(function(){return x}));var r=n(1),i=n.n(r),o=n(2),a=n(10),s=n(14),l=n(9),c=n(19);function u(e,t,n,r){return n.map(n=>{const i=r?Object(c.b)(e,n,r):n;return t.scroll.query(i,o.Scope.ATTRIBUTE)}).filter(e=>e instanceof o.Attributor).reduce((e,t)=>(e[t.attrName]=t,e),{})}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),e}function _(e,t,n){return(_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var i=w(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}o.AttributorStore.prototype.build=function(){const{tagName:e}=this.domNode,t=o.Registry.find(this.domNode);if(null==t)return;const n=o.Attributor.keys(this.domNode),r=o.ClassAttributor.keys(this.domNode),i=o.StyleAttributor.keys(this.domNode);this.attributes={...u(e,t,n,c.a.attribute),...u(e,t,r),...u(e,t,i,c.a.style)}};var x=function(e){b(n,e);var t=C(n);function n(e,r){var i;return m(this,n),(i=t.call(this,e,r)).cache={},i}return v(n,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=S(this)),this.cache.delta}},{key:"deleteAt",value:function(e,t){_(w(n.prototype),"deleteAt",this).call(this,e,t),this.cache={}}},{key:"formatAt",value:function(e,t,r,i){t<=0||(this.scroll.query(r,o.Scope.BLOCK)?e+t===this.length()&&this.format(r,i):_(w(n.prototype),"formatAt",this).call(this,e,Math.min(t,this.length()-e-1),r,i),this.cache={})}},{key:"insertAt",value:function(e,t,r){if(null!=r)return _(w(n.prototype),"insertAt",this).call(this,e,t,r),void(this.cache={});if(0!==t.length){var i=t.split("\n"),o=i.shift();o.length>0&&(e<this.length()-1||null==this.children.tail?_(w(n.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});var a=this;i.reduce((function(e,t){return(a=a.split(e,!0)).insertAt(0,t),t.length}),e+o.length)}}},{key:"insertBefore",value:function(e,t){var r=this.children.head;_(w(n.prototype),"insertBefore",this).call(this,e,t),r instanceof a.a&&r.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=_(w(n.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,t){_(w(n.prototype),"moveChildren",this).call(this,e,t),this.cache={}}},{key:"optimize",value:function(e){_(w(n.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return _(w(n.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){_(w(n.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&(0===e||e>=this.length()-1)){var r=this.clone();return 0===e?(this.parent.insertBefore(r,this),this):(this.parent.insertBefore(r,this.next),r)}var i=_(w(n.prototype),"split",this).call(this,e,t);return this.cache={},i}}]),n}(o.BlockBlot);x.blotName="block",x.tagName="P",x.defaultChild=a.a,x.allowedChildren=[a.a,s.a,o.EmbedBlot,l.a];var I=function(e){b(n,e);var t=C(n);function n(){return m(this,n),t.apply(this,arguments)}return v(n,[{key:"attach",value:function(){_(w(n.prototype),"attach",this).call(this),this.attributes=new o.AttributorStore(this.domNode)}},{key:"delta",value:function(){return(new i.a).insert(this.value(),p(p({},this.formats()),this.attributes.values()))}},{key:"format",value:function(e,t){var n=this.scroll.query(e,o.Scope.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,t)}},{key:"formatAt",value:function(e,t,n,r){this.format(n,r)}},{key:"insertAt",value:function(e,t,r){if("string"==typeof t&&t.endsWith("\n")){var i=this.scroll.create(x.blotName);this.parent.insertBefore(i,0===e?this:this.next),i.insertAt(0,t.slice(0,-1))}else _(w(n.prototype),"insertAt",this).call(this,e,t,r)}}]),n}(o.EmbedBlot);function S(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.descendants(o.LeafBlot).reduce((function(e,n){return 0===n.length()?e:e.insert(n.value(),E(n,{},t))}),new i.a).insert("\n",E(e))}function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==e?t:("function"==typeof e.formats&&(t=p(p({},t),e.formats()),n&&delete t["code-token"]),null==e.parent||"scroll"===e.parent.statics.blotName||e.parent.statics.scope!==e.statics.scope?t:E(e.parent,t,n))}I.scope=o.Scope.BLOCK_BLOT},function(e,t,n){"use strict";n.d(t,"a",(function(){return v})),n.d(t,"b",(function(){return _}));var r=n(2),i=n(16),o=n.n(i),a=n(30),s=n.n(a),l=n(3),c=n(23);function u(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g=Object(c.a)("quill:selection"),v=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;m(this,e),this.index=t,this.length=n},_=function(){function e(t,n){var r=this;m(this,e),this.emitter=n,this.scroll=t,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new v(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){r.mouseDown||r.composing||setTimeout(r.update.bind(r,l.a.sources.USER),1)})),this.emitter.on(l.a.events.SCROLL_BEFORE_UPDATE,(function(){if(r.hasFocus()){var e=r.getNativeRange();null!=e&&e.start.node!==r.cursor.textNode&&r.emitter.once(l.a.events.SCROLL_UPDATE,(function(){try{r.root.contains(e.start.node)&&r.root.contains(e.end.node)&&r.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset),r.update(l.a.sources.SILENT)}catch(e){}}))}})),this.emitter.on(l.a.events.SCROLL_OPTIMIZE,(function(e,t){if(t.range){var n=t.range,i=n.startNode,o=n.startOffset,a=n.endNode,s=n.endOffset;r.setNativeRange(i,o,a,s),r.update(l.a.sources.SILENT)}})),this.update(l.a.sources.SILENT)}var t,n,i;return t=e,(n=[{key:"handleComposition",value:function(){var e=this;this.root.addEventListener("compositionstart",(function(){e.composing=!0,e.scroll.batchStart()})),this.root.addEventListener("compositionend",(function(){if(e.scroll.batchEnd(),e.composing=!1,e.cursor.parent){var t=e.cursor.restore();if(!t)return;setTimeout((function(){e.setNativeRange(t.startNode,t.startOffset,t.endNode,t.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,(function(){e.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){e.mouseDown=!1,e.update(l.a.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!this.scroll.query(e,r.Scope.BLOCK)){if(n.start.node!==this.cursor.textNode){var i=this.scroll.find(n.start.node,!1);if(null==i)return;if(i instanceof r.LeafBlot){var o=i.split(n.start.offset);i.parent.insertBefore(this.cursor,o)}else i.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}},{key:"getBounds",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=this.scroll.length();e=Math.min(e,r-1),n=Math.min(e+n,r-1)-e;var i=this.scroll.leaf(e),o=d(i,2),a=o[0],s=o[1];if(null==a)return null;var l=a.position(s,!0),c=d(l,2);t=c[0],s=c[1];var u=document.createRange();if(n>0){u.setStart(t,s);var h=this.scroll.leaf(e+n),p=d(h,2);if(a=p[0],s=p[1],null==a)return null;var f=a.position(s,!0),m=d(f,2);return t=m[0],s=m[1],u.setEnd(t,s),u.getBoundingClientRect()}var g,v="left";return t instanceof Text?(s<t.data.length?(u.setStart(t,s),u.setEnd(t,s+1)):(u.setStart(t,s-1),u.setEnd(t,s),v="right"),g=u.getBoundingClientRect()):(g=a.domNode.getBoundingClientRect(),s>0&&(v="right")),{bottom:g.top+g.height,height:g.height,left:g[v],right:g[v],top:g.top,width:0}}},{key:"getNativeRange",value:function(){var e=document.getSelection();if(null==e||e.rangeCount<=0)return null;var t=e.getRangeAt(0);if(null==t)return null;var n=this.normalizeNative(t);return g.info("getNativeRange",n),n}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root||b(this.root,document.activeElement)}},{key:"normalizedToRange",value:function(e){var t=this,n=[[e.start.node,e.start.offset]];e.native.collapsed||n.push([e.end.node,e.end.offset]);var i=n.map((function(e){var n=d(e,2),i=n[0],o=n[1],a=t.scroll.find(i,!0),s=a.offset(t.scroll);return 0===o?s:a instanceof r.LeafBlot?s+a.index(i,o):s+a.length()})),o=Math.min(Math.max.apply(Math,u(i)),this.scroll.length()-1),a=Math.min.apply(Math,[o].concat(u(i)));return new v(a,o-a)}},{key:"normalizeNative",value:function(e){if(!b(this.root,e.startContainer)||!e.collapsed&&!b(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach((function(e){for(var t=e.node,n=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>n)t=t.childNodes[n],n=0;else{if(t.childNodes.length!==n)break;n=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length>0?t.childNodes.length:t.childNodes.length+1}e.node=t,e.offset=n})),t}},{key:"rangeToNative",value:function(e){var t=this,n=e.collapsed?[e.index]:[e.index,e.index+e.length],r=[],i=this.scroll.length();return n.forEach((function(e,n){e=Math.min(i-1,e);var o=d(t.scroll.leaf(e),2),a=o[0],s=o[1],l=d(a.position(s,0!==n),2),c=l[0],u=l[1];r.push(c,u)})),r.length<2?r.concat(r):r}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var n=this.getBounds(t.index,t.length);if(null!=n){var r=this.scroll.length()-1,i=d(this.scroll.line(Math.min(t.index,r)),1)[0],o=i;if(t.length>0&&(o=d(this.scroll.line(Math.min(t.index+t.length,r)),1)[0]),null!=i&&null!=o){var a=e.getBoundingClientRect();n.top<a.top?e.scrollTop-=a.top-n.top:n.bottom>a.bottom&&(e.scrollTop+=n.bottom-a.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(g.info("setNativeRange",e,t,n,r),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=n.parentNode){var o=document.getSelection();if(null!=o)if(null!=e){this.hasFocus()||this.root.focus();var a=this.getNativeRange()||{},s=a.native;if(null==s||i||e!==s.startContainer||t!==s.startOffset||n!==s.endContainer||r!==s.endOffset){"BR"===e.tagName&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),"BR"===n.tagName&&(r=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);var l=document.createRange();l.setStart(e,t),l.setEnd(n,r),o.removeAllRanges(),o.addRange(l)}}else o.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.a.sources.API;if("string"==typeof t&&(n=t,t=!1),g.info("setRange",e),null!=e){var r=this.rangeToNative(e);this.setNativeRange.apply(this,u(r).concat([t]))}else this.setNativeRange(null);this.update(n)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.a.sources.USER,t=this.lastRange,n=this.getRange(),r=d(n,2),i=r[0],a=r[1];if(this.lastRange=i,this.lastNative=a,null!=this.lastRange&&(this.savedRange=this.lastRange),!s()(t,this.lastRange)){var c;if(!this.composing&&null!=a&&a.native.collapsed&&a.start.node!==this.cursor.textNode){var u=this.cursor.restore();u&&this.setNativeRange(u.startNode,u.startOffset,u.endNode,u.endOffset)}var h,p=[l.a.events.SELECTION_CHANGE,o()(this.lastRange),o()(t),e];(c=this.emitter).emit.apply(c,[l.a.events.EDITOR_CHANGE].concat(p)),e!==l.a.sources.SILENT&&(h=this.emitter).emit.apply(h,p)}}}])&&f(t.prototype,n),i&&f(t,i),e}();function b(e,t){try{t.parentNode}catch(e){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}},function(e,t,n){(function(t){var n=function(e){return e&&e.Math==Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof t&&t)||function(){return this}()||Function("return this")()}).call(this,n(58))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=a(n);function n(){return i(this,n),t.apply(this,arguments)}return n}(n(2).TextBlot);function u(e){return e.replace(/[&<>"']/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]}))}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=c(e);if(t){var i=c(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return l(this,n)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(c,e);var t,n,r,l=s(c);function c(){return i(this,c),l.apply(this,arguments)}return t=c,r=[{key:"value",value:function(){}}],(n=[{key:"optimize",value:function(){(this.prev||this.next)&&this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}])&&o(t.prototype,n),r&&o(t,r),c}(n(2).EmbedBlot);u.blotName="break",u.tagName="BR",t.a=u},function(e,t,n){"use strict";n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"c",(function(){return u})),n.d(t,"a",(function(){return d}));var r=n(73),i=n(74),o=n(32);function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=o.a.map((function(e){return Object(r.a)(o.d,e)})),c=o.c.map((function(e){return Object(i.a)(o.d,e)})),u=c.reduce((function(e,t){return e[t.attrName]=t,e}),{}),d=[].concat(a(l),a(c)).reduce((function(e,t){return e[t.keyName]=t,e}),{})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r(this,e),this.quill=t,this.options=n};i.DEFAULTS={},t.a=i},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var i=l(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return s(this,n)}}function s(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(n,e);var t=a(n);function n(){return i(this,n),t.apply(this,arguments)}return n}(n(2).ContainerBlot);t.a=c},function(e,t,n){"use strict";var r=n(2),i=n(10),o=n(9);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,e);var t,n,i,o=d(a);function a(){return s(this,a),o.apply(this,arguments)}return t=a,i=[{key:"compare",value:function(e,t){var n=a.order.indexOf(e),r=a.order.indexOf(t);return n>=0||r>=0?n-r:e===t?0:e<t?-1:1}}],(n=[{key:"formatAt",value:function(e,t,n,i){if(a.compare(this.statics.blotName,n)<0&&this.scroll.query(n,r.Scope.BLOT)){var o=this.isolate(e,t);i&&o.wrap(n,i)}else c(p(a.prototype),"formatAt",this).call(this,e,t,n,i)}},{key:"optimize",value:function(e){if(c(p(a.prototype),"optimize",this).call(this,e),this.parent instanceof a&&a.compare(this.statics.blotName,this.parent.statics.blotName)>0){var t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}])&&l(t.prototype,n),i&&l(t,i),a}(r.InlineBlot);f.allowedChildren=[f,i.a,r.EmbedBlot,o.a],f.order=["cursor","inline","link","underline","strike","italic","bold","script","code"],t.a=f},function(e,t,n){"use strict";t.a=function(){return"undefined"!=typeof window}},function(e,t,n){(function(e,n){var r="[object Arguments]",i="[object Function]",o="[object GeneratorFunction]",a="[object Map]",s="[object Set]",l=/\w*$/,c=/^\[object .+?Constructor\]$/,u=/^(?:0|[1-9]\d*)$/,d={};d[r]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object DataView]"]=d["[object Boolean]"]=d["[object Date]"]=d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d[a]=d["[object Number]"]=d["[object Object]"]=d["[object RegExp]"]=d[s]=d["[object String]"]=d["[object Symbol]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d["[object Error]"]=d[i]=d["[object WeakMap]"]=!1;var h="object"==typeof e&&e&&e.Object===Object&&e,p="object"==typeof self&&self&&self.Object===Object&&self,f=h||p||Function("return this")(),m=t&&!t.nodeType&&t,g=m&&"object"==typeof n&&n&&!n.nodeType&&n,v=g&&g.exports===m;function _(e,t){return e.set(t[0],t[1]),e}function b(e,t){return e.add(t),e}function y(e,t,n,r){var i=-1,o=e?e.length:0;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function C(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function O(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function w(e,t){return function(n){return e(t(n))}}function x(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var I,S=Array.prototype,E=Function.prototype,j=Object.prototype,k=f["__core-js_shared__"],T=(I=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||""))?"Symbol(src)_1."+I:"",A=E.toString,D=j.hasOwnProperty,P=j.toString,M=RegExp("^"+A.call(D).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),F=v?f.Buffer:void 0,N=f.Symbol,R=f.Uint8Array,B=w(Object.getPrototypeOf,Object),L=Object.create,q=j.propertyIsEnumerable,H=S.splice,$=Object.getOwnPropertySymbols,U=F?F.isBuffer:void 0,z=w(Object.keys,Object),V=ge(f,"DataView"),K=ge(f,"Map"),W=ge(f,"Promise"),G=ge(f,"Set"),Z=ge(f,"WeakMap"),Q=ge(Object,"create"),X=Ce(V),Y=Ce(K),J=Ce(W),ee=Ce(G),te=Ce(Z),ne=N?N.prototype:void 0,re=ne?ne.valueOf:void 0;function ie(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ae(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function se(e){this.__data__=new oe(e)}function le(e,t){var n=we(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&xe(e)}(e)&&D.call(e,"callee")&&(!q.call(e,"callee")||P.call(e)==r)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],i=n.length,o=!!i;for(var a in e)!t&&!D.call(e,a)||o&&("length"==a||be(a,i))||n.push(a);return n}function ce(e,t,n){var r=e[t];D.call(e,t)&&Oe(r,n)&&(void 0!==n||t in e)||(e[t]=n)}function ue(e,t){for(var n=e.length;n--;)if(Oe(e[n][0],t))return n;return-1}function de(e,t,n,c,u,h,p){var f;if(c&&(f=h?c(e,u,h,p):c(e)),void 0!==f)return f;if(!Ee(e))return e;var m=we(e);if(m){if(f=function(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&D.call(e,"index")&&(n.index=e.index,n.input=e.input),n}(e),!t)return function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(e,f)}else{var g=_e(e),v=g==i||g==o;if(Ie(e))return function(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}(e,t);if("[object Object]"==g||g==r||v&&!h){if(C(e))return h?e:{};if(f=function(e){return"function"!=typeof e.constructor||ye(e)?{}:Ee(t=B(e))?L(t):{};var t}(v?{}:e),!t)return function(e,t){return fe(e,ve(e),t)}(e,function(e,t){return e&&fe(t,je(t),e)}(f,e))}else{if(!d[g])return h?e:{};f=function(e,t,n,r){var i,o=e.constructor;switch(t){case"[object ArrayBuffer]":return pe(e);case"[object Boolean]":case"[object Date]":return new o(+e);case"[object DataView]":return function(e,t){var n=t?pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(e,t){var n=t?pe(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}(e,r);case a:return function(e,t,n){return y(t?n(O(e),!0):O(e),_,new e.constructor)}(e,r,n);case"[object Number]":case"[object String]":return new o(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,l.exec(e));return t.lastIndex=e.lastIndex,t}(e);case s:return function(e,t,n){return y(t?n(x(e),!0):x(e),b,new e.constructor)}(e,r,n);case"[object Symbol]":return i=e,re?Object(re.call(i)):{}}}(e,g,de,t)}}p||(p=new se);var w=p.get(e);if(w)return w;if(p.set(e,f),!m)var I=n?function(e){return function(e,t,n){var r=t(e);return we(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,je,ve)}(e):je(e);return function(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););}(I||e,(function(r,i){I&&(r=e[i=r]),ce(f,i,de(r,t,n,c,i,e,p))})),f}function he(e){return!(!Ee(e)||(t=e,T&&T in t))&&(Se(e)||C(e)?M:c).test(Ce(e));var t}function pe(e){var t=new e.constructor(e.byteLength);return new R(t).set(new R(e)),t}function fe(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i],s=r?r(n[a],e[a],a,n,e):void 0;ce(n,a,void 0===s?e[a]:s)}return n}function me(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ge(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return he(n)?n:void 0}ie.prototype.clear=function(){this.__data__=Q?Q(null):{}},ie.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ie.prototype.get=function(e){var t=this.__data__;if(Q){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return D.call(t,e)?t[e]:void 0},ie.prototype.has=function(e){var t=this.__data__;return Q?void 0!==t[e]:D.call(t,e)},ie.prototype.set=function(e,t){return this.__data__[e]=Q&&void 0===t?"__lodash_hash_undefined__":t,this},oe.prototype.clear=function(){this.__data__=[]},oe.prototype.delete=function(e){var t=this.__data__,n=ue(t,e);return!(n<0||(n==t.length-1?t.pop():H.call(t,n,1),0))},oe.prototype.get=function(e){var t=this.__data__,n=ue(t,e);return n<0?void 0:t[n][1]},oe.prototype.has=function(e){return ue(this.__data__,e)>-1},oe.prototype.set=function(e,t){var n=this.__data__,r=ue(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},ae.prototype.clear=function(){this.__data__={hash:new ie,map:new(K||oe),string:new ie}},ae.prototype.delete=function(e){return me(this,e).delete(e)},ae.prototype.get=function(e){return me(this,e).get(e)},ae.prototype.has=function(e){return me(this,e).has(e)},ae.prototype.set=function(e,t){return me(this,e).set(e,t),this},se.prototype.clear=function(){this.__data__=new oe},se.prototype.delete=function(e){return this.__data__.delete(e)},se.prototype.get=function(e){return this.__data__.get(e)},se.prototype.has=function(e){return this.__data__.has(e)},se.prototype.set=function(e,t){var n=this.__data__;if(n instanceof oe){var r=n.__data__;if(!K||r.length<199)return r.push([e,t]),this;n=this.__data__=new ae(r)}return n.set(e,t),this};var ve=$?w($,Object):function(){return[]},_e=function(e){return P.call(e)};function be(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||u.test(e))&&e>-1&&e%1==0&&e<t}function ye(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||j)}function Ce(e){if(null!=e){try{return A.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Oe(e,t){return e===t||e!=e&&t!=t}(V&&"[object DataView]"!=_e(new V(new ArrayBuffer(1)))||K&&_e(new K)!=a||W&&"[object Promise]"!=_e(W.resolve())||G&&_e(new G)!=s||Z&&"[object WeakMap]"!=_e(new Z))&&(_e=function(e){var t=P.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?Ce(n):void 0;if(r)switch(r){case X:return"[object DataView]";case Y:return a;case J:return"[object Promise]";case ee:return s;case te:return"[object WeakMap]"}return t});var we=Array.isArray;function xe(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!Se(e)}var Ie=U||function(){return!1};function Se(e){var t=Ee(e)?P.call(e):"";return t==i||t==o}function Ee(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function je(e){return xe(e)?le(e):function(e){if(!ye(e))return z(e);var t=[];for(var n in Object(e))D.call(e,n)&&"constructor"!=n&&t.push(n);return t}(e)}n.exports=function(e){return de(e,!0,!0)}}).call(this,n(58),n(66)(e))},function(e,t,n){"use strict";n.d(t,"a",(function(){return O})),n.d(t,"b",(function(){return y})),n.d(t,"c",(function(){return C}));var r=n(6),i=n(10),o=n(24),a=n(14),s=n(9),l=n(13),c=n(0);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function f(e,t,n){return(f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=b(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var i=b(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,[{key:"code",value:function(e,t){var n=this.children.map((function(e){return e.length()<=1?"":e.domNode.textContent})).join("\n").slice(e,e+t);return Object(s.b)(n)}},{key:"html",value:function(e,t){return"<pre>\n".concat(this.code(e,t),"\n</pre>")}}],[{key:"create",value:function(e){var t=f(b(n),"create",this).call(this,e);return t.setAttribute("spellcheck",!1),t}}]),n}(l.a),C=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return p(n,null,[{key:"register",value:function(){c.a.register(y)}}]),n}(r.d),O=function(e){m(n,e);var t=v(n);function n(){return d(this,n),t.apply(this,arguments)}return n}(a.a);O.blotName="code",O.tagName="CODE",C.blotName="code-block",C.className="ql-code-block",C.tagName="DIV",y.blotName="code-block-container",y.className="ql-code-block-container",y.tagName="DIV",y.allowedChildren=[C],C.allowedChildren=[s.a,i.a,o.a],C.requiredContainer=y,C.TAB="  "},function(e,t,n){"use strict";var r=n(2),i=n(3),o=n(6),a=n(10),s=n(13);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var i=g(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e){return e instanceof o.d||e instanceof o.a}var _=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(u,e);var t,n,s,l=f(u);function u(e,t,n){var r,i=n.emitter,o=n.toggleBlankClass;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=l.call(this,e,t)).emitter=i,r.toggleBlankClass=o,r.batch=!1,r.optimize(),r.enable(),r.domNode.addEventListener("dragstart",(function(e){return r.handleDragStart(e)})),r}return t=u,(n=[{key:"batchStart",value:function(){Array.isArray(this.batch)||(this.batch=[])}},{key:"batchEnd",value:function(){var e=this.batch;this.batch=!1,this.update(e)}},{key:"emitMount",value:function(e){this.emitter.emit(i.a.events.SCROLL_BLOT_MOUNT,e)}},{key:"emitUnmount",value:function(e){this.emitter.emit(i.a.events.SCROLL_BLOT_UNMOUNT,e)}},{key:"deleteAt",value:function(e,t){var n=c(this.line(e),2),r=n[0],i=n[1],s=c(this.line(e+t),1)[0];if(h(g(u.prototype),"deleteAt",this).call(this,e,t),null!=s&&r!==s&&i>0){if(r instanceof o.a||s instanceof o.a)return void this.optimize();var l=s.children.head instanceof a.a?null:s.children.head;r.moveChildren(s,l),r.remove()}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,t,n,r){h(g(u.prototype),"formatAt",this).call(this,e,t,n,r),this.optimize()}},{key:"handleDragStart",value:function(e){e.preventDefault()}},{key:"insertAt",value:function(e,t,n){if(e>=this.length())if(null==n||null==this.scroll.query(t,r.Scope.BLOCK)){var i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i),null==n&&t.endsWith("\n")?i.insertAt(0,t.slice(0,-1),n):i.insertAt(0,t,n)}else{var o=this.scroll.create(t,n);this.appendChild(o)}else h(g(u.prototype),"insertAt",this).call(this,e,t,n);this.optimize()}},{key:"insertBefore",value:function(e,t){if(e.statics.scope===r.Scope.INLINE_BLOT){var n=this.scroll.create(this.statics.defaultChild.blotName);n.appendChild(e),h(g(u.prototype),"insertBefore",this).call(this,n,t)}else h(g(u.prototype),"insertBefore",this).call(this,e,t)}},{key:"isEnabled",value:function(){return"true"===this.domNode.getAttribute("contenteditable")}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(v,e)}},{key:"lines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,n=function e(t,n,i){var o=[],a=i;return t.children.forEachAt(n,i,(function(t,n,i){v(t)?o.push(t):t instanceof r.ContainerBlot&&(o=o.concat(e(t,n,a))),a-=i})),o};return n(this,e,t)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(h(g(u.prototype),"optimize",this).call(this,e,t),e.length>0&&this.emitter.emit(i.a.events.SCROLL_OPTIMIZE,e,t))}},{key:"path",value:function(e){return h(g(u.prototype),"path",this).call(this,e).slice(1)}},{key:"remove",value:function(){}},{key:"update",value:function(e){var t=this;if(this.batch)Array.isArray(e)&&(this.batch=this.batch.concat(e),this.toggleBlankClass());else{var n=i.a.sources.USER;"string"==typeof e&&(n=e),Array.isArray(e)||(e=this.observer.takeRecords()),(e=e.filter((function(e){var n=e.target,r=t.find(n,!0);return r&&r.scroll===t}))).length>0&&this.emitter.emit(i.a.events.SCROLL_BEFORE_UPDATE,n,e),h(g(u.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(i.a.events.SCROLL_UPDATE,n,e)}}}])&&d(t.prototype,n),s&&d(t,s),u}(r.ScrollBlot);_.blotName="scroll",_.className="ql-editor",_.tagName="DIV",_.defaultChild=o.d,_.allowedChildren=[o.d,o.a,s.a],t.a=_},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return d}));var r=n(32),i=n(33);function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var l={attribute:"attr",style:"style"},c=a(a({},r.d.allowedTags.reduce((function(e,t){return e[t]={name:r.d.name,keyNamesSet:r.b},e}),{})),i.d.allowedTags.reduce((function(e,t){return e[t]={name:i.d.name,keyNamesSet:i.b},e}),{}));function u(e,t,n){var r=c[e];return r&&r.keyNamesSet.has(t)?"".concat(n).concat(r.name,"_").concat(t):t}function d(e){return e.replace(/([^]*_)/,"")}},function(e,t){var n=Function.prototype,r=n.bind,i=n.call,o=r&&r.bind(i);e.exports=r?function(e){return e&&o(i,e)}:function(e){return e&&function(){return i.apply(e,arguments)}}},function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return c})),n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return d}));var r=n(73),i=n(74),o=n(33);function a(e){return function(e){if(Array.isArray(e))return s(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=o.a.map((function(e){return Object(r.a)(o.d,e)})),c=o.c.map((function(e){return Object(i.a)(o.d,e)})),u=c.reduce((function(e,t){return e[t.attrName]=t,e}),{}),d=[].concat(a(l),a(c)).reduce((function(e,t){return e[t.keyName]=t,e}),{})},function(e,t){e.exports=function(e){return"function"==typeof e}},function(e,t,n){"use strict";var r=["error","warn","log","info"],i="warn";function o(e){if(r.indexOf(e)<=r.indexOf(i)){for(var t,n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];(t=console)[e].apply(t,o)}}function a(e){return r.reduce((function(t,n){return t[n]=o.bind(console,n,e),t}),{})}a.level=function(e){i=e},o.level=a.level,t.a=a},function(e,t,n){"use strict";var r=n(2),i=n(9);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(h,e);var t,n,o,u=c(h);function h(e,t,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),(r=u.call(this,e,t)).selection=n,r.textNode=document.createTextNode(h.CONTENTS),r.domNode.appendChild(r.textNode),r.savedLength=0,r}return t=h,o=[{key:"value",value:function(){}}],(n=[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,t){if(0===this.savedLength){for(var n=this,i=0;null!=n&&n.statics.scope!==r.Scope.BLOCK_BLOT;)i+=n.offset(n.parent),n=n.parent;null!=n&&(this.savedLength=h.CONTENTS.length,n.optimize(),n.formatAt(i,h.CONTENTS.length,e,t),this.savedLength=0)}else s(d(h.prototype),"format",this).call(this,e,t)}},{key:"index",value:function(e,t){return e===this.textNode?0:s(d(h.prototype),"index",this).call(this,e,t)}},{key:"length",value:function(){return this.savedLength}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){s(d(h.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(this.selection.composing||null==this.parent)return null;for(var e=this.selection.getNativeRange();null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);var t,n=this.prev instanceof i.a?this.prev:null,r=n?n.length():0,o=this.next instanceof i.a?this.next:null,a=o?o.text:"",s=this.textNode,l=s.data.split(h.CONTENTS).join("");if(s.data=h.CONTENTS,n)t=n,(l||o)&&(n.insertAt(n.length(),l+a),o&&o.remove());else if(o)t=o,o.insertAt(0,l);else{var c=document.createTextNode(l);t=this.scroll.create(c),this.parent.insertBefore(t,this)}if(this.remove(),e){var u=function(e,t){return n&&e===n.domNode?t:e===s?r+t-1:o&&e===o.domNode?r+l.length+t:null},d=u(e.start.node,e.start.offset),p=u(e.end.node,e.end.offset);if(null!==d&&null!==p)return{startNode:t.domNode,startOffset:d,endNode:t.domNode,endOffset:p}}return null}},{key:"update",value:function(e,t){var n=this;if(e.some((function(e){return"characterData"===e.type&&e.target===n.textNode}))){var r=this.restore();r&&(t.range=r)}}},{key:"value",value:function(){return""}}])&&a(t.prototype,n),o&&a(t,o),h}(r.EmbedBlot);h.blotName="cursor",h.className="ql-cursor",h.tagName="span",h.CONTENTS="\ufeff",t.a=h},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(6),o=n(10),a=n(13),s=n(24),l=n(56),c=n(14),u=n(18),d=n(9),h=n(26),p=n(50),f=n(27),m=n(59);r.a.register({"blots/block":i.d,"blots/block/embed":i.a,"blots/break":o.a,"blots/container":a.a,"blots/cursor":s.a,"blots/embed":l.a,"blots/inline":c.a,"blots/scroll":u.a,"blots/text":d.a,"modules/clipboard":h.b,"modules/history":p.a,"modules/keyboard":f.b,"modules/uploader":m.a}),t.default=r.a},function(e,t,n){"use strict";n.d(t,"b",(function(){return N})),n.d(t,"d",(function(){return H})),n.d(t,"a",(function(){return R})),n.d(t,"c",(function(){return B}));var r=n(1),i=n.n(r),o=n(2),a=n(6),s=n(0),l=n(23),c=n(12),u=n(38),d=n(45),h=n(17),p=n(34),f=n(35),m=n(46),g=n(47),v=n(27),_=n(31);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var i=T(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var A=Object(l.a)("quill:clipboard"),D=[[3,V],[3,U],["br",function(e,t){return B(t,"\n")||t.insert("\n"),t}],[1,U],[1,function(e,t,n){var r=n.query(e);if(null==r)return t;if(r.prototype instanceof o.EmbedBlot){var a={},s=r.value(e);if(null!=s)return a[r.blotName]=s,(new i.a).insert(a,r.formats(e,n))}else if(r.prototype instanceof o.BlockBlot&&!B(t,"\n")&&t.insert("\n"),"function"==typeof r.formats)return R(t,r.blotName,r.formats(e,n));return t}],[1,function(e,t,n){if(-1===["TD","TH","TR","TABLE"].indexOf(e.tagName)){var r=o.Attributor.keys(e),i=o.ClassAttributor.keys(e),a=o.StyleAttributor.keys(e),s={};if(r.concat(i).concat(a).forEach((function(t){var r=n.query(t,o.Scope.ATTRIBUTE);null!=r&&(s[r.attrName]=r.value(e),s[r.attrName])||(null==(r=M[t])||r.attrName!==t&&r.keyName!==t||(s[r.attrName]=r.value(e)||void 0),null==(r=F[t])||r.attrName!==t&&r.keyName!==t||(r=F[t],s[r.attrName]=r.value(e)||void 0))})),Object.keys(s).length>0)return R(t,s)}return t}],[1,function(e,t){var n={},r=e.style||{};return["height","width"].forEach((function(t){var i=-1!==["TD","TH"].indexOf(e.tagName),o="TABLE"===e.tagName;if((i||o)&&r[t]){var a="".concat(o?"table":"cell").concat(Object(_.a)(t));n[a]=r[t]}})),"italic"===r.fontStyle&&(n.italic=!0),-1!==r.textDecoration.indexOf("underline")&&(n.underline=!0),-1!==r.textDecoration.indexOf("line-through")&&(n.strike=!0),(0===r.fontWeight.indexOf("bold")||parseInt(r.fontWeight,10)>=700)&&(n.bold=!0),Object.keys(n).length>0&&(t=R(t,n)),parseFloat(r.textIndent||0)>0?(new i.a).insert("\t").concat(t):t}],["li",function(e,t,n){var r=n.query(e);if(null==r||"list"!==r.blotName||!B(t,"\n"))return t;for(var o=-1,a=e.parentNode;null!=a;)-1!==["OL","UL"].indexOf(a.tagName)&&(o+=1),a=a.parentNode;return o<=0?t:t.reduce((function(e,t){return t.attributes&&"number"==typeof t.attributes.indent?e.push(t):e.insert(t.insert,y({indent:o},t.attributes||{}))}),new i.a)}],["ol, ul",function(e,t){var n="OL"===e.tagName?"ordered":"bullet";return R(t,"list",n)}],["pre",function(e,t,n){var r=n.query("code-block"),i=!r||r.formats(e,n);return R(t,"code-block",i)}],["b",$.bind($,"bold")],["i",$.bind($,"italic")],["strike",$.bind($,"strike")],["style",function(){return new i.a}]],P=[V,U],M=[u.a,f.a].reduce((function(e,t){return e[t.keyName]=t,e}),{}),F=[u.c,d.b,p.c,f.c,m.b,g.b].reduce((function(e,t){return e[t.keyName]=t,e}),{}),N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(a,e);var t,n,r,o=E(a);function a(e,t){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(r=o.call(this,e,t)).quill.root.addEventListener("copy",(function(e){return r.onCaptureCopy(e,!1)})),r.quill.root.addEventListener("cut",(function(e){return r.onCaptureCopy(e,!0)})),r.quill.root.addEventListener("paste",r.onCapturePaste.bind(k(r))),r.matchers=[],r.tableBlots=null!==(n=t.tableBlots)&&void 0!==n?n:[],D.concat(r.options.matchers).forEach((function(e){var t=w(e,2),n=t[0],i=t[1];r.addMatcher(n,i)})),r}return t=a,(n=[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"addTableBlot",value:function(e){this.tableBlots.push(e)}},{key:"convert",value:function(e){var t=e.html,n=e.text,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r[h.c.blotName]?(new i.a).insert(n,O({},h.c.blotName,r[h.c.blotName])):t?this.applyMatchers(t,r):this.applyTextMatchers(n)}},{key:"applyTextMatchers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(0===t.length)return new i.a;var n=this.prepareTextMatching(),r=this.quill.root.ownerDocument.createElement("div");r.textContent=t;var o=r.childNodes[0];return n.reduce((function(t,n){return n(o,t,e.quill.scroll)}),new i.a)}},{key:"applyMatchers",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(new DOMParser).parseFromString(e,"text/html"),o=r.body,a=new WeakMap,s=this.prepareMatching(o,a),l=w(s,2),c=l[0],u=l[1],d=H(this.quill.scroll,o,c,u,a);return B(d,"\n")&&(null==d.ops[d.ops.length-1].attributes||Object.values(n).some((function(e){return t.tableBlots.includes(e)})))?d.compose((new i.a).retain(d.length()-1).delete(1)):d}},{key:"dangerouslyPasteHTML",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.a.sources.API;if("string"==typeof e){var r=this.convert({html:e,text:""});this.quill.setContents(r,t),this.quill.setSelection(0,s.a.sources.SILENT)}else{var o=this.convert({html:t,text:""});this.quill.updateContents((new i.a).retain(e).concat(o),n),this.quill.setSelection(e+o.length(),s.a.sources.SILENT)}}},{key:"onCaptureCopy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.defaultPrevented&&e.clipboardData){e.preventDefault();var n=this.quill.selection.getRange(),r=w(n,1),i=r[0];if(null!=i){var o=this.onCopy(i,t),a=o.html,s=o.text;e.clipboardData.setData("text/plain",s),e.clipboardData.setData("text/html",a),t&&(this.raiseCallback("onCut",e),Object(v.c)({range:i,quill:this.quill}))}}}},{key:"onCapturePaste",value:function(e){if(!e.defaultPrevented&&this.quill.isEnabled()&&(this.raiseCallback("onPaste",e),e.clipboardData)){e.preventDefault();var t=this.quill.getSelection(!0);if(null!=t){var n=e.clipboardData.getData("text/html"),r=Array.from(e.clipboardData.files||[]);if(!n&&r.length>0)this.quill.uploader.upload(t,r);else{if(n&&r.length>0){var i=(new DOMParser).parseFromString(n,"text/html").body;if(1===i.childElementCount&&"IMG"===i.firstElementChild.tagName)return void this.quill.uploader.upload(t,r)}var o=e.clipboardData.getData("text/plain");this.onPaste(t,{html:n,text:o})}}}}},{key:"raiseCallback",value:function(e,t){var n=this.options[e];n&&"function"==typeof n&&n(t)}},{key:"onCopy",value:function(e){var t=this.quill.getText(e);return{html:this.quill.getSemanticHTML(e),text:t}}},{key:"onPaste",value:function(e,t){var n=t.text,r=t.html,o=this.quill.getFormat(e.index),a=this.convert({text:n,html:r},o);A.log("onPaste",a,{text:n,html:r});var l=(new i.a).retain(e.index).delete(e.length).concat(a);this.quill.updateContents(l,s.a.sources.USER),this.quill.setSelection(l.length()-e.length,s.a.sources.SILENT),this.quill.scrollIntoView()}},{key:"prepareMatching",value:function(e,t){var n=[],r=[];return this.matchers.forEach((function(i){var o=w(i,2),a=o[0],s=o[1];switch(a){case 3:r.push(s);break;case 1:n.push(s);break;default:Array.from(e.querySelectorAll(a)).forEach((function(e){t.has(e)?t.get(e).push(s):t.set(e,[s])}))}})),[n,r]}},{key:"prepareTextMatching",value:function(){var e=[z];return this.matchers.forEach((function(t){var n=w(t,2),r=n[0],i=n[1];-1===P.indexOf(i)&&3===r&&e.push(i)})),e}}])&&I(t.prototype,n),r&&I(t,r),a}(c.a);function R(e,t,n){return"object"===C(t)?Object.keys(t).reduce((function(e,n){return R(e,n,t[n])}),e):e.reduce((function(e,r){if(r.attributes&&r.attributes[t])return e.push(r);var i=n?O({},t,n):{};return e.insert(r.insert,y(y({},i),r.attributes))}),new i.a)}function B(e,t){for(var n="",r=e.ops.length-1;r>=0&&n.length<t.length;--r){var i=e.ops[r];if("string"!=typeof i.insert)break;n=i.insert+n}return n.slice(-1*t.length)===t}function L(e){return 0!==e.childNodes.length&&-1!==["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].indexOf(e.tagName.toLowerCase())}N.DEFAULTS={matchers:[]};var q=new WeakMap;function H(e,t,n,r,o){return t.nodeType===t.TEXT_NODE?r.reduce((function(n,r){return r(t,n,e)}),new i.a):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((function(i,a){var s=H(e,a,n,r,o);return a.nodeType===t.ELEMENT_NODE&&(s=n.reduce((function(t,n){return n(a,t,e)}),s),s=(o.get(a)||[]).reduce((function(t,n){return n(a,t,e)}),s)),i.concat(s)}),new i.a):new i.a}function $(e,t,n){return R(n,e,!0)}function U(e,t,n){if(!B(t,"\n")){if(L(e))return t.insert("\n");if(t.length()>0&&e.nextSibling)for(var r=e.nextSibling;null!=r;){if(L(r))return t.insert("\n");var i=n.query(r);if((null==i?void 0:i.prototype)instanceof a.a)return t.insert("\n");r=r.firstChild}}return t}function z(e,t){var n=e.data||"";return n=n.replace(/\r\n/g,"\n"),t.insert(n)}function V(e,t){var n=e.data;if("O:P"===e.parentNode.tagName)return t.insert(n.trim());if(0===n.trim().length&&-1!==n.indexOf("\n"))return t;if(!function e(t){return null!=t&&(q.has(t)||("PRE"===t.tagName?q.set(t,!0):q.set(t,e(t.parentNode))),q.get(t))}(e)){var r=function(e,t){var n=t.replace(/[^\u00a0]/g,"");return n.length<1&&e?" ":n};n=(n=n.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,r.bind(r,!0)),(null==e.previousSibling&&L(e.parentNode)||null!=e.previousSibling&&L(e.previousSibling))&&(n=n.replace(/^\s+/,r.bind(r,!1))),(null==e.nextSibling&&L(e.parentNode)||null!=e.nextSibling&&L(e.nextSibling))&&(n=n.replace(/\s+$/,r.bind(r,!1)))}return t.insert(n)}},function(e,t,n){"use strict";n.d(t,"b",(function(){return k})),n.d(t,"a",(function(){return j})),n.d(t,"d",(function(){return P})),n.d(t,"c",(function(){return M}));var r=n(16),i=n.n(r),o=n(30),a=n.n(o),s=n(1),l=n.n(s),c=n(2),u=n(0),d=n(23),h=n(12),p=n(15);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=x(e);if(t){var i=x(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=Object(d.a)("quill:keyboard"),S={backspace:"backspace",tab:"tab",enter:"enter",escape:"escape",pageup:"pageUp",pagedown:"pageDown",end:"end",home:"home",arrowleft:"leftArrow",arrowup:"upArrow",arrowright:"rightArrow",arrowdown:"downArrow",delete:"del"," ":"space","*":"asterisk","-":"minus",alt:"alt",control:"control",shift:"shift",left:"leftArrow",up:"upArrow",right:"rightArrow",down:"downArrow",multiply:"asterisk",spacebar:"space",del:"del",subtract:"minus",esc:"escape"},E={8:"backspace",9:"tab",13:"enter",27:"escape",33:"pageUp",34:"pageDown",35:"end",36:"home",37:"leftArrow",38:"upArrow",39:"rightArrow",40:"downArrow",46:"del",32:"space",106:"asterisk",109:"minus",189:"minus",173:"minus",16:"shift",17:"control",18:"alt"},j=Object(p.a)()&&/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(o,e);var t,n,r,i=O(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).bindings={},Object.keys(n.options.bindings).forEach((function(e){n.options.bindings[e]&&n.addBinding(n.options.bindings[e])})),n.addInternalBindings(),n.listen(),n}return t=o,r=[{key:"match",value:function(e,t){return!["altKey","ctrlKey","metaKey","shiftKey"].some((function(n){return!!t[n]!==e[n]&&null!==t[n]}))&&(t.key===o.normalizeKeyName(e)||t.key===e.which)}},{key:"normalizeKeyName",value:function(e){var t=e.key,n=e.which,r=!!t,i=r?t:n;return i&&(i=r?S[i.toLowerCase()]||i:E[i]||String.fromCharCode(i)),i}}],(n=[{key:"addInternalBindings",value:function(){var e=this;this.quill.once(u.a.events.CONTENT_SETTED,(function(){e.addBinding({key:"enter",shiftKey:null},e.handleEnter),e.addBinding({key:"enter",metaKey:null,ctrlKey:null,altKey:null},(function(){})),Object(p.a)()&&/Firefox/i.test(navigator.userAgent)?(e.addBinding({key:"backspace"},{collapsed:!0},e.handleBackspace),e.addBinding({key:"del"},{collapsed:!0},e.handleDelete)):(e.addBinding({key:"backspace"},{collapsed:!0,prefix:/^.?$/},e.handleBackspace),e.addBinding({key:"del"},{collapsed:!0,suffix:/^.?$/},e.handleDelete)),e.addBinding({key:"backspace"},{collapsed:!1},e.handleDeleteRange),e.addBinding({key:"del"},{collapsed:!1},e.handleDeleteRange),e.addBinding({key:"backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},e.handleBackspace)}))}},{key:"addBinding",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=P(e);if(null!=i){"function"==typeof n&&(n={handler:n}),"function"==typeof r&&(r={handler:r});var o=i.which?"which":"key",a=Array.isArray(i[o])?i[o]:[i[o]];a.forEach((function(e){var o=_(_(_({},i),{},{key:e},n),r);t.bindings[o.key]=t.bindings[o.key]||[],t.bindings[o.key].push(o)}))}else I.warn("Attempted to add invalid keyboard binding",i)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",(function(t){if(!t.defaultPrevented&&!t.isComposing){e.raiseOnKeydownCallback(t);var n=o.normalizeKeyName(t),r=(e.bindings[n]||[]).concat(e.bindings[t.which]||[]).filter((function(e){return o.match(t,e)}));if(0!==r.length){var i=e.quill.getSelection();if(null!=i&&e.quill.hasFocus()){var s=m(e.quill.getLine(i.index),2),l=s[0],u=s[1],d=m(e.quill.getLeaf(i.index),2),h=d[0],p=d[1],g=m(0===i.length?[h,p]:e.quill.getLeaf(i.index+i.length),2),v=g[0],_=g[1],b=h instanceof c.TextBlot?h.value().slice(0,p):"",y=v instanceof c.TextBlot?v.value().slice(_):"",C={collapsed:0===i.length,empty:0===i.length&&l.length()<=1,format:e.quill.getFormat(i),line:l,offset:u,prefix:b,suffix:y,event:t},O=!1;r.some((function(t){if(null!=t.collapsed&&t.collapsed!==C.collapsed)return!1;if(null!=t.empty&&t.empty!==C.empty)return!1;if(null!=t.offset&&t.offset!==C.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((function(e){return null==C.format[e]})))return!1}else if("object"===f(t.format)&&!Object.keys(t.format).every((function(e){return!0===t.format[e]?null!=C.format[e]:!1===t.format[e]?null==C.format[e]:a()(t.format[e],C.format[e])})))return!1;if(null!=t.prefix&&!t.prefix.test(C.prefix))return!1;if(null!=t.suffix&&!t.suffix.test(C.suffix))return!1;var n=t.handler.call(e,i,C,t),r=null==n?void 0:n.preventAfterAllMatches;return(O=!0!==n||r)&&!r})),O&&t.preventDefault()}}}}))}},{key:"raiseOnKeydownCallback",value:function(e){var t=this.options.onKeydown;t&&"function"==typeof t&&t(e)}},{key:"handleBackspace",value:function(e,t){var n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(!(0===e.index||this.quill.getLength()<=1)){var r={},i=m(this.quill.getLine(e.index),1)[0],o=(new l.a).retain(e.index-n).delete(n);if(0===t.offset){var a=m(this.quill.getLine(e.index-1),1)[0];if(a&&!("block"===a.statics.blotName&&a.length()<=1)){var c=i.formats(),d=this.quill.getFormat(e.index-1,1);if(r=s.AttributeMap.diff(c,d)||{},Object.keys(r).length>0){var h=(new l.a).retain(e.index+i.length()-2).retain(1,r);o=o.compose(h)}}}this.quill.updateContents(o,u.a.sources.USER),this.quill.focus()}}},{key:"handleDelete",value:function(e,t){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-n)){var r={},i=m(this.quill.getLine(e.index),1)[0],o=(new l.a).retain(e.index).delete(n);if(t.offset>=i.length()-1){var a=m(this.quill.getLine(e.index+1),1)[0];if(a){var c=i.formats(),d=this.quill.getFormat(e.index,1);r=s.AttributeMap.diff(c,d)||{},Object.keys(r).length>0&&(o=o.retain(a.length()-1).retain(1,r))}}this.quill.updateContents(o,u.a.sources.USER),this.quill.focus()}}},{key:"handleDeleteRange",value:function(e,t){this.raiseOnKeydownCallback(t.event),M({range:e,quill:this.quill}),this.quill.focus()}},{key:"handleEnter",value:function(e,t){var n=this,r=Object.keys(t.format).reduce((function(e,r){return n.quill.scroll.query(r,c.Scope.BLOCK)&&!Array.isArray(t.format[r])&&(e[r]=t.format[r]),e}),{}),i=(new l.a).retain(e.index).delete(e.length).insert("\n",r);this.quill.updateContents(i,u.a.sources.USER),this.quill.setSelection(e.index+1,u.a.sources.SILENT),this.quill.focus();var o,a,s,d,h,p=m(this.quill.getLine(e.index+1),1)[0],f=(o=p.domNode,a=window.innerHeight,s=o.getBoundingClientRect(),d=s.y,h=s.bottom,d<0||!(h>=a)&&null);null!==f&&p.domNode.scrollIntoView(f),Object.keys(t.format).forEach((function(e){null==r[e]&&(Array.isArray(t.format[e])||"code"!==e&&"link"!==e&&(n.raiseOnKeydownCallback(t.event),n.quill.format(e,t.format[e],u.a.sources.USER)))}))}}])&&y(t.prototype,n),r&&y(t,r),o}(h.a);function T(e){return{key:"tab",shiftKey:!e,format:{"code-block":!0},handler:function(t){var n=this.quill.scroll.query("code-block"),r=0===t.length?this.quill.getLines(t.index,1):this.quill.getLines(t),i=t.index,o=t.length;r.forEach((function(t,r){e?(t.insertAt(0,n.TAB),0===r?i+=n.TAB.length:o+=n.TAB.length):0===t.domNode.textContent.indexOf(n.TAB)&&(t.deleteAt(0,n.TAB.length),0===r?i-=n.TAB.length:o-=n.TAB.length)})),this.quill.update(u.a.sources.USER),this.quill.setSelection(i,o,u.a.sources.SILENT)}}}function A(e,t){var n;return b(n={key:e,shiftKey:t,altKey:null},"leftArrow"===e?"prefix":"suffix",/^$/),b(n,"handler",(function(n){var r=n.index;return"rightArrow"===e&&(r+=n.length+1),!(m(this.quill.getLeaf(r),1)[0]instanceof c.EmbedBlot&&("leftArrow"===e?t?this.quill.setSelection(n.index-1,n.length+1,u.a.sources.USER):this.quill.setSelection(n.index-1,u.a.sources.USER):t?this.quill.setSelection(n.index,n.length+1,u.a.sources.USER):this.quill.setSelection(n.index+n.length+1,u.a.sources.USER),1))})),n}function D(e,t){return{key:e[0],which:t,shortKey:!0,handler:function(t,n){return this.quill.format(e,!n.format[e],u.a.sources.USER),{preventAfterAllMatches:!0}}}}function P(e){if("string"==typeof e||"number"==typeof e)e={key:e};else{if("object"!==f(e))return null;e=i()(e)}return e.shortKey&&(e[j]=e.shortKey,delete e.shortKey),e}function M(e){var t=e.quill,n=e.range,r=t.getLines(n),i={};if(r.length>1){var o=r[0].formats(),a=r[r.length-1].formats();i=s.AttributeMap.diff(a,o)||{}}t.deleteText(n,u.a.sources.USER),Object.keys(i).length>0&&t.formatLine(n.index,1,i,u.a.sources.USER),t.setSelection(n.index,u.a.sources.SILENT)}k.DEFAULTS={bindings:{bold:D("bold",66),italic:D("italic",73),underline:D("underline",85),indent:{key:"tab",format:["blockquote","indent","list"],handler:function(e,t){return!(!t.collapsed||0===t.offset)||(this.quill.format("indent","+1",u.a.sources.USER),!1)}},outdent:{key:"tab",shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){return!(!t.collapsed||0===t.offset)||(this.quill.format("indent","-1",u.a.sources.USER),!1)}},"outdent backspace":{key:"backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",u.a.sources.USER):null!=t.format.list&&this.quill.format("list",!1,u.a.sources.USER)}},"indent code-block":T(!0),"outdent code-block":T(!1),"remove tab":{key:"tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,u.a.sources.USER)}},tab:{key:"tab",handler:function(e,t){if(t.format.table)return!0;this.quill.history.cutoff();var n=(new l.a).retain(e.index).delete(e.length).insert("\t");return this.quill.updateContents(n,u.a.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,u.a.sources.SILENT),!1}},"blockquote empty enter":{key:"enter",collapsed:!0,format:["blockquote"],empty:!0,handler:function(){this.quill.format("blockquote",!1,u.a.sources.USER)}},"list empty enter":{key:"enter",collapsed:!0,format:["list"],empty:!0,handler:function(e,t){var n={list:!1};t.format.indent&&(n.indent=!1),this.quill.formatLine(e.index,e.length,n,u.a.sources.USER)}},"checklist enter":{key:"enter",collapsed:!0,format:{list:"checked"},handler:function(e){var t=m(this.quill.getLine(e.index),2),n=t[0],r=t[1],i=_(_({},n.formats()),{},{list:"checked"}),o=(new l.a).retain(e.index).insert("\n",i).retain(n.length()-r-1).retain(1,{list:"unchecked"});this.quill.updateContents(o,u.a.sources.USER),this.quill.setSelection(e.index+1,u.a.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:"enter",collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var n=m(this.quill.getLine(e.index),2),r=n[0],i=n[1],o=(new l.a).retain(e.index).insert("\n",t.format).retain(r.length()-i-1).retain(1,{header:null});this.quill.updateContents(o,u.a.sources.USER),this.quill.setSelection(e.index+1,u.a.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:"space",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){if(null==this.quill.scroll.query("list"))return!0;var n,r=t.prefix.length,i=m(this.quill.getLine(e.index),2),o=i[0],a=i[1];if(a>r)return!0;switch(t.prefix.trim()){case"[]":case"[ ]":n="unchecked";break;case"[x]":n="checked";break;case"-":case"*":n="bullet";break;default:n="ordered"}this.quill.insertText(e.index," ",u.a.sources.USER),this.quill.history.cutoff();var s=(new l.a).retain(e.index-a).delete(r+1).retain(o.length()-2-a).retain(1,{list:n});return this.raiseOnKeydownCallback(t.event),this.quill.updateContents(s,u.a.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-r,u.a.sources.SILENT),!1}},"code exit":{key:"enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler:function(e){for(var t=m(this.quill.getLine(e.index),2),n=t[0],r=t[1],i=2,o=n;null!=o&&o.length()<=1&&o.formats()["code-block"];)if(o=o.prev,(i-=1)<=0){var a=(new l.a).retain(e.index+n.length()-r-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(a,u.a.sources.USER),this.quill.setSelection(e.index-1,u.a.sources.SILENT),!1}return!0}},"embed left":A("leftArrow",!1),"embed left shift":A("leftArrow",!0),"embed right":A("rightArrow",!1),"embed right shift":A("rightArrow",!0)}}},function(e,t,n){var r=n(8),i=n(96),o=n(36),a=n(97),s=n(98),l=n(99),c=i("wks"),u=r.Symbol,d=u&&u.for,h=l?u:u&&u.withoutSetter||a;e.exports=function(e){if(!o(c,e)||!s&&"string"!=typeof c[e]){var t="Symbol."+e;s&&o(u,e)?c[e]=u[e]:c[e]=l&&d?d(t):h(t)}return c[e]}},function(e,t,n){"use strict";n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(19);function i(e){var t=this.keyName;this.keyName=Object(r.c)(this.keyName);for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];var a=e.call.apply(e,[this].concat(i));return this.keyName=t,a}function o(e,t,n){return this.allowedTags.indexOf(t.tagName)>-1&&e.call(this,t,n)}function a(e,t,n){return e(t).map((function(e){return Object(r.b)(t.tagName,e,n)}))}},function(e,t,n){(function(e,n){var r="[object Arguments]",i="[object Map]",o="[object Object]",a="[object Set]",s=/^\[object .+?Constructor\]$/,l=/^(?:0|[1-9]\d*)$/,c={};c["[object Float32Array]"]=c["[object Float64Array]"]=c["[object Int8Array]"]=c["[object Int16Array]"]=c["[object Int32Array]"]=c["[object Uint8Array]"]=c["[object Uint8ClampedArray]"]=c["[object Uint16Array]"]=c["[object Uint32Array]"]=!0,c[r]=c["[object Array]"]=c["[object ArrayBuffer]"]=c["[object Boolean]"]=c["[object DataView]"]=c["[object Date]"]=c["[object Error]"]=c["[object Function]"]=c[i]=c["[object Number]"]=c[o]=c["[object RegExp]"]=c[a]=c["[object String]"]=c["[object WeakMap]"]=!1;var u="object"==typeof e&&e&&e.Object===Object&&e,d="object"==typeof self&&self&&self.Object===Object&&self,h=u||d||Function("return this")(),p=t&&!t.nodeType&&t,f=p&&"object"==typeof n&&n&&!n.nodeType&&n,m=f&&f.exports===p,g=m&&u.process,v=function(){try{return g&&g.binding&&g.binding("util")}catch(e){}}(),_=v&&v.isTypedArray;function b(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function y(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function C(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}var O,w,x,I=Array.prototype,S=Function.prototype,E=Object.prototype,j=h["__core-js_shared__"],k=S.toString,T=E.hasOwnProperty,A=(O=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+O:"",D=E.toString,P=RegExp("^"+k.call(T).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),M=m?h.Buffer:void 0,F=h.Symbol,N=h.Uint8Array,R=E.propertyIsEnumerable,B=I.splice,L=F?F.toStringTag:void 0,q=Object.getOwnPropertySymbols,H=M?M.isBuffer:void 0,$=(w=Object.keys,x=Object,function(e){return w(x(e))}),U=ve(h,"DataView"),z=ve(h,"Map"),V=ve(h,"Promise"),K=ve(h,"Set"),W=ve(h,"WeakMap"),G=ve(Object,"create"),Z=Ce(U),Q=Ce(z),X=Ce(V),Y=Ce(K),J=Ce(W),ee=F?F.prototype:void 0,te=ee?ee.valueOf:void 0;function ne(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function re(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ie(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function oe(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new ie;++t<n;)this.add(e[t])}function ae(e){var t=this.__data__=new re(e);this.size=t.size}function se(e,t){var n=xe(e),r=!n&&we(e),i=!n&&!r&&Ie(e),o=!n&&!r&&!i&&Te(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!T.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ye(c,l))||s.push(c);return s}function le(e,t){for(var n=e.length;n--;)if(Oe(e[n][0],t))return n;return-1}function ce(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":L&&L in Object(e)?function(e){var t=T.call(e,L),n=e[L];try{e[L]=void 0;var r=!0}catch(e){}var i=D.call(e);return r&&(t?e[L]=n:delete e[L]),i}(e):function(e){return D.call(e)}(e)}function ue(e){return ke(e)&&ce(e)==r}function de(e,t,n,s,l){return e===t||(null==e||null==t||!ke(e)&&!ke(t)?e!=e&&t!=t:function(e,t,n,s,l,c){var u=xe(e),d=xe(t),h=u?"[object Array]":be(e),p=d?"[object Array]":be(t),f=(h=h==r?o:h)==o,m=(p=p==r?o:p)==o,g=h==p;if(g&&Ie(e)){if(!Ie(t))return!1;u=!0,f=!1}if(g&&!f)return c||(c=new ae),u||Te(e)?fe(e,t,n,s,l,c):function(e,t,n,r,o,s,l){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new N(e),new N(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Oe(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case i:var c=y;case a:var u=1&r;if(c||(c=C),e.size!=t.size&&!u)return!1;var d=l.get(e);if(d)return d==t;r|=2,l.set(e,t);var h=fe(c(e),c(t),r,o,s,l);return l.delete(e),h;case"[object Symbol]":if(te)return te.call(e)==te.call(t)}return!1}(e,t,h,n,s,l,c);if(!(1&n)){var v=f&&T.call(e,"__wrapped__"),_=m&&T.call(t,"__wrapped__");if(v||_){var b=v?e.value():e,O=_?t.value():t;return c||(c=new ae),l(b,O,n,s,c)}}return!!g&&(c||(c=new ae),function(e,t,n,r,i,o){var a=1&n,s=me(e),l=s.length,c=me(t).length;if(l!=c&&!a)return!1;for(var u=l;u--;){var d=s[u];if(!(a?d in t:T.call(t,d)))return!1}var h=o.get(e);if(h&&o.get(t))return h==t;var p=!0;o.set(e,t),o.set(t,e);for(var f=a;++u<l;){d=s[u];var m=e[d],g=t[d];if(r)var v=a?r(g,m,d,t,e,o):r(m,g,d,e,t,o);if(!(void 0===v?m===g||i(m,g,n,r,o):v)){p=!1;break}f||(f="constructor"==d)}if(p&&!f){var _=e.constructor,b=t.constructor;_==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof b&&b instanceof b||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,s,l,c))}(e,t,n,s,de,l))}function he(e){return!(!je(e)||function(e){return!!A&&A in e}(e))&&(Se(e)?P:s).test(Ce(e))}function pe(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||E,t!==r)return $(e);var t,n,r,i=[];for(var o in Object(e))T.call(e,o)&&"constructor"!=o&&i.push(o);return i}function fe(e,t,n,r,i,o){var a=1&n,s=e.length,l=t.length;if(s!=l&&!(a&&l>s))return!1;var c=o.get(e);if(c&&o.get(t))return c==t;var u=-1,d=!0,h=2&n?new oe:void 0;for(o.set(e,t),o.set(t,e);++u<s;){var p=e[u],f=t[u];if(r)var m=a?r(f,p,u,t,e,o):r(p,f,u,e,t,o);if(void 0!==m){if(m)continue;d=!1;break}if(h){if(!b(t,(function(e,t){if(a=t,!h.has(a)&&(p===e||i(p,e,n,r,o)))return h.push(t);var a}))){d=!1;break}}else if(p!==f&&!i(p,f,n,r,o)){d=!1;break}}return o.delete(e),o.delete(t),d}function me(e){return function(e,t,n){var r=t(e);return xe(e)?r:function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}(r,n(e))}(e,Ae,_e)}function ge(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ve(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return he(n)?n:void 0}ne.prototype.clear=function(){this.__data__=G?G(null):{},this.size=0},ne.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ne.prototype.get=function(e){var t=this.__data__;if(G){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return T.call(t,e)?t[e]:void 0},ne.prototype.has=function(e){var t=this.__data__;return G?void 0!==t[e]:T.call(t,e)},ne.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=G&&void 0===t?"__lodash_hash_undefined__":t,this},re.prototype.clear=function(){this.__data__=[],this.size=0},re.prototype.delete=function(e){var t=this.__data__,n=le(t,e);return!(n<0||(n==t.length-1?t.pop():B.call(t,n,1),--this.size,0))},re.prototype.get=function(e){var t=this.__data__,n=le(t,e);return n<0?void 0:t[n][1]},re.prototype.has=function(e){return le(this.__data__,e)>-1},re.prototype.set=function(e,t){var n=this.__data__,r=le(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},ie.prototype.clear=function(){this.size=0,this.__data__={hash:new ne,map:new(z||re),string:new ne}},ie.prototype.delete=function(e){var t=ge(this,e).delete(e);return this.size-=t?1:0,t},ie.prototype.get=function(e){return ge(this,e).get(e)},ie.prototype.has=function(e){return ge(this,e).has(e)},ie.prototype.set=function(e,t){var n=ge(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},oe.prototype.add=oe.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},oe.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.clear=function(){this.__data__=new re,this.size=0},ae.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},ae.prototype.get=function(e){return this.__data__.get(e)},ae.prototype.has=function(e){return this.__data__.has(e)},ae.prototype.set=function(e,t){var n=this.__data__;if(n instanceof re){var r=n.__data__;if(!z||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new ie(r)}return n.set(e,t),this.size=n.size,this};var _e=q?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}(q(e),(function(t){return R.call(e,t)})))}:function(){return[]},be=ce;function ye(e,t){return!!(t=null==t?9007199254740991:t)&&("number"==typeof e||l.test(e))&&e>-1&&e%1==0&&e<t}function Ce(e){if(null!=e){try{return k.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Oe(e,t){return e===t||e!=e&&t!=t}(U&&"[object DataView]"!=be(new U(new ArrayBuffer(1)))||z&&be(new z)!=i||V&&"[object Promise]"!=be(V.resolve())||K&&be(new K)!=a||W&&"[object WeakMap]"!=be(new W))&&(be=function(e){var t=ce(e),n=t==o?e.constructor:void 0,r=n?Ce(n):"";if(r)switch(r){case Z:return"[object DataView]";case Q:return i;case X:return"[object Promise]";case Y:return a;case J:return"[object WeakMap]"}return t});var we=ue(function(){return arguments}())?ue:function(e){return ke(e)&&T.call(e,"callee")&&!R.call(e,"callee")},xe=Array.isArray,Ie=H||function(){return!1};function Se(e){if(!je(e))return!1;var t=ce(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ee(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function je(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function ke(e){return null!=e&&"object"==typeof e}var Te=_?function(e){return function(t){return e(t)}}(_):function(e){return ke(e)&&Ee(e.length)&&!!c[ce(e)]};function Ae(e){return null!=(t=e)&&Ee(t.length)&&!Se(t)?se(e):pe(e);var t}n.exports=function(e,t){return de(e,t)}}).call(this,n(58),n(66)(e))},function(e,t,n){"use strict";function r(e){return e?e.substring(0,1).toUpperCase()+e.substring(1):""}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a}));var r={name:"table",allowedTags:["TABLE"]},i=["height","width"],o=["height","width","text-align","background-color","border","border-style","border-width","border-color"],a=new Set([].concat(i,o))},function(e,t,n){"use strict";n.d(t,"d",(function(){return r})),n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return a}));var r={name:"cell",allowedTags:["TH","TD","TR"]},i=["height","width"],o=["height","width","vertical-align","text-align","background-color","border","border-style","border-width","border-color","padding","padding-top","padding-right","padding-bottom","padding-left"],a=new Set([].concat(i,o))},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return f}));var r=n(2);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,i=c(u);function u(){return o(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"value",value:function(e){var t=s(d(u.prototype),"value",this).call(this,e);if(0!==t.indexOf("rgb("))return t;t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"");var n=t.split(",").map((function(e){return"00".concat(parseInt(e,10).toString(16)).slice(-2)})).join("");return"#".concat(n)}}])&&a(t.prototype,n),r&&a(t,r),u}(r.StyleAttributor),p=new r.ClassAttributor("color","ql-color",{scope:r.Scope.INLINE}),f=new h("color","color",{scope:r.Scope.INLINE})},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s}));var r=n(2),i={scope:r.Scope.BLOCK,whitelist:["rtl"]},o=new r.Attributor("direction","dir",i),a=new r.ClassAttributor("direction","ql-direction",i),s=new r.StyleAttributor("direction","direction",i)},function(e,t,n){var r=n(20),i=n(68),o=r({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return o(i(e),t)}},function(e,t,n){(function(e,n){var r=/^\[object .+?Constructor\]$/,i=/^(?:0|[1-9]\d*)$/,o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1;var a="object"==typeof e&&e&&e.Object===Object&&e,s="object"==typeof self&&self&&self.Object===Object&&self,l=a||s||Function("return this")(),c=t&&!t.nodeType&&t,u=c&&"object"==typeof n&&n&&!n.nodeType&&n,d=u&&u.exports===c,h=d&&a.process,p=function(){try{var e=u&&u.require&&u.require("util").types;return e||h&&h.binding&&h.binding("util")}catch(e){}}(),f=p&&p.isTypedArray;function m(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var g,v,_,b=Array.prototype,y=Function.prototype,C=Object.prototype,O=l["__core-js_shared__"],w=y.toString,x=C.hasOwnProperty,I=(g=/[^.]+$/.exec(O&&O.keys&&O.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",S=C.toString,E=w.call(Object),j=RegExp("^"+w.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=d?l.Buffer:void 0,T=l.Symbol,A=l.Uint8Array,D=k?k.allocUnsafe:void 0,P=(v=Object.getPrototypeOf,_=Object,function(e){return v(_(e))}),M=Object.create,F=C.propertyIsEnumerable,N=b.splice,R=T?T.toStringTag:void 0,B=function(){try{var e=ce(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),L=k?k.isBuffer:void 0,q=Math.max,H=Date.now,$=ce(l,"Map"),U=ce(Object,"create"),z=function(){function e(){}return function(t){if(!Ce(t))return{};if(M)return M(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();function V(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function K(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function W(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function G(e){var t=this.__data__=new K(e);this.size=t.size}function Z(e,t){var n=ge(e),r=!n&&me(e),i=!n&&!r&&_e(e),o=!n&&!r&&!i&&we(e),a=n||r||i||o,s=a?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],l=s.length;for(var c in e)!t&&!x.call(e,c)||a&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||ue(c,l))||s.push(c);return s}function Q(e,t,n){(void 0!==n&&!fe(e[t],n)||void 0===n&&!(t in e))&&J(e,t,n)}function X(e,t,n){var r=e[t];x.call(e,t)&&fe(r,n)&&(void 0!==n||t in e)||J(e,t,n)}function Y(e,t){for(var n=e.length;n--;)if(fe(e[n][0],t))return n;return-1}function J(e,t,n){"__proto__"==t&&B?B(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}V.prototype.clear=function(){this.__data__=U?U(null):{},this.size=0},V.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},V.prototype.get=function(e){var t=this.__data__;if(U){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return x.call(t,e)?t[e]:void 0},V.prototype.has=function(e){var t=this.__data__;return U?void 0!==t[e]:x.call(t,e)},V.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=U&&void 0===t?"__lodash_hash_undefined__":t,this},K.prototype.clear=function(){this.__data__=[],this.size=0},K.prototype.delete=function(e){var t=this.__data__,n=Y(t,e);return!(n<0||(n==t.length-1?t.pop():N.call(t,n,1),--this.size,0))},K.prototype.get=function(e){var t=this.__data__,n=Y(t,e);return n<0?void 0:t[n][1]},K.prototype.has=function(e){return Y(this.__data__,e)>-1},K.prototype.set=function(e,t){var n=this.__data__,r=Y(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this},W.prototype.clear=function(){this.size=0,this.__data__={hash:new V,map:new($||K),string:new V}},W.prototype.delete=function(e){var t=le(this,e).delete(e);return this.size-=t?1:0,t},W.prototype.get=function(e){return le(this,e).get(e)},W.prototype.has=function(e){return le(this,e).has(e)},W.prototype.set=function(e,t){var n=le(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this},G.prototype.clear=function(){this.__data__=new K,this.size=0},G.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},G.prototype.get=function(e){return this.__data__.get(e)},G.prototype.has=function(e){return this.__data__.has(e)},G.prototype.set=function(e,t){var n=this.__data__;if(n instanceof K){var r=n.__data__;if(!$||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new W(r)}return n.set(e,t),this.size=n.size,this};var ee,te=function(e,t,n){for(var r=-1,i=Object(e),o=n(e),a=o.length;a--;){var s=o[ee?a:++r];if(!1===t(i[s],s,i))break}return e};function ne(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":R&&R in Object(e)?function(e){var t=x.call(e,R),n=e[R];try{e[R]=void 0;var r=!0}catch(e){}var i=S.call(e);return r&&(t?e[R]=n:delete e[R]),i}(e):function(e){return S.call(e)}(e)}function re(e){return Oe(e)&&"[object Arguments]"==ne(e)}function ie(e){return!(!Ce(e)||function(e){return!!I&&I in e}(e))&&(be(e)?j:r).test(function(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function oe(e){if(!Ce(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t=de(e),n=[];for(var r in e)("constructor"!=r||!t&&x.call(e,r))&&n.push(r);return n}function ae(e,t,n,r,i){e!==t&&te(t,(function(o,a){if(i||(i=new G),Ce(o))!function(e,t,n,r,i,o,a){var s=he(e,n),l=he(t,n),c=a.get(l);if(c)Q(e,n,c);else{var u,d,h,p,f,m=o?o(s,l,n+"",e,t,a):void 0,g=void 0===m;if(g){var v=ge(l),_=!v&&_e(l),b=!v&&!_&&we(l);m=l,v||_||b?ge(s)?m=s:Oe(f=s)&&ve(f)?m=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}(s):_?(g=!1,m=function(e,t){if(t)return e.slice();var n=e.length,r=D?D(n):new e.constructor(n);return e.copy(r),r}(l,!0)):b?(g=!1,h=(u=l).buffer,p=new h.constructor(h.byteLength),new A(p).set(new A(h)),d=p,m=new u.constructor(d,u.byteOffset,u.length)):m=[]:function(e){if(!Oe(e)||"[object Object]"!=ne(e))return!1;var t=P(e);if(null===t)return!0;var n=x.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&w.call(n)==E}(l)||me(l)?(m=s,me(s)?m=function(e){return function(e,t,n,r){var i=!n;n||(n={});for(var o=-1,a=t.length;++o<a;){var s=t[o],l=r?r(n[s],e[s],s,n,e):void 0;void 0===l&&(l=e[s]),i?J(n,s,l):X(n,s,l)}return n}(e,xe(e))}(s):Ce(s)&&!be(s)||(m=function(e){return"function"!=typeof e.constructor||de(e)?{}:z(P(e))}(l))):g=!1}g&&(a.set(l,m),i(m,l,r,o,a),a.delete(l)),Q(e,n,m)}}(e,t,a,n,ae,r,i);else{var s=r?r(he(e,a),o,a+"",e,t,i):void 0;void 0===s&&(s=o),Q(e,a,s)}}),xe)}function se(e,t){return pe(function(e,t,n){return t=q(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=q(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),m(e,this,s)}}(e,t,Ee),e+"")}function le(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function ce(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return ie(n)?n:void 0}function ue(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&i.test(e))&&e>-1&&e%1==0&&e<t}function de(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||C)}function he(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var pe=function(e){var t=0,n=0;return function(){var r=H(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(B?function(e,t){return B(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Ee);function fe(e,t){return e===t||e!=e&&t!=t}var me=re(function(){return arguments}())?re:function(e){return Oe(e)&&x.call(e,"callee")&&!F.call(e,"callee")},ge=Array.isArray;function ve(e){return null!=e&&ye(e.length)&&!be(e)}var _e=L||function(){return!1};function be(e){if(!Ce(e))return!1;var t=ne(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function ye(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Ce(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Oe(e){return null!=e&&"object"==typeof e}var we=f?function(e){return function(t){return e(t)}}(f):function(e){return Oe(e)&&ye(e.length)&&!!o[ne(e)]};function xe(e){return ve(e)?Z(e,!0):oe(e)}var Ie,Se=(Ie=function(e,t,n){ae(e,t,n)},se((function(e,t){var n=-1,r=t.length,i=r>1?t[r-1]:void 0,o=r>2?t[2]:void 0;for(i=Ie.length>3&&"function"==typeof i?(r--,i):void 0,o&&function(e,t,n){if(!Ce(n))return!1;var r=typeof t;return!!("number"==r?ve(n)&&ue(t,n.length):"string"==r&&t in n)&&fe(n[t],e)}(t[0],t[1],o)&&(i=r<3?void 0:i,r=1),e=Object(e);++n<r;){var a=t[n];a&&Ie(e,a,n,i)}return e})));function Ee(e){return e}n.exports=Se}).call(this,n(58),n(66)(e))},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return s}));var r=n(2),i={scope:r.Scope.BLOCK,whitelist:["right","center","justify"]},o=new r.Attributor("align","align",i),a=new r.ClassAttributor("align","ql-align",i),s=new r.StyleAttributor("align","text-align",i)},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){var r=n(8),i=n(51),o=r.String,a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not an object")}},function(e,t,n){var r=n(39);e.exports=!r((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}))},function(e,t){var n=Function.prototype.call;e.exports=n.bind?n.bind(n):function(){return n.apply(n,arguments)}},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return h}));var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,n,r,c=l(d);function d(){return i(this,d),c.apply(this,arguments)}return t=d,r=[{key:"create",value:function(e){var t=a(u(d),"create",this).call(this,e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return h(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}],(n=[{key:"format",value:function(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("href",this.constructor.sanitize(t)):a(u(d.prototype),"format",this).call(this,e,t)}}])&&o(t.prototype,n),r&&o(t,r),d}(n(14).a);function h(e,t){var n=document.createElement("a");n.href=e;var r=n.href.slice(0,n.href.indexOf(":"));return t.indexOf(r)>-1}d.blotName="link",d.tagName="A",d.SANITIZED_URL="about:blank",d.PROTOCOL_WHITELIST=["http","https","mailto","tel"]},function(e,t,n){"use strict";t.a=new WeakMap},function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return a}));var r=n(2),i=n(34),o=new r.ClassAttributor("background","ql-bg",{scope:r.Scope.INLINE}),a=new i.a("background","background-color",{scope:r.Scope.INLINE})},function(e,t,n){"use strict";n.d(t,"b",(function(){return f})),n.d(t,"a",(function(){return p}));var r=n(2);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===i(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h={scope:r.Scope.INLINE,whitelist:["serif","monospace"]},p=new r.ClassAttributor("font","ql-font",h),f=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,i=c(u);function u(){return o(this,u),i.apply(this,arguments)}return t=u,(n=[{key:"value",value:function(e){return s(d(u.prototype),"value",this).call(this,e).replace(/["']/g,"")}}])&&a(t.prototype,n),r&&a(t,r),u}(r.StyleAttributor))("font","font-family",h)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(2),i=new r.ClassAttributor("size","ql-size",{scope:r.Scope.INLINE,whitelist:["small","large","huge"]}),o=new r.StyleAttributor("size","font-size",{scope:r.Scope.INLINE,whitelist:["10px","18px","32px"]})},function(e,t,n){"use strict";function r(e,t,n){n?e.setAttribute(t,n):e.removeAttribute(t)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return(a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=u(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var i=u(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,n,r,c=l(d);function d(){return i(this,d),c.apply(this,arguments)}return t=d,r=[{key:"create",value:function(){return a(u(d),"create",this).call(this)}},{key:"formats",value:function(){return!0}}],(n=[{key:"optimize",value:function(e){a(u(d.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}])&&o(t.prototype,n),r&&o(t,r),d}(n(14).a);d.blotName="bold",d.tagName=["STRONG","B"],t.a=d},function(e,t,n){"use strict";n.d(t,"a",(function(){return f})),n.d(t,"b",(function(){return g}));var r=n(2),i=n(0),o=n(12),a=n(15);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return h(e)}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(s,e);var t,n,r,o=u(s);function s(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(n=o.call(this,e,t)).lastRecorded=0,n.ignoreChange=!1,n.clear(),n.quill.on(i.a.events.EDITOR_CHANGE,(function(e,t,r,o){e!==i.a.events.TEXT_CHANGE||n.ignoreChange||(n.options.userOnly&&o!==i.a.sources.USER?n.transform(t):n.record(t,r))})),n.quill.keyboard.addBinding({key:"z",shortKey:!0},n.undo.bind(h(n))),n.quill.keyboard.addBinding({key:"z",shortKey:!0,shiftKey:!0},n.redo.bind(h(n))),Object(a.a)()&&/Win/i.test(navigator.platform)&&n.quill.keyboard.addBinding({key:"y",shortKey:!0},n.redo.bind(h(n))),n.quill.root.addEventListener("beforeinput",(function(e){"historyUndo"===e.inputType?(n.undo(),e.preventDefault()):"historyRedo"===e.inputType&&(n.redo(),e.preventDefault())})),n}return t=s,(n=[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var n=this.stack[e].pop(),r=this.quill.getContents(),o=n.invert(r);this.stack[t].push(o),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n,i.a.sources.USER),this.ignoreChange=!1;var a=g(this.quill.scroll,n);this.quill.setSelection(a)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var n=e.invert(t),r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){var i=this.stack.undo.pop();n=n.compose(i)}else this.lastRecorded=r;0!==n.length()&&(this.stack.undo.push(n),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){m(this.stack.undo,e),m(this.stack.redo,e)}},{key:"undo",value:function(){this.change("undo","redo")}}])&&l(t.prototype,n),r&&l(t,r),s}(o.a);function m(e,t){for(var n=t,r=e.length-1;r>=0;r-=1){var i=e[r];e[r]=n.transform(i,!0),n=i.transform(n),0===e[r].length()&&e.splice(r,1)}}function g(e,t){var n=t.reduce((function(e,t){return e+(t.delete||0)}),0),i=t.length()-n;return function(e,t){var n=t.ops[t.ops.length-1];return null!=n&&(null!=n.insert?"string"==typeof n.insert&&n.insert.endsWith("\n"):null!=n.attributes&&Object.keys(n.attributes).some((function(t){return null!=e.query(t,r.Scope.BLOCK)})))}(e,t)&&(i-=1),i}f.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1}},function(e,t,n){var r=n(22);e.exports=function(e){return"object"==typeof e?null!==e:r(e)}},function(e,t,n){var r=n(8),i=n(41),o=n(101),a=n(40),s=n(84),l=r.TypeError,c=Object.defineProperty;t.f=i?c:function(e,t,n){if(a(e),t=s(t),a(n),o)try{return c(e,t,n)}catch(e){}if("get"in n||"set"in n)throw l("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),i=n(29),o=n(19);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(h,e);var t,n,r,a=d(h);function h(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{allowedTags:[]};return s(this,h),(r=a.call(this,e,t,i)).allowedTags=null!==(n=i.allowedTags)&&void 0!==n?n:[],r}return t=h,r=[{key:"keys",value:function(e){return Object(i.b)(c(p(h),"keys",this),e,o.a.style)}}],(n=[{key:"add",value:function(e,t){return i.c.call(this,c(p(h.prototype),"add",this),e,t)}},{key:"remove",value:function(e){return i.c.call(this,c(p(h.prototype),"remove",this),e)}},{key:"value",value:function(e){return i.c.call(this,c(p(h.prototype),"value",this),e)}},{key:"canAdd",value:function(e,t){return i.a.call(this,c(p(h.prototype),"canAdd",this),e,t)}}])&&l(t.prototype,n),r&&l(t,r),h}(r.StyleAttributor)},function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r=n(0);function i(e,t){return{key:e?"upArrow":"downArrow",collapsed:!0,format:t,handler:function(t,n){var i=e?"prev":"next",o=n.line,a=o.statics.blotName.indexOf("Line")>-1?o.parent:o,s=a.parent.parent[i],l=a.parent[i]||(null==s?void 0:s.children.head);if(null!=l){if("tableRow"===l.statics.blotName||"tableHeaderRow"===l.statics.blotName){for(var c=l.children.head,u=a;null!=u.prev;)u=u.prev,c=c.next;var d=c.offset(this.quill.scroll)+Math.min(n.offset,c.length()-1);this.quill.setSelection(d,0,r.a.sources.USER)}}else{var h=a.table()[i];null!=h&&(e?this.quill.setSelection(h.offset(this.quill.scroll)+h.length()-1,0,r.a.sources.USER):this.quill.setSelection(h.offset(this.quill.scroll),0,r.a.sources.USER))}return!1}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return h})),n.d(t,"b",(function(){return p}));var r=n(2),i=n(63),o=n(53),a=n(26);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t,n,r){e[t]=!r&&e[t]?e[t]:n}function d(e,t,n,i,o,a){return e.filter((function(e){return!!e})).forEach((function(e){var s=n.query(e,r.Scope.ATTRIBUTE);if(null!==s){var l=s.value(t);if(l)return void u(o,s.attrName,l,a)}var c=i[e];if(null!=c&&(c.attrName===e||c.keyName===e)){var d=c.value(t)||void 0;u(o,c.attrName,d,a)}})),o}function h(e){return function(t,n,r){var s=i.a.keys(t),c=o.a.keys(t),u=l(l({},d(s,t,r,e,{},!0)),d(c,t,r,e,{},!0));return Object.keys(u).length>0?Object(a.a)(n,u):n}}function p(e){return function(t,n,r){var s,c=i.a.keys(t),u=o.a.keys(t),h="TR"===(null===(s=t.parentNode)||void 0===s?void 0:s.tagName)?t.parentNode:void 0,p=l(l({},d(c,t,r,e,{},!0)),d(u,t,r,e,{},!0));return h&&(p=d(o.a.keys(h),h,r,e,p,!1)),Object.keys(p).length>0?Object(a.a)(n,p):n}}},function(e,t,n){"use strict";var r=n(2),i=n(9);function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t,n){return(s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var i=d(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(u,e);var t,n,r,o=c(u);function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=o.call(this,e,t)).contentNode=document.createElement("span"),n.contentNode.setAttribute("contenteditable",!1),Array.from(n.domNode.childNodes).forEach((function(e){n.contentNode.appendChild(e)})),n.leftGuard=document.createTextNode("\ufeff"),n.rightGuard=document.createTextNode("\ufeff"),n.domNode.appendChild(n.leftGuard),n.domNode.appendChild(n.contentNode),n.domNode.appendChild(n.rightGuard),n}return t=u,(n=[{key:"index",value:function(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:s(d(u.prototype),"index",this).call(this,e,t)}},{key:"restore",value:function(e){var t,n,r=e.data.split("\ufeff").join("");if(e===this.leftGuard)if(this.prev instanceof i.a){var o=this.prev.length();this.prev.insertAt(o,r),t={startNode:this.prev.domNode,startOffset:o+r.length}}else n=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(n),this),t={startNode:n,startOffset:r.length};else e===this.rightGuard&&(this.next instanceof i.a?(this.next.insertAt(0,r),t={startNode:this.next.domNode,startOffset:r.length}):(n=document.createTextNode(r),this.parent.insertBefore(this.scroll.create(n),this.next),t={startNode:n,startOffset:r.length}));return e.data="\ufeff",t}},{key:"update",value:function(e,t){var n=this;e.forEach((function(e){if("characterData"===e.type&&(e.target===n.leftGuard||e.target===n.rightGuard)){var r=n.restore(e.target);r&&(t.range=r)}}))}}])&&a(t.prototype,n),r&&a(t,r),u}(r.EmbedBlot);t.a=h},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=n,this.modules={}}var t,n,i;return t=e,(n=[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach((function(t){null==e.modules[t]&&e.addModule(t)}))}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/".concat(e));return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}])&&r(t.prototype,n),i&&r(t,i),e}();i.DEFAULTS={modules:{}},i.themes={default:i},t.a=i},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(3),a=n(12),s=n(15);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(o,e);var t,n,r,i=d(o);function o(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),(n=i.call(this,e,t)).preventImageUploading(!1),n.addDragOverHandler(),n.addDropHandler(),n}return t=o,(n=[{key:"addDragOverHandler",value:function(){if(Object(s.a)()){var e=window.navigator.userAgent.toLowerCase();(-1!==e.indexOf("msie ")||-1!==e.indexOf("trident/")||-1!==e.indexOf("edge/"))&&this.quill.root.addEventListener("dragover",(function(e){e.preventDefault()}))}}},{key:"addDropHandler",value:function(){var e=this;this.quill.root.addEventListener("drop",(function(t){var n=0===t.dataTransfer.files.length,r=e.options.onDrop;if(r&&"function"==typeof r&&r(t),!n&&!e.preventImageUpload){var i;if(t.preventDefault(),document.caretRangeFromPoint)i=document.caretRangeFromPoint(t.clientX,t.clientY);else{if(!document.caretPositionFromPoint)return;var o=document.caretPositionFromPoint(t.clientX,t.clientY);(i=document.createRange()).setStart(o.offsetNode,o.offset),i.setEnd(o.offsetNode,o.offset)}var a=e.quill.selection.normalizeNative(i),s=e.quill.selection.normalizedToRange(a);e.upload(s,t.dataTransfer.files)}}))}},{key:"preventImageUploading",value:function(e){return void 0!==e&&(this.preventImageUpload=e),this.preventImageUpload}},{key:"upload",value:function(e,t,n){var r=this;if(!this.preventImageUpload||n){var i=[];Array.from(t).forEach((function(e){e&&-1!==r.options.mimetypes.indexOf(e.type)&&i.push(e)})),i.length>0&&this.options.handler.call(this,e,i,this.options.imageBlot)}}}])&&c(t.prototype,n),r&&c(t,r),o}(a.a);f.DEFAULTS={mimetypes:["image/png","image/jpeg","image/pjpeg","image/gif","image/webp","image/bmp","image/svg+xml","image/vnd.microsoft.icon"],imageBlot:"image",handler:function(e,t,n){var r=this,a=t.map((function(e){return new Promise((function(t){var n=new FileReader;n.onload=function(e){t(e.target.result)},n.readAsDataURL(e)}))}));Promise.all(a).then((function(t){var a=t.reduce((function(e,t){return e.insert((o=t,(i=n)in(r={})?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o,r));var r,i,o}),(new i.a).retain(e.index).delete(e.length));r.quill.updateContents(a,o.a.sources.USER),r.quill.setSelection(e.index+t.length,o.a.sources.SILENT)}))}},t.a=f},function(e,t,n){var r=n(8),i=n(22),o=function(e){return i(e)?e:void 0};e.exports=function(e,t){return arguments.length<2?o(r[e]):r[e]&&r[e][t]}},function(e,t,n){var r=n(8),i=n(89).f,o=n(70),a=n(90),s=n(81),l=n(135),c=n(140);e.exports=function(e,t){var n,u,d,h,p,f=e.target,m=e.global,g=e.stat;if(n=m?r:g?r[f]||s(f,{}):(r[f]||{}).prototype)for(u in t){if(h=t[u],d=e.noTargetGet?(p=i(n,u))&&p.value:n[u],!c(m?u:f+(g?".":"#")+u,e.forced)&&void 0!==d){if(typeof h==typeof d)continue;l(h,d)}(e.sham||d&&d.sham)&&o(h,"sham",!0),a(n,u,h,e)}}},function(e,t,n){var r=n(134),i=n(69);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var r=n(2),i=n(29),o=n(19);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n){return(c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=p(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var i=p(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(h,e);var t,n,r,a=d(h);function h(e,t){var n,r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{allowedTags:[]};return s(this,h),(r=a.call(this,e,t,i)).allowedTags=null!==(n=i.allowedTags)&&void 0!==n?n:[],r}return t=h,r=[{key:"keys",value:function(e){return Object(i.b)(c(p(h),"keys",this),e,o.a.attribute)}}],(n=[{key:"add",value:function(e,t){return i.c.call(this,c(p(h.prototype),"add",this),e,t)}},{key:"remove",value:function(e){return i.c.call(this,c(p(h.prototype),"remove",this),e)}},{key:"value",value:function(e){return i.c.call(this,c(p(h.prototype),"value",this),e)}},{key:"canAdd",value:function(e,t){return i.a.call(this,c(p(h.prototype),"canAdd",this),e,t)}}])&&l(t.prototype,n),r&&l(t,r),h}(r.Attributor)},function(e,t,n){"use strict";function r(){return Math.random().toString(36).slice(2,6)}n.d(t,"a",(function(){return r}))},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(2),a=n(0),s=n(12),l=n(6),c=n(10),u=n(13),d=n(5),h=n(21),p=n(11),f=n(64),m=n(48);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t,n){return t&&O(e.prototype,t),n&&O(e,n),e}function x(e,t,n){return(x="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=["row","cell"],A="data-table-",D=function(e){I(n,e);var t=E(n);function n(){return C(this,n),t.apply(this,arguments)}return w(n,[{key:"optimize",value:function(){var e,t=this.domNode.getAttribute("".concat(A,"row"));if(this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)){var r=this.domNode,i={row:t};Object.keys(h.b).forEach((function(e){var t=r.dataset[e.toLowerCase()];t&&(i[e]=t)})),this.wrap(this.statics.requiredContainer.blotName,i)}for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];(e=x(k(n.prototype),"optimize",this)).call.apply(e,[this].concat(a))}},{key:"format",value:function(e,t){"tableCellLine"===e&&null===t&&(t=this.formats().tableCellLine);var r=T.indexOf(e)>-1;if(r||p.c[e]||h.b[e]){var i,o,a,s="data-".concat(r?"table-":"").concat(e.toLowerCase());Object(m.a)(this.domNode,s,t),h.b[e]&&(null===(i=this.cell())||void 0===i||i.format(e,t)),p.c[e]&&(null===(o=this.cell())||void 0===o||null===(a=o.table())||void 0===a||a.format(e,t))}else x(k(n.prototype),"format",this).call(this,e,t)}},{key:"cell",value:function(){return"row"in this.parent?this.parent:null}}],[{key:"create",value:function(e){var t=x(k(n),"create",this).call(this,e);return T.forEach((function(n){var r,i="row"===n?z:V;t.setAttribute("".concat(A).concat(n),null!==(r=e[n])&&void 0!==r?r:i())})),t}},{key:"formats",value:function(e){return T.reduce((function(t,n){var r="".concat(A).concat(n);return e.hasAttribute(r)&&(t[n]=e.getAttribute(r)||void 0),t}),{})}}]),n}(l.d);D.blotName="tableCellLine",D.className="ql-table-cell-line",D.tagName="P";var P=function(e){I(n,e);var t=E(n);function n(){return C(this,n),t.apply(this,arguments)}return n}(D);P.blotName="tableHeaderCellLine",P.className="ql-table-header-cell-line";var M=function(e){I(n,e);var t=E(n);function n(){return C(this,n),t.apply(this,arguments)}return w(n,[{key:"format",value:function(e,t){var n;null===(n=h.b[e])||void 0===n||n.add(this.domNode,t)}},{key:"checkMerge",value:function(){if(x(k(n.prototype),"checkMerge",this).call(this)&&null!=this.next.children.head){var e=this.children.head.formats()[this.children.head.statics.blotName],t=this.children.tail.formats()[this.children.tail.statics.blotName],r=this.next.children.head.formats()[this.next.children.head.statics.blotName],i=this.next.children.tail.formats()[this.next.children.tail.statics.blotName];return e.cell===t.cell&&e.cell===r.cell&&e.cell===i.cell}return!1}},{key:"formats",value:function(){return n.cellFormats(this.domNode)}},{key:"cellOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"row",value:function(){return"table"in this.parent?this.parent:null}},{key:"rowOffset",value:function(){return this.row()?this.row().rowOffset():-1}},{key:"table",value:function(){var e;return null===(e=this.row())||void 0===e?void 0:e.table()}},{key:"optimize",value:function(){var e,t,r=null!==(e=this.domNode.getAttribute("".concat(A,"row")))&&void 0!==e?e:this.domNode.getAttribute("".concat(A,"header-row"));!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName,{row:r});for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];(t=x(k(n.prototype),"optimize",this)).call.apply(t,[this].concat(o))}}],[{key:"create",value:function(e){var t=x(k(n),"create",this).call(this,e);return e&&Object.keys(e).forEach((function(n){var r;null===(r=h.b[n])||void 0===r||r.add(t,e[n])})),t}},{key:"cellFormats",value:function(e){var t,n={};return(e.hasAttribute("".concat(A,"row"))||e.hasAttribute("".concat(A,"header-row")))&&(n.row=null!==(t=e.getAttribute("".concat(A,"row")))&&void 0!==t?t:e.getAttribute("".concat(A,"header-row"))),Object.keys(h.b).forEach((function(t){var r,i=null===(r=e.firstElementChild)||void 0===r?void 0:r.dataset[t.toLowerCase()];i&&(n[t]=i)})),n}}]),n}(u.a);M.tagName=["TD","TH"];var F=function(e){I(n,e);var t=E(n);function n(){return C(this,n),t.apply(this,arguments)}return w(n,[{key:"format",value:function(e,t){"row"===e?(this.domNode.setAttribute("".concat(A).concat(e),t),this.children.forEach((function(n){n.format(e,t)}))):x(k(n.prototype),"format",this).call(this,e,t)}}],[{key:"create",value:function(e){var t=x(k(n),"create",this).call(this,e),r="".concat(A,"row");return null!=e&&e.row&&t.setAttribute(r,e.row),t}}]),n}(M);F.blotName="tableCell",F.className="ql-table-data-cell",F.dataAttribute="".concat(A,"row");var N=function(e){I(n,e);var t=E(n);function n(){return C(this,n),t.apply(this,arguments)}return w(n,[{key:"format",value:function(e,t){"row"===e?(this.domNode.setAttribute("".concat(A).concat(e),t),this.children.forEach((function(n){n.format(e,t)}))):x(k(n.prototype),"format",this).call(this,e,t)}}],[{key:"create",value:function(e){var t=x(k(n),"create",this).call(this,e),r="".concat(A,"header-row");return e&&e.row&&t.setAttribute(r,e.row),t}}]),n}(M);N.tagName=["TH","TD"],N.className="ql-table-header-cell",N.blotName="tableHeaderCell",N.dataAttribute="".concat(A,"header-row");var R=function(e){I(n,e);var t=E(n);function n(){return C(this,n),t.apply(this,arguments)}return w(n,[{key:"checkMerge",value:function(){if(x(k(n.prototype),"checkMerge",this).call(this)&&Object(d.a)(this.next.children.head)){var e=this.children.head.formats(),t=this.children.tail.formats(),r=this.next.children.head.formats(),i=this.next.children.tail.formats();return e.row===t.row&&e.row===r.row&&e.row===i.row}return!1}},{key:"optimize",value:function(){for(var e,t=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];(e=x(k(n.prototype),"optimize",this)).call.apply(e,[this].concat(i));var a=this.childFormatName;this.children.forEach((function(e){if(Object(d.a)(e.next)){var n=e.formats(),r=e.next.formats();if(n[a]!==r[a]){var i=t.splitAfter(e);i&&i.optimize(),t.prev&&t.prev.optimize()}}}))}},{key:"rowOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"table",value:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.parent}},{key:"formats",value:function(){var e={},t="".concat(A,"row");return this.domNode.hasAttribute(t)&&(e[t]=this.domNode.getAttribute(t)),e}}],[{key:"create",value:function(e){var t=x(k(n),"create",this).call(this,e);return null!=e&&e.row&&t.setAttribute("".concat(A,"row"),e.row),t}}]),n}(u.a);R.tagName="TR";var B=function(e){I(n,e);var t=E(n);function n(e,r){var i;return C(this,n),(i=t.call(this,e,r)).childFormatName="table",i}return n}(R);B.blotName="tableRow";var L=function(e){I(n,e);var t=E(n);function n(e,r){var i;return C(this,n),(i=t.call(this,e,r)).childFormatName="tableHeaderCell",i}return n}(R);L.blotName="tableHeaderRow";var q=function(e){I(n,e);var t=E(n);function n(){return C(this,n),t.apply(this,arguments)}return w(n,[{key:"optimize",value:function(){var e;if(this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)){var t=this.children.head.children.head.children.head.domNode,r={};Object.keys(p.c).forEach((function(e){var n=t.dataset[e.toLowerCase()];n&&(r[e]=n)})),this.wrap(this.statics.requiredContainer.blotName,r)}for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];(e=x(k(n.prototype),"optimize",this)).call.apply(e,[this].concat(o))}}]),n}(u.a),H=function(e){I(n,e);var t=E(n);function n(){return C(this,n),t.apply(this,arguments)}return n}(q);H.blotName="tableBody",H.tagName="TBODY";var $=function(e){I(n,e);var t=E(n);function n(){return C(this,n),t.apply(this,arguments)}return n}(q);$.blotName="tableHeader",$.tagName="THEAD";var U=function(e){I(n,e);var t=E(n);function n(){return C(this,n),t.apply(this,arguments)}return w(n,[{key:"balanceCells",value:function(){var e=this.descendants(L),t=this.descendants(B),n=this.getMaxTableColCount(e,t);this.balanceRows(n,e,N),this.balanceRows(n,t,F)}},{key:"getMaxTableColCount",value:function(e,t){return Math.max(this.getMaxRowColCount(e),this.getMaxRowColCount(t))}},{key:"getMaxRowColCount",value:function(e){return Math.max.apply(Math,_(e.map((function(e){return e.children.length}))))}},{key:"balanceRows",value:function(e,t,n){var r=this;t.forEach((function(t){new Array(e-t.children.length).fill(0).forEach((function(){var e;Object(d.a)(t.children.head)&&(e=n.cellFormats(t.children.head.domNode));var i=r.scroll.create(n.blotName,e),o=r.scroll.create(n.allowedChildren[0].blotName,e);i.appendChild(o),t.appendChild(i),i.optimize()}))}))}},{key:"cells",value:function(e){return this.rows().map((function(t){return t.children.at(e)}))}},{key:"deleteColumn",value:function(e){var t=this;[$,H].forEach((function(n){var r=v(t.descendants(n),1)[0];Object(d.a)(r)&&Object(d.a)(r.children.head)&&r.children.forEach((function(t){var n=t.children.at(e);Object(d.a)(n)&&n.remove()}))}))}},{key:"insertColumn",value:function(e){var t=this;[$,H].forEach((function(n){var r=v(t.descendants(n),1)[0];if(Object(d.a)(r)&&Object(d.a)(r.children.head)){var i=n===$?N:F,o=n===$?P:D;r.children.forEach((function(n){var r=n.children.at(e),a=o.formats(n.children.head.children.head.domNode),s=t.scroll.create(i.blotName,{row:a.row}),l=t.scroll.create(o.blotName,{row:a.row}),u=t.scroll.create(c.a.blotName);l.appendChild(u),s.appendChild(l),n.insertBefore(s,r)}))}}))}},{key:"insertRow",value:function(e){var t=this,n=v(this.descendants(H),1)[0];if(Object(d.a)(n)&&Object(d.a)(n.children.head)){var r=z(),i=this.scroll.create(B.blotName,{row:r});n.children.head.children.forEach((function(){var e=t.scroll.create(F.blotName,{row:r}),n=t.scroll.create(D.blotName,{row:r}),o=t.scroll.create(c.a.blotName);n.appendChild(o),e.appendChild(n),i.appendChild(e)}));var o=n.children.at(e);n.insertBefore(i,o)}}},{key:"insertHeaderRow",value:function(){var e=this,t=v(this.descendants($),1)[0],n=v(this.descendants(H),1)[0];if(!Object(d.a)(t)&&Object(d.a)(n)&&Object(d.a)(n.children.head)){var r=z(),i=this.scroll.create($.blotName),o=this.scroll.create(L.blotName),a=this.children.at(0);i.appendChild(o),n.children.head.children.forEach((function(){var t=e.scroll.create(N.blotName,{row:r}),n=e.scroll.create(P.blotName,{row:r}),i=e.scroll.create(c.a.blotName);n.appendChild(i),t.appendChild(n),o.appendChild(t),t.optimize()})),this.insertBefore(i,a)}}},{key:"rows",value:function(){var e=this.children.head;return Object(d.a)(e)?e.children.map((function(e){return e})):[]}},{key:"formats",value:function(){var e={},t=this.cells()[0].domNode.firstElementChild;return Object.keys(p.c).forEach((function(n){var r=t.dataset[n.toLowerCase()];r&&(e[n]=r)})),e}},{key:"format",value:function(e,t){var n=p.c[e];if(n){var r="data-".concat(e.toLowerCase());this.cells().forEach((function(e){Object(m.a)(e.children.head.domNode,r,t)})),n.add(this.domNode,t)}}}],[{key:"create",value:function(e){var t=x(k(n),"create",this).call(this,e);return e&&Object.keys(e).forEach((function(n){var r;null===(r=p.c[n])||void 0===r||r.add(t,e[n])})),t}}]),n}(u.a);function z(){return"row-".concat(Object(f.a)())}function V(){return"cell-".concat(Object(f.a)())}U.blotName="tableContainer",U.tagName="TABLE",U.allowedChildren=[$,H],H.requiredContainer=U,$.requiredContainer=U,H.allowedChildren=[B],B.requiredContainer=H,B.allowedChildren=[F],F.requiredContainer=B,D.requiredContainer=F,F.allowedChildren=[D],$.allowedChildren=[L],L.requiredContainer=$,P.requiredContainer=N,N.allowedChildren=[P],L.allowedChildren=[N],N.requiredContainer=L;var K=n(26),W=n(54),G=n(55);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ie(e);if(t){var i=ie(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return re(this,n)}}function re(e,t){if(t&&("object"===Z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ie(e){return(ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oe=[null,null,null,-1],ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(s,e);var t,n,r,o=ne(s);function s(){var e;J(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=o.call.apply(o,[this].concat(n))).tableBlots=[D.blotName,P.blotName],e.tableBlots.forEach((function(t){e.quill.editor.addImmediateFormat(t)})),e.integrateClipboard(),e.addKeyboardHandlers(),e.listenBalanceCells(),e}return t=s,r=[{key:"register",value:function(){a.a.register(D,!0),a.a.register(P,!0),a.a.register(N,!0),a.a.register(F,!0),a.a.register(L,!0),a.a.register(B,!0),a.a.register(H,!0),a.a.register($,!0),a.a.register(U,!0),[p.c,h.b].forEach((function(e){Object.keys(e).forEach((function(t){a.a.register(Q({},"formats/".concat(t),e[t]),!0)}))}))}}],(n=[{key:"integrateClipboard",value:function(){var e=this;this.tableBlots.forEach((function(t){e.quill.clipboard.addTableBlot(t)})),this.quill.clipboard.addMatcher("td, th",se),this.quill.clipboard.addMatcher("table",Object(G.a)(p.a)),this.quill.clipboard.addMatcher("td, th",Object(G.b)(h.a))}},{key:"addKeyboardHandlers",value:function(){var e=this,t=s.keyboardBindings;Object.keys(t).forEach((function(n){t[n]&&e.quill.keyboard.addBinding(t[n])}))}},{key:"balanceTables",value:function(){this.quill.scroll.descendants(U).forEach((function(e){e.balanceCells()}))}},{key:"deleteColumn",value:function(){var e=X(this.getTable(),3),t=e[0],n=e[2];Object(d.a)(n)&&(t.deleteColumn(n.cellOffset()),this.quill.update(a.a.sources.USER))}},{key:"deleteRow",value:function(){var e=X(this.getTable(),2)[1];Object(d.a)(e)&&(e.remove(),this.quill.update(a.a.sources.USER))}},{key:"deleteTable",value:function(){var e=X(this.getTable(),1)[0];if(Object(d.a)(e)){var t=e.offset();e.remove(),this.quill.update(a.a.sources.USER),this.quill.setSelection(t,a.a.sources.SILENT)}}},{key:"getTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(!Object(d.a)(e))return oe;var t=this.quill.getLine(e.index),n=X(t,2),r=n[0],i=n[1];if(!Object(d.a)(r)||-1===this.tableBlots.indexOf(r.statics.blotName))return oe;var o=r.parent,a=o.parent,s=a.parent.parent;return[s,a,o,i]}},{key:"insertColumn",value:function(e){var t=this.quill.getSelection(),n=X(this.getTable(t),3),r=n[0],i=n[1],o=n[2];if(Object(d.a)(o)){var s=o.cellOffset();r.insertColumn(s+e),this.quill.update(a.a.sources.USER);var l=i.rowOffset();0===e&&(l+=1),this.quill.setSelection(t.index+l,t.length,a.a.sources.SILENT)}}},{key:"insertColumnLeft",value:function(){this.insertColumn(0)}},{key:"insertColumnRight",value:function(){this.insertColumn(1)}},{key:"insertRow",value:function(e){var t=this.quill.getSelection(),n=X(this.getTable(t),3),r=n[0],i=n[1],o=n[2];if(Object(d.a)(o)){var s=i.rowOffset();r.insertRow(s+e),this.quill.update(a.a.sources.USER),e>0?this.quill.setSelection(t,a.a.sources.SILENT):this.quill.setSelection(t.index+i.children.length,t.length,a.a.sources.SILENT)}}},{key:"insertRowAbove",value:function(){this.insertRow(0)}},{key:"insertRowBelow",value:function(){this.insertRow(1)}},{key:"insertHeaderRow",value:function(){var e=this.quill.getSelection(),t=X(this.getTable(e),3),n=t[0],r=t[2];Object(d.a)(r)&&(n.insertHeaderRow(),this.quill.update(a.a.sources.USER))}},{key:"insertTable",value:function(e,t){var n=this.quill.getSelection();if(Object(d.a)(n)){var r=new Array(e).fill(0).reduce((function(e){var n=z();return new Array(t).fill("\n").forEach((function(t){e.insert(t,{tableCellLine:{row:n,cell:z()}})})),e}),(new i.a).retain(n.index));this.quill.updateContents(r,a.a.sources.USER),this.quill.setSelection(n.index,a.a.sources.SILENT),this.balanceTables()}}},{key:"tableFormats",value:function(){return this.tableBlots}},{key:"listenBalanceCells",value:function(){var e=this;this.quill.on(a.a.events.SCROLL_OPTIMIZE,(function(t){t.some((function(t){return-1!==["TD","TH","TR","TBODY","THEAD","TABLE"].indexOf(t.target.tagName)&&(e.quill.once(a.a.events.TEXT_CHANGE,(function(t,n,r){r===a.a.sources.USER&&e.balanceTables()})),!0)}))})),this.quill.on(a.a.events.CONTENT_SETTED,(function(){e.quill.once(a.a.events.TEXT_CHANGE,(function(){e.balanceTables()}))}))}}])&&ee(t.prototype,n),r&&ee(t,r),s}(s.a);function se(e,t){var n=e.parentNode,r="TABLE"===n.parentNode.tagName?n.parentNode:n.parentNode.parentNode,o="THEAD"===n.parentNode.tagName||null,a=Array.from(r.querySelectorAll("tr")),s=Array.from(n.querySelectorAll("th,td")),l=a.indexOf(n)+1,c=s.indexOf(e)+1,u=o?"tableHeaderCellLine":"tableCellLine";return 0===t.length()?t=(new i.a).insert("\n",Q({},u,{row:l,cell:c})):(Object(K.c)(t,"\n")||t.insert("\n"),Object(K.a)(t,u,{row:l,cell:c}))}ae.keyboardBindings={"table backspace":{key:"backspace",format:["tableCellLine","tableHeaderCellLine"],collapsed:!0,offset:0,handler:function(e){var t=X(this.quill.getLine(e.index),1)[0];return!(!t.prev||-1===["tableCellLine","tableHeaderCellLine"].indexOf(t.prev.statics.blotName))}},"table delete":{key:"del",format:["tableCellLine","tableHeaderCellLine"],collapsed:!0,suffix:/^$/,handler:function(){}},"table cell enter":{key:"enter",shiftKey:null,format:["tableCellLine","tableHeaderCellLine"],handler:function(e,t){var n,r=this;if(null===(n=this.quill.selection)||void 0===n||!n.composing){e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var i=Object.keys(t.format).reduce((function(e,n){return r.quill.scroll.query(n,o.Scope.BLOCK)&&!Array.isArray(t.format[n])&&(e[n]=t.format[n]),e}),{});this.quill.insertText(e.index,"\n",i.tableCellLine,a.a.sources.USER),this.quill.setSelection(e.index+1,a.a.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach((function(e){null==i[e]&&(Array.isArray(t.format[e])||"link"!==e&&r.quill.format(e,t.format[e],a.a.sources.USER))}))}}},"table tab":{key:"tab",shiftKey:null,format:["tableCellLine","tableHeaderCellLine"],handler:function(e,t){var n=t.event,r=t.line,i=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(i-1,a.a.sources.USER):this.quill.setSelection(i+r.length(),a.a.sources.USER)}},"table down":Object(W.a)(!1,["tableCellLine","tableHeaderCellLine"]),"table up":Object(W.a)(!0,["tableCellLine","tableHeaderCellLine"])},t.a=ae},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){e.exports=!1},function(e,t,n){var r=n(8),i=n(69),o=r.Object;e.exports=function(e){return o(i(e))}},function(e,t,n){var r=n(8).TypeError;e.exports=function(e){if(null==e)throw r("Can't call method on "+e);return e}},function(e,t,n){var r=n(41),i=n(52),o=n(71);e.exports=r?function(e,t,n){return i.f(e,t,o(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t){e.exports={}},function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(63),i=n(31),o=n(19),a=["name"];function s(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function l(e,t){var n=e.name,l=s(e,a),c="".concat(n).concat(Object(i.a)(t)),u="".concat(o.a.attribute).concat(n,"_").concat(t);return new r.a(c,u,l)}},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var r=n(53),i=n(31),o=n(19),a=["name","formatName"];function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function u(e,t){var n=e.name,l=e.formatName,u=c(e,a),d=s(t.split("-"),2),h=d[0],p=d[1],f="".concat(n).concat(Object(i.a)(null!=l?l:h)).concat(p?Object(i.a)(p):""),m="".concat(o.a.style).concat(n,"_").concat(t);return new r.a(f,m,u)}},function(e,t,n){"use strict";var r=n(1),i=n.n(r),o=n(0),a=n(12),s=n(6),l=n(13),c=n(5),u=n(11),d=n(64),h=n(48);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||g(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||g(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function C(e,t,n){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function O(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var i=S(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return I(this,n)}}function I(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var E=function(e){O(n,e);var t=x(n);function n(){return _(this,n),t.apply(this,arguments)}return y(n,[{key:"format",value:function(e,t){if(u.c[e]){var r,i,o="data-".concat(e.toLowerCase());Object(h.a)(this.domNode,o,t),null===(r=this.row())||void 0===r||null===(i=r.table())||void 0===i||i.format(e,t)}else C(S(n.prototype),"format",this).call(this,e,t)}},{key:"cellOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"row",value:function(){return"table"in this.parent?this.parent:null}},{key:"rowOffset",value:function(){return this.row()?this.row().rowOffset():-1}},{key:"table",value:function(){var e;return null===(e=this.row())||void 0===e?void 0:e.table()}}],[{key:"create",value:function(e){var t=C(S(n),"create",this).call(this),r=this.dataAttribute;return Object(h.a)(t,r,null!=e?e:R()),t}},{key:"formats",value:function(e){var t=this.dataAttribute;if(e.hasAttribute(t))return e.getAttribute(t)}}]),n}(s.d);E.tagName=["TD","TH"];var j=function(e){O(n,e);var t=x(n);function n(){return _(this,n),t.apply(this,arguments)}return y(n,[{key:"format",value:function(e,t){e===n.blotName&&t?this.domNode.setAttribute(n.dataAttribute,t):C(S(n.prototype),"format",this).call(this,e,t)}}]),n}(E);j.blotName="table",j.dataAttribute="".concat("data-tablelite-","row");var k=function(e){O(n,e);var t=x(n);function n(){return _(this,n),t.apply(this,arguments)}return y(n,[{key:"format",value:function(e,t){e===n.blotName&&t?this.domNode.setAttribute(n.dataAttribute,t):C(S(n.prototype),"format",this).call(this,e,t)}}]),n}(E);k.tagName=["TH","TD"],k.blotName="tableHeaderCell",k.dataAttribute="".concat("data-tablelite-","header-row");var T=function(e){O(n,e);var t=x(n);function n(){return _(this,n),t.apply(this,arguments)}return y(n,[{key:"checkMerge",value:function(){if(C(S(n.prototype),"checkMerge",this).call(this)&&Object(c.a)(this.next.children.head)){var e=this.childFormatName,t=this.children.head.formats(),r=this.children.tail.formats(),i=this.next.children.head.formats(),o=this.next.children.tail.formats();return t[e]===r[e]&&t[e]===i[e]&&t[e]===o[e]}return!1}},{key:"optimize",value:function(){for(var e,t=this,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];(e=C(S(n.prototype),"optimize",this)).call.apply(e,[this].concat(i));var a=this.childFormatName;this.children.forEach((function(e){if(Object(c.a)(e.next)){var n=e.formats(),r=e.next.formats();if(n[a]!==r[a]){var i=t.splitAfter(e);i&&i.optimize(),t.prev&&t.prev.optimize()}}}))}},{key:"rowOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"table",value:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.parent}}]),n}(l.a);T.tagName="TR";var A=function(e){O(n,e);var t=x(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r)).childFormatName="table",i}return n}(T);A.blotName="tableRow";var D=function(e){O(n,e);var t=x(n);function n(e,r){var i;return _(this,n),(i=t.call(this,e,r)).childFormatName="tableHeaderCell",i}return n}(T);D.blotName="tableHeaderRow";var P=function(e){O(n,e);var t=x(n);function n(){return _(this,n),t.apply(this,arguments)}return y(n,[{key:"optimize",value:function(){var e;if(this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)){var t=this.children.head.children.head.domNode,r={};Object.keys(u.c).forEach((function(e){var n=t.dataset[e.toLowerCase()];n&&(r[e]=n)})),this.wrap(this.statics.requiredContainer.blotName,r)}for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];(e=C(S(n.prototype),"optimize",this)).call.apply(e,[this].concat(o))}}]),n}(l.a),M=function(e){O(n,e);var t=x(n);function n(){return _(this,n),t.apply(this,arguments)}return n}(P);M.blotName="tableBody",M.tagName=["TBODY"];var F=function(e){O(n,e);var t=x(n);function n(){return _(this,n),t.apply(this,arguments)}return n}(P);F.blotName="tableHeader",F.tagName=["THEAD"];var N=function(e){O(n,e);var t=x(n);function n(){return _(this,n),t.apply(this,arguments)}return y(n,[{key:"balanceCells",value:function(){var e=this.descendants(D),t=this.descendants(A),n=this.getMaxTableColCount(e,t);this.balanceRows(n,e,k),this.balanceRows(n,t,j)}},{key:"getMaxTableColCount",value:function(e,t){return Math.max(this.getMaxRowColCount(e),this.getMaxRowColCount(t))}},{key:"getMaxRowColCount",value:function(e){return Math.max.apply(Math,m(e.map((function(e){return e.children.length}))))}},{key:"balanceRows",value:function(e,t,n){var r=this;t.forEach((function(t){new Array(e-t.children.length).fill(0).forEach((function(){var e;Object(c.a)(t.children.head)&&(e=n.formats(t.children.head.domNode));var i=r.scroll.create(n.blotName,e);t.appendChild(i),i.optimize()}))}))}},{key:"cells",value:function(e){return this.rows().map((function(t){return t.children.at(e)}))}},{key:"deleteColumn",value:function(e){var t=this;[F,M].forEach((function(n){var r=f(t.descendants(n),1)[0];Object(c.a)(r)&&Object(c.a)(r.children.head)&&r.children.forEach((function(t){var n=t.children.at(e);Object(c.a)(n)&&n.remove()}))}))}},{key:"insertColumn",value:function(e){var t=this;[F,M].forEach((function(n){var r=f(t.descendants(n),1)[0];if(Object(c.a)(r)&&Object(c.a)(r.children.head)){var i=n===F?k:j;r.children.forEach((function(n){var r=n.children.at(e),o=i.formats(n.children.head.domNode),a=t.scroll.create(i.blotName,o);n.insertBefore(a,r)}))}}))}},{key:"insertRow",value:function(e){var t=this,n=f(this.descendants(M),1)[0];if(Object(c.a)(n)&&Object(c.a)(n.children.head)){var r=R(),i=this.scroll.create(A.blotName);n.children.head.children.forEach((function(){var e=t.scroll.create(j.blotName,r);i.appendChild(e)}));var o=n.children.at(e);n.insertBefore(i,o)}}},{key:"insertHeaderRow",value:function(){var e=this,t=f(this.descendants(F),1)[0],n=f(this.descendants(M),1)[0];if(!Object(c.a)(t)&&Object(c.a)(n)&&Object(c.a)(n.children.head)){var r=R(),i=this.scroll.create(F.blotName),o=this.scroll.create(D.blotName),a=this.children.at(0);i.appendChild(o),n.children.head.children.forEach((function(){var t=e.scroll.create(k.blotName,r);o.appendChild(t),t.optimize()})),this.insertBefore(i,a)}}},{key:"rows",value:function(){var e=this.children.head;return Object(c.a)(e)?e.children.map((function(e){return e})):[]}},{key:"formats",value:function(){var e={},t=this.cells()[0].domNode;return Object.keys(u.c).forEach((function(n){var r=t.dataset[n.toLowerCase()];r&&(e[n]=r)})),e}},{key:"format",value:function(e,t){var n=u.c[e];if(n){var r="data-".concat(e.toLowerCase());this.cells().forEach((function(e){Object(h.a)(e.domNode,r,t)})),n.add(this.domNode,t)}}}],[{key:"create",value:function(e){var t=C(S(n),"create",this).call(this,e);return e&&Object.keys(e).forEach((function(n){var r;null===(r=u.c[n])||void 0===r||r.add(t,e[n])})),t}}]),n}(l.a);function R(){return"row-".concat(Object(d.a)())}N.blotName="tableContainer",N.tagName="TABLE",N.allowedChildren=[F,M],M.requiredContainer=N,F.requiredContainer=N,M.allowedChildren=[A],A.requiredContainer=M,A.allowedChildren=[j],j.requiredContainer=A,F.allowedChildren=[D],D.requiredContainer=F,D.allowedChildren=[k],k.requiredContainer=D;var B=n(26),L=n(54);function q(e){var t=e.quill,n=e.index,r=e.range,a=n-1,s=(new i.a).retain(a).insert("\n");t.updateContents(s,o.a.sources.USER),t.setSelection(r.index+1,r.length,o.a.sources.SILENT)}function H(e){var t=e.quill,n=e.index+e.table.length(),r=(new i.a).retain(n).insert("\n");t.updateContents(r,o.a.sources.USER),t.setSelection(n,o.a.sources.USER)}function $(e,t,n){return null==e.prev&&null==e.next?null==t.prev&&null==t.next?0===n?-1:1:null==t.prev?-1:1:null==e.prev?-1:null==e.next?1:null}var U=n(55),z=n(21);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function K(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var i=J(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Y(this,n)}}function Y(e,t){if(t&&("object"===V(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ee=[null,null,null,-1],te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(s,e);var t,n,r,a=X(s);function s(){var e;G(this,s);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).tableBlots=[j.blotName,k.blotName],e.tableBlots.forEach((function(t){e.quill.editor.addImmediateFormat(t)})),e.integrateClipboard(),e.addKeyboardHandlers(),e.listenBalanceCells(),e}return t=s,r=[{key:"register",value:function(){o.a.register(k,!0),o.a.register(j,!0),o.a.register(D,!0),o.a.register(A,!0),o.a.register(M,!0),o.a.register(F,!0),o.a.register(N,!0),[u.c,z.b].forEach((function(e){Object.keys(e).forEach((function(t){var n,r,i;o.a.register((n={},r="formats/".concat(t),i=e[t],r in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,n),!0)}))}))}}],(n=[{key:"integrateClipboard",value:function(){var e=this;this.tableBlots.forEach((function(t){return e.quill.clipboard.addTableBlot(t)})),this.quill.clipboard.addMatcher("tr",ne),this.quill.clipboard.addMatcher("table",Object(U.a)(u.a)),this.quill.clipboard.addMatcher("td, th",Object(U.b)(z.a))}},{key:"addKeyboardHandlers",value:function(){var e=this,t=s.keyboardBindings;Object.keys(t).forEach((function(n){t[n]&&e.quill.keyboard.addBinding(t[n])}))}},{key:"balanceTables",value:function(){this.quill.scroll.descendants(N).forEach((function(e){e.balanceCells()}))}},{key:"deleteColumn",value:function(){var e=K(this.getTable(),3),t=e[0],n=e[2];Object(c.a)(n)&&(t.deleteColumn(n.cellOffset()),this.quill.update(o.a.sources.USER))}},{key:"deleteRow",value:function(){var e=K(this.getTable(),2)[1];Object(c.a)(e)&&(e.remove(),this.quill.update(o.a.sources.USER))}},{key:"deleteTable",value:function(){var e=K(this.getTable(),1)[0];if(Object(c.a)(e)){var t=e.offset();e.remove(),this.quill.update(o.a.sources.USER),this.quill.setSelection(t,o.a.sources.SILENT)}}},{key:"getTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(!Object(c.a)(e))return ee;var t=this.quill.getLine(e.index),n=K(t,2),r=n[0],i=n[1];if(!Object(c.a)(r)||-1===this.tableBlots.indexOf(r.statics.blotName))return ee;var o=r.parent,a=o.parent.parent;return[a,o,r,i]}},{key:"insertColumn",value:function(e){var t=this.quill.getSelection(),n=K(this.getTable(t),3),r=n[0],i=n[1],a=n[2];if(Object(c.a)(a)){var s=a.cellOffset();r.insertColumn(s+e),this.quill.update(o.a.sources.USER);var l=i.rowOffset();0===e&&(l+=1),this.quill.setSelection(t.index+l,t.length,o.a.sources.SILENT)}}},{key:"insertColumnLeft",value:function(){this.insertColumn(0)}},{key:"insertColumnRight",value:function(){this.insertColumn(1)}},{key:"insertRow",value:function(e){var t=this.quill.getSelection(),n=K(this.getTable(t),3),r=n[0],i=n[1],a=n[2];if(Object(c.a)(a)){var s=i.rowOffset();r.insertRow(s+e),this.quill.update(o.a.sources.USER),e>0?this.quill.setSelection(t,o.a.sources.SILENT):this.quill.setSelection(t.index+i.children.length,t.length,o.a.sources.SILENT)}}},{key:"insertRowAbove",value:function(){this.insertRow(0)}},{key:"insertRowBelow",value:function(){this.insertRow(1)}},{key:"insertHeaderRow",value:function(){var e=this.quill.getSelection(),t=K(this.getTable(e),3),n=t[0],r=t[2];Object(c.a)(r)&&(n.insertHeaderRow(),this.quill.update(o.a.sources.USER))}},{key:"insertTable",value:function(e,t){var n=this.quill.getSelection();if(Object(c.a)(n)){var r=new Array(e).fill(0).reduce((function(e){var n=new Array(t).fill("\n").join("");return e.insert(n,{table:R()})}),(new i.a).retain(n.index));this.quill.updateContents(r,o.a.sources.USER),this.quill.setSelection(n.index,o.a.sources.SILENT),this.balanceTables()}}},{key:"tableFormats",value:function(){return this.tableBlots}},{key:"listenBalanceCells",value:function(){var e=this;this.quill.on(o.a.events.SCROLL_OPTIMIZE,(function(t){t.some((function(t){return-1!==["TD","TH","TR","TBODY","THEAD","TABLE"].indexOf(t.target.tagName)&&(e.quill.once(o.a.events.TEXT_CHANGE,(function(t,n,r){r===o.a.sources.USER&&e.balanceTables()})),!0)}))})),this.quill.on(o.a.events.CONTENT_SETTED,(function(){e.quill.once(o.a.events.TEXT_CHANGE,(function(){e.balanceTables()}))}))}}])&&Z(t.prototype,n),r&&Z(t,r),s}(a.a);function ne(e,t){var n="TABLE"===e.parentNode.tagName?e.parentNode:e.parentNode.parentNode,r="THEAD"===e.parentNode.tagName||null,i=Array.from(n.querySelectorAll("tr")).indexOf(e)+1;return Object(B.a)(t,r?"tableHeaderCell":"table",i)}te.keyboardBindings={"table backspace":{key:"backspace",format:["table","tableHeaderCell"],collapsed:!0,offset:0,handler:function(){}},"table delete":{key:"del",format:["table","tableHeaderCell"],collapsed:!0,suffix:/^$/,handler:function(){}},"table enter":{key:"enter",shiftKey:null,format:["table"],handler:function(e){var t=this.quill.getModule("table");if(t){var n=this.quill,r=K(t.getTable(e),4),i=r[0],o=$(r[1],r[2],r[3]),a=i.children.length>1&&i.children.head;if(null==o||o<0&&a)return;var s=i.offset();o<0?q({quill:n,index:s,range:e}):H({quill:n,index:s,table:i})}}},"table header enter":{key:"enter",shiftKey:null,format:["tableHeaderCell"],handler:function(e){var t=this.quill.getModule("table");if(t){var n=this.quill,r=K(t.getTable(e),4),i=r[0],o=$(r[1],r[2],r[3]);if(null==o)return;var a=i.offset(),s=i.children.length>1&&i.children.tail;o<0||o>0&&s?q({quill:n,index:a,range:e}):H({quill:n,index:a,table:i})}}},"table tab":{key:"tab",shiftKey:null,format:["table","tableHeaderCell"],handler:function(e,t){var n=t.event,r=t.line,i=r.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(i-1,o.a.sources.USER):this.quill.setSelection(i+r.length(),o.a.sources.USER)}},"table down":Object(L.a)(!1,["table","tableHeaderCell"]),"table up":Object(L.a)(!0,["table","tableHeaderCell"])},t.a=te},function(e,t,n){"use strict";n.d(t,"a",(function(){return D})),n.d(t,"b",(function(){return M}));var r=n(1),i=n.n(r),o=n(2),a=n(14),s=n(0),l=n(12),c=n(6),u=n(10),d=n(24),h=n(9),p=n(17),f=n(26),m=n(15);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(e){s=!0,i=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),e}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var i=k(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){if(t&&("object"===g(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return E(e)}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e,t,n){return(j="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=k(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var T=new o.ClassAttributor("code-token","hljs",{scope:o.Scope.INLINE}),A=function(e){w(n,e);var t=I(n);function n(e,r,i){var o;return y(this,n),o=t.call(this,e,r,i),T.add(o.domNode,i),o}return O(n,[{key:"format",value:function(e,t){e!==n.blotName?j(k(n.prototype),"format",this).call(this,e,t):t?T.add(this.domNode,t):(T.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}},{key:"optimize",value:function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];(e=j(k(n.prototype),"optimize",this)).call.apply(e,[this].concat(r)),T.value(this.domNode)||this.unwrap()}}],[{key:"formats",value:function(e,t){for(;null!=e&&e!==t.domNode;){if(e.classList&&e.classList.contains(p.c.className))return j(k(n),"formats",this).call(this,e,t);e=e.parentNode}}}]),n}(a.a);A.blotName="code-token",A.className="ql-token";var D=function(e){w(n,e);var t=I(n);function n(){return y(this,n),t.apply(this,arguments)}return O(n,[{key:"format",value:function(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):j(k(n.prototype),"format",this).call(this,e,t)}},{key:"replaceWith",value:function(e,t){return this.formatAt(0,this.length(),A.blotName,!1),j(k(n.prototype),"replaceWith",this).call(this,e,t)}}],[{key:"create",value:function(e){var t=j(k(n),"create",this).call(this,e);return"string"==typeof e&&t.setAttribute("data-language",e),t}},{key:"formats",value:function(e){return e.getAttribute("data-language")||"plain"}},{key:"register",value:function(){}}]),n}(p.c),P=function(e){w(n,e);var t=I(n);function n(){return y(this,n),t.apply(this,arguments)}return O(n,[{key:"attach",value:function(){j(k(n.prototype),"attach",this).call(this),this.forceNext=!1,this.scroll.emitMount(this)}},{key:"format",value:function(e,t){e===D.blotName&&(this.forceNext=!0,this.children.forEach((function(n){n.format(e,t)})))}},{key:"formatAt",value:function(e,t,r,i){r===D.blotName&&(this.forceNext=!0),j(k(n.prototype),"formatAt",this).call(this,e,t,r,i)}},{key:"highlight",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=this.children.head){var r=Array.from(this.domNode.childNodes).filter((function(e){return e!==t.uiNode})),o="".concat(r.map((function(e){return e.textContent})).join("\n"),"\n"),a=D.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==o){if(o.trim().length>0||null==this.cachedText){var s=this.children.reduce((function(e,t){return e.concat(Object(c.b)(t,!1))}),new i.a),l=e(o,a);s.diff(l).reduce((function(e,n){var r=n.retain,i=n.attributes;return r?(i&&Object.keys(i).forEach((function(n){-1!==[D.blotName,A.blotName].indexOf(n)&&t.formatAt(e,r,n,i[n])})),e+r):e}),0)}this.cachedText=o,this.forceNext=!1}}}},{key:"html",value:function(e,t){var n=_(this.children.find(e),1)[0],r=n?D.formats(n.domNode):"plain";return'<pre data-language="'.concat(r,'">\n').concat(this.code(e,t),"\n</pre>")}},{key:"optimize",value:function(e){if(j(k(n.prototype),"optimize",this).call(this,e),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){var t=D.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}]),n}(p.b);P.allowedChildren=[D],D.requiredContainer=P,D.allowedChildren=[A,d.a,h.a,u.a];var M=function(e){w(n,e);var t=I(n);function n(e,r){var i;if(y(this,n),null==(i=t.call(this,e,r)).options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");return i.languages=i.options.languages.reduce((function(e,t){return e[t.key]=!0,e}),{}),i.highlightBlot=i.highlightBlot.bind(E(i)),i.initListener(),i.initTimer(),i}return O(n,[{key:"initListener",value:function(){var e=this;this.quill.on(s.a.events.SCROLL_BLOT_MOUNT,(function(t){if(t instanceof P){var n=e.quill.root.ownerDocument.createElement("select");e.options.languages.forEach((function(e){var t=e.key,r=e.label,i=n.ownerDocument.createElement("option");i.textContent=r,i.setAttribute("value",t),n.appendChild(i)})),n.addEventListener("change",(function(){t.format(D.blotName,n.value),e.quill.root.focus(),e.highlight(t,!0)})),null==t.uiNode&&(t.attachUI(n),t.children.head&&(n.value=D.formats(t.children.head.domNode)))}}))}},{key:"initTimer",value:function(){var e=this,t=null;this.quill.on(s.a.events.SCROLL_OPTIMIZE,(function(){clearTimeout(t),t=setTimeout((function(){e.highlight(),t=null}),e.options.interval)}))}},{key:"highlight",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.quill.selection.composing){this.quill.update(s.a.sources.USER);var r=this.quill.getSelection(),i=null==t?this.quill.scroll.descendants(P):[t];i.forEach((function(t){t.highlight(e.highlightBlot,n)})),this.quill.update(s.a.sources.SILENT),null!=r&&this.quill.setSelection(r,s.a.sources.SILENT)}}},{key:"highlightBlot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if("plain"===(t=this.languages[t]?t:"plain"))return Object(h.b)(e).split("\n").reduce((function(e,n,r){return 0!==r&&e.insert("\n",v({},p.c.blotName,t)),e.insert(n)}),new i.a);var n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(p.c.className),n.innerHTML=this.options.hljs.highlight(t,e).value,Object(f.d)(this.quill.scroll,n,[function(e,t){var n=T.value(e);return n?t.compose((new i.a).retain(t.length(),v({},A.blotName,n))):t}],[function(e,n){return e.data.split("\n").reduce((function(e,n,r){return 0!==r&&e.insert("\n",v({},p.c.blotName,t)),e.insert(n)}),n)}],new WeakMap)}}],[{key:"register",value:function(){s.a.register(A,!0),s.a.register(D,!0),s.a.register(P,!0)}}]),n}(l.a);M.DEFAULTS={hljs:Object(m.a)()?window.hljs:null,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"Javascript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){var t=+e;return t!=t||0===t?0:(t>0?r:n)(t)}},function(e,t,n){var r=n(8),i=n(79),o=r.String;e.exports=function(e){if("Symbol"===i(e))throw TypeError("Cannot convert a Symbol value to a string");return o(e)}},function(e,t,n){var r=n(8),i=n(126),o=n(22),a=n(82),s=n(28)("toStringTag"),l=r.Object,c="Arguments"==a(function(){return arguments}());e.exports=i?a:function(e){var t,n,r;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=l(e),s))?n:c?a(t):"Object"==(r=a(t))&&o(t.callee)?"Arguments":r}},function(e,t,n){var r=n(8),i=n(81),o=r["__core-js_shared__"]||i("__core-js_shared__",{});e.exports=o},function(e,t,n){var r=n(8),i=Object.defineProperty;e.exports=function(e,t){try{i(r,e,{value:t,configurable:!0,writable:!0})}catch(n){r[e]=t}return t}},function(e,t,n){var r=n(20),i=r({}.toString),o=r("".slice);e.exports=function(e){return o(i(e),8,-1)}},function(e,t,n){var r=n(20),i=n(22),o=n(80),a=r(Function.toString);i(o.inspectSource)||(o.inspectSource=function(e){return a(e)}),e.exports=o.inspectSource},function(e,t,n){var r=n(130),i=n(103);e.exports=function(e){var t=r(e,"string");return i(t)?t:t+""}},function(e,t,n){var r=n(86);e.exports=function(e,t){var n=e[t];return null==n?void 0:r(n)}},function(e,t,n){var r=n(8),i=n(22),o=n(104),a=r.TypeError;e.exports=function(e){if(i(e))return e;throw a(o(e)+" is not a function")}},function(e,t,n){var r=n(96),i=n(97),o=r("keys");e.exports=function(e){return o[e]||(o[e]=i(e))}},function(e,t){e.exports={}},function(e,t,n){var r=n(41),i=n(42),o=n(105),a=n(71),s=n(62),l=n(84),c=n(36),u=n(101),d=Object.getOwnPropertyDescriptor;t.f=r?d:function(e,t){if(e=s(e),t=l(t),u)try{return d(e,t)}catch(e){}if(c(e,t))return a(!i(o.f,e,t),e[t])}},function(e,t,n){var r=n(8),i=n(22),o=n(36),a=n(70),s=n(81),l=n(83),c=n(100),u=n(106).CONFIGURABLE,d=c.get,h=c.enforce,p=String(String).split("String");(e.exports=function(e,t,n,l){var c,d=!!l&&!!l.unsafe,f=!!l&&!!l.enumerable,m=!!l&&!!l.noTargetGet,g=l&&void 0!==l.name?l.name:t;i(n)&&("Symbol("===String(g).slice(0,7)&&(g="["+String(g).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!o(n,"name")||u&&n.name!==g)&&a(n,"name",g),(c=h(n)).source||(c.source=p.join("string"==typeof g?g:""))),e!==r?(d?!m&&e[t]&&(f=!0):delete e[t],f?e[t]=n:a(e,t,n)):f?e[t]=n:s(t,n)})(Function.prototype,"toString",(function(){return i(this)&&d(this).source||l(this)}))},function(e,t,n){var r=n(109);e.exports=function(e){return r(e.length)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var r,i=n(40),o=n(142),a=n(92),s=n(88),l=n(143),c=n(102),u=n(87),d=u("IE_PROTO"),h=function(){},p=function(e){return"<script>"+e+"<\/script>"},f=function(e){e.write(p("")),e.close();var t=e.parentWindow.Object;return e=null,t},m=function(){try{r=new ActiveXObject("htmlfile")}catch(e){}var e,t;m="undefined"!=typeof document?document.domain&&r?f(r):((t=c("iframe")).style.display="none",l.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write(p("document.F=Object")),e.close(),e.F):f(r);for(var n=a.length;n--;)delete m.prototype[a[n]];return m()};s[d]=!0,e.exports=Object.create||function(e,t){var n;return null!==e?(h.prototype=i(e),n=new h,h.prototype=null,n[d]=e):n=m(),void 0===t?n:o(n,t)}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(n(120));!function(e){e.iterator=function(e){return new o.default(e)},e.length=function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"string"==typeof e.insert?e.insert.length:1}}(i||(i={})),t.default=i},function(e,t){"use strict";var n=Object.prototype.hasOwnProperty,r="~";function i(){}function o(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function a(e,t,n,i,a){if("function"!=typeof n)throw new TypeError("The listener must be a function");var s=new o(n,i||e,a),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),l.prototype.eventNames=function(){var e,t,i=[];if(0===this._eventsCount)return i;for(t in e=this._events)n.call(e,t)&&i.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},l.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var i=0,o=n.length,a=new Array(o);i<o;i++)a[i]=n[i].fn;return a},l.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},l.prototype.emit=function(e,t,n,i,o,a){var s=r?r+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],d=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),d){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,n),!0;case 4:return u.fn.call(u.context,t,n,i),!0;case 5:return u.fn.call(u.context,t,n,i,o),!0;case 6:return u.fn.call(u.context,t,n,i,o,a),!0}for(c=1,l=new Array(d-1);c<d;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var h,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),d){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,n);break;case 4:u[c].fn.call(u[c].context,t,n,i);break;default:if(!l)for(h=1,l=new Array(d-1);h<d;h++)l[h-1]=arguments[h];u[c].fn.apply(u[c].context,l)}}return!0},l.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},l.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},l.prototype.removeListener=function(e,t,n,i){var o=r?r+e:e;if(!this._events[o])return this;if(!t)return s(this,o),this;var a=this._events[o];if(a.fn)a.fn!==t||i&&!a.once||n&&a.context!==n||s(this,o);else{for(var l=0,c=[],u=a.length;l<u;l++)(a[l].fn!==t||i&&!a[l].once||n&&a[l].context!==n)&&c.push(a[l]);c.length?this._events[o]=1===c.length?c[0]:c:s(this,o)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,void 0!==e&&(e.exports=l)},function(e,t,n){var r=n(67),i=n(80);(e.exports=function(e,t){return i[e]||(i[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.19.1",mode:r?"pure":"global",copyright:" 2021 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var r=n(20),i=0,o=Math.random(),a=r(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+a(++i+o,36)}},function(e,t,n){var r=n(127),i=n(39);e.exports=!!Object.getOwnPropertySymbols&&!i((function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&r&&r<41}))},function(e,t,n){var r=n(98);e.exports=r&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},function(e,t,n){var r,i,o,a=n(129),s=n(8),l=n(20),c=n(51),u=n(70),d=n(36),h=n(80),p=n(87),f=n(88),m=s.TypeError,g=s.WeakMap;if(a||h.state){var v=h.state||(h.state=new g),_=l(v.get),b=l(v.has),y=l(v.set);r=function(e,t){if(b(v,e))throw new m("Object already initialized");return t.facade=e,y(v,e,t),t},i=function(e){return _(v,e)||{}},o=function(e){return b(v,e)}}else{var C=p("state");f[C]=!0,r=function(e,t){if(d(e,C))throw new m("Object already initialized");return t.facade=e,u(e,C,t),t},i=function(e){return d(e,C)?e[C]:{}},o=function(e){return d(e,C)}}e.exports={set:r,get:i,has:o,enforce:function(e){return o(e)?i(e):r(e,{})},getterFor:function(e){return function(t){var n;if(!c(t)||(n=i(t)).type!==e)throw m("Incompatible receiver, "+e+" required");return n}}}},function(e,t,n){var r=n(41),i=n(39),o=n(102);e.exports=!r&&!i((function(){return 7!=Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a}))},function(e,t,n){var r=n(8),i=n(51),o=r.document,a=i(o)&&i(o.createElement);e.exports=function(e){return a?o.createElement(e):{}}},function(e,t,n){var r=n(8),i=n(60),o=n(22),a=n(131),s=n(99),l=r.Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=i("Symbol");return o(t)&&a(t.prototype,l(e))}},function(e,t,n){var r=n(8).String;e.exports=function(e){try{return r(e)}catch(e){return"Object"}}},function(e,t,n){"use strict";var r={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,o=i&&!r.call({1:2},1);t.f=o?function(e){var t=i(this,e);return!!t&&t.enumerable}:r},function(e,t,n){var r=n(41),i=n(36),o=Function.prototype,a=r&&Object.getOwnPropertyDescriptor,s=i(o,"name"),l=s&&"something"===function(){}.name,c=s&&(!r||r&&a(o,"name").configurable);e.exports={EXISTS:s,PROPER:l,CONFIGURABLE:c}},function(e,t,n){var r=n(20),i=n(36),o=n(62),a=n(138).indexOf,s=n(88),l=r([].push);e.exports=function(e,t){var n,r=o(e),c=0,u=[];for(n in r)!i(s,n)&&i(r,n)&&l(u,n);for(;t.length>c;)i(r,n=t[c++])&&(~a(u,n)||l(u,n));return u}},function(e,t,n){var r=n(77),i=Math.max,o=Math.min;e.exports=function(e,t){var n=r(e);return n<0?i(n+t,0):o(n,t)}},function(e,t,n){var r=n(77),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t,n){"use strict";var r,i,o,a=n(39),s=n(22),l=n(93),c=n(112),u=n(90),d=n(28),h=n(67),p=d("iterator"),f=!1;[].keys&&("next"in(o=[].keys())?(i=c(c(o)))!==Object.prototype&&(r=i):f=!0),null==r||a((function(){var e={};return r[p].call(e)!==e}))?r={}:h&&(r=l(r)),s(r[p])||u(r,p,(function(){return this})),e.exports={IteratorPrototype:r,BUGGY_SAFARI_ITERATORS:f}},function(e,t,n){var r=n(107),i=n(92);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){var r=n(8),i=n(36),o=n(22),a=n(68),s=n(87),l=n(144),c=s("IE_PROTO"),u=r.Object,d=u.prototype;e.exports=l?u.getPrototypeOf:function(e){var t=a(e);if(i(t,c))return t[c];var n=t.constructor;return o(n)&&t instanceof n?n.prototype:t instanceof u?d:null}},function(e,t,n){var r=n(52).f,i=n(36),o=n(28)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,o)&&r(e,o,{configurable:!0,value:t})}},function(e,t,n){var r=n(79),i=n(85),o=n(72),a=n(28)("iterator");e.exports=function(e){if(null!=e)return i(e,a)||i(e,"@@iterator")||o[r(e)]}},function(e,t,n){var r=n(8);e.exports=r},function(e,t,n){var r=n(8),i=n(20);e.exports=function(e,t){return i(r[e].prototype[t])}},function(e,t,n){"use strict";n.r(t),n(121),n(157),n(163),n(168);var r=n(25),i=n(38),o=n(35),a=n(2);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return(u="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var i=f(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,e);var t,n,r,i=h(o);function o(){return l(this,o),i.apply(this,arguments)}return t=o,(n=[{key:"add",value:function(e,t){if("+1"===t||"-1"===t){var n=this.value(e)||0;t="+1"===t?n+1:n-1}return 0===t?(this.remove(e),!0):u(f(o.prototype),"add",this).call(this,e,t)}},{key:"canAdd",value:function(e,t){return u(f(o.prototype),"canAdd",this).call(this,e,t)||u(f(o.prototype),"canAdd",this).call(this,e,parseInt(t,10))}},{key:"value",value:function(e){return parseInt(u(f(o.prototype),"value",this).call(this,e),10)||void 0}}])&&c(t.prototype,n),r&&c(t,r),o}(a.ClassAttributor))("indent","ql-indent",{scope:a.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),g=n(6);function v(e){return(v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var i=O(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(n,e);var t=y(n);function n(){return _(this,n),t.apply(this,arguments)}return n}(g.d);w.blotName="blockquote",w.tagName="blockquote";var x=w;function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var i=A(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(o,e);var t,n,r,i=k(o);function o(){return S(this,o),i.apply(this,arguments)}return t=o,r=[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}],(n=null)&&E(t.prototype,n),r&&E(t,r),o}(g.d);D.blotName="header",D.tagName=["H1","H2","H3","H4","H5","H6"];var P=D,M=n(13),F=n(0);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t,n){return(B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function q(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=z(e);if(t){var i=z(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){if(t&&("object"===N(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var V=function(e){q(n,e);var t=$(n);function n(){return L(this,n),t.apply(this,arguments)}return n}(M.a);V.blotName="list-container",V.tagName="OL";var K=function(e){q(o,e);var t,n,r,i=$(o);function o(e,t){var n;L(this,o),n=i.call(this,e,t);var r=t.ownerDocument.createElement("span"),a=function(r){if(e.isEnabled()){var i=n.statics.formats(t,e);"checked"===i?(n.format("list","unchecked"),r.preventDefault()):"unchecked"===i&&(n.format("list","checked"),r.preventDefault())}};return r.addEventListener("mousedown",a),r.addEventListener("touchstart",a),n.attachUI(r),n}return t=o,r=[{key:"create",value:function(e){var t=B(z(o),"create",this).call(this);return t.setAttribute("data-list",e),t}},{key:"formats",value:function(e){return e.getAttribute("data-list")||void 0}},{key:"register",value:function(){F.a.register(V)}}],(n=[{key:"format",value:function(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):B(z(o.prototype),"format",this).call(this,e,t)}}])&&R(t.prototype,n),r&&R(t,r),o}(g.d);K.blotName="list",K.tagName="LI",V.allowedChildren=[K],K.requiredContainer=V;var W=n(45),G=n(34),Z=n(46),Q=n(47),X=n(49);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){return(ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=re(e);if(t){var i=re(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ne(this,n)}}function ne(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ee(e,t)}(n,e);var t=te(n);function n(){return J(this,n),t.apply(this,arguments)}return n}(X.a);ie.blotName="italic",ie.tagName=["EM","I"];var oe=ie,ae=n(43),se=n(14);function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function de(e,t,n){return(de="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=me(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me(e);if(t){var i=me(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return fe(this,n)}}function fe(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(o,e);var t,n,r,i=pe(o);function o(){return ce(this,o),i.apply(this,arguments)}return t=o,r=[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):de(me(o),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}],(n=null)&&ue(t.prototype,n),r&&ue(t,r),o}(se.a);ge.blotName="script",ge.tagName=["SUB","SUP"];var ve=ge;function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function be(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=we(e);if(t){var i=we(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Oe(this,n)}}function Oe(e,t){if(t&&("object"===_e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(n,e);var t=Ce(n);function n(){return be(this,n),t.apply(this,arguments)}return n}(X.a);xe.blotName="strike",xe.tagName=["S","STRIKE"];var Ie=xe;function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ae(e);if(t){var i=Ae(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Te(this,n)}}function Te(e,t){if(t&&("object"===Se(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ae(e){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var De=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(n,e);var t=ke(n);function n(){return Ee(this,n),t.apply(this,arguments)}return n}(se.a);De.blotName="underline",De.tagName="U";var Pe=De,Me=n(56),Fe=n(15);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t,n){return(Le="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ue(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function qe(e,t){return(qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ue(e);if(t){var i=Ue(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return $e(this,n)}}function $e(e,t){if(t&&("object"===Ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qe(e,t)}(o,e);var t,n,r,i=He(o);function o(){return Re(this,o),i.apply(this,arguments)}return t=o,r=[{key:"create",value:function(e){var t=null;if(Object(Fe.a)()&&(t=window.katex),null==t)throw new Error("Formula module requires KaTeX.");var n=Le(Ue(o),"create",this).call(this,e);return"string"==typeof e&&(t.render(e,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",e)),n}},{key:"value",value:function(e){return e.getAttribute("data-value")}}],(n=[{key:"html",value:function(){var e=this.value().formula;return"<span>".concat(e,"</span>")}}])&&Be(t.prototype,n),r&&Be(t,r),o}(Me.a);ze.blotName="formula",ze.className="ql-formula",ze.tagName="SPAN";var Ve=ze;function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e,t,n){return(Ze="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Je(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Je(e);if(t){var i=Je(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Ye(this,n)}}function Ye(e,t){if(t&&("object"===Ke(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function Je(e){return(Je=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var et=["alt","height","width"],tt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(o,e);var t,n,r,i=Xe(o);function o(){return We(this,o),i.apply(this,arguments)}return t=o,r=[{key:"create",value:function(e){var t=Ze(Je(o),"create",this).call(this,e);return"string"==typeof e&&t.setAttribute("src",this.sanitize(e)),t}},{key:"formats",value:function(e){return et.reduce((function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t}),{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"register",value:function(){Object(Fe.a)()&&/Firefox/i.test(navigator.userAgent)&&setTimeout((function(){document.execCommand("enableObjectResizing",!1,!1)}),1)}},{key:"sanitize",value:function(e){return Object(ae.b)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}],(n=[{key:"format",value:function(e,t){et.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):Ze(Je(o.prototype),"format",this).call(this,e,t)}}])&&Ge(t.prototype,n),r&&Ge(t,r),o}(a.EmbedBlot);tt.blotName="image",tt.tagName="IMG";var nt=tt;function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t,n){return(at="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ut(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ut(e);if(t){var i=ut(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return ct(this,n)}}function ct(e,t){if(t&&("object"===rt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dt=["height","width"],ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(o,e);var t,n,r,i=lt(o);function o(){return it(this,o),i.apply(this,arguments)}return t=o,r=[{key:"create",value:function(e){var t=at(ut(o),"create",this).call(this,e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen",!0),t.setAttribute("src",this.sanitize(e)),t}},{key:"formats",value:function(e){return dt.reduce((function(t,n){return e.hasAttribute(n)&&(t[n]=e.getAttribute(n)),t}),{})}},{key:"sanitize",value:function(e){return ae.a.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}],(n=[{key:"format",value:function(e,t){dt.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):at(ut(o.prototype),"format",this).call(this,e,t)}},{key:"html",value:function(){var e=this.value().video;return'<a href="'.concat(e,'">').concat(e,"</a>")}}])&&ot(t.prototype,n),r&&ot(t,r),o}(g.a);ht.blotName="video",ht.className="ql-video",ht.tagName="IFRAME";var pt=ht,ft=n(17),mt=n(76),gt=n(65),vt=n(1),_t=n.n(vt);function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ot(e,t){return(Ot=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=It(e);if(t){var i=It(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return xt(this,n)}}function xt(e,t){if(t&&("object"===bt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function It(e){return(It=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var St=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ot(e,t)}(o,e);var t,n,r,i=wt(o);function o(){return yt(this,o),i.apply(this,arguments)}return t=o,r=[{key:"value",value:function(){return"\n"}}],(n=[{key:"length",value:function(){return 1}},{key:"value",value:function(){return"\n"}},{key:"optimize",value:function(){this.prev||this.next||this.remove()}}])&&Ct(t.prototype,n),r&&Ct(t,r),o}(a.EmbedBlot);St.blotName="multilineBreak",St.tagName="BR";var Et=St;function jt(e){return(jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mt(e);if(t){var i=Mt(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Dt(this,n)}}function Dt(e,t){if(t&&("object"===jt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Pt(e)}function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e){return e.nextSibling||e.previousSibling?(new _t.a).insert({multilineBreak:""}):(new _t.a).insert("\n")}var Nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(o,e);var t,n,r,i=At(o);function o(e,t){var n,r,a,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),n=i.call(this,e,t),F.a.register((s=Et,(a="blots/multilineBreak")in(r={})?Object.defineProperty(r,a,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[a]=s,r),!0),e.keyboard.addBinding({key:"enter",shiftKey:!0},n.enterHandler.bind(Pt(n))),e.keyboard.bindings.enter.unshift(e.keyboard.bindings.enter.pop()),e.clipboard.addMatcher("BR",Ft),n}return t=o,(n=[{key:"enterHandler",value:function(e){var t=this.quill.getLeaf(e.index)[0],n=this.quill.getLeaf(e.index+1)[0];this.quill.insertEmbed(e.index,"multilineBreak",!0,"user"),null!==n&&t.parent===n.parent||this.quill.insertEmbed(e.index,"multilineBreak",!0,"user"),this.quill.setSelection(e.index+1,F.a.sources.SILENT)}}])&&kt(t.prototype,n),r&&kt(t,r),o}(n(12).a),Rt=n(75),Bt=n(21),Lt=n(11);function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){$t(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function $t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ut(e,t){return t.reduce((function(t,n){return t["".concat(e).concat(n.attrName)]=n,t}),{})}r.default.register(Ht(Ht(Ht(Ht({"attributors/attribute/direction":o.a},Ut("attributors/attribute/",Lt.b)),Ut("attributors/attribute/",Bt.c)),{},{"attributors/class/align":i.b,"attributors/class/background":W.a,"attributors/class/color":G.b,"attributors/class/direction":o.b,"attributors/class/font":Z.a,"attributors/class/size":Q.a,"attributors/style/align":i.c,"attributors/style/background":W.b,"attributors/style/color":G.c,"attributors/style/direction":o.c,"attributors/style/font":Z.b,"attributors/style/size":Q.b},Ut("attributors/style/",Lt.d)),Ut("attributors/style/",Bt.d)),!0),r.default.register({"formats/align":i.b,"formats/direction":o.b,"formats/indent":m,"formats/background":W.b,"formats/color":G.c,"formats/font":Z.a,"formats/size":Q.a,"formats/blockquote":x,"formats/code-block":ft.c,"formats/header":P,"formats/list":K,"formats/bold":X.a,"formats/code":ft.a,"formats/italic":oe,"formats/link":ae.a,"formats/script":ve,"formats/strike":Ie,"formats/underline":Pe,"formats/formula":Ve,"formats/image":nt,"formats/video":pt,"tableModules/lite":Rt.a,"tableModules/main":gt.a,"modules/syntax":mt.b,"modules/multiline":Nt,"modules/table":gt.a},!0),t.default=r.default},function(e,t){function n(e,t,a,s){if(e===t)return e?[[0,e]]:[];if(null!=a){var d=function(e,t,n){var r="number"==typeof n?{index:n,length:0}:n.oldRange,i="number"==typeof n?null:n.newRange,o=e.length,a=t.length;if(0===r.length&&(null===i||0===i.length)){var s=r.index,l=e.slice(0,s),c=e.slice(s),d=i?i.index:null,h=s+a-o;if((null===d||d===h)&&!(h<0||h>a)){var p=t.slice(0,h);if((y=t.slice(h))===c){var f=Math.min(s,h),m=l.slice(0,f),g=p.slice(0,f);if(m===g){var v=l.slice(f),_=p.slice(f);return u(m,v,_,c)}}}if(null===d||d===s){var b=s,y=(p=t.slice(0,b),t.slice(b));if(p===l){var C=Math.min(o-b,a-b),O=c.slice(c.length-C),w=y.slice(y.length-C);if(O===w)return v=c.slice(0,c.length-C),_=y.slice(0,y.length-C),u(l,v,_,O)}}}return r.length>0&&i&&0===i.length&&(m=e.slice(0,r.index),O=e.slice(r.index+r.length),f=m.length,C=O.length,!(a<f+C)&&(g=t.slice(0,f),w=t.slice(a-C),m===g&&O===w))?(v=e.slice(f,o-C),_=t.slice(f,a-C),u(m,v,_,O)):null}(e,t,a);if(d)return d}var h=i(e,t),p=e.substring(0,h);h=o(e=e.substring(h),t=t.substring(h));var f=e.substring(e.length-h),m=function(e,t){var a;if(!e)return[[1,t]];if(!t)return[[-1,e]];var s=e.length>t.length?e:t,l=e.length>t.length?t:e,c=s.indexOf(l);if(-1!==c)return a=[[1,s.substring(0,c)],[0,l],[1,s.substring(c+l.length)]],e.length>t.length&&(a[0][0]=a[2][0]=-1),a;if(1===l.length)return[[-1,e],[1,t]];var u=function(e,t){var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;function a(e,t,n){for(var r,a,s,l,c=e.substring(n,n+Math.floor(e.length/4)),u=-1,d="";-1!==(u=t.indexOf(c,u+1));){var h=i(e.substring(n),t.substring(u)),p=o(e.substring(0,n),t.substring(0,u));d.length<p+h&&(d=t.substring(u-p,u)+t.substring(u,u+h),r=e.substring(0,n-p),a=e.substring(n+h),s=t.substring(0,u-p),l=t.substring(u+h))}return 2*d.length>=e.length?[r,a,s,l,d]:null}var s,l,c,u,d,h=a(n,r,Math.ceil(n.length/4)),p=a(n,r,Math.ceil(n.length/2));if(!h&&!p)return null;s=p?h&&h[4].length>p[4].length?h:p:h,e.length>t.length?(l=s[0],c=s[1],u=s[2],d=s[3]):(u=s[0],d=s[1],l=s[2],c=s[3]);var f=s[4];return[l,c,u,d,f]}(e,t);if(u){var d=u[0],h=u[1],p=u[2],f=u[3],m=u[4],g=n(d,p),v=n(h,f);return g.concat([[0,m]],v)}return function(e,t){for(var n=e.length,i=t.length,o=Math.ceil((n+i)/2),a=o,s=2*o,l=new Array(s),c=new Array(s),u=0;u<s;u++)l[u]=-1,c[u]=-1;l[a+1]=0,c[a+1]=0;for(var d=n-i,h=d%2!=0,p=0,f=0,m=0,g=0,v=0;v<o;v++){for(var _=-v+p;_<=v-f;_+=2){for(var b=a+_,y=(I=_===-v||_!==v&&l[b-1]<l[b+1]?l[b+1]:l[b-1]+1)-_;I<n&&y<i&&e.charAt(I)===t.charAt(y);)I++,y++;if(l[b]=I,I>n)f+=2;else if(y>i)p+=2;else if(h&&(w=a+d-_)>=0&&w<s&&-1!==c[w]){var C=n-c[w];if(I>=C)return r(e,t,I,y)}}for(var O=-v+m;O<=v-g;O+=2){for(var w=a+O,x=(C=O===-v||O!==v&&c[w-1]<c[w+1]?c[w+1]:c[w-1]+1)-O;C<n&&x<i&&e.charAt(n-C-1)===t.charAt(i-x-1);)C++,x++;if(c[w]=C,C>n)g+=2;else if(x>i)m+=2;else if(!h&&(b=a+d-O)>=0&&b<s&&-1!==l[b]){var I=l[b];if(y=a+I-b,I>=(C=n-C))return r(e,t,I,y)}}}return[[-1,e],[1,t]]}(e,t)}(e=e.substring(0,e.length-h),t=t.substring(0,t.length-h));return p&&m.unshift([0,p]),f&&m.push([0,f]),function e(t,n){t.push([0,""]);for(var r,a=0,s=0,u=0,d="",h="";a<t.length;)if(a<t.length-1&&!t[a][1])t.splice(a,1);else switch(t[a][0]){case 1:u++,h+=t[a][1],a++;break;case-1:s++,d+=t[a][1],a++;break;case 0:var p=a-u-s-1;if(n){if(p>=0&&c(t[p][1])){var f=t[p][1].slice(-1);if(t[p][1]=t[p][1].slice(0,-1),d=f+d,h=f+h,!t[p][1]){t.splice(p,1),a--;var m=p-1;t[m]&&1===t[m][0]&&(u++,h=t[m][1]+h,m--),t[m]&&-1===t[m][0]&&(s++,d=t[m][1]+d,m--),p=m}}l(t[a][1])&&(f=t[a][1].charAt(0),t[a][1]=t[a][1].slice(1),d+=f,h+=f)}if(a<t.length-1&&!t[a][1]){t.splice(a,1);break}if(d.length>0||h.length>0){d.length>0&&h.length>0&&(0!==(r=i(h,d))&&(p>=0?t[p][1]+=h.substring(0,r):(t.splice(0,0,[0,h.substring(0,r)]),a++),h=h.substring(r),d=d.substring(r)),0!==(r=o(h,d))&&(t[a][1]=h.substring(h.length-r)+t[a][1],h=h.substring(0,h.length-r),d=d.substring(0,d.length-r)));var g=u+s;0===d.length&&0===h.length?(t.splice(a-g,g),a-=g):0===d.length?(t.splice(a-g,g,[1,h]),a=a-g+1):0===h.length?(t.splice(a-g,g,[-1,d]),a=a-g+1):(t.splice(a-g,g,[-1,d],[1,h]),a=a-g+2)}0!==a&&0===t[a-1][0]?(t[a-1][1]+=t[a][1],t.splice(a,1)):a++,u=0,s=0,d="",h=""}""===t[t.length-1][1]&&t.pop();var v=!1;for(a=1;a<t.length-1;)0===t[a-1][0]&&0===t[a+1][0]&&(t[a][1].substring(t[a][1].length-t[a-1][1].length)===t[a-1][1]?(t[a][1]=t[a-1][1]+t[a][1].substring(0,t[a][1].length-t[a-1][1].length),t[a+1][1]=t[a-1][1]+t[a+1][1],t.splice(a-1,1),v=!0):t[a][1].substring(0,t[a+1][1].length)==t[a+1][1]&&(t[a-1][1]+=t[a+1][1],t[a][1]=t[a][1].substring(t[a+1][1].length)+t[a+1][1],t.splice(a+1,1),v=!0)),a++;v&&e(t,n)}(m,s),m}function r(e,t,r,i){var o=e.substring(0,r),a=t.substring(0,i),s=e.substring(r),l=t.substring(i),c=n(o,a),u=n(s,l);return c.concat(u)}function i(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(o,i)==t.substring(o,i)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return a(e.charCodeAt(i-1))&&i--,i}function o(e,t){if(!e||!t||e.slice(-1)!==t.slice(-1))return 0;for(var n=0,r=Math.min(e.length,t.length),i=r,o=0;n<i;)e.substring(e.length-i,e.length-o)==t.substring(t.length-i,t.length-o)?o=n=i:r=i,i=Math.floor((r-n)/2+n);return s(e.charCodeAt(e.length-i))&&i--,i}function a(e){return e>=55296&&e<=56319}function s(e){return e>=56320&&e<=57343}function l(e){return s(e.charCodeAt(0))}function c(e){return a(e.charCodeAt(e.length-1))}function u(e,t,n,r){return c(e)||l(r)?null:function(e){for(var t=[],n=0;n<e.length;n++)e[n][1].length>0&&t.push(e[n]);return t}([[0,e],[-1,t],[1,n],[0,r]])}function d(e,t,r){return n(e,t,r,!0)}d.INSERT=1,d.DELETE=-1,d.EQUAL=0,e.exports=d},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i,o=r(n(16)),a=r(n(30));!function(e){e.compose=function(e,t,n){void 0===e&&(e={}),void 0===t&&(t={}),"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var r=o.default(t);for(var i in n||(r=Object.keys(r).reduce((function(e,t){return null!=r[t]&&(e[t]=r[t]),e}),{})),e)void 0!==e[i]&&void 0===t[i]&&(r[i]=e[i]);return Object.keys(r).length>0?r:void 0},e.diff=function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});var n=Object.keys(e).concat(Object.keys(t)).reduce((function(n,r){return a.default(e[r],t[r])||(n[r]=void 0===t[r]?null:t[r]),n}),{});return Object.keys(n).length>0?n:void 0},e.invert=function(e,t){void 0===e&&(e={}),void 0===t&&(t={}),e=e||{};var n=Object.keys(t).reduce((function(n,r){return t[r]!==e[r]&&void 0!==e[r]&&(n[r]=t[r]),n}),{});return Object.keys(e).reduce((function(n,r){return e[r]!==t[r]&&void 0===t[r]&&(n[r]=null),n}),n)},e.transform=function(e,t,n){if(void 0===n&&(n=!1),"object"!=typeof e)return t;if("object"==typeof t){if(!n)return t;var r=Object.keys(t).reduce((function(n,r){return void 0===e[r]&&(n[r]=t[r]),n}),{});return Object.keys(r).length>0?r:void 0}}}(i||(i={})),t.default=i},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=r(n(94)),o=function(){function e(e){this.ops=e,this.index=0,this.offset=0}return e.prototype.hasNext=function(){return this.peekLength()<1/0},e.prototype.next=function(e){e||(e=1/0);var t=this.ops[this.index];if(t){var n=this.offset,r=i.default.length(t);if(e>=r-n?(e=r-n,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};var o={};return t.attributes&&(o.attributes=t.attributes),"number"==typeof t.retain?o.retain=e:"string"==typeof t.insert?o.insert=t.insert.substr(n,e):o.insert=t.insert,o}return{retain:1/0}},e.prototype.peek=function(){return this.ops[this.index]},e.prototype.peekLength=function(){return this.ops[this.index]?i.default.length(this.ops[this.index])-this.offset:1/0},e.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},e.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var e=this.offset,t=this.index,n=this.next(),r=this.ops.slice(this.index);return this.offset=e,this.index=t,[n].concat(r)}return[]},e}();t.default=o},function(e,t,n){var r=n(122);e.exports=r},function(e,t,n){var r=n(123);e.exports=r},function(e,t,n){n(124),n(147);var r=n(115);e.exports=r.Array.from},function(e,t,n){"use strict";var r=n(125).charAt,i=n(78),o=n(100),a=n(133),s=o.set,l=o.getterFor("String Iterator");a(String,"String",(function(e){s(this,{type:"String Iterator",string:i(e),index:0})}),(function(){var e,t=l(this),n=t.string,i=t.index;return i>=n.length?{value:void 0,done:!0}:(e=r(n,i),t.index+=e.length,{value:e,done:!1})}))},function(e,t,n){var r=n(20),i=n(77),o=n(78),a=n(69),s=r("".charAt),l=r("".charCodeAt),c=r("".slice),u=function(e){return function(t,n){var r,u,d=o(a(t)),h=i(n),p=d.length;return h<0||h>=p?e?"":void 0:(r=l(d,h))<55296||r>56319||h+1===p||(u=l(d,h+1))<56320||u>57343?e?s(d,h):r:e?c(d,h,h+2):u-56320+(r-55296<<10)+65536}};e.exports={codeAt:u(!1),charAt:u(!0)}},function(e,t,n){var r={};r[n(28)("toStringTag")]="z",e.exports="[object z]"===String(r)},function(e,t,n){var r,i,o=n(8),a=n(128),s=o.process,l=o.Deno,c=s&&s.versions||l&&l.version,u=c&&c.v8;u&&(i=(r=u.split("."))[0]>0&&r[0]<4?1:+(r[0]+r[1])),!i&&a&&(!(r=a.match(/Edge\/(\d+)/))||r[1]>=74)&&(r=a.match(/Chrome\/(\d+)/))&&(i=+r[1]),e.exports=i},function(e,t,n){var r=n(60);e.exports=r("navigator","userAgent")||""},function(e,t,n){var r=n(8),i=n(22),o=n(83),a=r.WeakMap;e.exports=i(a)&&/native code/.test(o(a))},function(e,t,n){var r=n(8),i=n(42),o=n(51),a=n(103),s=n(85),l=n(132),c=n(28),u=r.TypeError,d=c("toPrimitive");e.exports=function(e,t){if(!o(e)||a(e))return e;var n,r=s(e,d);if(r){if(void 0===t&&(t="default"),n=i(r,e,t),!o(n)||a(n))return n;throw u("Can't convert object to primitive value")}return void 0===t&&(t="number"),l(e,t)}},function(e,t,n){var r=n(20);e.exports=r({}.isPrototypeOf)},function(e,t,n){var r=n(8),i=n(42),o=n(22),a=n(51),s=r.TypeError;e.exports=function(e,t){var n,r;if("string"===t&&o(n=e.toString)&&!a(r=i(n,e)))return r;if(o(n=e.valueOf)&&!a(r=i(n,e)))return r;if("string"!==t&&o(n=e.toString)&&!a(r=i(n,e)))return r;throw s("Can't convert object to primitive value")}},function(e,t,n){"use strict";var r=n(61),i=n(42),o=n(67),a=n(106),s=n(22),l=n(141),c=n(112),u=n(145),d=n(113),h=n(70),p=n(90),f=n(28),m=n(72),g=n(110),v=a.PROPER,_=a.CONFIGURABLE,b=g.IteratorPrototype,y=g.BUGGY_SAFARI_ITERATORS,C=f("iterator"),O=function(){return this};e.exports=function(e,t,n,a,f,g,w){l(n,t,a);var x,I,S,E=function(e){if(e===f&&D)return D;if(!y&&e in T)return T[e];switch(e){case"keys":case"values":case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},j=t+" Iterator",k=!1,T=e.prototype,A=T[C]||T["@@iterator"]||f&&T[f],D=!y&&A||E(f),P="Array"==t&&T.entries||A;if(P&&(x=c(P.call(new e)))!==Object.prototype&&x.next&&(o||c(x)===b||(u?u(x,b):s(x[C])||p(x,C,O)),d(x,j,!0,!0),o&&(m[j]=O)),v&&"values"==f&&A&&"values"!==A.name&&(!o&&_?h(T,"name","values"):(k=!0,D=function(){return i(A,this)})),f)if(I={values:E("values"),keys:g?D:E("keys"),entries:E("entries")},w)for(S in I)(y||k||!(S in T))&&p(T,S,I[S]);else r({target:t,proto:!0,forced:y||k},I);return o&&!w||T[C]===D||p(T,C,D,{name:f}),m[t]=D,I}},function(e,t,n){var r=n(8),i=n(20),o=n(39),a=n(82),s=r.Object,l=i("".split);e.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"==a(e)?l(e,""):s(e)}:s},function(e,t,n){var r=n(36),i=n(136),o=n(89),a=n(52);e.exports=function(e,t){for(var n=i(t),s=a.f,l=o.f,c=0;c<n.length;c++){var u=n[c];r(e,u)||s(e,u,l(t,u))}}},function(e,t,n){var r=n(60),i=n(20),o=n(137),a=n(139),s=n(40),l=i([].concat);e.exports=r("Reflect","ownKeys")||function(e){var t=o.f(s(e)),n=a.f;return n?l(t,n(e)):t}},function(e,t,n){var r=n(107),i=n(92).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t,n){var r=n(62),i=n(108),o=n(91),a=function(e){return function(t,n,a){var s,l=r(t),c=o(l),u=i(a,c);if(e&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((e||u in l)&&l[u]===n)return e||u||0;return!e&&-1}};e.exports={includes:a(!0),indexOf:a(!1)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var r=n(39),i=n(22),o=/#|\.prototype\./,a=function(e,t){var n=l[s(e)];return n==u||n!=c&&(i(t)?r(t):!!t)},s=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},l=a.data={},c=a.NATIVE="N",u=a.POLYFILL="P";e.exports=a},function(e,t,n){"use strict";var r=n(110).IteratorPrototype,i=n(93),o=n(71),a=n(113),s=n(72),l=function(){return this};e.exports=function(e,t,n){var c=t+" Iterator";return e.prototype=i(r,{next:o(1,n)}),a(e,c,!1,!0),s[c]=l,e}},function(e,t,n){var r=n(41),i=n(52),o=n(40),a=n(62),s=n(111);e.exports=r?Object.defineProperties:function(e,t){o(e);for(var n,r=a(t),l=s(t),c=l.length,u=0;c>u;)i.f(e,n=l[u++],r[n]);return e}},function(e,t,n){var r=n(60);e.exports=r("document","documentElement")},function(e,t,n){var r=n(39);e.exports=!r((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},function(e,t,n){var r=n(20),i=n(40),o=n(146);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,n={};try{(e=r(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(n,[]),t=n instanceof Array}catch(e){}return function(n,r){return i(n),o(r),t?e(n,r):n.__proto__=r,n}}():void 0)},function(e,t,n){var r=n(8),i=n(22),o=r.String,a=r.TypeError;e.exports=function(e){if("object"==typeof e||i(e))return e;throw a("Can't set "+o(e)+" as a prototype")}},function(e,t,n){var r=n(61),i=n(148);r({target:"Array",stat:!0,forced:!n(156)((function(e){Array.from(e)}))},{from:i})},function(e,t,n){"use strict";var r=n(8),i=n(149),o=n(42),a=n(68),s=n(150),l=n(152),c=n(153),u=n(91),d=n(154),h=n(155),p=n(114),f=r.Array;e.exports=function(e){var t=a(e),n=c(this),r=arguments.length,m=r>1?arguments[1]:void 0,g=void 0!==m;g&&(m=i(m,r>2?arguments[2]:void 0));var v,_,b,y,C,O,w=p(t),x=0;if(!w||this==f&&l(w))for(v=u(t),_=n?new this(v):f(v);v>x;x++)O=g?m(t[x],x):t[x],d(_,x,O);else for(C=(y=h(t,w)).next,_=n?new this:[];!(b=o(C,y)).done;x++)O=g?s(y,m,[b.value,x],!0):b.value,d(_,x,O);return _.length=x,_}},function(e,t,n){var r=n(20),i=n(86),o=r(r.bind);e.exports=function(e,t){return i(e),void 0===t?e:o?o(e,t):function(){return e.apply(t,arguments)}}},function(e,t,n){var r=n(40),i=n(151);e.exports=function(e,t,n,o){try{return o?t(r(n)[0],n[1]):t(n)}catch(t){i(e,"throw",t)}}},function(e,t,n){var r=n(42),i=n(40),o=n(85);e.exports=function(e,t,n){var a,s;i(e);try{if(!(a=o(e,"return"))){if("throw"===t)throw n;return n}a=r(a,e)}catch(e){s=!0,a=e}if("throw"===t)throw n;if(s)throw a;return i(a),n}},function(e,t,n){var r=n(28),i=n(72),o=r("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||a[o]===e)}},function(e,t,n){var r=n(20),i=n(39),o=n(22),a=n(79),s=n(60),l=n(83),c=function(){},u=[],d=s("Reflect","construct"),h=/^\s*(?:class|function)\b/,p=r(h.exec),f=!h.exec(c),m=function(e){if(!o(e))return!1;try{return d(c,u,e),!0}catch(e){return!1}};e.exports=!d||i((function(){var e;return m(m.call)||!m(Object)||!m((function(){e=!0}))||e}))?function(e){if(!o(e))return!1;switch(a(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return f||!!p(h,l(e))}:m},function(e,t,n){"use strict";var r=n(84),i=n(52),o=n(71);e.exports=function(e,t,n){var a=r(t);a in e?i.f(e,a,o(0,n)):e[a]=n}},function(e,t,n){var r=n(8),i=n(42),o=n(86),a=n(40),s=n(104),l=n(114),c=r.TypeError;e.exports=function(e,t){var n=arguments.length<2?l(e):t;if(o(n))return a(i(n,e));throw c(s(e)+" is not iterable")}},function(e,t,n){var r=n(28)("iterator"),i=!1;try{var o=0,a={next:function(){return{done:!!o++}},return:function(){i=!0}};a[r]=function(){return this},Array.from(a,(function(){throw 2}))}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var o={};o[r]=function(){return{next:function(){return{done:n=!0}}}},e(o)}catch(e){}return n}},function(e,t,n){var r=n(158);e.exports=r},function(e,t,n){var r=n(159);e.exports=r},function(e,t,n){n(160);var r=n(116);e.exports=r("Array","fill")},function(e,t,n){var r=n(61),i=n(161),o=n(162);r({target:"Array",proto:!0},{fill:i}),o("fill")},function(e,t,n){"use strict";var r=n(68),i=n(108),o=n(91);e.exports=function(e){for(var t=r(this),n=o(t),a=arguments.length,s=i(a>1?arguments[1]:void 0,n),l=a>2?arguments[2]:void 0,c=void 0===l?n:i(l,n);c>s;)t[s++]=e;return t}},function(e,t,n){var r=n(28),i=n(93),o=n(52),a=r("unscopables"),s=Array.prototype;null==s[a]&&o.f(s,a,{configurable:!0,value:i(null)}),e.exports=function(e){s[a][e]=!0}},function(e,t,n){var r=n(164);e.exports=r},function(e,t,n){var r=n(165);e.exports=r},function(e,t,n){n(166);var r=n(115);e.exports=r.Object.values},function(e,t,n){var r=n(61),i=n(167).values;r({target:"Object",stat:!0},{values:function(e){return i(e)}})},function(e,t,n){var r=n(41),i=n(20),o=n(111),a=n(62),s=i(n(105).f),l=i([].push),c=function(e){return function(t){for(var n,i=a(t),c=o(i),u=c.length,d=0,h=[];u>d;)n=c[d++],r&&!s(i,n)||l(h,e?[n,i[n]]:i[n]);return h}};e.exports={entries:c(!0),values:c(!1)}},function(e,t,n){var r=n(169);e.exports=r},function(e,t,n){var r=n(170);e.exports=r},function(e,t,n){n(171);var r=n(116);e.exports=r("String","endsWith")},function(e,t,n){"use strict";var r,i=n(61),o=n(20),a=n(89).f,s=n(109),l=n(78),c=n(172),u=n(69),d=n(174),h=n(67),p=o("".endsWith),f=o("".slice),m=Math.min,g=d("endsWith");i({target:"String",proto:!0,forced:!(!h&&!g&&(r=a(String.prototype,"endsWith"),r&&!r.writable)||g)},{endsWith:function(e){var t=l(u(this));c(e);var n=arguments.length>1?arguments[1]:void 0,r=t.length,i=void 0===n?r:m(s(n),r),o=l(e);return p?p(t,o,i):f(t,i-o.length,i)===o}})},function(e,t,n){var r=n(8),i=n(173),o=r.TypeError;e.exports=function(e){if(i(e))throw o("The method doesn't accept regular expressions");return e}},function(e,t,n){var r=n(51),i=n(82),o=n(28)("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[o])?!!t:"RegExp"==i(e))}},function(e,t,n){var r=n(28)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(n){try{return t[r]=!1,"/./"[e](t)}catch(e){}}return!1}},,function(e,t,n){e.exports=n(117)}]).default},e.exports=r()},PUqs:function(e,t,n){"use strict";var r={components:{FileManager:n("+RJL").a},data:function(){return{clientPath:"",callback:null,emitData:null}},computed:{popup:function(){return this.$refs.popup.instance}},methods:{show:function(e){var t=this,n=e.clientPath,r=e.callback;this.clientPath=n,this.callback=r,this.popup.show(),this.$mf.pushPopupToHistoryState((function(){return t.popup.hide()}))},onHiding:function(){"function"==typeof this.callback&&this.callback(this.emitData),this.$mf.popRouteHistoryState()},onCopiedUrl:function(e){this.emitData=e,this.popup.hide()}}},i=n("KHd+"),o=Object(i.a)(r,(function(){var e=this,t=e._self._c;return t("DxPopup",{ref:"popup",attrs:{showCloseButton:!0,fullScreen:!!e.$devices.phone,"show-title":!0,title:e.$t("components.pickImage.title")},on:{hiding:e.onHiding},scopedSlots:e._u([{key:"content",fn:function(){return[t("DxScrollView",[t("FileManager",{attrs:{clientPath:e.clientPath},on:{copiedUrl:e.onCopiedUrl}})],1)]},proxy:!0}])})}),[],!1,null,null,null);t.a=o.exports},VKCK:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DxUpload=t.DxToolbarItem=t.DxToolbar=t.DxPermissions=t.DxNotifications=t.DxItemView=t.DxItem=t.DxFileSelectionItem=t.DxDetails=t.DxContextMenuItem=t.DxContextMenu=t.DxColumn=t.DxFileManager=void 0;var i=r(n("+sxU")),o=n("J9oI"),a=n("J9oI"),s=o.createComponent({props:{accessKey:String,activeStateEnabled:Boolean,allowedFileExtensions:Array,contextMenu:Object,currentPath:String,currentPathKeys:Array,customizeDetailColumns:Function,customizeThumbnail:Function,disabled:Boolean,elementAttr:Object,fileSystemProvider:{},focusedItemKey:String,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,itemView:Object,notifications:Object,onContentReady:Function,onContextMenuItemClick:Function,onContextMenuShowing:Function,onCurrentDirectoryChanged:Function,onDirectoryCreated:Function,onDirectoryCreating:Function,onDisposing:Function,onErrorOccurred:Function,onFileUploaded:Function,onFileUploading:Function,onFocusedItemChanged:Function,onInitialized:Function,onItemCopied:Function,onItemCopying:Function,onItemDeleted:Function,onItemDeleting:Function,onItemDownloading:Function,onItemMoved:Function,onItemMoving:Function,onItemRenamed:Function,onItemRenaming:Function,onOptionChanged:Function,onSelectedFileOpened:Function,onSelectionChanged:Function,onToolbarItemClick:Function,permissions:Object,rootFolderName:String,rtlEnabled:Boolean,selectedItemKeys:Array,selectionMode:String,tabIndex:Number,toolbar:Object,upload:Object,visible:Boolean,width:[Function,Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:allowedFileExtensions":null,"update:contextMenu":null,"update:currentPath":null,"update:currentPathKeys":null,"update:customizeDetailColumns":null,"update:customizeThumbnail":null,"update:disabled":null,"update:elementAttr":null,"update:fileSystemProvider":null,"update:focusedItemKey":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:itemView":null,"update:notifications":null,"update:onContentReady":null,"update:onContextMenuItemClick":null,"update:onContextMenuShowing":null,"update:onCurrentDirectoryChanged":null,"update:onDirectoryCreated":null,"update:onDirectoryCreating":null,"update:onDisposing":null,"update:onErrorOccurred":null,"update:onFileUploaded":null,"update:onFileUploading":null,"update:onFocusedItemChanged":null,"update:onInitialized":null,"update:onItemCopied":null,"update:onItemCopying":null,"update:onItemDeleted":null,"update:onItemDeleting":null,"update:onItemDownloading":null,"update:onItemMoved":null,"update:onItemMoving":null,"update:onItemRenamed":null,"update:onItemRenaming":null,"update:onOptionChanged":null,"update:onSelectedFileOpened":null,"update:onSelectionChanged":null,"update:onToolbarItemClick":null,"update:permissions":null,"update:rootFolderName":null,"update:rtlEnabled":null,"update:selectedItemKeys":null,"update:selectionMode":null,"update:tabIndex":null,"update:toolbar":null,"update:upload":null,"update:visible":null,"update:width":null},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=i.default,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={contextMenu:{isCollectionItem:!1,optionName:"contextMenu"},itemView:{isCollectionItem:!1,optionName:"itemView"},notifications:{isCollectionItem:!1,optionName:"notifications"},permissions:{isCollectionItem:!1,optionName:"permissions"},toolbar:{isCollectionItem:!1,optionName:"toolbar"},upload:{isCollectionItem:!1,optionName:"upload"}}}});t.DxFileManager=s;var l=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:alignment":null,"update:caption":null,"update:cssClass":null,"update:dataField":null,"update:dataType":null,"update:hidingPriority":null,"update:sortIndex":null,"update:sortOrder":null,"update:visible":null,"update:visibleIndex":null,"update:width":null},props:{alignment:String,caption:String,cssClass:String,dataField:String,dataType:String,hidingPriority:Number,sortIndex:Number,sortOrder:String,visible:Boolean,visibleIndex:Number,width:[Number,String]}});t.DxColumn=l,l.$_optionName="columns",l.$_isCollectionItem=!0;var c=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:items":null},props:{items:Array}});t.DxContextMenu=c,c.$_optionName="contextMenu",c.$_expectedChildren={contextMenuItem:{isCollectionItem:!0,optionName:"items"},item:{isCollectionItem:!0,optionName:"items"}};var u=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:beginGroup":null,"update:closeMenuOnClick":null,"update:disabled":null,"update:html":null,"update:icon":null,"update:items":null,"update:name":null,"update:selectable":null,"update:selected":null,"update:template":null,"update:text":null,"update:visible":null},props:{beginGroup:Boolean,closeMenuOnClick:Boolean,disabled:Boolean,html:String,icon:String,items:Array,name:String,selectable:Boolean,selected:Boolean,template:{},text:String,visible:Boolean}});t.DxContextMenuItem=u,u.$_optionName="items",u.$_isCollectionItem=!0;var d=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:columns":null},props:{columns:Array}});t.DxDetails=d,d.$_optionName="details",d.$_expectedChildren={column:{isCollectionItem:!0,optionName:"columns"}};var h=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:cssClass":null,"update:disabled":null,"update:html":null,"update:icon":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:name":null,"update:options":null,"update:showText":null,"update:template":null,"update:text":null,"update:visible":null,"update:widget":null},props:{cssClass:String,disabled:Boolean,html:String,icon:String,locateInMenu:String,location:String,menuItemTemplate:{},name:String,options:{},showText:String,template:{},text:String,visible:Boolean,widget:String}});t.DxFileSelectionItem=h,h.$_optionName="fileSelectionItems",h.$_isCollectionItem=!0;var p=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:beginGroup":null,"update:closeMenuOnClick":null,"update:cssClass":null,"update:disabled":null,"update:html":null,"update:icon":null,"update:items":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:name":null,"update:options":null,"update:selectable":null,"update:selected":null,"update:showText":null,"update:template":null,"update:text":null,"update:visible":null,"update:widget":null},props:{beginGroup:Boolean,closeMenuOnClick:Boolean,cssClass:String,disabled:Boolean,html:String,icon:String,items:Array,locateInMenu:String,location:String,menuItemTemplate:{},name:String,options:{},selectable:Boolean,selected:Boolean,showText:String,template:{},text:String,visible:Boolean,widget:String}});t.DxItem=p,p.$_optionName="items",p.$_isCollectionItem=!0;var f=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:details":null,"update:mode":null,"update:showFolders":null,"update:showParentFolder":null},props:{details:Object,mode:String,showFolders:Boolean,showParentFolder:Boolean}});t.DxItemView=f,f.$_optionName="itemView",f.$_expectedChildren={details:{isCollectionItem:!1,optionName:"details"}};var m=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:showPanel":null,"update:showPopup":null},props:{showPanel:Boolean,showPopup:Boolean}});t.DxNotifications=m,m.$_optionName="notifications";var g=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:copy":null,"update:create":null,"update:delete":null,"update:download":null,"update:move":null,"update:rename":null,"update:upload":null},props:{copy:Boolean,create:Boolean,delete:Boolean,download:Boolean,move:Boolean,rename:Boolean,upload:Boolean}});t.DxPermissions=g,g.$_optionName="permissions";var v=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:fileSelectionItems":null,"update:items":null},props:{fileSelectionItems:Array,items:Array}});t.DxToolbar=v,v.$_optionName="toolbar",v.$_expectedChildren={fileSelectionItem:{isCollectionItem:!0,optionName:"fileSelectionItems"},item:{isCollectionItem:!0,optionName:"items"},toolbarItem:{isCollectionItem:!0,optionName:"items"}};var _=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:cssClass":null,"update:disabled":null,"update:html":null,"update:icon":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:name":null,"update:options":null,"update:showText":null,"update:template":null,"update:text":null,"update:visible":null,"update:widget":null},props:{cssClass:String,disabled:Boolean,html:String,icon:String,locateInMenu:String,location:String,menuItemTemplate:{},name:String,options:{},showText:String,template:{},text:String,visible:Boolean,widget:String}});t.DxToolbarItem=_,_.$_optionName="items",_.$_isCollectionItem=!0;var b=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:chunkSize":null,"update:maxFileSize":null},props:{chunkSize:Number,maxFileSize:Number}});t.DxUpload=b,b.$_optionName="upload",t.default=s},anAt:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.DxVariables=t.DxToolbarItem=t.DxToolbar=t.DxTableResizing=t.DxTableContextMenuItem=t.DxTableContextMenu=t.DxMention=t.DxMediaResizing=t.DxItem=t.DxHtmlEditor=void 0;var i=r(n("hQDz")),o=n("J9oI"),a=n("J9oI"),s=o.createComponent({props:{accessKey:String,activeStateEnabled:Boolean,allowSoftLineBreak:Boolean,customizeModules:Function,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,isValid:Boolean,mediaResizing:Object,mentions:Array,name:String,onContentReady:Function,onDisposing:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onOptionChanged:Function,onValueChanged:Function,placeholder:String,readOnly:Boolean,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,tableContextMenu:Object,tableResizing:Object,toolbar:Object,validationError:{},validationErrors:Array,validationMessageMode:String,validationStatus:String,value:{},valueType:String,variables:Object,visible:Boolean,width:[Function,Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:allowSoftLineBreak":null,"update:customizeModules":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:isValid":null,"update:mediaResizing":null,"update:mentions":null,"update:name":null,"update:onContentReady":null,"update:onDisposing":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onValueChanged":null,"update:placeholder":null,"update:readOnly":null,"update:rtlEnabled":null,"update:stylingMode":null,"update:tabIndex":null,"update:tableContextMenu":null,"update:tableResizing":null,"update:toolbar":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationStatus":null,"update:value":null,"update:valueType":null,"update:variables":null,"update:visible":null,"update:width":null},model:{prop:"value",event:"update:value"},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=i.default,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={mediaResizing:{isCollectionItem:!1,optionName:"mediaResizing"},mention:{isCollectionItem:!0,optionName:"mentions"},tableContextMenu:{isCollectionItem:!1,optionName:"tableContextMenu"},tableResizing:{isCollectionItem:!1,optionName:"tableResizing"},toolbar:{isCollectionItem:!1,optionName:"toolbar"},variables:{isCollectionItem:!1,optionName:"variables"}}}});t.DxHtmlEditor=s;var l=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:acceptedValues":null,"update:beginGroup":null,"update:closeMenuOnClick":null,"update:cssClass":null,"update:disabled":null,"update:formatName":null,"update:formatValues":null,"update:html":null,"update:icon":null,"update:items":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:name":null,"update:options":null,"update:selectable":null,"update:selected":null,"update:showText":null,"update:template":null,"update:text":null,"update:visible":null,"update:widget":null},props:{acceptedValues:Array,beginGroup:Boolean,closeMenuOnClick:Boolean,cssClass:String,disabled:Boolean,formatName:String,formatValues:Array,html:String,icon:String,items:Array,locateInMenu:String,location:String,menuItemTemplate:{},name:String,options:{},selectable:Boolean,selected:Boolean,showText:String,template:{},text:String,visible:Boolean,widget:String}});t.DxItem=l,l.$_optionName="items",l.$_isCollectionItem=!0;var c=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowedTargets":null,"update:enabled":null},props:{allowedTargets:Array,enabled:Boolean}});t.DxMediaResizing=c,c.$_optionName="mediaResizing";var u=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:dataSource":null,"update:displayExpr":null,"update:itemTemplate":null,"update:marker":null,"update:minSearchLength":null,"update:searchExpr":null,"update:searchTimeout":null,"update:template":null,"update:valueExpr":null},props:{dataSource:{},displayExpr:[Function,String],itemTemplate:{},marker:String,minSearchLength:Number,searchExpr:[Array,Function,String],searchTimeout:Number,template:{},valueExpr:[Function,String]}});t.DxMention=u,u.$_optionName="mentions",u.$_isCollectionItem=!0;var d=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:enabled":null,"update:items":null},props:{enabled:Boolean,items:Array}});t.DxTableContextMenu=d,d.$_optionName="tableContextMenu",d.$_expectedChildren={item:{isCollectionItem:!0,optionName:"items"},tableContextMenuItem:{isCollectionItem:!0,optionName:"items"}};var h=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:beginGroup":null,"update:closeMenuOnClick":null,"update:disabled":null,"update:html":null,"update:icon":null,"update:items":null,"update:name":null,"update:selectable":null,"update:selected":null,"update:template":null,"update:text":null,"update:visible":null},props:{beginGroup:Boolean,closeMenuOnClick:Boolean,disabled:Boolean,html:String,icon:String,items:Array,name:String,selectable:Boolean,selected:Boolean,template:{},text:String,visible:Boolean}});t.DxTableContextMenuItem=h,h.$_optionName="items",h.$_isCollectionItem=!0;var p=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:enabled":null,"update:minColumnWidth":null,"update:minRowHeight":null},props:{enabled:Boolean,minColumnWidth:Number,minRowHeight:Number}});t.DxTableResizing=p,p.$_optionName="tableResizing";var f=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:container":null,"update:items":null,"update:multiline":null},props:{container:{},items:Array,multiline:Boolean}});t.DxToolbar=f,f.$_optionName="toolbar",f.$_expectedChildren={item:{isCollectionItem:!0,optionName:"items"},toolbarItem:{isCollectionItem:!0,optionName:"items"}};var m=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:acceptedValues":null,"update:cssClass":null,"update:disabled":null,"update:formatName":null,"update:formatValues":null,"update:html":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:name":null,"update:options":null,"update:showText":null,"update:template":null,"update:text":null,"update:visible":null,"update:widget":null},props:{acceptedValues:Array,cssClass:String,disabled:Boolean,formatName:String,formatValues:Array,html:String,locateInMenu:String,location:String,menuItemTemplate:{},name:String,options:{},showText:String,template:{},text:String,visible:Boolean,widget:String}});t.DxToolbarItem=m,m.$_optionName="items",m.$_isCollectionItem=!0;var g=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:dataSource":null,"update:escapeChar":null},props:{dataSource:{},escapeChar:[Array,String]}});t.DxVariables=g,g.$_optionName="variables",t.default=s},hQDz:function(e,t,n){"use strict";n.r(t);var r,i=n("W2II"),o=n("ua+q"),a=n("v5W6"),s=n("rB1a"),l=n("a8dJ"),c=n("CF5h"),u=n("DVzC"),d=n("MtyI"),h=n("s6U3"),p=n("EZme"),f=n("zAdP"),m=n("xPQU"),g=n("AmyY"),v=n("cPeA"),_=n("0Kan"),b=n("S/m2"),y=n("jyIZ"),C=n("TE0E"),O=n("MRXl"),w=n.n(O);function x(){if(!w.a)throw h.a.Error("E1041","Quill");return w.a}if(w.a){var I=w.a.import("core/theme");r=class extends I{constructor(e,t){super(e,t),this.quill.root.classList.add("dx-htmleditor-content"),this.quill.root.setAttribute("role","textbox")}}}else r={};var S=r,E={};if(w.a){var j=w.a.import("formats/image");(E=class extends j{static create(e){var t=e&&e.src||e,n=super.create(t);if(Object(a.j)(e)){var r=(t,r)=>{e[t]&&n.setAttribute(t,r)};r("alt",e.alt),r("width",e.width),r("height",e.height)}return n}static formats(e){var t=super.formats(e);return t.imageSrc=e.getAttribute("src"),t}formats(){var e=super.formats(),t=this.domNode.style.float;return t&&(e.float=t),e}format(e,t){"float"===e?this.domNode.style[e]=t:super.format(e,t)}static value(e){return{src:e.getAttribute("src"),width:e.getAttribute("width"),height:e.getAttribute("height"),alt:e.getAttribute("alt")}}}).blotName="extendedImage"}var k=E,T={};if(w.a){var A=w.a.import("formats/link");T=class e extends A{static create(e){var t=e&&e.href||e,n=super.create(t);return Object(a.j)(e)&&(e.text&&(n.innerText=e.text),e.target||n.removeAttribute("target")),n}static formats(e){return{href:e.getAttribute("href"),target:e.getAttribute("target")}}formats(){var t=super.formats(),{href:n,target:r}=e.formats(this.domNode);return t.link=n,t.target=r,t}format(e,t){"link"===e&&Object(a.j)(t)?(t.text&&(this.domNode.innerText=t.text),t.target?this.domNode.setAttribute("target","_blank"):this.domNode.removeAttribute("target"),this.domNode.setAttribute("href",t.href)):super.format(e,t)}static value(e){return{href:e.getAttribute("href"),text:e.innerText,target:!!e.getAttribute("target")}}}}var D=T,P={};w.a&&((P=w.a.import("attributors/style/font")).whitelist=null);var M=P,F={};w.a&&((F=w.a.import("attributors/style/size")).whitelist=null);var N=F,R={};w.a&&(R=w.a.import("attributors/style/align")).whitelist.push("left");var B=R;var L=class{};if(w.a){var q=w.a.import("core/module");L=class extends q{constructor(e,t){super(e,t),this.editorInstance=t.editorInstance}saveValueChangeEvent(e){this.editorInstance._saveValueChangeEvent(e)}addCleanCallback(e){this.editorInstance.addCleanCallback(e)}handleOptionChangeValue(e){Object(a.j)(e)?Object.entries(e).forEach(e=>{var[t,n]=e;return this.option(t,n)}):Object(a.d)(e)||null==this||this.clean()}}}var H=L,$=n("4ivh"),U=(n("ZSRv"),n("+dKZ")),z=n("xV8o"),V=n("V70q"),K=n("3CDA"),W=n("5f7s"),G=n("VABh"),Z=n("qg44"),Q=n("6SE/"),X="dx-colorview-palette-gradient",Y="dx-colorview-palette-gradient-white",J="dx-colorview-palette-gradient-black",ee="dx-colorview-color-preview",te="dx-colorview-color-preview-color-current",ne="dx-colorview-color-preview-color-new",re=d.a.inherit({_supportedKeys:function(){var e=this.option("rtlEnabled"),t=this,n=function(e){var n=100/t._paletteWidth;return e.shiftKey&&(n*=t.option("keyStep")),n=n>1?n:1,Math.round(n)},r=function(e){var n=t._currentColor.hsv.s+e;n>100?n=100:n<0&&(n=0),t._currentColor.hsv.s=n,s()},i=function(e){var n=100/t._paletteHeight;return e.shiftKey&&(n*=t.option("keyStep")),n=n>1?n:1,Math.round(n)},a=function(e){var n=t._currentColor.hsv.v+e;n>100?n=100:n<0&&(n=0),t._currentColor.hsv.v=n,s()};function s(){t._placePaletteHandle(),t._updateColorFromHsv(t._currentColor.hsv.h,t._currentColor.hsv.s,t._currentColor.hsv.v)}var l=function(e){var n=360/(t._hueScaleWrapperHeight-t._hueScaleHandleHeight);return e.shiftKey&&(n*=t.option("keyStep")),n=n>1?n:1},c=function(e){t._currentColor.hsv.h+=e,t._placeHueScaleHandle();var n=Object(z.d)(t._$hueScaleHandle);t._updateColorHue(n.top+t._hueScaleHandleHeight/2)},u=function(n){var r=1/t._alphaChannelScaleWorkWidth;return n.shiftKey&&(r*=t.option("keyStep")),r=r>.01?r:.01,r=e?-r:r},d=function(e){t._currentColor.a+=e,t._placeAlphaChannelHandle();var n=Object(z.d)(t._$alphaChannelHandle);t._calculateColorTransparencyByScaleWidth(n.left+t._alphaChannelHandleWidth/2)};return Object(o.a)(this.callBase(),{upArrow:function(e){e.preventDefault(),e.stopPropagation(),Object(g.i)(e)?this._currentColor.hsv.h<=360&&!this._isTopColorHue&&(this._saveValueChangeEvent(e),c(l(e))):this._currentColor.hsv.v<100&&(this._saveValueChangeEvent(e),a(i(e)))},downArrow:function(e){e.preventDefault(),e.stopPropagation(),Object(g.i)(e)?this._currentColor.hsv.h>=0&&(this._isTopColorHue&&(this._currentColor.hsv.h=360),this._saveValueChangeEvent(e),c(-l(e))):this._currentColor.hsv.v>0&&(this._saveValueChangeEvent(e),a(-i(e)))},rightArrow:function(t){t.preventDefault(),t.stopPropagation(),Object(g.i)(t)?(e?this._currentColor.a<1:this._currentColor.a>0&&this.option("editAlphaChannel"))&&(this._saveValueChangeEvent(t),d(-u(t))):this._currentColor.hsv.s<100&&(this._saveValueChangeEvent(t),r(n(t)))},leftArrow:function(t){t.preventDefault(),t.stopPropagation(),Object(g.i)(t)?(e?this._currentColor.a>0:this._currentColor.a<1&&this.option("editAlphaChannel"))&&(this._saveValueChangeEvent(t),d(u(t))):this._currentColor.hsv.s>0&&(this._saveValueChangeEvent(t),r(-n(t)))},enter:function(e){this._fireEnterKeyPressed(e)}})},_getDefaultOptions:function(){return Object(o.a)(this.callBase(),{value:null,matchValue:null,onEnterKeyPressed:void 0,editAlphaChannel:!1,keyStep:1,stylingMode:void 0})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===C.a.real().deviceType&&!C.a.isSimulator()},options:{focusStateEnabled:!0}}])},_init:function(){this.callBase(),this._initColorAndOpacity(),this._initEnterKeyPressedAction()},_initEnterKeyPressedAction:function(){this._onEnterKeyPressedAction=this._createActionByOption("onEnterKeyPressed")},_fireEnterKeyPressed:function(e){this._onEnterKeyPressedAction&&this._onEnterKeyPressedAction({event:e})},_initColorAndOpacity:function(){this._setCurrentColor(this.option("value"))},_setCurrentColor:function(e){e=e||"#000000";var t=new V.a(e);t.colorIsInvalid?this.option("value",this._currentColor.baseColor):this._currentColor&&this._makeRgba(this._currentColor)===this._makeRgba(t)||(this._currentColor=t,this._$currentColor&&this._makeTransparentBackground(this._$currentColor,t))},_setBaseColor:function(e){var t=e||"#000000",n=new V.a(t);n.colorIsInvalid||this._makeRgba(this.option("matchValue")!==this._makeRgba(n))&&this._$baseColor&&this._makeTransparentBackground(this._$baseColor,n)},_initMarkup:function(){this.callBase(),this.$element().addClass("dx-colorview"),this._renderColorPickerContainer()},_render:function(){this.callBase(),this._renderPalette(),this._renderHueScale(),this._renderControlsContainer(),this._renderControls(),this._renderAlphaChannelElements()},_makeTransparentBackground:function(e,t){t instanceof V.a||(t=new V.a(t)),e.css("backgroundColor",this._makeRgba(t))},_makeRgba:function(e){return e instanceof V.a||(e=new V.a(e)),"rgba("+[e.r,e.g,e.b,e.a].join(", ")+")"},_renderValue:function(){this.callBase(this.option("editAlphaChannel")?this._makeRgba(this._currentColor):this.option("value"))},_renderColorPickerContainer:function(){var e=this.$element();this._$colorPickerContainer=Object(i.a)("<div>").addClass("dx-colorview-container").appendTo(e),this._renderHtmlRows()},_renderHtmlRows:function(e){var t=this._$colorPickerContainer.find(".dx-colorview-container-row"),n=t.length,r=n-(this.option("editAlphaChannel")?2:1);if(r>0&&t.eq(-1).remove(),r<0){r=Math.abs(r);var o,a=[];for(o=0;o<r;o++)a.push(Object(i.a)("<div>").addClass("dx-colorview-container-row"));if(n)for(o=0;o<a.length;o++)t.eq(0).after(a[o]);else this._$colorPickerContainer.append(a)}},_renderHtmlCellInsideRow:function(e,t,n){return Object(i.a)("<div>").addClass("dx-colorview-container-cell").addClass(n).appendTo(t.find(".dx-colorview-container-row").eq(e))},_renderPalette:function(){var e=this._renderHtmlCellInsideRow(0,this._$colorPickerContainer,"dx-colorview-palette-cell"),t=Object(i.a)("<div>").addClass([X,Y].join(" ")),n=Object(i.a)("<div>").addClass([X,J].join(" "));this._$palette=Object(i.a)("<div>").addClass("dx-colorview-palette").css("backgroundColor",this._currentColor.getPureColor().toHex()).appendTo(e),this._paletteHeight=Object(U.d)(this._$palette),this._paletteWidth=Object(U.l)(this._$palette),this._renderPaletteHandle(),this._$palette.append([t,n])},_renderPaletteHandle:function(){this._$paletteHandle=Object(i.a)("<div>").addClass("dx-colorview-palette-handle").appendTo(this._$palette),this._createComponent(this._$paletteHandle,Z.a,{contentTemplate:null,boundary:this._$palette,allowMoveByClick:!0,boundOffset:function(){return-this._paletteHandleHeight/2}.bind(this),onDragMove:e=>{var{event:t}=e,n=Object(z.d)(this._$paletteHandle);this._updateByDrag=!0,this._saveValueChangeEvent(t),this._updateColorFromHsv(this._currentColor.hsv.h,this._calculateColorSaturation(n),this._calculateColorValue(n))}}),this._paletteHandleWidth=Object(U.l)(this._$paletteHandle),this._paletteHandleHeight=Object(U.d)(this._$paletteHandle),this._placePaletteHandle()},_placePaletteHandle:function(){Object(z.e)(this._$paletteHandle,{left:Math.round(this._paletteWidth*this._currentColor.hsv.s/100-this._paletteHandleWidth/2),top:Math.round(this._paletteHeight-this._paletteHeight*this._currentColor.hsv.v/100-this._paletteHandleHeight/2)})},_calculateColorValue:function(e){var t=Math.floor(e.top+this._paletteHandleHeight/2);return 100-Math.round(100*t/this._paletteHeight)},_calculateColorSaturation:function(e){var t=Math.floor(e.left+this._paletteHandleWidth/2);return Math.round(100*t/this._paletteWidth)},_updateColorFromHsv:function(e,t,n){var r=this._currentColor.a;this._currentColor=new V.a("hsv("+[e,t,n].join(",")+")"),this._currentColor.a=r,this._updateColorParamsAndColorPreview(),this.applyColor()},_renderHueScale:function(){var e=this._renderHtmlCellInsideRow(0,this._$colorPickerContainer,"dx-colorview-hue-scale-cell");this._$hueScaleWrapper=Object(i.a)("<div>").addClass("dx-colorview-hue-scale-wrapper").appendTo(e),this._$hueScale=Object(i.a)("<div>").addClass("dx-colorview-hue-scale").appendTo(this._$hueScaleWrapper),this._hueScaleHeight=Object(U.d)(this._$hueScale),this._hueScaleWrapperHeight=Object(U.h)(this._$hueScaleWrapper),this._renderHueScaleHandle()},_renderHueScaleHandle:function(){this._$hueScaleHandle=Object(i.a)("<div>").addClass("dx-colorview-hue-scale-handle").appendTo(this._$hueScaleWrapper),this._createComponent(this._$hueScaleHandle,Z.a,{contentTemplate:null,boundary:this._$hueScaleWrapper,allowMoveByClick:!0,dragDirection:"vertical",onDragMove:e=>{var{event:t}=e;this._updateByDrag=!0,this._saveValueChangeEvent(t),this._updateColorHue(Object(z.d)(this._$hueScaleHandle).top+this._hueScaleHandleHeight/2)}}),this._hueScaleHandleHeight=Object(U.d)(this._$hueScaleHandle),this._placeHueScaleHandle()},_placeHueScaleHandle:function(){var e=this._hueScaleWrapperHeight,t=this._hueScaleHandleHeight,n=(e-t)*(360-this._currentColor.hsv.h)/360;e<n+t&&(n=e-t),n<0&&(n=0),Object(z.e)(this._$hueScaleHandle,{top:Math.round(n)})},_updateColorHue:function(e){var t=360-Math.round(360*(e-this._hueScaleHandleHeight/2)/(this._hueScaleWrapperHeight-this._hueScaleHandleHeight)),n=this._currentColor.hsv.s,r=this._currentColor.hsv.v;this._isTopColorHue=!1,(t=t<0?0:t)>=360&&(this._isTopColorHue=!0,t=0),this._updateColorFromHsv(t,n,r),this._$palette.css("backgroundColor",this._currentColor.getPureColor().toHex())},_renderControlsContainer:function(){var e=this._renderHtmlCellInsideRow(0,this._$colorPickerContainer);this._$controlsContainer=Object(i.a)("<div>").addClass("dx-colorview-controls-container").appendTo(e)},_renderControls:function(){this._renderColorsPreview(),this._renderRgbInputs(),this._renderHexInput()},_renderColorsPreview:function(){var e=Object(i.a)("<div>").addClass("dx-colorview-color-preview-container").appendTo(this._$controlsContainer),t=Object(i.a)("<div>").addClass("dx-colorview-color-preview-container-inner").appendTo(e);this._$currentColor=Object(i.a)("<div>").addClass([ee,ne].join(" ")),this._$baseColor=Object(i.a)("<div>").addClass([ee,te].join(" ")),this._makeTransparentBackground(this._$baseColor,this.option("matchValue")),this._makeTransparentBackground(this._$currentColor,this._currentColor),t.append([this._$baseColor,this._$currentColor])},_renderAlphaChannelElements:function(){this.option("editAlphaChannel")&&(this._$colorPickerContainer.find(".dx-colorview-container-row").eq(1).addClass("dx-colorview-alpha-channel-row"),this._renderAlphaChannelScale(),this._renderAlphaChannelInput())},_renderRgbInputs:function(){this._rgbInputsWithLabels=[this._renderEditorWithLabel({editorType:W.default,value:this._currentColor.r,onValueChanged:this._updateColor.bind(this,!1),labelText:"R",labelAriaText:K.a.format("dxColorView-ariaRed"),labelClass:"dx-colorview-label-red"}),this._renderEditorWithLabel({editorType:W.default,value:this._currentColor.g,onValueChanged:this._updateColor.bind(this,!1),labelText:"G",labelAriaText:K.a.format("dxColorView-ariaGreen"),labelClass:"dx-colorview-label-green"}),this._renderEditorWithLabel({editorType:W.default,value:this._currentColor.b,onValueChanged:this._updateColor.bind(this,!1),labelText:"B",labelAriaText:K.a.format("dxColorView-ariaBlue"),labelClass:"dx-colorview-label-blue"})],this._$controlsContainer.append(this._rgbInputsWithLabels),this._rgbInputs=[this._rgbInputsWithLabels[0].find(".dx-numberbox").dxNumberBox("instance"),this._rgbInputsWithLabels[1].find(".dx-numberbox").dxNumberBox("instance"),this._rgbInputsWithLabels[2].find(".dx-numberbox").dxNumberBox("instance")]},_renderEditorWithLabel:function(e){var t=Object(i.a)("<div>"),n=Object(i.a)("<label>").addClass(e.labelClass).text(e.labelText+":").append(t);m.a.off(n,Q.a),m.a.on(n,Q.a,(function(e){e.preventDefault()}));var r=e.editorType,a=Object(o.a)({value:e.value,onValueChanged:e.onValueChanged,onKeyboardHandled:e=>this._keyboardHandler(e)},{stylingMode:this.option("stylingMode")});return r===W.default&&(a.min=e.min||0,a.max=e.max||255,a.step=e.step||1),new r(t,a).registerKeyHandler("enter",function(e){this._fireEnterKeyPressed(e)}.bind(this)),this.setAria("label",e.labelAriaText,t),n},hexInputOptions:function(){return{editorType:G.default,value:this._currentColor.toHex().replace("#",""),onValueChanged:this._updateColor.bind(this,!0),labelClass:"dx-colorview-label-hex",labelText:"#",labelAriaText:K.a.format("dxColorView-ariaHex")}},_renderHexInput:function(){this._hexInput=G.default.getInstance(this._renderEditorWithLabel(this.hexInputOptions()).appendTo(this._$controlsContainer).find(".dx-textbox"))},_renderAlphaChannelScale:function(){var e=this._renderHtmlCellInsideRow(1,this._$colorPickerContainer,"dx-colorview-alpha-channel-cell"),t=Object(i.a)("<div>").addClass("dx-colorview-alpha-channel-border").appendTo(e),n=Object(i.a)("<div>").addClass("dx-colorview-alpha-channel-wrapper").appendTo(t);this._$alphaChannelScale=Object(i.a)("<div>").addClass("dx-colorview-alpha-channel-scale").appendTo(n),this._makeCSSLinearGradient(this._$alphaChannelScale),this._renderAlphaChannelHandle(e)},_makeCSSLinearGradient:function(e){var t=this._currentColor,n=[t.r,t.g,t.b].join(","),r=t.toHex().replace("#","");e.attr("style",function(e,t){var n=this.option("rtlEnabled"),r="rgba("+e+", "+(n?"1":"0")+")",i="rgba("+e+", "+(n?"0":"1")+")";return["background-image: -webkit-linear-gradient(180deg, "+r+", "+i+")","background-image: -moz-linear-gradient(-90deg, "+r+", "+i+")","background-image: -o-linear-gradient(-90deg, "+r+", "+i+")","background-image: linear-gradient(-90deg, "+r+", "+i+")"].join(";")}.call(this,n,r))},_renderAlphaChannelInput:function(){var e=this,t=this._renderHtmlCellInsideRow(1,this._$colorPickerContainer);e._alphaChannelInput=this._renderEditorWithLabel({editorType:W.default,value:this._currentColor.a,max:1,step:.1,onValueChanged:function(t){var n=t.value;n=e._currentColor.isValidAlpha(n)?n:e._currentColor.a,t.event&&e._saveValueChangeEvent(t.event),e._updateColorTransparency(n),e._placeAlphaChannelHandle()},labelClass:"dx-colorview-alpha-channel-label",labelText:"Alpha",labelAriaText:K.a.format("dxColorView-ariaAlpha")}).appendTo(t).find(".dx-numberbox").dxNumberBox("instance")},_updateColorTransparency:function(e){this._currentColor.a=e,this.applyColor()},_renderAlphaChannelHandle:function(e){this._$alphaChannelHandle=Object(i.a)("<div>").addClass("dx-colorview-alpha-channel-handle").appendTo(e),this._createComponent(this._$alphaChannelHandle,Z.a,{contentTemplate:null,boundary:e,allowMoveByClick:!0,dragDirection:"horizontal",onDragMove:e=>{var{event:t}=e;this._updateByDrag=!0;var n=this._$alphaChannelHandle,r=Object(z.d)(n).left+this._alphaChannelHandleWidth/2;this._saveValueChangeEvent(t),this._calculateColorTransparencyByScaleWidth(r)}}),this._alphaChannelHandleWidth=Object(U.l)(this._$alphaChannelHandle),this._alphaChannelScaleWorkWidth=Object(U.l)(e)-this._alphaChannelHandleWidth,this._placeAlphaChannelHandle()},_calculateColorTransparencyByScaleWidth:function(e){var t=(e-this._alphaChannelHandleWidth/2)/this._alphaChannelScaleWorkWidth,n=this.option("rtlEnabled");t=n?t:1-t,e>=this._alphaChannelScaleWorkWidth+this._alphaChannelHandleWidth/2?t=n?1:0:t<1&&(t=t.toFixed(2));var r=this._alphaChannelInput.option("value");t=Math.max(t,0),(t=Math.min(t,1))===r?this._updateByDrag=!1:this._alphaChannelInput.option("value",t)},_placeAlphaChannelHandle:function(){var e=this._alphaChannelScaleWorkWidth*(1-this._currentColor.a);e<0&&(e=0),this._alphaChannelScaleWorkWidth<e&&(e=this._alphaChannelScaleWorkWidth),Object(z.e)(this._$alphaChannelHandle,{left:this.option("rtlEnabled")?this._alphaChannelScaleWorkWidth-e:e})},applyColor:function(){var e=this.option("value"),t=this.option("editAlphaChannel")?this._makeRgba(this._currentColor):this._currentColor.toHex();this._makeTransparentBackground(this._$currentColor,this._currentColor),t===e?this._updateByDrag=!1:this.option("value",t)},cancelColor:function(){this._initColorAndOpacity(),this._refreshMarkup()},_updateColor:function(e,t){var n,r;e?r=this._validateHex("#"+this._hexInput.option("value")):(n=this._validateRgb(),this._alphaChannelInput?(n.push(this._alphaChannelInput.option("value")),r="rgba("+n.join(", ")+")"):r="rgb("+n.join(", ")+")"),this._suppressEditorsValueUpdating||(this._currentColor=new V.a(r),this._saveValueChangeEvent(t.event),this.applyColor(),this._refreshMarkup())},_validateHex:function(e){return this._currentColor.isValidHex(e)?e:this._currentColor.toHex()},_validateRgb:function(){var e=this._rgbInputs[0].option("value"),t=this._rgbInputs[1].option("value"),n=this._rgbInputs[2].option("value");return this._currentColor.isValidRGB(e,t,n)||(e=this._currentColor.r,t=this._currentColor.g,n=this._currentColor.b),[e,t,n]},_refreshMarkup:function(){this._placeHueScaleHandle(),this._placePaletteHandle(),this._updateColorParamsAndColorPreview(),this._$palette.css("backgroundColor",this._currentColor.getPureColor().toHex()),this._$alphaChannelHandle&&(this._updateColorTransparency(this._currentColor.a),this._placeAlphaChannelHandle())},_updateColorParamsAndColorPreview:function(){this._suppressEditorsValueUpdating=!0,this._hexInput.option("value",this._currentColor.toHex().replace("#","")),this._rgbInputs[0].option("value",this._currentColor.r),this._rgbInputs[1].option("value",this._currentColor.g),this._rgbInputs[2].option("value",this._currentColor.b),this._suppressEditorsValueUpdating=!1,this.option("editAlphaChannel")&&(this._makeCSSLinearGradient.call(this,this._$alphaChannelScale),this._alphaChannelInput.option("value",this._currentColor.a))},_optionChanged:function(e){var t=e.value;switch(e.name){case"value":this._setCurrentColor(t),this._updateByDrag||this._refreshMarkup(),this._updateByDrag=!1,this.callBase(e);break;case"matchValue":this._setBaseColor(t);break;case"onEnterKeyPressed":this._initEnterKeyPressedAction();break;case"editAlphaChannel":this._$colorPickerContainer&&(this._renderHtmlRows("editAlphaChannel"),this._renderAlphaChannelElements());break;case"keyStep":break;case"stylingMode":this._renderControls();break;default:this.callBase(e)}}});Object(c.a)("dxColorView",re);var ie=re,oe=n("sUSw");class ae{constructor(){this._collection=[]}clear(){this._collection=[]}add(e,t){this._collection.push({name:e,instance:t})}remove(e){this._collection=this._collection.filter(t=>t.name!==e)}getByName(e){var t=null;return Object(oe.a)(this._collection,(n,r)=>{var{name:i,instance:o}=r;if(i===e)return t=o,!1}),t}each(e){this._collection.forEach(t=>{var{name:n,instance:r}=t;return r&&e(n,r)})}}var se=n("YhxP"),le=["table","tableHeaderCell"],ce=["insertTable","insertHeaderRow","insertRowAbove","insertRowBelow","insertColumnLeft","insertColumnRight","deleteColumn","deleteRow","deleteTable","cellProperties","tableProperties"];function ue(e){var t=e.getModule("table");return null!=t&&t.tableFormats?t.tableFormats():le}function de(e,t){return!!t&&e.quill.getText(t).trim().length<t.length}function he(e,t){var{tableBlot:n,quill:r}=t;(null!=n?n:r.scroll.find(e.get(0))).format("tableWidth","initial")}function pe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.find("tr").eq(t).find("th, td")}function fe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal",n=[],r="horizontal"===t,o=r?pe(e):ve(e);return o.each((e,t)=>{var o=Object(i.a)(t);""===o.get(0).style[r?"width":"height"]&&n.push(o)}),n}function me(e,t){var{elements:n,property:r,value:i}=t,o=e.quill.getModule("table").tableBlots,a="cell".concat(Object(se.a)(r,!0));Object(oe.a)(n,(t,n)=>{var r,s=e.quill.scroll.find(n);if(!o.includes(s.statics.blotName)){var l=s.descendant(e=>o.includes(e.statics.blotName));s=l?l[0]:null}null===(r=s)||void 0===r||r.format(a,i+"px")})}function ge(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal";return"horizontal"===n?ve(e,t):pe(e,t)}function ve(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.find("th:nth-child(".concat(1+t,"), td:nth-child(").concat(1+t,")"))}function _e(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return()=>{var n=e.getModule("table");if(n)return e.focus(),n[t](...r)}}var be=n("Dz83"),ye=n("fC1m"),Ce=n("PoNV"),Oe=ie.prototype,we={makeTransparentBackground:Oe._makeTransparentBackground.bind(Oe),makeRgba:Oe._makeRgba.bind(Oe)},xe=Ce.a.inherit({_supportedKeys:function(){var e=function(e){if(e.stopPropagation(),this.option("opened"))return e.preventDefault(),!0};return Object(o.a)(this.callBase(),{tab:function(e){if(this.option("opened")){var t=e.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();t&&(m.a.trigger(t,"focus"),t.select()),e.preventDefault()}},enter:this._enterKeyHandler,leftArrow:e,rightArrow:e,upArrow:function(e){return this.option("opened")?!e.altKey||(this.close(),!1):(e.preventDefault(),!1)},downArrow:function(e){return this.option("opened")||e.altKey?!(!this.option("opened")&&e.altKey)||(this._validatedOpening(),!1):(e.preventDefault(),!1)}})},_getDefaultOptions:function(){return Object(o.a)(this.callBase(),{editAlphaChannel:!1,applyValueMode:"useButtons",keyStep:1,fieldTemplate:null,buttonsLocation:"bottom after"})},_popupHidingHandler:function(){this.callBase(),"useButtons"===this.option("applyValueMode")&&this._updateColorViewValue(this.option("value"))},_popupConfig:function(){return Object(o.a)(this.callBase(),{width:""})},_contentReadyHandler:function(){this._createColorView(),this._addPopupBottomClasses()},_addPopupBottomClasses:function(){var e=this._popup.bottomToolbar();e&&(e.addClass("dx-colorview-container-cell").addClass("dx-colorview-button-cell").find(".dx-toolbar-items-container").addClass("dx-colorview-buttons-container"),e.find(".dx-popup-done").addClass("dx-colorview-apply-button"),e.find(".dx-popup-cancel").addClass("dx-colorview-cancel-button"))},_createColorView:function(){this._popup.$overlayContent().addClass("dx-colorbox-overlay");var e=Object(i.a)("<div>").appendTo(this._popup.$content());this._colorView=this._createComponent(e,ie,this._colorViewConfig()),this._colorView.registerKeyHandler("escape",this._escapeHandler.bind(this)),m.a.on(e,"focus",function(){this.focus()}.bind(this))},_escapeHandler:function(){this.close(),this.focus()},_getFirstPopupElement:function(){return Object(i.a)(this._colorView._rgbInputs[0].element()).find("input")},_applyNewColor:function(e){this.option("value",e),e&&we.makeTransparentBackground(this._$colorResultPreview,e),this._colorViewEnterKeyPressed&&(this.close(),this._colorViewEnterKeyPressed=!1)},_colorViewConfig:function(){var e=this;return{value:e.option("value"),matchValue:e.option("value"),editAlphaChannel:e.option("editAlphaChannel"),applyValueMode:e.option("applyValueMode"),focusStateEnabled:e.option("focusStateEnabled"),stylingMode:this.option("stylingMode"),onEnterKeyPressed:function(t){var{event:n}=t;e._colorViewEnterKeyPressed=!0,e._colorView.option("value")!==e.option("value")&&(e._saveValueChangeEvent(n),e._applyNewColor(e._colorView.option("value")),e.close())},onValueChanged:function(t){var{event:n,value:r,previousValue:i}=t,o="instantly"===e.option("applyValueMode"),a=we.makeRgba(r)===i,s=o||e._colorViewEnterKeyPressed,l=e._shouldSaveEmptyValue;a||!s||l||(n&&e._saveValueChangeEvent(n),e._applyNewColor(r))}}},_enterKeyHandler:function(e){var t=this._input().val(),{value:n,editAlphaChannel:r}=this.option(),i=n&&r?we.makeRgba(n):n;if(!t)return!1;if(!new V.a(t).colorIsInvalid){if(t!==i&&(this._applyColorFromInput(t),this._saveValueChangeEvent(e),this.option("value",this.option("editAlphaChannel")?we.makeRgba(t):t)),this._colorView){var o=this._colorView.option("value");n!==o&&(this._saveValueChangeEvent(e),this.option("value",o))}return this.close(),!1}this._input().val(i)},_applyButtonHandler:function(e){this._saveValueChangeEvent(e.event),this._applyNewColor(this._colorView.option("value")),this.callBase()},_cancelButtonHandler:function(){this._resetInputValue(),this.callBase()},_getKeyboardListeners(){return this.callBase().concat([this._colorView])},_init:function(){this.callBase()},_initMarkup:function(){this.$element().addClass("dx-colorbox"),this.callBase()},_renderInput:function(){this.callBase(),this._input().addClass("dx-colorbox-input"),this._renderColorPreview()},_renderColorPreview:function(){this.$element().wrapInner(Object(i.a)("<div>").addClass("dx-colorbox-input-container")),this._$colorBoxInputContainer=this.$element().children().eq(0),this._$colorResultPreview=Object(i.a)("<div>").addClass("dx-colorbox-color-result-preview").appendTo(this._$textEditorInputContainer),this.option("value")?we.makeTransparentBackground(this._$colorResultPreview,this.option("value")):this._$colorBoxInputContainer.addClass("dx-colorbox-color-is-not-defined")},_renderValue:function(){var{value:e,editAlphaChannel:t}=this.option(),n=e&&t?we.makeRgba(e):e;return this.option("text",n),this.callBase()},_resetInputValue:function(){var e=this._input(),t=this.option("value");e.val(t),this._updateColorViewValue(t)},_updateColorViewValue:function(e){this._colorView&&this._colorView.option({value:e,matchValue:e})},_valueChangeEventHandler:function(e){var t=this._input().val();t&&(t=this._applyColorFromInput(t),this._updateColorViewValue(t)),this.callBase(e,t)},_applyColorFromInput:function(e){return new V.a(e).colorIsInvalid&&(this._resetInputValue(),e=this.option("value")),e},_clean:function(){this.callBase(),delete this._shouldSaveEmptyValue},_optionChanged:function(e){var t=e.value,n=e.name;switch(n){case"value":this._$colorBoxInputContainer.toggleClass("dx-colorbox-color-is-not-defined",!t),t?we.makeTransparentBackground(this._$colorResultPreview,t):this._$colorResultPreview.removeAttr("style"),null===t&&(this._shouldSaveEmptyValue=!0),this._updateColorViewValue(t),this._shouldSaveEmptyValue=!1,this.callBase(e);break;case"applyButtonText":case"cancelButtonText":this.callBase(e),this._popup&&this._addPopupBottomClasses();break;case"editAlphaChannel":case"keyStep":this._colorView&&this._colorView.option(n,t);break;default:this.callBase(e)}}});Object(c.a)("dxColorBox",xe);var Ie=xe,Se=n("Z6Ap"),Ee=n("RfjA"),je=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"],ke={insertHeaderRow:"header",clear:"clearformat"};function Te(e){return{clear:t=>{var n,{event:r}=t,i=e.quill.getSelection();i&&(e.saveValueChangeEvent(r),e.quill.removeFormat(i),null===(n=Le(e))||void 0===n||n.updateFormatWidgets())},link:Me(e),image:Fe(e),color:Re(e,"color"),background:Re(e,"background"),orderedList:Be(e,"list","ordered"),bulletList:Be(e,"list","bullet"),alignLeft:Be(e,"align","left"),alignCenter:Be(e,"align","center"),alignRight:Be(e,"align","right"),alignJustify:Be(e,"align","justify"),codeBlock:qe(e,"code-block"),undo:t=>{var{event:n}=t;e.saveValueChangeEvent(n),e.quill.history.undo()},redo:t=>{var{event:n}=t;e.saveValueChangeEvent(n),e.quill.history.redo()},increaseIndent:t=>{var{event:n}=t;Pe(e,["indent","+1","user"],n)},decreaseIndent:t=>{var{event:n}=t;Pe(e,["indent","-1","user"],n)},superscript:Be(e,"script","super"),subscript:Be(e,"script","sub"),insertTable:He(e),insertHeaderRow:_e(e.quill,"insertHeaderRow"),insertRowAbove:_e(e.quill,"insertRowAbove"),insertRowBelow:_e(e.quill,"insertRowBelow"),insertColumnLeft:_e(e.quill,"insertColumnLeft"),insertColumnRight:_e(e.quill,"insertColumnRight"),deleteColumn:_e(e.quill,"deleteColumn"),deleteRow:_e(e.quill,"deleteRow"),deleteTable:_e(e.quill,"deleteTable"),cellProperties:De(e,"cell"),tableProperties:De(e,"table")}}function Ae(e,t){var{contentTemplate:n,title:r,minHeight:i,minWidth:o,maxWidth:a}=t;e.formDialogOption({contentTemplate:n,title:r,minHeight:null!=i?i:0,minWidth:null!=o?o:0,maxWidth:null!=a?a:"none"})}function De(e,t){return n=>{var r,o;null!==(r=n)&&void 0!==r&&r.length||(n=Object(i.a)(function(e,t){var n=e.quill.getModule("table").getTable();return"table"===t?n[0].domNode:n[2].domNode}(e,t)));var a,[s,l]=null!==(o=e.quill.getModule("table").getTable())&&void 0!==o?o:[],c=e.quill.getFormat(e.editorInstance.getSelection(!0)),u=function(e){return"cell"===e?Ue:$e}(t)(e,{$element:n,formats:c,tableBlot:s,rowBlot:l}),{contentTemplate:d,title:h,minHeight:p,minWidth:f,maxWidth:m}=e.editorInstance._formDialog._popup.option(),g={contentTemplate:d,title:h,minHeight:p,minWidth:f,maxWidth:m};e.editorInstance.formDialogOption({contentTemplate:t=>{var n=Object(i.a)("<div>").appendTo(t),r=Object(i.a)("<div>").appendTo(n);return e.editorInstance._createComponent(r,be.default,u.formOptions),e.editorInstance._createComponent(n,Se.default,{}),a=r.dxForm("instance"),n},title:K.a.format("dxHtmlEditor-".concat(t,"Properties")),minHeight:400,minWidth:Math.min(800,.9*Object(U.l)(Object(Ee.d)())-1),maxWidth:.9*Object(U.l)(Object(Ee.d)())});var v=e.editorInstance.showFormDialog();v.done((t,n)=>{e.saveValueChangeEvent(n),u.applyHandler(a),Ae(e.editorInstance,g)}),v.fail(()=>{e.quill.focus(),Ae(e.editorInstance,g)})}}function Pe(e,t,n){e.editorInstance._saveValueChangeEvent(n),e.quill.format(...t)}function Me(e){return()=>{var t;e.quill.focus();var n=e.quill.getSelection(),r=de(e,n),i=n?e.quill.getFormat():{},o=i.link&&0===(null===(t=n)||void 0===t?void 0:t.length),a=i.link||"";if(o){var s=function(e,t){var n=x().import("formats/link"),[r,i]=e.quill.scroll.descendant(n,t.index);return r?{index:t.index-i,length:r.length()}:null}(e,n);s?n=s:a=""}var l={href:a,text:n&&!r?e.quill.getText(n):"",target:!Object.prototype.hasOwnProperty.call(i,"target")||!!i.target};e.editorInstance.formDialogOption("title",K.a.format("dxHtmlEditor-dialogLinkCaption"));var c=e.editorInstance.showFormDialog({formData:l,items:Ne(e,n)});c.done((t,i)=>{if(n&&!r){var o=t.text||t.href,{index:a,length:s}=n;t.text=void 0,e.saveValueChangeEvent(i),s&&e.quill.deleteText(a,s,"silent"),e.quill.insertText(a,o,"link",t,"user"),e.quill.setSelection(a+o.length,0,"user")}else t.text=n||t.text?t.text:t.href,Pe(e,["link",t,"user"],i)}),c.fail(()=>{e.quill.focus()})}}function Fe(e){return()=>{var t=e.quill.getFormat(),n=Object.prototype.hasOwnProperty.call(t,"imageSrc"),r=function(e){var t,n=e.quill.getSelection();return null!==(t=null==n?void 0:n.index)&&void 0!==t?t:e.quill.getLength()}(e);if(n){var{imageSrc:i}=e.quill.getFormat(r-1,1);t.src=t.imageSrc,delete t.imageSrc,i&&0!==r||e.quill.setSelection(r+1,0,"silent")}var o=function(e){var t=e.quill.getSelection();return t?t.length?t.index:t.index-1:e.quill.getLength()}(e);e.editorInstance.formDialogOption("title",K.a.format("dxHtmlEditor-dialogImageCaption")),e.editorInstance.showFormDialog({formData:t,items:[{dataField:"src",label:{text:K.a.format("dxHtmlEditor-dialogImageUrlField")}},{dataField:"width",label:{text:K.a.format("dxHtmlEditor-dialogImageWidthField")}},{dataField:"height",label:{text:K.a.format("dxHtmlEditor-dialogImageHeightField")}},{dataField:"alt",label:{text:K.a.format("dxHtmlEditor-dialogImageAltField")}}]}).done((t,i)=>{var a=r;e.saveValueChangeEvent(i),n&&(a=o,e.quill.deleteText(a,1,"silent")),e.quill.insertEmbed(a,"extendedImage",t,"user"),e.quill.setSelection(a+1,0,"user")}).always(()=>{e.quill.focus()})}}function Ne(e,t){return[{dataField:"href",label:{text:K.a.format("dxHtmlEditor-dialogLinkUrlField")}},{dataField:"text",label:{text:K.a.format("dxHtmlEditor-dialogLinkTextField")},visible:!de(e,t)},{dataField:"target",editorType:"dxCheckBox",editorOptions:{text:K.a.format("dxHtmlEditor-dialogLinkTargetField")},cssClass:"dx-formdialog-field-target",label:{visible:!1}}]}function Re(e,t){return()=>{var n=e.quill.getFormat(),r="color"===t?"dxHtmlEditor-dialogColorCaption":"dxHtmlEditor-dialogBackgroundCaption";e.editorInstance.formDialogOption("title",K.a.format(r));var i=e.editorInstance.showFormDialog({formData:n,items:[{dataField:t,editorType:"dxColorView",editorOptions:{focusStateEnabled:!1},label:{visible:!1}}]});i.done((n,r)=>{Pe(e,[t,n[t],"user"],r)}),i.fail(()=>{e.quill.focus()})}}function Be(e,t,n){return r=>{var i,{event:o}=r,a=e.quill.getFormat()[t]!==n&&n;Pe(e,[t,a,"user"],o),null===(i=Le(e))||void 0===i||i.updateFormatWidgets(!0)}}function Le(e){return e._updateFormatWidget?e:e.quill.getModule("toolbar")}function qe(e,t){return n=>{var r,{event:i}=n,o=e.quill.getFormat(),s=o[t],l=!(Object(a.a)(s)?s:Object(a.d)(s));Pe(e,[t,l,"user"],i),null===(r=Le(e))||void 0===r||r._updateFormatWidget(t,l,o)}}function He(e){return()=>{var t=e.quill.getFormat();e._tableFormats.some(e=>Object.prototype.hasOwnProperty.call(t,e))?e.quill.focus():(e.editorInstance.formDialogOption("title",K.a.format("dxHtmlEditor-dialogInsertTableCaption")),e.editorInstance.showFormDialog({formData:{rows:1,columns:1},items:[{dataField:"columns",editorType:"dxNumberBox",editorOptions:{min:1},label:{text:K.a.format("dxHtmlEditor-dialogInsertTableRowsField")}},{dataField:"rows",editorType:"dxNumberBox",editorOptions:{min:1},label:{text:K.a.format("dxHtmlEditor-dialogInsertTableColumnsField")}}]}).done((t,n)=>{e.quill.focus();var r=e.quill.getModule("table");if(r){e.saveValueChangeEvent(n);var{columns:i,rows:o}=t;r.insertTable(i,o)}}).always(()=>{e.quill.focus()}))}}function $e(e,t){var n,r,o,{$element:s,formats:l,tableBlot:c}=t,u=Object(Ee.d)(),d=s,h=e.editorInstance,p=parseInt(l.tableWidth)||Object(U.i)(d),f=u.getComputedStyle(d.get(0)),m="start"===f.textAlign?"left":f.textAlign;return{formOptions:{colCount:2,formData:{width:p,height:Object(a.d)(l.tableHeight)?parseInt(l.tableHeight):Object(U.h)(d),backgroundColor:l.tableBackgroundColor||f.backgroundColor,borderStyle:l.tableBorderStyle||f.borderTopStyle,borderColor:l.tableBorderColor||f.borderTopColor,borderWidth:parseInt(Object(a.d)(l.tableBorderWidth)?l.tableBorderWidth:f.borderTopWidth),alignment:l.tableAlign||m},items:[{itemType:"group",caption:K.a.format("dxHtmlEditor-border"),colCountByScreen:{xs:2},colCount:2,items:[{dataField:"borderStyle",label:{text:K.a.format("dxHtmlEditor-style")},editorType:"dxSelectBox",editorOptions:{items:je,placeholder:"Select style"}},{dataField:"borderWidth",label:{text:K.a.format("dxHtmlEditor-borderWidth")},editorOptions:{placeholder:K.a.format("dxHtmlEditor-pixels")}},{itemType:"simple",dataField:"borderColor",label:{text:K.a.format("dxHtmlEditor-borderColor")},colSpan:2,template:e=>{var t=Object(i.a)("<div>");return h._createComponent(t,Ie,{editAlphaChannel:!0,value:e.component.option("formData").borderColor,onInitialized:e=>{r=e.component}}),t}}]},{itemType:"group",caption:K.a.format("dxHtmlEditor-dimensions"),colCountByScreen:{xs:2},colCount:2,items:[{dataField:"width",label:{text:K.a.format("dxHtmlEditor-width")},editorOptions:{min:0,placeholder:K.a.format("dxHtmlEditor-pixels")}},{dataField:"height",label:{text:K.a.format("dxHtmlEditor-height")},editorOptions:{min:0,placeholder:K.a.format("dxHtmlEditor-pixels")}}]},{itemType:"group",caption:K.a.format("dxHtmlEditor-tableBackground"),items:[{itemType:"simple",dataField:"backgroundColor",label:{text:K.a.format("dxHtmlEditor-borderColor")},template:e=>{var t=Object(i.a)("<div>");return h._createComponent(t,Ie,{editAlphaChannel:!0,value:e.component.option("formData").backgroundColor,onInitialized:e=>{o=e.component}}),t}}]},{itemType:"group",caption:K.a.format("dxHtmlEditor-alignment"),items:[{itemType:"simple",label:{text:K.a.format("dxHtmlEditor-horizontal")},template:()=>{var e=Object(i.a)("<div>");return h._createComponent(e,ye.a,{items:[{value:"left",icon:"alignleft"},{value:"center",icon:"aligncenter"},{value:"right",icon:"alignright"},{value:"justify",icon:"alignjustify"}],keyExpr:"value",selectedItemKeys:[m],onInitialized:e=>{n=e.component}}),e}}]}],showColonAfterLabel:!0,labelLocation:"top",minColWidth:400},applyHandler:t=>{var s=t.option("formData"),l=s.width===p?void 0:s.width,u=s.height;!function(e,t){var{$table:n,newHeight:r,newWidth:o,tableBlot:s}=t;if(Object(a.d)(o)){if(fe(n).length>0)e.editorInstance.format("tableWidth",o+"px");else{var l=pe(n),c=Object(U.i)(n);he(n,{tableBlot:s}),Object(oe.a)(l,(t,r)=>{var a=Object(i.a)(r),s=o/c*Object(U.i)(a),l=ge(n,a.index(),"horizontal");me(e,{elements:l,property:"width",value:s})})}}var u=fe(n,"vertical");if((null==u?void 0:u.length)>0)s.format("tableHeight",r+"px");else{var d=ve(n),h=Object(U.h)(n);Object(oe.a)(d,(t,o)=>{var a=Object(i.a)(o),s=r/h*Object(U.h)(a),l=ge(n,t,"vertical");me(e,{elements:l,property:"height",value:s})})}}(e,{$table:d,newHeight:u,newWidth:l,tableBlot:c}),e.editorInstance.format("tableBorderStyle",s.borderStyle),e.editorInstance.format("tableBorderWidth",s.borderWidth+"px"),e.editorInstance.format("tableBorderColor",r.option("value")),e.editorInstance.format("tableBackgroundColor",o.option("value")),e.editorInstance.format("tableTextAlign",n.option("selectedItemKeys")[0])}}}function Ue(e,t){var n,r,o,s,{$element:l,formats:c,tableBlot:u,rowBlot:d}=t,h=Object(Ee.d)(),p=l,f=Object(a.d)(c.cellWidth)?parseInt(c.cellWidth):Object(U.i)(p),m=e.editorInstance,g=h.getComputedStyle(p.get(0)),v="start"===g.textAlign?"left":g.textAlign;return{formOptions:{colCount:2,formData:{width:f,height:Object(a.d)(c.cellHeight)?parseInt(c.cellHeight):Object(U.h)(p),backgroundColor:c.cellBackgroundColor||g.backgroundColor,borderStyle:c.cellBorderStyle||g.borderTopStyle,borderColor:c.cellBorderColor||g.borderTopColor,borderWidth:parseInt(Object(a.d)(c.cellBorderWidth)?c.cellBorderWidth:g.borderTopWidth),alignment:c.cellTextAlign||v,verticalAlignment:c.cellVerticalAlign||g.verticalAlign,verticalPadding:parseInt(Object(a.d)(c.cellPaddingTop)?c.cellPaddingTop:g.paddingTop),horizontalPadding:parseInt(Object(a.d)(c.cellPaddingLeft)?c.cellPaddingLeft:g.paddingLeft)},items:[{itemType:"group",caption:K.a.format("dxHtmlEditor-border"),colCountByScreen:{xs:2},colCount:2,items:[{dataField:"borderStyle",label:{text:K.a.format("dxHtmlEditor-style")},editorType:"dxSelectBox",editorOptions:{items:je}},{dataField:"borderWidth",label:{text:K.a.format("dxHtmlEditor-borderWidth")},editorOptions:{placeholder:K.a.format("dxHtmlEditor-pixels")}},{itemType:"simple",dataField:"borderColor",colSpan:2,label:{text:K.a.format("dxHtmlEditor-borderColor")},template:e=>{var t=Object(i.a)("<div>");return m._createComponent(t,Ie,{editAlphaChannel:!0,value:e.component.option("formData").borderColor,onInitialized:e=>{o=e.component}}),t}}]},{itemType:"group",caption:K.a.format("dxHtmlEditor-dimensions"),colCount:2,colCountByScreen:{xs:2},items:[{dataField:"width",label:{text:K.a.format("dxHtmlEditor-width")},editorOptions:{min:0,placeholder:K.a.format("dxHtmlEditor-pixels")}},{dataField:"height",label:{text:K.a.format("dxHtmlEditor-height")},editorOptions:{min:0,placeholder:K.a.format("dxHtmlEditor-pixels")}},{dataField:"verticalPadding",label:{text:K.a.format("dxHtmlEditor-paddingVertical")},editorOptions:{placeholder:K.a.format("dxHtmlEditor-pixels")}},{label:{text:K.a.format("dxHtmlEditor-paddingHorizontal")},dataField:"horizontalPadding",editorOptions:{placeholder:K.a.format("dxHtmlEditor-pixels")}}]},{itemType:"group",caption:K.a.format("dxHtmlEditor-tableBackground"),items:[{itemType:"simple",dataField:"backgroundColor",label:{text:K.a.format("dxHtmlEditor-borderColor")},template:e=>{var t=Object(i.a)("<div>");return m._createComponent(t,Ie,{editAlphaChannel:!0,value:e.component.option("formData").backgroundColor,onInitialized:e=>{s=e.component}}),t}}]},{itemType:"group",caption:K.a.format("dxHtmlEditor-alignment"),colCount:2,items:[{itemType:"simple",label:{text:K.a.format("dxHtmlEditor-horizontal")},template:()=>{var e=Object(i.a)("<div>");return m._createComponent(e,ye.a,{items:[{value:"left",icon:"alignleft"},{value:"center",icon:"aligncenter"},{value:"right",icon:"alignright"},{value:"justify",icon:"alignjustify"}],keyExpr:"value",selectedItemKeys:[v],onInitialized:e=>{n=e.component}}),e}},{itemType:"simple",label:{text:K.a.format("dxHtmlEditor-vertical")},template:()=>{var e=Object(i.a)("<div>");return m._createComponent(e,ye.a,{items:[{value:"top",icon:"verticalaligntop"},{value:"middle",icon:"verticalaligncenter"},{value:"bottom",icon:"verticalalignbottom"}],keyExpr:"value",selectedItemKeys:[g.verticalAlign],onInitialized:e=>{r=e.component}}),e}}]}],showColonAfterLabel:!0,labelLocation:"top",minColWidth:400},applyHandler:t=>{var l=t.option("formData"),c=l.width===parseInt(f)?void 0:l.width,h=l.height;!function(e,t){var{$cell:n,newHeight:r,newWidth:o,tableBlot:s,rowBlot:l}=t,c=Object(i.a)(n.closest("table"));if(Object(a.d)(o)){var u=Object(i.a)(n).index(),d=ge(c,u),h=o-Object(U.i)(n),p=Object(U.i)(c);o>p&&he(c,{tableBlot:s}),me(e,{elements:d,property:"width",value:o});var f=n.next();if(0===fe(c).length)if(he(c,{tableBlot:s}),1===f.length){d=ge(c,u+1);var m=Object(U.i)(d.eq(0))-h;me(e,{elements:d,property:"width",value:Math.max(m,0)})}else{if(1===n.prev().length){d=ge(c,u-1);var g=Object(U.i)(d.eq(0))-h;me(e,{elements:d,property:"width",value:Math.max(g,0)})}}}l.children.forEach(e=>{e.format("cellHeight",r+"px")}),0===fe(c,"vertical").length&&c.css("height","auto")}(e,{$cell:p,newHeight:h,newWidth:c,tableBlot:u,rowBlot:d}),e.editorInstance.format("cellBorderWidth",l.borderWidth+"px"),e.editorInstance.format("cellBorderColor",o.option("value")),e.editorInstance.format("cellBorderStyle",l.borderStyle),e.editorInstance.format("cellBackgroundColor",s.option("value")),e.editorInstance.format("cellTextAlign",n.option("selectedItemKeys")[0]),e.editorInstance.format("cellVerticalAlign",r.option("selectedItemKeys")[0]),e.editorInstance.format("cellPaddingLeft",l.horizontalPadding+"px"),e.editorInstance.format("cellPaddingRight",l.horizontalPadding+"px"),e.editorInstance.format("cellPaddingTop",l.verticalPadding+"px"),e.editorInstance.format("cellPaddingBottom",l.verticalPadding+"px")}}}var ze=H;if(w.a){var Ve={66:"bold",73:"italic",85:"underline"},Ke={b:66,i:73,u:85},We=e=>K.a.format("dxHtmlEditor-".concat(Object(se.a)(e)));ze=class extends H{constructor(e,t){var n;if(super(e,t),n=this,this._toolbarWidgets=new ae,this._formatHandlers=Te(this),this._tableFormats=ue(e),Object(a.d)(t.items)){this._addCallbacks(),this._renderToolbar();var r=this.toolbarInstance._menu._dropDownMenu;if(r){var i=r._renderPopup;r._renderPopup=function(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];i.apply(r,...t),r._popup.on("showing",()=>{n._updateToolbar(!0)})}}this.quill.on("editor-change",(e,t,n,r)=>{if(!("silent"===r&&Object(a.e)(this.quill.getFormat()))){var i="selection-change"===e;this._updateToolbar(i)}})}}_addCallbacks(){this.addCleanCallback(this.clean.bind(this)),this.editorInstance.addContentInitializedCallback(this.updateHistoryWidgets.bind(this))}_updateToolbar(e){this.updateFormatWidgets(e),this.updateHistoryWidgets(),this.updateTableWidgets()}_updateFormatWidget(e,t,n){var r=this._toolbarWidgets.getByName(e);r&&(t?this._markActiveFormatWidget(e,r,n):(this._resetFormatWidget(e,r),Object.prototype.hasOwnProperty.call(e)&&delete n[e]),this._toggleClearFormatting(t||!Object(a.e)(n)))}_renderToolbar(){var e=this.options.container||this._getContainer();this._$toolbar=Object(i.a)("<div>").addClass("dx-htmleditor-toolbar").appendTo(e),this._$toolbarContainer=Object(i.a)(e).addClass("dx-htmleditor-toolbar-wrapper"),m.a.on(this._$toolbarContainer,Object(g.a)("mousedown",this.editorInstance.NAME),e=>{e.preventDefault()}),this._subscribeFormatHotKeys(),this.toolbarInstance=this.editorInstance._createComponent(this._$toolbar,$.default,this.toolbarConfig),this.editorInstance.on("optionChanged",e=>{var{name:t}=e;"readOnly"!==t&&"disabled"!==t||this.toolbarInstance.option("disabled",this.isInteractionDisabled)})}get toolbarConfig(){return{dataSource:this._prepareToolbarItems(),disabled:this.isInteractionDisabled,menuContainer:this._$toolbarContainer,multiline:this.isMultilineMode()}}get isInteractionDisabled(){return this.editorInstance.option("readOnly")||this.editorInstance.option("disabled")}isMultilineMode(){var e;return null===(e=this.options.multiline)||void 0===e||e}clean(){this._toolbarWidgets.clear(),this._$toolbarContainer&&this._$toolbarContainer.empty().removeClass("dx-htmleditor-toolbar-wrapper")}repaint(){this.toolbarInstance&&this.toolbarInstance.repaint()}_getContainer(){var e=Object(i.a)("<div>");return this.editorInstance.$element().prepend(e),e}_detectRenamedOptions(e){Object(a.j)(e)&&Object(oe.a)([{newName:"name",oldName:"formatName"},{newName:"acceptedValues",oldName:"formatValues"}],(t,n)=>{Object.prototype.hasOwnProperty.call(e,n.oldName)&&h.a.log("W1016",n.oldName,n.newName)})}_subscribeFormatHotKeys(){this.quill.keyboard.addBinding({which:Ke.b,shortKey:!0},this._handleFormatHotKey.bind(this)),this.quill.keyboard.addBinding({which:Ke.i,shortKey:!0},this._handleFormatHotKey.bind(this)),this.quill.keyboard.addBinding({which:Ke.u,shortKey:!0},this._handleFormatHotKey.bind(this))}_handleFormatHotKey(e,t,n){var{which:r}=n,i=Ve[r];this._updateButtonState(i)}_updateButtonState(e){var t=this._toolbarWidgets.getByName(e),n=this.quill.getFormat();n[e]?this._markActiveFormatWidget(e,t,n):this._resetFormatWidget(e,t)}_prepareToolbarItems(){var e=[];return Object(oe.a)(this.options.items,(t,n)=>{var r;if(this._detectRenamedOptions(n),Object(a.j)(n))r=this._handleObjectItem(n);else if(Object(a.o)(n)){var i=this._prepareButtonItemConfig(n);r=this._getToolbarItem(i)}r&&e.push(r)}),e}_handleObjectItem(e){if(e.name&&e.acceptedValues&&this._isAcceptableItem(e.widget,"dxSelectBox")){var t=this._prepareSelectItemConfig(e);return this._getToolbarItem(t)}if(e.name&&this._isAcceptableItem(e.widget,"dxButton")){var n=this._prepareButtonItemConfig(e.name),r=Object(o.a)(!0,n,e);return this._getToolbarItem(r)}return this._getToolbarItem(e)}_isAcceptableItem(e,t){return!e||e===t}_prepareButtonItemConfig(e){var t,n=null!==(t=ke[e])&&void 0!==t?t:e,r=Object(se.e)(e);return{widget:"dxButton",name:e,options:{hint:We(r),text:We(r),icon:n.toLowerCase(),onClick:this._formatHandlers[e]||qe(this,e),stylingMode:"text"},showText:"inMenu"}}_prepareSelectItemConfig(e){var{name:t,acceptedValues:n}=e;return Object(o.a)(!0,{widget:"dxSelectBox",name:t,options:{stylingMode:"filled",dataSource:n,displayExpr:e=>((e,t)=>"header"===t?Object(a.d)(e)&&!1!==e?"".concat(We("heading")," ").concat(e):We("normalText"):We(e)||e)(e,t),placeholder:We(t),onValueChanged:e=>{this._isReset||(this._hideAdaptiveMenu(),Pe(this,[t,e.value,"user"],e.event),this._setValueSilent(e.component,e.value))}}},e)}_hideAdaptiveMenu(){this.toolbarInstance.option("overflowMenuVisible")&&this.toolbarInstance.option("overflowMenuVisible",!1)}_getToolbarItem(e){var t={options:{onInitialized:t=>{e.name&&(t.component.$element().addClass("dx-htmleditor-toolbar-format"),t.component.$element().toggleClass("dx-".concat(e.name.toLowerCase(),"-format"),!!e.name),this._toolbarWidgets.add(e.name,t.component))},onDisposing:()=>{this._toolbarWidgets.remove(e.name)}}},n=this.isMultilineMode()?{location:"before",locateInMenu:"never"}:{};return Object(o.a)(!0,{location:"before",locateInMenu:"auto"},this._getDefaultConfig(e.name),e,t,n)}_getDefaultItemsConfig(){return{clear:{options:{disabled:!0}},undo:{options:{disabled:!0}},redo:{options:{disabled:!0}},insertRowAbove:{options:{disabled:!0}},insertRowBelow:{options:{disabled:!0}},insertHeaderRow:{options:{disabled:!0}},insertColumnLeft:{options:{disabled:!0}},insertColumnRight:{options:{disabled:!0}},deleteRow:{options:{disabled:!0}},deleteColumn:{options:{disabled:!0}},deleteTable:{options:{disabled:!0}},cellProperties:{options:{disabled:!0}},tableProperties:{options:{disabled:!0}},separator:{template:(e,t,n)=>{Object(i.a)(n).addClass("dx-htmleditor-toolbar-separator")},menuItemTemplate:(e,t,n)=>{Object(i.a)(n).addClass("dx-htmleditor-toolbar-menu-separator")}}}}_getDefaultConfig(e){return this._getDefaultItemsConfig()[e]}updateHistoryWidgets(){var e=this.quill.history;if(e){var{undo:t,redo:n}=e.stack;this._updateManipulationWidget(this._toolbarWidgets.getByName("undo"),Boolean(t.length)),this._updateManipulationWidget(this._toolbarWidgets.getByName("redo"),Boolean(n.length))}}updateTableWidgets(){if(this.quill.getModule("table")){var e=this.quill.getSelection(),t=e&&this.quill.getFormat(e)||{},n=this._tableFormats.some(e=>Boolean(t[e]));ce.forEach(e=>{var t="insertTable"===e,r=this._toolbarWidgets.getByName(e);this._updateManipulationWidget(r,t?!n:n)})}}_updateManipulationWidget(e,t){e&&e.option("disabled",!t)}updateFormatWidgets(e){var t=this.quill.getSelection();if(t){var n=this.quill.getFormat(t),r=!Object(a.e)(n);for(var i in r&&!e||this._resetFormatWidgets(),n){var o=this._getFormatWidgetName(i,n),s=this._toolbarWidgets.getByName(o)||this._toolbarWidgets.getByName(i);s&&this._markActiveFormatWidget(i,s,n)}this._toggleClearFormatting(r||t.length>1)}}_markActiveFormatWidget(e,t,n){this._isColorFormat(e)&&this._updateColorWidget(e,n[e]),"value"in t.option()?this._setValueSilent(t,n[e]):t.$element().addClass("dx-format-active")}_toggleClearFormatting(e){var t=this._toolbarWidgets.getByName("clear");t&&t.option("disabled",!e)}_isColorFormat(e){return"color"===e||"background"===e}_updateColorWidget(e,t){var n=this._toolbarWidgets.getByName(e);n&&n.$element().find(".".concat("dx-icon")).css("borderBottomColor",t||"transparent")}_getFormatWidgetName(e,t){var n;switch(e){case"align":n=e+Object(se.e)(t[e]);break;case"list":n=t[e]+Object(se.e)(e);break;case"code-block":n="codeBlock";break;case"script":n=t[e]+e;break;case"imageSrc":n="image";break;default:n=e}return n}_setValueSilent(e,t){this._isReset=!0,e.option("value",t),this._isReset=!1}_resetFormatWidgets(){this._toolbarWidgets.each((e,t)=>{this._resetFormatWidget(e,t)})}_resetFormatWidget(e,t){t.$element().removeClass("dx-format-active"),this._isColorFormat(e)&&this._updateColorWidget(e),"clear"===e&&t.option("disabled",!0),"dxSelectBox"===t.NAME&&this._setValueSilent(t,null)}addClickHandler(e,t){this._formatHandlers[e]=t;var n=this._toolbarWidgets.getByName(e);n&&"dxButton"===n.NAME&&n.option("onClick",t)}}}var Ge=ze,Ze=n("j7/s"),Qe=H;w.a&&(Qe=class extends H{constructor(e,t){super(e,t);var n=this.editorInstance.NAME;m.a.on(this.quill.root,Object(g.a)("drop",n),this._dropHandler.bind(this)),m.a.on(this.quill.root,Object(g.a)("paste",n),this._pasteHandler.bind(this))}_dropHandler(e){var t,n=e.originalEvent.dataTransfer,r=null==n||null===(t=n.files)||void 0===t?void 0:t.length;this.saveValueChangeEvent(e),e.preventDefault(),r&&this._getImage(n.files,this._addImage.bind(this))}_pasteHandler(e){var t,{clipboardData:n}=e.originalEvent;if(this.saveValueChangeEvent(e),n){var r=null===(t=n.items)||void 0===t?void 0:t.length;!n.getData("text/html")&&r&&this._getImage(n.items,e=>{this._isBrowserSupportImagePaste(Ze.a)||this._addImage(e)})}}_isBrowserSupportImagePaste(e){var{mozilla:t,chrome:n,version:r}=e;return t||n&&r>82}_isImage(e){return!!e.type.match(/^image\/(a?png|bmp|gif|p?jpe?g|svg|vnd\.microsoft\.icon|webp)/i)}_getImage(e,t){var n=Object(Ee.d)();Object(oe.a)(e,(e,r)=>{if(this._isImage(r)){var i=new n.FileReader;i.onload=e=>{var{target:n}=e;t(n.result)};var o=r.getAsFile?r.getAsFile():r;o instanceof n.Blob&&i.readAsDataURL(o)}})}_addImage(e){var t=this.quill.getSelection(),n=t?t.index:this.quill.getLength();this.quill.insertEmbed(n,"extendedImage",e,"user")}});var Xe=Qe,Ye=n("fYZB"),Je=n("oHs6"),et=n("r43o"),tt=H;if(w.a){tt=class extends H{_getDefaultOptions(){return{dataSource:null}}constructor(e,t){super(e,t),this.options=Object(o.a)({},this._getDefaultOptions(),t),this._popup=this.renderPopup(),this._popup.$wrapper().addClass("dx-suggestion-list-wrapper"),this._renderPreventFocusOut()}renderList(e,t){var n=Object(i.a)("<div>").addClass("dx-suggestion-list").appendTo(e);this._list=this.options.editorInstance._createComponent(n,et.a,t)}renderPopup(){var e=this.options.editorInstance,t=Object(i.a)("<div>").appendTo(e.$element()),n=this._getPopupConfig();return e._createComponent(t,Je.default,n)}_getPopupConfig(){return{contentTemplate:e=>{var t=this._getListConfig(this.options);this.renderList(Object(i.a)(e),t)},deferRendering:!1,onShown:()=>{this._list.focus()},onHidden:()=>{this._list.unselectAll(),this._list.option("focusedElement",null)},showTitle:!1,width:"auto",height:"auto",shading:!1,hideOnParentScroll:!0,closeOnOutsideClick:!0,animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},fullScreen:!1,maxHeight:this.maxHeight}}_getListConfig(e){return{dataSource:e.dataSource,onSelectionChanged:this.selectionChangedHandler.bind(this),selectionMode:"single",pageLoadMode:"scrollBottom"}}get maxHeight(){var e=Object(Ee.d)(),t=e&&Object(U.d)(e)||0;return Math.max(100,.5*t)}selectionChangedHandler(e){this._popup.option("visible")&&(this._popup.hide(),this.insertEmbedContent(e))}_renderPreventFocusOut(){var e=Object(g.a)("mousedown","dxHtmlEditorPopupModule");m.a.on(this._popup.$wrapper(),e,e=>{e.preventDefault()})}insertEmbedContent(e){}showPopup(){this._popup&&this._popup.show()}savePosition(e){this.caretPosition=e}getPosition(){return this.caretPosition}}}var nt=tt,rt={};if(w.a){var it=w.a.import("blots/embed");(rt=class extends it{static create(e){var t,n,r=super.create(),i=e.value;return Array.isArray(e.escapeChar)?(t=Object(l.g)(e.escapeChar[0],""),n=Object(l.g)(e.escapeChar[1],"")):t=n=e.escapeChar,r.innerText=t+i+n,r.dataset.varStartEscChar=t,r.dataset.varEndEscChar=n,r.dataset.varValue=e.value,r}static value(e){return Object(o.a)({},{value:e.dataset.varValue,escapeChar:[e.dataset.varStartEscChar||"",e.dataset.varEndEscChar||""]})}}).blotName="variable",rt.tagName="span",rt.className="dx-variable"}var ot=rt,at=H;if(w.a){w.a.register({"formats/variable":ot},!0),at=class extends nt{_getDefaultOptions(){var e=super._getDefaultOptions();return Object(o.a)(e,{escapeChar:""})}constructor(e,t){super(e,t);var n=e.getModule("toolbar");n&&n.addClickHandler("variable",this.showPopup.bind(this)),e.keyboard.addBinding({key:"P",altKey:!0},this.showPopup.bind(this)),this._popup.on("shown",e=>{var t=Object(i.a)(e.component.option("position").of);t.hasClass("dx-variable-format")&&t.addClass("dx-format-active")})}showPopup(e){var t=this.quill.getSelection(!0),n=t?t.index:this.quill.getLength();this.savePosition(n),this._resetPopupPosition(e,n),super.showPopup()}_resetPopupPosition(e,t){if(e&&e.element)this._popup.option("position",{of:e.element,offset:{h:0,v:0},my:"top center",at:"bottom center",collision:"fit"});else{var n=this.quill.getBounds(t),r=Object(Ye.a)(this.quill.root);this._popup.option("position",{of:this.quill.root,offset:{h:n.left,v:n.bottom-r.height},my:"top center",at:"bottom left",collision:"fit flip"})}}insertEmbedContent(e){var t=this.getPosition(),n=e.component.option("selectedItem"),r=Object(o.a)({},{value:n,escapeChar:this.options.escapeChar});setTimeout(function(){this.quill.insertEmbed(t,"variable",r),this.quill.setSelection(t+1)}.bind(this))}}}var st=at,lt=n("36u+"),ct=Object(g.a)("keydown","dxHtmlResizingModule"),ut=Object(g.a)("scroll","dxHtmlResizingModule"),dt=Object(g.a)("mousedown","dxHtmlResizingModule");class ht extends H{constructor(e,t){super(e,t),this.allowedTargets=t.allowedTargets||["image"],this.enabled=!!t.enabled,this._hideFrameWithContext=this.hideFrame.bind(this),this._framePositionChangedHandler=this._prepareFramePositionChangedHandler(),this.enabled&&(this._attachEvents(),this._createResizeFrame())}_attachEvents(){m.a.on(this.quill.root,Object(g.a)(Q.a,"dxHtmlResizingModule"),this._clickHandler.bind(this)),m.a.on(this.quill.root,ut,this._framePositionChangedHandler),this.editorInstance.on("focusOut",this._hideFrameWithContext),this.quill.on("text-change",this._framePositionChangedHandler)}_detachEvents(){m.a.off(this.quill.root,"dxHtmlResizingModule"),this.editorInstance.off("focusOut",this._hideFrameWithContext),this.quill.off("text-change",this._framePositionChangedHandler)}_clickHandler(e){if(this._isAllowedTarget(e.target)){if(this._$target===e.target)return;this._$target=e.target;var t=Object(i.a)(this._$target),n=Math.max(Object(U.i)(t)-Object(U.l)(t),this.resizable.option("minWidth")),r=Math.max(Object(U.h)(t)-Object(U.d)(t),this.resizable.option("minHeight"));this.resizable.option({minWidth:n,minHeight:r}),this.updateFramePosition(),this.showFrame(),this._adjustSelection()}else this._$target&&this.hideFrame()}_prepareFramePositionChangedHandler(e){return()=>{this._$target&&this.updateFramePosition()}}_adjustSelection(){this.quill.getSelection()||this.quill.setSelection(0,0)}_isAllowedTarget(e){return this._isImage(e)}_isImage(e){return-1!==this.allowedTargets.indexOf("image")&&"IMG"===e.tagName.toUpperCase()}showFrame(){this._$resizeFrame.show(),m.a.on(this.quill.root,ct,this._handleFrameKeyDown.bind(this))}_handleFrameKeyDown(e){var t=Object(g.o)(e);"del"!==t&&"backspace"!==t||this._deleteImage(),this.hideFrame()}hideFrame(){this._$target=null,this._$resizeFrame.hide(),m.a.off(this.quill.root,ct)}updateFramePosition(){var{height:e,width:t,top:n,left:r}=Object(Ye.a)(this._$target),{top:i,left:o}=Object(Ye.a)(this.quill.root),a=this._getBorderWidth();this._$resizeFrame.css({height:e,width:t,padding:1,top:n-i-a-1,left:r-o-a-1}),Object(z.e)(this._$resizeFrame,{left:0,top:0})}_getBorderWidth(){return parseInt(this._$resizeFrame.css("borderTopWidth"))}_createResizeFrame(){if(!this._$resizeFrame){var{deviceType:e}=C.a.current();this._$resizeFrame=Object(i.a)("<div>").addClass("dx-resize-frame").toggleClass("dx-touch-device","desktop"!==e).appendTo(this.editorInstance._getQuillContainer()).hide(),m.a.on(this._$resizeFrame,dt,e=>{e.preventDefault()}),this.resizable=this.editorInstance._createComponent(this._$resizeFrame,lt.a,{_keepAspectRatio:!0,onResize:e=>{this._$target&&(Object(i.a)(this._$target).attr({height:e.height,width:e.width}),this.updateFramePosition())}})}}_deleteImage(){var e;this._isAllowedTarget(this._$target)&&(null===(e=w.a.find(this._$target))||void 0===e||e.deleteAt(0))}option(e,t){"mediaResizing"!==e?"enabled"===e?(this.enabled=t,t?this._attachEvents():this._detachEvents()):"allowedTargets"===e&&Array.isArray(t)&&(this.allowedTargets=t):this.handleOptionChangeValue(t)}clean(){this._detachEvents(),this._$resizeFrame.remove(),this._$resizeFrame=void 0}}var pt=n("N9Yk"),ft={minColumnWidth:40,minRowHeight:24},mt=Object(g.a)("dxpointerdown","dxHtmlTableResizingModule"),gt=Object(g.a)("scroll","dxHtmlTableResizingModule");class vt extends H{constructor(e,t){super(e,t),this.enabled=!!t.enabled,this._tableResizeFrames=[],this._minColumnWidth=this._minSizeLimit("minColumnWidth",t.minColumnWidth),this._minRowHeight=this._minSizeLimit("minRowHeight",t.minRowHeight),this._quillContainer=this.editorInstance._getQuillContainer(),this._tableData=[],this.enabled&&this._applyResizing()}_applyResizing(e){e?this._applyResizingImpl():this.editorInstance.addContentInitializedCallback(this._applyResizingImpl.bind(this)),this.addCleanCallback(this.clean.bind(this)),this._resizeHandlerWithContext=pt.a.add(this._resizeHandler.bind(this))}_minSizeLimit(e,t){return Object(a.d)(t)?Math.max(t,0):ft[e]}_applyResizingImpl(){var e=this._findTables();e.length&&(this._fixTablesWidths(e),this._createResizeFrames(e),this._updateFramesPositions(),this._updateFramesSeparators()),this._attachEvents()}_attachEvents(){m.a.on(this.editorInstance._getContent(),gt,this._updateFramesPositions.bind(this)),this.quill.on("text-change",this._getQuillTextChangeHandler())}_detachEvents(){m.a.off(this.editorInstance._getContent(),"dxHtmlTableResizingModule"),this.quill.off("text-change",this._quillTextChangeHandler)}_getQuillTextChangeHandler(e,t,n){return(e,t,n)=>{if(this._isTableChanging()){var r=this._findTables();this._removeResizeFrames(),"api"===n&&this._fixTablesWidths(r),this._updateTablesColumnsWidth(r),this._createResizeFrames(r),this._updateFramesPositions(),this._updateFramesSeparators()}else this._updateFramesPositions(),this._isDragging||this._updateFramesSeparators()}}_getFrameForTable(e){var t;return null===(t=this._framesForTables)||void 0===t?void 0:t.get(e.get(0))}_resizeHandler(){this._windowResizeTimeout=setTimeout(()=>{var e=this._findTables();Object(oe.a)(e,(e,t)=>{var n=Object(i.a)(t),r=this._tableResizeFrames[e],o=Object(U.i)(n),a=this._tableLastWidth(r);Math.abs(o-a)>1&&(this._tableLastWidth(r,o),this._updateColumnsWidth(n,e))}),this._updateFramesPositions(),this._updateFramesSeparators()})}_findTables(){return Object(i.a)(this._quillContainer).find("table")}_getWidthStyleValue(e){var t=e[0].style.width;return""!==t?parseInt(t):void 0}_tableLastWidth(e,t){if(!Object(a.d)(t))return null==e?void 0:e.lastWidth;e.lastWidth=t}_fixTablesWidths(e){Object(oe.a)(e,(e,t)=>{var n=Object(i.a)(t),r=this._getTableDeterminantElements(n,"horizontal");this._tableResizeFrames[e]||(this._tableResizeFrames[e]={lastWidth:void 0});var o=this._getFrameForTable(n);if(o||this._tableResizeFrames.push({$table:n}),0===fe(n).length){var a,{columnsSum:s}=this._getColumnElementsSum(r);he(n,{quill:this.quill});var l=null!==(a=this._tableLastWidth(o))&&void 0!==a?a:Object(U.i)(n);o&&this._tableLastWidth(o,Math.max(s,l))}})}_createResizeFrames(e){this._framesForTables=new Map,e.each((e,t)=>{var n,r=Object(i.a)(t),o=null===(n=this._tableResizeFrames[e])||void 0===n?void 0:n.$table,a=this._tableResizeFrames[e].lastWidth;this._tableResizeFrames[e]={$frame:this._createTableResizeFrame(t),$table:r,index:e,lastWidth:o&&t===o.get(0)?a:void 0,columnsCount:this._getTableDeterminantElements(r,"horizontal").length,rowsCount:this._getTableDeterminantElements(r,"vertical").length},this._framesForTables.set(t,this._tableResizeFrames[e])}),this._tableResizeFrames.length=e.length}_isTableChanging(){var e=this._findTables(),t=!1;return e.length!==this._tableResizeFrames.length?t=!0:Object(oe.a)(e,(e,n)=>{var r=Object(i.a)(n),o=this._tableResizeFrames[e],a=(null==o?void 0:o.columnsCount)!==this._getTableDeterminantElements(r,"horizontal").length,s=(null==o?void 0:o.rowsCount)!==this._getTableDeterminantElements(r,"vertical").length;if(a||s)return t=!0,!1}),t}_removeResizeFrames(e){var t;Object(oe.a)(this._tableResizeFrames,(e,t)=>{if(t.$frame){var n,r=".".concat("dx-htmleditor-column-resizer",", .").concat("dx-htmleditor-row-resizer");this._detachSeparatorEvents(null===(n=t.$frame)||void 0===n?void 0:n.find(r)),t.$frame.remove()}}),null===(t=this._framesForTables)||void 0===t||t.clear(),e&&(this._tableResizeFrames=[])}_detachSeparatorEvents(e){e.each((e,t)=>{m.a.off(t,mt)})}_createTableResizeFrame(){return Object(i.a)("<div>").addClass("dx-table-resize-frame").appendTo(this._quillContainer)}_updateFramesPositions(){Object(oe.a)(this._tableResizeFrames,(e,t)=>{this._updateFramePosition(t.$table,t.$frame)})}_updateFramePosition(e,t){var{height:n,width:r,top:i,left:o}=Object(Ye.a)(e.get(0)),{top:a,left:s}=Object(Ye.a)(this.quill.root);t.css({height:n,width:r,top:i-a,left:o-s}),Object(z.e)(t,{left:0,top:0})}_updateFramesSeparators(e){Object(oe.a)(this._tableResizeFrames,(t,n)=>{e?this._updateFrameSeparators(n,e):(this._updateFrameSeparators(n,"vertical"),this._updateFrameSeparators(n,"horizontal"))})}_isDraggable(e){return e.hasClass("dx-draggable")&&e.is(":visible")}_removeDraggable(e,t){this._isDraggable(e)&&(Object(i.a)(e).dxDraggable("instance").dispose(),Object(i.a)(e).addClass(t))}_getDirectionInfo(e){return"vertical"===e?{lineResizerClass:"dx-htmleditor-row-resizer",sizeFunction:e=>Object(U.h)(e),positionCoordinate:"top",positionStyleProperty:"height",positionCoordinateName:"y"}:{lineResizerClass:"dx-htmleditor-column-resizer",sizeFunction:e=>Object(U.i)(e),positionCoordinate:this.editorInstance.option("rtlEnabled")?"right":"left",positionStyleProperty:"width",positionCoordinateName:"x"}}_getSize(e,t){return t.sizeFunction(e)}_updateFrameSeparators(e,t){for(var n=this._getTableDeterminantElements(e.$table,t),r=n.length-1,o=this._getDirectionInfo(t),s=e.$frame.find(".".concat(o.lineResizerClass)),l={transform:"none"},c=0,u=0;u<=r;u++){c+=this._getSize(n.eq(u),o),Object(a.d)(s[u])||(s[u]=Object(i.a)("<div>").addClass(o.lineResizerClass).appendTo(e.$frame).get(0));var d=Object(i.a)(s[u]);this._removeDraggable(d,o.lineResizerClass),l[o.positionCoordinate]=c-2,Object(i.a)(d).css(l);var h={lineSeparator:s[u],index:u,$determinantElements:n,frame:e,direction:t};this._attachColumnSeparatorEvents(h)}}_getTableDeterminantElements(e,t){return"vertical"===t?e.find("th:first-child, td:first-child"):pe(e)}_attachColumnSeparatorEvents(e){m.a.on(e.lineSeparator,mt,()=>{this._createDraggableElement(e)})}_dragStartHandler(e){var{$determinantElements:t,index:n,frame:r,direction:o,lineSeparator:a}=e,s=this._getDirectionInfo(o);this._isDragging=!0,this._fixColumnsWidth(r.$table),this._startLineSize=parseInt(this._getSize(Object(i.a)(t[n]),s)),this._startTableWidth=Object(U.i)(r.$table),this._startLineSeparatorPosition=parseInt(Object(i.a)(a).css(s.positionCoordinate)),this._nextLineSize=0,t[n+1]?this._nextLineSize=parseInt(this._getSize(Object(i.a)(t[n+1]),s)):"horizontal"===o&&he(r.$table,{quill:this.quill})}_shouldRevertOffset(e){return"horizontal"===e&&this.editorInstance.option("rtlEnabled")}_isNextColumnWidthEnough(e,t,n){if(!this._nextLineSize)return!0;if(e>=this._minColumnWidth){var r=this._nextColumnOffsetLimit?n<this._nextColumnOffsetLimit:n<0,i=Math.abs(this._getWidthStyleValue(t)-Object(U.i)(t))>3;return r||!i}return!1}_shouldSetNextColumnWidth(e){return this._nextLineSize&&e>0}_horizontalDragHandler(e){var{currentLineNewSize:t,directionInfo:n,eventOffset:r,$determinantElements:i,index:o,frame:a}=e,s=this._nextLineSize&&this._nextLineSize-r,l=t>=this._minColumnWidth,c=ge(a.$table,o),u=ge(a.$table,o+1),d=Object(U.i)(c.eq(0))-t;if(l)if(this._isNextColumnWidthEnough(s,i.eq(o+1),r)){me(this,{elements:c,property:n.positionStyleProperty,value:t}),this._shouldSetNextColumnWidth(s)&&me(this,{elements:u,property:n.positionStyleProperty,value:s});var h=Math.abs(this._startTableWidth-Object(U.i)(a.$table))<3;(Math.abs(d)>3||!this._nextLineSize&&h)&&(me(this,{elements:c,property:n.positionStyleProperty,value:Object(U.i)(c.eq(0))}),s+=t-Object(U.i)(c.eq(0)),this._shouldSetNextColumnWidth(s)&&me(this,{elements:u,property:n.positionStyleProperty,value:s}))}else this._nextColumnOffsetLimit=this._nextColumnOffsetLimit||r;this._$highlightedElement.css(n.positionCoordinate,this._startLineSeparatorPosition+r+d+"px")}_verticalDragHandler(e){var{currentLineNewSize:t,directionInfo:n,eventOffset:r,$determinantElements:i,index:o,frame:a}=e,s=Math.max(t,this._minRowHeight);me(this,{elements:ge(a.$table,o,"vertical"),property:n.positionStyleProperty,value:s});var l=Object(U.h)(i.eq(o))-t;this._$highlightedElement.css(n.positionCoordinate,this._startLineSeparatorPosition+r+l+"px")}_dragMoveHandler(e,t){var{$determinantElements:n,index:r,frame:i,direction:o}=t,a=this._getDirectionInfo(o),s=e.offset[a.positionCoordinateName];this.editorInstance._saveValueChangeEvent(e),this._shouldRevertOffset(o)&&(s=-s);var l=this._startLineSize+s;"horizontal"===o?this._horizontalDragHandler({currentLineNewSize:l,directionInfo:a,eventOffset:s,$determinantElements:n,index:r,frame:i}):this._verticalDragHandler({currentLineNewSize:l,directionInfo:a,eventOffset:s,$determinantElements:n,index:r,frame:i}),this._updateFramePosition(i.$table,i.$frame)}_dragEndHandler(e){var t;null===(t=this._$highlightedElement)||void 0===t||t.remove(),this._isDragging=void 0,this._nextColumnOffsetLimit=void 0,this._tableLastWidth(e.frame,Object(U.i)(e.frame.$table)),this._updateFramesPositions(),this._updateFramesSeparators()}_isLastColumnResizing(e){var{$determinantElements:t,index:n}=e;return!Object(a.d)(t[n+1])}_getBoundaryConfig(e){var t={};if("vertical"===e.direction)t.boundary=e.frame.$table,t.boundOffset={bottom:Object(Ee.f)()?-Object(U.d)(Object(Ee.d)()):-Object(U.h)(this._quillContainer),top:0,left:0,right:0};else if(this._isLastColumnResizing(e)){var n=this.editorInstance._getContent();t.boundary=n,t.boundOffset={bottom:0,top:0,left:n.css("paddingLeft"),right:n.css("paddingRight")}}else t.boundary=e.frame.$table;return t}_createDraggableElement(e){var t,n=this._getBoundaryConfig(e),r="vertical"===e.direction?"dx-htmleditor-highlighted-row":"dx-htmleditor-highlighted-column";null===(t=this._$highlightedElement)||void 0===t||t.remove(),this._$highlightedElement=Object(i.a)("<div>").addClass("".concat(r)).insertAfter(Object(i.a)(e.lineSeparator));var a={contentTemplate:null,allowMoveByClick:!1,dragDirection:e.direction,onDragMove:t=>{var{component:n,event:r}=t;this._dragMoveHandler(r,e)},onDragStart:()=>{this._dragStartHandler(e)},onDragEnd:()=>{this._dragEndHandler(e)}};Object(o.a)(a,n),this._currentDraggableElement=this.editorInstance._createComponent(e.lineSeparator,Z.a,a)}_fixColumnsWidth(e){var t=this._getTableDeterminantElements(e);Object(oe.a)(t,(t,n)=>{var r=Object(U.i)(n);me(this,{elements:ge(e,t),property:"width",value:Math.max(r,this._minColumnWidth)})})}_getColumnElementsSum(e){var t=[],n=0;return Object(oe.a)(e,(e,r)=>{var o=Object(i.a)(r),a=this._getWidthStyleValue(o)||Object(U.i)(o);t[e]=Math.max(a,this._minColumnWidth),n+=t[e]}),{columnsWidths:t,columnsSum:n}}_setColumnsRatioWidth(e,t,n,r){Object(oe.a)(e,e=>{me(this,{elements:ge(r,e),property:"width",value:t>0?this._minColumnWidth+Math.round((n[e]-this._minColumnWidth)*t):this._minColumnWidth})})}_updateColumnsWidth(e,t){var n=this._getTableDeterminantElements(e),r=this._tableResizeFrames[t];r||(this._tableResizeFrames[t]={}),r=this._tableResizeFrames[t];var i,o=this._tableLastWidth(r)||Object(U.i)(e),{columnsWidths:a,columnsSum:s}=this._getColumnElementsSum(n),l=n.length*this._minColumnWidth;i=s>l?(o-l)/(s-l):-1,this._tableLastWidth(r,i>0?o:l),this._setColumnsRatioWidth(n,i,a,e)}_updateTablesColumnsWidth(e){Object(oe.a)(e,(e,t)=>{this._updateColumnsWidth(Object(i.a)(t),e)})}option(e,t){"tableResizing"!==e?"enabled"===e?(this.enabled=t,t?this._applyResizing(!0):this.clean()):["minColumnWidth","minRowHeight"].includes(e)&&(this["_".concat(e)]=this._minSizeLimit(e,t)):this.handleOptionChangeValue(t)}clean(){this._removeResizeFrames(!0),this._detachEvents(),pt.a.remove(this._resizeHandlerWithContext),clearTimeout(this._windowResizeTimeout),this._resizeHandlerWithContext=void 0,this._isDragging=void 0,this._startTableWidth=void 0,clearTimeout(this._attachResizerTimeout)}}var _t=n("uVfO"),bt=Object(g.a)("dxcontextmenu","dxHtmlEditorTableContextMenu"),yt=H,Ct=e=>K.a.format("dxHtmlEditor-".concat(Object(se.a)(e)));w.a&&(yt=class extends H{constructor(e,t){super(e,t),this.enabled=!!t.enabled,this._quillContainer=this.editorInstance._getQuillContainer(),this.addCleanCallback(this.prepareCleanCallback()),this._formatHandlers=Te(this),this._tableFormats=ue(e),this.enabled&&this._enableContextMenu(t.items)}_enableContextMenu(e){var t;null===(t=this._contextMenu)||void 0===t||t.dispose(),this._contextMenu=this._createContextMenu(e),this._attachEvents()}_attachEvents(){m.a.on(this.editorInstance._getContent(),bt,this._prepareContextMenuHandler())}_detachEvents(){m.a.off(this.editorInstance._getContent(),bt)}_createContextMenu(e){var t=Object(i.a)("<div>").appendTo(this.editorInstance.$element()),n=this._getMenuConfig(e);return this.editorInstance._createComponent(t,_t.a,n)}showPropertiesForm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cell",t=Object(i.a)(this._targetElement).closest("cell"===e?"th, td":"table");this._contextMenu.hide(),this._formatHandlers["".concat(e,"Properties")](t),this._targetElement=null}_isAcceptableItem(e,t){return!e||e===t}_handleObjectItem(e){if(e.name&&this._isAcceptableItem(e.widget,"dxButton")){var t=this._prepareMenuItemConfig(e.name);return Object(o.a)(!0,t,e)}return e.items?(e.items=this._prepareMenuItems(e.items),e):e}_prepareMenuItemConfig(e){var t,n,r=null!==(t=ke[e])&&void 0!==t?t:e,i=Object(se.e)(e);return{text:Ct(i),icon:r.toLowerCase(),onClick:null!==(n=this._formatHandlers[e])&&void 0!==n?n:qe(this,e)}}_prepareMenuItems(e){var t=[];return Object(oe.a)(e,(e,n)=>{var r;Object(a.j)(n)?r=this._handleObjectItem(n):Object(a.o)(n)&&(r=this._prepareMenuItemConfig(n)),r&&t.push(r)}),t}_getMenuConfig(e){var t=[{text:Ct("insert"),items:["insertHeaderRow","insertRowAbove","insertRowBelow",Object(o.a)(this._prepareMenuItemConfig("insertColumnLeft"),{beginGroup:!0}),"insertColumnRight"]},{text:Ct("delete"),items:["deleteColumn","deleteRow","deleteTable"]},Object(o.a)(this._prepareMenuItemConfig("cellProperties"),{onClick:e=>{this.showPropertiesForm("cell")}}),Object(o.a)(this._prepareMenuItemConfig("tableProperties"),{onClick:e=>{this.showPropertiesForm("table")}})],n=this._prepareMenuItems(null!=e&&e.length?e:t);return{target:this._quillContainer,showEvent:null,hideOnParentScroll:!1,items:n}}_prepareContextMenuHandler(){return e=>{this._isTableTarget(e.target)&&(this._targetElement=e.target,this._setContextMenuPosition(e),this._contextMenu.show(),e.preventDefault())}}_setContextMenuPosition(e){var t=this._quillContainer.get(0).getBoundingClientRect();this._contextMenu.option({position:{my:"left top",at:"left top",collision:"fit fit",offset:{x:e.clientX-t.left,y:e.clientY-t.top}}})}_isTableTarget(e){return!!Object(i.a)(e).closest(".dx-htmleditor-content td, .dx-htmleditor-content th").length}clean(){this._detachEvents()}option(e,t){if("tableContextMenu"!==e){if("enabled"===e)this.enabled=t,t?this._enableContextMenu():this.clean();else if("items"===e){var n;null===(n=this._contextMenu)||void 0===n||n.dispose(),this._contextMenu=this._createContextMenu(t)}}else this.handleOptionChangeValue(t)}prepareCleanCallback(){return()=>{this.clean()}}});var Ot=yt,wt=n("t66f"),xt={};if(w.a){var It=w.a.import("blots/embed");(xt=class extends It{static create(e){var t=super.create();return t.setAttribute("spellcheck",!1),t.dataset.marker=e.marker,t.dataset.mentionValue=e.value,t.dataset.id=e.id,this.renderContent(t,e),t}static value(e){return{marker:e.dataset.marker,id:e.dataset.id,value:e.dataset.mentionValue}}static renderContent(e,t){var n=this._templates.get(t.marker);n?n.render({model:t,container:e}):this.baseContentRender(e,t)}static baseContentRender(e,t){var n=Object(i.a)("<span>").text(t.marker);Object(i.a)(e).append(n).append(t.value)}static addTemplate(e,t){this._templates.set(e,t)}static removeTemplate(e){this._templates.delete(e)}}).blotName="mention",xt.tagName="span",xt.className="dx-mention",xt._templates=new Map}var St=xt,Et=H;if(w.a){var jt={ARROW_UP:"upArrow",ARROW_DOWN:"downArrow",ARROW_LEFT:"leftArrow",ARROW_RIGHT:"rightArrow",ENTER:"enter",ESCAPE:"escape",SPACE:"space",PAGE_UP:"pageUp",PAGE_DOWN:"pageDown",END:"end",HOME:"home"},kt=[jt.ARROW_LEFT,jt.ARROW_RIGHT,jt.PAGE_UP,jt.PAGE_DOWN,jt.END,jt.HOME],Tt=[" ","\n"];w.a.register({"formats/mention":St},!0),Et=class extends nt{_getDefaultOptions(){var e=super._getDefaultOptions();return Object(o.a)(e,{itemTemplate:"item",valueExpr:"this",displayExpr:"this",template:null,searchExpr:null,searchTimeout:500,minSearchLength:0})}constructor(e,t){super(e,t),this._mentions={},t.mentions.forEach(e=>{var t=e.marker;t||(e.marker=t="@");var n=e.template;if(n){var r=this.editorInstance._getTemplate(n);r&&St.addTemplate(t,r)}this._mentions[t]=Object(o.a)({},this._getDefaultOptions(),e)}),this._attachKeyboardHandlers(),this.addCleanCallback(this.clean.bind(this)),this.quill.on("text-change",this.onTextChange.bind(this))}_attachKeyboardHandlers(){this.quill.keyboard.addBinding({key:jt.ARROW_UP},this._moveToItem.bind(this,"prev")),this.quill.keyboard.addBinding({key:jt.ARROW_DOWN},this._moveToItem.bind(this,"next")),this.quill.keyboard.addBinding({key:[jt.ENTER,jt.SPACE]},this._selectItemHandler.bind(this));var e=this.quill.keyboard.bindings[jt.ENTER];e.unshift(e.pop()),this.quill.keyboard.addBinding({key:jt.ESCAPE},this._escapeKeyHandler.bind(this)),this.quill.keyboard.addBinding({key:[jt.ARROW_LEFT,jt.ARROW_RIGHT],shiftKey:!0},this._ignoreKeyHandler.bind(this)),this.quill.keyboard.addBinding({key:kt},this._ignoreKeyHandler.bind(this))}_moveToItem(e){var t=this._list.getDataSource();if(this._isMentionActive&&!t.isLoading()){var n="next"===e?"first":"last",r=Object(i.a)(this._list.option("focusedElement"))[e]();r=r.length?r:this._activeListItems[n](),this._list.option("focusedElement",Object(s.a)(r)),this._list.scrollToItem(r)}return!this._isMentionActive}_ignoreKeyHandler(){return!this._isMentionActive}_fitIntoRange(e,t,n){return e>n?t:e<t?n:e}_selectItemHandler(){return this._isMentionActive&&(this._list.option("items").length?this._list.selectItem(this._list.option("focusedElement")):this._popup.hide()),!this._isMentionActive}_escapeKeyHandler(){return this._isMentionActive&&this._popup.hide(),!this._isMentionActive}renderList(e,t){this.compileGetters(this.options),super.renderList(e,t)}compileGetters(e){var{displayExpr:t,valueExpr:n}=e;this._valueGetter=Object(wt.a)(t),this._idGetter=Object(wt.a)(n)}_getListConfig(e){var t=super._getListConfig(e);return Object(o.a)(t,{itemTemplate:this.options.itemTemplate,onContentReady:()=>{this._hasSearch&&(this._popup.repaint(),this._focusFirstElement(),this._hasSearch=!1)}})}insertEmbedContent(){var e=this._activeMentionConfig.marker.length,t=e+this._searchValue.length,n=this.getPosition(),r=this._list.option("selectedItem"),i={value:this._valueGetter(r),id:this._idGetter(r),marker:this._activeMentionConfig.marker},o=w.a.import("delta"),a=Math.max(0,n-e),s=(new o).retain(a).delete(t).insert({mention:i}).insert(" ");this.quill.updateContents(s),this.quill.setSelection(a+2)}_getLastInsertOperation(e){var t=e[e.length-1];if("insert"in t)return t;var n="delete"in t;if(n&&e.length>=2){var r=e[e.length-2];if(n&&"insert"in r)return r}return null}onTextChange(e,t,n){if("user"===n){var r=e.ops[e.ops.length-1];if(this._isMentionActive&&this._isPopupVisible)this._processSearchValue(r)&&this._filterList(this._searchValue);else{var{ops:i}=e,o=this._getLastInsertOperation(i);o&&this.checkMentionRequest(o,i)}}}get _isPopupVisible(){var e;return null===(e=this._popup)||void 0===e?void 0:e.option("visible")}_processSearchValue(e){if("insert"in e)this._searchValue+=e.insert;else{if(!this._searchValue.length||e.delete>1)return this._popup.hide(),!1;this._searchValue=this._searchValue.slice(0,-1)}return!0}checkMentionRequest(e,t){var{insert:n}=e,r=this.quill.getSelection();if(n&&Object(a.o)(n)&&r&&!this._isMarkerPartOfText(t[0].retain)&&(this._activeMentionConfig=this._mentions[n],this._activeMentionConfig)){this._updateList(this._activeMentionConfig);var i=r.index&&"\n"===this._getCharByIndex(r.index-1);this.savePosition(r.index+i),this._popup.option("position",this._popupPosition),this._searchValue="",this._popup.show()}}_isMarkerPartOfText(e){return!(!e||-1!==Tt.indexOf(this._getCharByIndex(e-1)))}_getCharByIndex(e){return this.quill.getContents(e,1).ops[0].insert}_updateList(e){var{dataSource:t,displayExpr:n,valueExpr:r,itemTemplate:i,searchExpr:o}=e;this.compileGetters({displayExpr:n,valueExpr:r}),this._list.unselectAll(),this._list.option({dataSource:t,displayExpr:n,itemTemplate:i,searchExpr:o})}_filterList(e){if(this._isMinSearchLengthExceeded(e)){var t=this._activeMentionConfig.searchTimeout;t?(clearTimeout(this._searchTimer),this._searchTimer=setTimeout(()=>{this._search(e)},t)):this._search(e)}else this._resetFilter()}_isMinSearchLengthExceeded(e){return e.length>=this._activeMentionConfig.minSearchLength}_resetFilter(){clearTimeout(this._searchTimer),this._search(null)}_search(e){this._hasSearch=!0,this._list.option("searchValue",e)}_focusFirstElement(){if(this._list){var e=this._activeListItems.first();this._list.option("focusedElement",Object(s.a)(e)),this._list.scrollToItem(e)}}get _popupPosition(){var e=this.getPosition(),{left:t,top:n,height:r}=this.quill.getBounds(e?e-1:e),{left:o,top:a}=Object(i.a)(this.quill.root).offset();return{of:m.a.Event("positionEvent",{pageX:o+t,pageY:a+n}),offset:{v:r},my:"top left",at:"top left",collision:{y:"flip",x:"flipfit"}}}_getPopupConfig(){return Object(o.a)(super._getPopupConfig(),{hideOnParentScroll:!1,onShown:()=>{this._isMentionActive=!0,this._hasSearch=!1,this._focusFirstElement()},onHidden:()=>{this._list.unselectAll(),this._list.option("focusedElement",null),this._isMentionActive=!1,this._search(null)},focusStateEnabled:!1})}get _activeListItems(){return this._list.itemElements().filter(":not(.".concat("dx-state-disabled",")"))}clean(){Object.keys(this._mentions).forEach(e=>{this._mentions[e].template&&St.removeTemplate(e)})}}}var At=Et;class Dt{constructor(){if(!Dt.initialized){var e=this.getQuill(),t=e.import("attributors/style/direction");e.register({"formats/align":B,"formats/direction":t,"formats/font":M,"formats/size":N,"formats/extendedImage":k,"formats/link":D,"modules/toolbar":Ge,"modules/dropImage":Xe,"modules/variables":st,"modules/resizing":ht,"modules/tableResizing":vt,"modules/tableContextMenu":Ot,"modules/mentions":At,"themes/basic":S},!0),this._customModules=[],Dt._initialized=!0}}createEditor(e,t){return new(this.getQuill())(e,t)}registerModules(e){var t=RegExp("modules/*"),n=this.getQuill(),r=e=>!!n.imports[e];for(var i in e)t.test(i)&&!r(i)&&this._customModules.push(i.slice(8));n.register(e,!0)}getRegisteredModuleNames(){return this._customModules}getQuill(){return x()}}var Pt=Dt;var Mt=new class{constructor(){this._converters={}}addConverter(e,t){this._converters[e]=t}getConverter(e){return this._converters[e]}};class Ft{setQuillInstance(e){this.quillInstance=e}toHtml(){if(this.quillInstance)return this._isQuillEmpty()?"":this.quillInstance.getSemanticHTML(0,this.quillInstance.getLength()+1)}_isQuillEmpty(){var e=this.quillInstance.getContents();return 1===e.length()&&this._isDeltaEmpty(e)}_isDeltaEmpty(e){return e.reduce((e,t)=>{var{insert:n}=t;return-1!==n.indexOf("\n")})}}Mt.addConverter("delta",Ft);var Nt=e=>{var t=e.import("delta");return(e,n)=>{var r=n.ops.slice(),i=r[0];i.insert=i.insert.replace(/^\s+/,"");var o,a,s,l=i.insert.match(/^(\S+)\s+/),c=l&&function(e){var t=e.getAttribute("style");if(t){var n=t.replace(/\n+/g,"").match(/level(\d+)/);return n?n[1]-1:0}return!1}(e);return l&&!1!==c?(i.insert=i.insert.substring(l[0].length,i.insert.length),(a=(o=r)[o.length-1]).insert=a.insert.trim(),r.push({insert:"\n",attributes:{list:(s=l,s[1].match(/\S+\./)?"ordered":"bullet"),indent:c}}),new t(r)):n}};var Rt=class{constructor(e,t){this._editorInstance=e,this._popupUserConfig=t,this._renderPopup(),this._attachOptionChangedHandler()}_renderPopup(){var e=this._editorInstance,t=Object(i.a)("<div>").addClass("dx-formdialog").appendTo(e.$element()),n=this._getPopupConfig();return e._createComponent(t,Je.default,n)}_attachOptionChangedHandler(){var e;null===(e=this._popup)||void 0===e||e.on("optionChanged",e=>{var{name:t,value:n}=e;"title"===t&&this._updateFormLabel(n)})}_escKeyHandler(){this._popup.hide()}_addEscapeHandler(e){e.component.registerKeyHandler("escape",this._escKeyHandler.bind(this))}_isSmallScreen(){var e=Object(Ee.f)()?Object(Ee.b)():null;return"phone"===C.a.real().deviceType||"xs"===e}_getPopupConfig(){return Object(o.a)({onInitialized:e=>{this._popup=e.component,this._popup.on("hiding",()=>{this.deferred.reject()}),this._popup.on("shown",()=>{this._form.focus()})},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,fullScreen:this._isSmallScreen(),contentTemplate:e=>{var t=Object(i.a)("<div>").appendTo(e);this._renderForm(t,{onEditorEnterKey:e=>{var{component:t,dataField:n,event:r}=e;this.hide(t.option("formData"),r)},customizeItem:e=>{"simple"===e.itemType&&(e.editorOptions=Object(o.a)(!0,{},e.editorOptions,{onInitialized:this._addEscapeHandler.bind(this)}))}})},toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{onInitialized:this._addEscapeHandler.bind(this),text:K.a.format("OK"),onClick:e=>{var{event:t}=e;this.hide(this._form.option("formData"),t)}}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{onInitialized:this._addEscapeHandler.bind(this),text:K.a.format("Cancel"),onClick:()=>{this._popup.hide()}}}],_wrapperClassExternal:"dx-formdialog"},this._popupUserConfig)}_renderForm(e,t){e.addClass("dx-formdialog-form"),this._form=this._editorInstance._createComponent(e,be.default,t),this._updateFormLabel()}_updateFormLabel(e){var t,n=null!=e?e:this.popupOption("title");null===(t=this._form)||void 0===t||t.$element().attr("aria-label",n)}show(e){if(!this._popup.option("visible")){this.deferred=new f.a;var t=Object(o.a)({},e);return this._form.option(t),this._popup.show(),this.deferred.promise()}}hide(e,t){this.deferred.resolve(e,t),this._popup.hide()}popupOption(e,t){return this._popup.option.apply(this._popup,arguments)}},Bt="ios"===C.a.current().platform,Lt=d.a.inherit({_getDefaultOptions:function(){return Object(o.a)(this.callBase(),{focusStateEnabled:!0,valueType:"html",placeholder:"",toolbar:null,variables:null,mediaResizing:null,tableResizing:null,mentions:null,customizeModules:null,tableContextMenu:null,allowSoftLineBreak:!1,formDialogOptions:null,stylingMode:"outlined"})},_init:function(){this.callBase(),this._cleanCallback=Object(p.default)(),this._contentInitializedCallback=Object(p.default)()},_getAnonymousTemplateName:function(){return"htmlContent"},_initTemplates:function(){this._templateManager.addDefaultTemplates({htmlContent:new u.a}),this.callBase()},_focusTarget:function(){return this._getContent()},_getContent:function(){return this.$element().find(".".concat("dx-htmleditor-content"))},_focusInHandler:function(e){var{relatedTarget:t}=e;this._shouldSkipFocusEvent(t)||(this._toggleFocusClass(!0,this.$element()),this.callBase.apply(this,arguments))},_focusOutHandler:function(e){var{relatedTarget:t}=e;this._shouldSkipFocusEvent(t)||(this._toggleFocusClass(!1,this.$element()),this.callBase.apply(this,arguments))},_shouldSkipFocusEvent:function(e){return Object(i.a)(e).hasClass("ql-clipboard")},_initMarkup:function(){this._$htmlContainer=Object(i.a)("<div>").addClass("dx-quill-container"),this.$element().attr("role","application").addClass("dx-htmleditor").wrapInner(this._$htmlContainer),this._renderStylingMode();var e=this._getTemplate("htmlContent");this._$templateResult=e&&e.render({container:Object(s.a)(this._$htmlContainer),noModel:!0,transclude:!0}),this._renderSubmitElement(),this.callBase(),this._updateContainerMarkup()},_renderSubmitElement:function(){this._$submitElement=Object(i.a)("<textarea>").addClass("dx-htmleditor-submit-element").attr("hidden",!0).appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue:function(e){this._getSubmitElement().val(e)},_getSubmitElement:function(){return this._$submitElement},_createNoScriptFrame:function(){return Object(i.a)("<iframe>").css("display","none").attr({srcdoc:"",id:"xss-frame",sandbox:"allow-same-origin"})},_removeXSSVulnerableHtml:function(e){var t=this._createNoScriptFrame().appendTo("body"),n=t.get(0).contentWindow.document.body;n.innerHTML=e;var r=e=>{if(e.attributes)for(var t=0;t<e.attributes.length;t++){var n=e.attributes[t].name;n.startsWith("on")&&e.removeAttribute(n)}if(e.childNodes)for(var i=0;i<e.childNodes.length;i++)r(e.childNodes[i])};r(n),n.querySelectorAll("script").forEach(e=>{e.remove()});var i=n.innerHTML;return t.remove(),i},_updateContainerMarkup:function(){var e=this.option("value");if(this._isMarkdownValue()&&(this._prepareMarkdownConverter(),e=this._markdownConverter.toHtml(e)),e){var t=this._removeXSSVulnerableHtml(e);this._$htmlContainer.html(t)}},_prepareMarkdownConverter:function(){var e=Mt.getConverter("markdown");if(!e)throw h.a.Error("E1051","markdown");this._markdownConverter=new e},_render:function(){this._prepareConverters(),this.callBase()},_prepareQuillRegistrator:function(){this._quillRegistrator||(this._quillRegistrator=new Pt)},_getRegistrator:function(){return this._prepareQuillRegistrator(),this._quillRegistrator},_prepareConverters:function(){if(!this._deltaConverter){var e=Mt.getConverter("delta");e&&(this._deltaConverter=new e)}"markdown"!==this.option("valueType")||this._markdownConverter||this._prepareMarkdownConverter()},_renderContentImpl:function(){this._contentRenderedDeferred=new f.a;var e=this._contentRenderedDeferred.promise();return this.callBase(),this._renderHtmlEditor(),this._renderFormDialog(),this._addKeyPressHandler(),e},_pointerMoveHandler:function(e){Bt&&e.stopPropagation()},_attachFocusEvents:function(){Object(l.c)(this.callBase.bind(this))},_addKeyPressHandler:function(){var e=Object(g.a)("keydown","".concat(this.NAME,"TextChange"));m.a.on(this._$htmlContainer,e,this._keyDownHandler.bind(this))},_keyDownHandler:function(e){this._saveValueChangeEvent(e)},_renderHtmlEditor:function(){var e=this.option("customizeModules"),t=this._getModulesConfig();Object(a.h)(e)&&e(t),this._quillInstance=this._getRegistrator().createEditor(this._$htmlContainer[0],{placeholder:this.option("placeholder"),readOnly:this.option("readOnly")||this.option("disabled"),modules:t,theme:"basic"}),this._deltaConverter.setQuillInstance(this._quillInstance),this._textChangeHandlerWithContext=this._textChangeHandler.bind(this),this._quillInstance.on("text-change",this._textChangeHandlerWithContext),this._renderScrollHandler(),this._hasTranscludedContent()?this._updateContentTask=Object(l.j)(()=>{this._applyTranscludedContent()}):this._finalizeContentRendering()},_renderScrollHandler:function(){var e=this._getContent(),t=Object(b.b)(e);m.a.on(e,Object(g.a)(_.a.init,this.NAME),t,l.n),m.a.on(e,Object(g.a)(y.a.move,this.NAME),this._pointerMoveHandler.bind(this))},_applyTranscludedContent:function(){var e=this.option("value");if(!Object(a.d)(e)){var t=this._deltaConverter.toHtml(),n=this._quillInstance.clipboard.convert({html:t});if(n.ops.length)return void this._quillInstance.setContents(n)}this._finalizeContentRendering()},_hasTranscludedContent:function(){return this._$templateResult&&this._$templateResult.length},_getModulesConfig:function(){var e=this._getRegistrator().getQuill(),t=Nt(e);return Object(o.a)({},{table:!0,toolbar:this._getModuleConfigByOption("toolbar"),variables:this._getModuleConfigByOption("variables"),resizing:this._getModuleConfigByOption("mediaResizing"),tableResizing:this._getModuleConfigByOption("tableResizing"),tableContextMenu:this._getModuleConfigByOption("tableContextMenu"),mentions:this._getModuleConfigByOption("mentions"),uploader:{onDrop:e=>this._saveValueChangeEvent(Object(v.Event)(e)),imageBlot:"extendedImage"},keyboard:{onKeydown:e=>this._saveValueChangeEvent(Object(v.Event)(e))},clipboard:{onPaste:e=>this._saveValueChangeEvent(Object(v.Event)(e)),onCut:e=>this._saveValueChangeEvent(Object(v.Event)(e)),matchers:[["p.MsoListParagraphCxSpFirst",t],["p.MsoListParagraphCxSpMiddle",t],["p.MsoListParagraphCxSpLast",t]]},multiline:Boolean(this.option("allowSoftLineBreak"))},this._getCustomModules())},_getModuleConfigByOption:function(e){var t=this.option(e),n={};if(Object(a.d)(t))return Array.isArray(t)?n[e]=t:n=t,Object(o.a)(this._getBaseModuleConfig(),n)},_getBaseModuleConfig:function(){return{editorInstance:this}},_getCustomModules:function(){var e={};return this._getRegistrator().getRegisteredModuleNames().forEach(t=>{e[t]=this._getBaseModuleConfig()}),e},_textChangeHandler:function(e,t,n){var r=this._deltaConverter.toHtml(),i=this._isMarkdownValue()?this._updateValueByType("markdown",r):r,o=this.option("value");o===i||this._isNullValueConverted(o,i)||(this._isEditorUpdating=!0,this.option("value",i)),this._finalizeContentRendering()},_isNullValueConverted:function(e,t){return null===e&&""===t},_finalizeContentRendering:function(){this._contentRenderedDeferred&&(this.clearHistory(),this._contentInitializedCallback.fire(),this._contentRenderedDeferred.resolve(),this._contentRenderedDeferred=void 0)},_updateValueByType:function(e,t){var n=this._markdownConverter;if(Object(a.d)(n)){var r=Object(l.g)(t,this.option("value"));return"markdown"===e?n.toMarkdown(r):n.toHtml(r)}},_isMarkdownValue:function(){return"markdown"===this.option("valueType")},_resetEnabledState:function(){if(this._quillInstance){var e=!(this.option("readOnly")||this.option("disabled"));this._quillInstance.enable(e)}},_renderFormDialog:function(){var e=Object(o.a)(!0,{width:"auto",height:"auto",closeOnOutsideClick:!0},this.option("formDialogOptions"));this._formDialog=new Rt(this,e)},_getStylingModePrefix:function(){return"dx-htmleditor-"},_getQuillContainer:function(){return this._$htmlContainer},_moduleOptionChanged:function(e,t){var n,r=null===(n=this._quillInstance)||void 0===n?void 0:n.getModule(e);if(Boolean(r)){var i,o=null===(i=t.fullName)||void 0===i?void 0:i.split("."),a=2===o.length?o[1]:t.name;r.option(a,t.value)}else this._invalidate()},_optionChanged:function(e){switch(e.name){case"value":if(this._quillInstance)if(this._isEditorUpdating)this._isEditorUpdating=!1;else{var t=this._isMarkdownValue()?this._updateValueByType("HTML",e.value):e.value;this._updateHtmlContent(t)}else this._$htmlContainer.html(e.value);this._setSubmitValue(e.value),this.callBase(e);break;case"placeholder":case"variables":case"toolbar":case"mentions":case"customizeModules":case"allowSoftLineBreak":this._invalidate();break;case"tableResizing":this._moduleOptionChanged("tableResizing",e);break;case"valueType":this._prepareConverters();var n=this._updateValueByType(e.value);"html"===e.value&&this._quillInstance?this._updateHtmlContent(n):this.option("value",n);break;case"stylingMode":this._renderStylingMode();break;case"readOnly":case"disabled":this.callBase(e),this._resetEnabledState();break;case"formDialogOptions":this._renderFormDialog();break;case"tableContextMenu":this._moduleOptionChanged("tableContextMenu",e);break;case"mediaResizing":e.previousValue&&e.value?this._quillInstance.getModule("resizing").option(e.name,e.value):this._invalidate();break;case"width":this.callBase(e),this._repaintToolbar();break;default:this.callBase(e)}},_repaintToolbar:function(){var e=this._quillInstance.getModule("toolbar");e&&e.repaint()},_updateHtmlContent:function(e){var t=this._quillInstance.clipboard.convert({html:e});this._quillInstance.setContents(t)},_clean:function(){this._quillInstance&&(m.a.off(this._getContent(),".".concat(this.NAME)),this._quillInstance.off("text-change",this._textChangeHandlerWithContext),this._cleanCallback.fire()),this._abortUpdateContentTask(),this._cleanCallback.empty(),this._contentInitializedCallback.empty(),this.callBase()},_abortUpdateContentTask:function(){this._updateContentTask&&(this._updateContentTask.abort(),this._updateContentTask=void 0)},_applyQuillMethod(e,t){if(this._quillInstance)return this._quillInstance[e].apply(this._quillInstance,t)},_applyQuillHistoryMethod(e){this._quillInstance&&this._quillInstance.history&&this._quillInstance.history[e]()},addCleanCallback(e){this._cleanCallback.add(e)},addContentInitializedCallback(e){this._contentInitializedCallback.add(e)},register:function(e){this._getRegistrator().registerModules(e),this._quillInstance&&this.repaint()},get:function(e){return this._getRegistrator().getQuill().import(e)},getModule:function(e){return this._applyQuillMethod("getModule",arguments)},getQuillInstance:function(){return this._quillInstance},getSelection:function(e){return this._applyQuillMethod("getSelection",arguments)},setSelection:function(e,t){this._applyQuillMethod("setSelection",arguments)},getText:function(e,t){return this._applyQuillMethod("getText",arguments)},format:function(e,t){this._applyQuillMethod("format",arguments)},formatText:function(e,t,n,r){this._applyQuillMethod("formatText",arguments)},formatLine:function(e,t,n,r){this._applyQuillMethod("formatLine",arguments)},getFormat:function(e,t){return this._applyQuillMethod("getFormat",arguments)},removeFormat:function(e,t){return this._applyQuillMethod("removeFormat",arguments)},clearHistory:function(){this._applyQuillHistoryMethod("clear")},undo:function(){this._applyQuillHistoryMethod("undo")},redo:function(){this._applyQuillHistoryMethod("redo")},getLength:function(){return this._applyQuillMethod("getLength")},getBounds:function(e,t){return this._applyQuillMethod("getBounds",arguments)},delete:function(e,t){this._applyQuillMethod("deleteText",arguments)},insertText:function(e,t,n){this._applyQuillMethod("insertText",arguments)},insertEmbed:function(e,t,n){this._applyQuillMethod("insertEmbed",arguments)},showFormDialog:function(e){return this._formDialog.show(e)},formDialogOption:function(e,t){return this._formDialog.popupOption.apply(this._formDialog,arguments)},focus:function(){this.callBase(),this._applyQuillMethod("focus")},blur:function(){this._applyQuillMethod("blur")}});Object(c.a)("dxHtmlEditor",Lt);var qt=Lt;t.default=qt},hpbx:function(e,t,n){"use strict";var r=n("t66f"),i=n("a8dJ"),o=n("7Cjx"),a=n("sUSw"),s=n("v5W6"),l=n("zAdP"),c=n("lU5B");t.a=class{constructor(e){e=Object(i.g)(e,{}),this._keyGetter=Object(r.a)(this._getKeyExpr(e)),this._nameGetter=Object(r.a)(this._getNameExpr(e)),this._isDirGetter=Object(r.a)(this._getIsDirExpr(e)),this._sizeGetter=Object(r.a)(this._getSizeExpr(e)),this._dateModifiedGetter=Object(r.a)(this._getDateModifiedExpr(e)),this._thumbnailGetter=Object(r.a)(e.thumbnailExpr||"thumbnail")}getItems(e){return[]}renameItem(e,t){}createDirectory(e,t){}deleteItems(e){}moveItems(e,t){}copyItems(e,t){}uploadFileChunk(e,t,n){}abortFileUpload(e,t,n){}downloadItems(e){}getItemsContent(e){}getFileUploadChunkSize(){return 2e5}_convertDataObjectsToFileItems(e,t){var n=[];return Object(a.a)(e,(e,r)=>{var i=this._createFileItem(r,t);n.push(i)}),n}_createFileItem(e,t){var n=this._keyGetter(e),r=new c.a(t,this._nameGetter(e),!!this._isDirGetter(e),n);return r.size=this._sizeGetter(e),void 0===r.size&&(r.size=0),r.dateModified=o.a.deserializeDate(this._dateModifiedGetter(e)),void 0===r.dateModified&&(r.dateModified=new Date),r.isDirectory&&(r.hasSubDirectories=this._hasSubDirs(e)),n||(r.key=r.relativeName),r.thumbnail=this._thumbnailGetter(e)||"",r.dataItem=e,r}_hasSubDirs(e){return!0}_getKeyExpr(e){return e.keyExpr||this._defaultKeyExpr}_defaultKeyExpr(e){if(2!==arguments.length)return Object.prototype.hasOwnProperty.call(e,"__KEY__")?e.__KEY__:null;e.__KEY__=arguments[1]}_getNameExpr(e){return e.nameExpr||"name"}_getIsDirExpr(e){return e.isDirectoryExpr||"isDirectory"}_getSizeExpr(e){return e.sizeExpr||"size"}_getDateModifiedExpr(e){return e.dateModifiedExpr||"dateModified"}_executeActionAsDeferred(e,t){var n=new l.a;try{var r=e();Object(s.m)(r)?Object(l.b)(r).done(e=>n.resolve(t&&e||void 0)).fail(e=>n.reject(e)):n.resolve(t&&r||void 0)}catch(e){return n.reject(e)}return n.promise()}}},lU5B:function(e,t,n){"use strict";var r=n("v5W6"),i=n("ADaq");class o{constructor(){(Object(r.o)(arguments[0])?this._publicCtor:this._internalCtor).apply(this,arguments)}_internalCtor(e,t,n,r){this.name=t||"",this.pathInfo=e&&[...e]||[],this.parentPath=this._getPathByPathInfo(this.pathInfo),this.relativeName=Object(i.f)(this.parentPath,t),this.key=r||this._getPathByPathInfo(this.getFullPathInfo(),!0),this.path=Object(i.f)(this.parentPath,t),this.pathKeys=this.pathInfo.map(e=>{var{key:t}=e;return t}),this.isRoot()||this.pathKeys.push(this.key),this._initialize(n)}_publicCtor(e,t,n){this.path=e||"",this.pathKeys=n||[];for(var r=[],o=Object(i.e)(e,!0),a=0;a<o.length-1;a++){var s=o[a],l={key:this.pathKeys[a]||s,name:Object(i.d)(s)};r.push(l)}this.pathInfo=r,this.relativeName=e,this.name=Object(i.d)(e),this.key=this.pathKeys.length?this.pathKeys[this.pathKeys.length-1]:e,this.parentPath=o.length>1?o[o.length-2]:"",this._initialize(t)}_initialize(e){this.isDirectory=!!e,this.size=0,this.dateModified=new Date,this.thumbnail="",this.tooltipText=""}getFullPathInfo(){var e=[...this.pathInfo];return this.isRoot()||e.push({key:this.key,name:this.name}),e}isRoot(){return""===this.path}getFileExtension(){return this.isDirectory?"":Object(i.c)(this.name)}equals(e){return e&&this.key===e.key}createClone(){var e=new o(this.pathInfo,this.name,this.isDirectory,this.key);return e.key=this.key,e.size=this.size,e.dateModified=this.dateModified,e.thumbnail=this.thumbnail,e.tooltipText=this.tooltipText,e.hasSubDirectories=this.hasSubDirectories,e.dataItem=this.dataItem,e}_getPathByPathInfo(e,t){return e.map(e=>t?Object(i.b)(e.name):e.name).join(i.a)}}t.a=o},mdXo:function(e,t,n){"use strict";n("G188")},xf0j:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,".dx-filemanager .dx-drawer-panel-content.dx-visibility-change-handler{visibility:hidden}.dx-filemanager .dx-drawer-shader{visibility:hidden!important}",""])}}]);