/*! For license information please see 19.cf18721cf69135fbe2e0.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"+tzF":function(t,e,n){"use strict";n.r(e);var i=n("L2JU"),a=n("liG9"),o=n("Ztyd"),s=n.n(o),r=n("0/Vb");function l(t){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==l(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===l(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p={components:{DxAccordion:a.DxAccordion,DxForm:s.a,DxItem:o.DxItem},data:function(){return{backupData:{sendMail:!0,download:!0},RESTORE_FILE_EXTENSION:"sql",restoreFileName:null}},beforeCreate:function(){this.$store.registerModule("Settings",r.a)},destroyed:function(){this.$store.unregisterModule("Settings")},methods:d(d({},Object(i.b)("Settings",["backupDatabase","restoreDatabase"])),{},{onBackupForm:function(){var t=this;this.$bus.emit("checkPin",(function(){return t.backupDatabase(t.backupData)}))},onRestoreForm:function(){var t=this;this.$bus.emit("checkPin",(function(){var e=new FormData;e.append("file",t.$refs.file.files[0]),t.restoreDatabase(e)}))},onFileChange:function(t){var e=t.target.files[0].name;e.split(".").pop()===this.RESTORE_FILE_EXTENSION?this.restoreFileName=e:this.$toasted.show(this.$t("settings.database.notMatchExtension").replace("{extension}",this.RESTORE_FILE_EXTENSION))}})},m=(n("qzwY"),n("KHd+")),h=Object(m.a)(p,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"settings-page"},[e("h2",{staticClass:"content-block"},[t._v("\n        "+t._s(t.$t("settings.database.title"))+"\n    ")]),t._v(" "),e("div",{staticClass:"content-block dx-card responsive-paddings"},[e("div",{staticClass:"settings-database-tab"},[e("DxAccordion",{attrs:{collapsible:!0,items:[{title:t.$t("settings.database.backup"),template:"backupTemplate"},{title:t.$t("settings.database.restore"),template:"restoreTemplate"}]},scopedSlots:t._u([{key:"backupTemplate",fn:function(){return[e("form",{on:{submit:function(e){return e.preventDefault(),t.onBackupForm.apply(null,arguments)}}},[e("DxForm",{ref:"form",attrs:{"form-data":t.backupData,"label-location":t.$devices.phone?"top":"left","scrolling-enabled":!0}},[e("DxItem",{attrs:{"data-field":"sendMail","editor-type":"dxCheckBox",label:{location:"left",text:t.$t("settings.database.sendMail")}}}),t._v(" "),e("DxItem",{attrs:{"data-field":"download","editor-type":"dxCheckBox",label:{location:"left",text:t.$t("settings.database.download")}}}),t._v(" "),e("DxItem",{attrs:{"item-type":"button","button-options":{disabled:!t.backupData.sendMail&&!t.backupData.download,width:150,left:0,type:"default",icon:"far fa-copy",text:t.$t("buttons.backup"),useSubmitBehavior:!0}}})],1)],1)]},proxy:!0},{key:"restoreTemplate",fn:function(){return[e("form",{on:{submit:function(e){return e.preventDefault(),t.onRestoreForm.apply(null,arguments)}}},[e("DxForm",{ref:"form",attrs:{"form-data":t.backupData,"label-location":t.$devices.phone?"top":"left","scrolling-enabled":!0}},[e("DxItem",{scopedSlots:t._u([{key:"default",fn:function(){return[e("div",{staticClass:"upload-browser"},[e("input",{ref:"file",attrs:{type:"file",id:"restoreFile",accept:".".concat(t.RESTORE_FILE_EXTENSION)},on:{change:t.onFileChange}}),t._v(" "),e("label",{attrs:{for:"restoreFile"}},[e("i",{staticClass:"far fa-file-upload"}),t._v("\n                                            "+t._s(t.$t("buttons.chooseFile"))+"\n                                        ")]),t._v(" "),e("span",[t._v(t._s(t.restoreFileName))])])]},proxy:!0}])}),t._v(" "),e("DxItem",{attrs:{"item-type":"button","button-options":{disabled:!t.restoreFileName,width:150,left:0,type:"default",icon:"far fa-undo",text:t.$t("buttons.restore"),useSubmitBehavior:!0}}})],1)],1)]},proxy:!0}])})],1)])])}),[],!1,null,"2ba989d4",null);e.default=h.exports},"0/Vb":function(t,e,n){"use strict";function i(){return{}}var a={backupDatabase:function(t,e){t.commit,t.dispatch,t.getters,t.state,t.rootGetters;return new Promise((function(t,n){axios.post("settings/database/backup",e).then((function(n){if(0==n.data.isOk)t(!1);else{if(e.download){var i=window.URL.createObjectURL(new Blob([n.data])),a=document.createElement("a");a.href=i;var o=n.headers["content-disposition"].split("=").pop();a.setAttribute("download",o),document.body.appendChild(a),a.click()}t(!0)}}))}))},restoreDatabase:function(t,e){t.commit;var n=t.dispatch;t.getters,t.state,t.rootGetters;return new Promise((function(t,i){axios.post("settings/database/restore",e,{headers:{"Content-Type":"multipart/form-data"}}).then((function(e){t(e.data.isOk),e.data.isOk&&n("Auth/fetch",!0,{root:!0})}))}))},runCommand:function(t,e){t.commit;var n=t.dispatch;t.getters,t.state,t.rootGetters;return new Promise((function(t,i){axios.post("settings/command/run",{commands:e}).then((function(e){t(e.data),e.data.isOk&&n("Auth/fetch",!0,{root:!0})}))}))},sendNotification:function(t,e){t.commit,t.dispatch,t.getters,t.state,t.rootGetters;return new Promise((function(t,n){axios.post("settings/notification/send",e).then((function(e){t()}))}))},fetchLog:function(t,e){t.commit,t.dispatch,t.getters,t.state,t.rootGetters;return new Promise((function(t,e){axios.get("settings/log").then((function(e){t(e.data)}))}))},resetState:function(t){(0,t.commit)("resetState")}},o={setState:function(t,e){t.parameters=e.parameters},resetState:function(t){t=Object.assign(t,{})}};e.a={namespaced:!0,state:i,getters:{},actions:a,mutations:o}},B81v:function(t,e,n){(t.exports=n("I1BE")(!1)).push([t.i,".settings-database-tab[data-v-2ba989d4]{padding-top:20px}",""])},GK1R:function(t,e,n){"use strict";n.r(e);var i=n("+dKZ"),a=n("W2II"),o=n("xPQU"),s=n("Ss0b"),r=n("6SE/"),l=n("TE0E"),c=n("UnSs"),d=n("ua+q"),u=n("a8dJ"),p=n("rB1a"),m=n("sUSw"),h=n("v5W6"),f=n("CF5h"),b=n("AmyY"),_=n("Qnq7"),g=n("zAdP"),v=n("hjKj"),I=n("HieS"),y=n("IRHc"),x=_.a.inherit({_activeStateUnit:".dx-accordion-item",_getDefaultOptions:function(){return Object(d.a)(this.callBase(),{hoverStateEnabled:!0,height:void 0,itemTitleTemplate:"title",onItemTitleClick:null,selectedIndex:0,collapsible:!1,multiple:!1,animationDuration:300,deferRendering:!0,selectionByClick:!0,activeStateEnabled:!0,_itemAttributes:{role:"tab"},_animationEasing:"ease"})},_defaultOptionsRules:function(){return this.callBase().concat([{device:function(){return"desktop"===l.a.real().deviceType&&!l.a.isSimulator()},options:{focusStateEnabled:!0}},{device:function(){return Object(y.d)()},options:{animationDuration:200,_animationEasing:"cubic-bezier(0.4, 0, 0.2, 1)"}}])},_itemElements:function(){return this._itemContainer().children(this._itemSelector())},_init:function(){this.callBase(),this.option("selectionRequired",!this.option("collapsible")),this.option("selectionMode",this.option("multiple")?"multiple":"single");var t=this.$element();t.addClass("dx-accordion"),this._$container=Object(a.a)("<div>").addClass("dx-accordion-wrapper"),t.append(this._$container)},_initTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({title:new v.a((function(t,e){if(Object(h.k)(e)){var n=Object(I.a)(e.icon);n&&t.append(n),Object(h.d)(e.title)&&!Object(h.k)(e.title)&&t.append(c.default.createTextNode(e.title))}else Object(h.d)(e)&&t.text(String(e));t.wrapInner(Object(a.a)("<div>").addClass("dx-accordion-item-title-caption"))}),["title","icon"],this.option("integrationOptions.watchMethod"))})},_initMarkup:function(){this._deferredItems=[],this.callBase(),this.setAria({role:"tablist",multiselectable:this.option("multiple")}),Object(u.c)(()=>{var t=this._getSelectedItemIndices();this._renderSelection(t,[])})},_render:function(){this.callBase(),this._updateItemHeightsWrapper(!0)},_itemDataKey:function(){return"dxAccordionItemData"},_itemClass:function(){return"dx-accordion-item"},_itemContainer:function(){return this._$container},_itemTitles:function(){return this._itemElements().find(".dx-accordion-item-title")},_itemContents:function(){return this._itemElements().find(".dx-accordion-item-body")},_getItemData:function(t){return Object(a.a)(t).parent().data(this._itemDataKey())||this.callBase.apply(this,arguments)},_executeItemRenderAction:function(t){t.type||this.callBase.apply(this,arguments)},_itemSelectHandler:function(t){Object(a.a)(t.target).closest(this._itemContents()).length||this.callBase.apply(this,arguments)},_afterItemElementDeleted:function(t,e){this._deferredItems.splice(e.itemIndex,1),this.callBase.apply(this,arguments)},_renderItemContent:function(t){var e=this.callBase(Object(d.a)({},t,{contentClass:"dx-accordion-item-title",templateProperty:"titleTemplate",defaultTemplateName:this.option("itemTitleTemplate")}));this._attachItemTitleClickAction(e);var n=new g.a;Object(h.d)(this._deferredItems[t.index])?this._deferredItems[t.index]=n:this._deferredItems.push(n),(!this.option("deferRendering")||this._getSelectedItemIndices().indexOf(t.index)>=0)&&n.resolve(),n.done(this.callBase.bind(this,Object(d.a)({},t,{contentClass:"dx-accordion-item-body",container:Object(p.a)(Object(a.a)("<div>").appendTo(Object(a.a)(e).parent()))})))},_attachItemTitleClickAction:function(t){var e=Object(b.a)(r.a,this.NAME);o.a.off(t,e),o.a.on(t,e,this._itemTitleClickHandler.bind(this))},_itemTitleClickHandler:function(t){this._itemDXEventHandler(t,"onItemTitleClick")},_renderSelection:function(t,e){this._itemElements().addClass("dx-accordion-item-closed"),this.setAria("hidden",!0,this._itemContents()),this._updateItems(t,e)},_updateSelection:function(t,e){this._updateItems(t,e),this._updateItemHeightsWrapper(!1)},_updateItems:function(t,e){var n=this._itemElements();m.a(t,(t,e)=>{this._deferredItems[e].resolve();var i=n.eq(e).addClass("dx-accordion-item-opened").removeClass("dx-accordion-item-closed");this.setAria("hidden",!1,i.find(".dx-accordion-item-body"))}),m.a(e,(t,e)=>{var i=n.eq(e).removeClass("dx-accordion-item-opened");this.setAria("hidden",!0,i.find(".dx-accordion-item-body"))})},_updateItemHeightsWrapper:function(t){this.option("templatesRenderAsynchronously")?this._animationTimer=setTimeout(function(){this._updateItemHeights(t)}.bind(this)):this._updateItemHeights(t)},_updateItemHeights:function(t){var e=this,n=e._deferredAnimate,i=this._splitFreeSpace(this._calculateFreeSpace());return clearTimeout(this._animationTimer),g.c.apply(a.a,[].slice.call(this._itemElements()).map((function(n){return e._updateItemHeight(Object(a.a)(n),i,t)}))).done((function(){n&&n.resolveWith(e)}))},_updateItemHeight:function(t,e,n){var a=t.children(".dx-accordion-item-title");s.a.isAnimating(t)&&s.a.stop(t);var o,r=Object(i.h)(t);return t.hasClass("dx-accordion-item-opened")?(o=e+Object(i.h)(a))||(Object(i.o)(t,"auto"),o=Object(i.h)(t)):o=Object(i.h)(a),this._animateItem(t,r,o,n,!!e)},_animateItem:function(t,e,n,i,a){var o;return i||e===n?(t.css("height",n),o=(new g.a).resolve()):o=s.a.animate(t,{type:"custom",from:{height:e},to:{height:n},duration:this.option("animationDuration"),easing:this.option("_animationEasing")}),o.done((function(){t.hasClass("dx-accordion-item-opened")&&!a&&t.css("height",""),t.not(".dx-accordion-item-opened").addClass("dx-accordion-item-closed")}))},_splitFreeSpace:function(t){return t?t/this.option("selectedItems").length:t},_calculateFreeSpace:function(){var t=this.option("height");if(void 0!==t&&"auto"!==t){var e=this._itemTitles(),n=0;return m.a(e,(function(t,e){n+=Object(i.h)(e)})),Object(i.d)(this.$element())-n}},_visibilityChanged:function(t){t&&this._dimensionChanged()},_dimensionChanged:function(){this._updateItemHeights(!0)},_clean:function(){clearTimeout(this._animationTimer),this.callBase()},_tryParseItemPropertyName:function(t){var e=t.match(/.*\.(.*)/);if(Object(h.d)(e)&&e.length>=1)return e[1]},_optionChanged:function(t){switch(t.name){case"items":this.callBase(t),"title"===this._tryParseItemPropertyName(t.fullName)&&this._renderSelection(this._getSelectedItemIndices(),[]),"visible"===this._tryParseItemPropertyName(t.fullName)&&this._updateItemHeightsWrapper(!0),!0===this.option("repaintChangesOnly")&&"items"===t.fullName&&(this._updateItemHeightsWrapper(!0),this._renderSelection(this._getSelectedItemIndices(),[]));break;case"animationDuration":case"onItemTitleClick":case"_animationEasing":break;case"collapsible":this.option("selectionRequired",!this.option("collapsible"));break;case"itemTitleTemplate":case"height":case"deferRendering":this._invalidate();break;case"multiple":this.option("selectionMode",t.value?"multiple":"single");break;default:this.callBase(t)}},expandItem:function(t){return this._deferredAnimate=new g.a,this.selectItem(t),this._deferredAnimate.promise()},collapseItem:function(t){return this._deferredAnimate=new g.a,this.unselectItem(t),this._deferredAnimate.promise()},updateDimensions:function(){return this._updateItemHeights(!1)}});Object(f.a)("dxAccordion",x),e.default=x},WbEj:function(t,e,n){var i=n("B81v");"string"==typeof i&&(i=[[t.i,i,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(i,a);i.locals&&(t.exports=i.locals)},liG9:function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.DxItem=e.DxAccordion=void 0;var a=i(n("GK1R")),o=n("J9oI"),s=n("J9oI"),r=o.createComponent({props:{accessKey:String,activeStateEnabled:Boolean,animationDuration:Number,collapsible:Boolean,dataSource:{},deferRendering:Boolean,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,itemHoldTimeout:Number,items:Array,itemTemplate:{},itemTitleTemplate:{},keyExpr:[Function,String],multiple:Boolean,noDataText:String,onContentReady:Function,onDisposing:Function,onInitialized:Function,onItemClick:Function,onItemContextMenu:Function,onItemHold:Function,onItemRendered:Function,onItemTitleClick:Function,onOptionChanged:Function,onSelectionChanged:Function,repaintChangesOnly:Boolean,rtlEnabled:Boolean,selectedIndex:Number,selectedItem:{},selectedItemKeys:Array,selectedItems:Array,tabIndex:Number,visible:Boolean,width:[Function,Number,String]},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:animationDuration":null,"update:collapsible":null,"update:dataSource":null,"update:deferRendering":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:itemHoldTimeout":null,"update:items":null,"update:itemTemplate":null,"update:itemTitleTemplate":null,"update:keyExpr":null,"update:multiple":null,"update:noDataText":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onItemClick":null,"update:onItemContextMenu":null,"update:onItemHold":null,"update:onItemRendered":null,"update:onItemTitleClick":null,"update:onOptionChanged":null,"update:onSelectionChanged":null,"update:repaintChangesOnly":null,"update:rtlEnabled":null,"update:selectedIndex":null,"update:selectedItem":null,"update:selectedItemKeys":null,"update:selectedItems":null,"update:tabIndex":null,"update:visible":null,"update:width":null},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=a.default,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={item:{isCollectionItem:!0,optionName:"items"}}}});e.DxAccordion=r;var l=s.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:disabled":null,"update:html":null,"update:icon":null,"update:template":null,"update:text":null,"update:title":null,"update:visible":null},props:{disabled:Boolean,html:String,icon:String,template:{},text:String,title:String,visible:Boolean}});e.DxItem=l,l.$_optionName="items",l.$_isCollectionItem=!0,e.default=r},qzwY:function(t,e,n){"use strict";n("WbEj")}}]);