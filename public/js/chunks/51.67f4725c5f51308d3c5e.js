(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{bCwZ:function(t,e,n){"use strict";n.r(e);var i=n("L2JU"),s=n("0woa");function o(){return{permissions:[]}}var r={namespaced:!0,state:o,getters:{permissions:function(t){return t.permissions}},actions:{validateDuplicateName:function(t,e){var n=t.state,i=(t.rootGetters,n.permissions.find((function(t){return t.id===e.data.id})));return i&&e.value==i.name?Promise.resolve(!0):new Promise((function(t,n){axios.post("settings/permissions/validate-duplicate-name",{name:e.value},{noLoading:!0}).then((function(e){t(e.data)}))}))},fetch:function(t){var e=t.commit;t.dispatch,t.getters,t.state,t.rootGetters;return new Promise((function(t,n){axios.get("settings/permissions").then((function(n){e("setState",n.data),t()}))}))},save:function(t,e){t.commit;var n=t.dispatch;t.getters,t.state,t.rootGetters;return new Promise((function(t,i){axios.post("settings/permissions",{changes:e.changes}).then((function(e){t(),n("fetch")}))}))},resetState:function(t){(0,t.commit)("resetState")}},mutations:{setState:function(t,e){t.permissions=e.permissions},resetState:function(t){t=Object.assign(t,{permissions:[]})}}};function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return(e=function(t){var e=function(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===a(e)?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var d={components:{DxDataGrid:s.DxDataGrid,DxColumn:s.DxColumn},data:function(){return{gridData:null,validationRules:{name:[{type:"required",message:this.$t("settings.permissions.name")+this.$mt.validations.required},{type:"async",validationCallback:this.validateDuplicateName,message:this.$t("settings.permissions.name")+this.$mt.validations.duplicate}]}}},beforeCreate:function(){this.$store.registerModule("Settings.permissions",r)},created:function(){this.fetch()},destroyed:function(){this.$store.unregisterModule("Settings.permissions")},watch:{permissions:function(){this.cloneDeepData()}},computed:l(l({},Object(i.c)("Settings.permissions",["permissions"])),{},{dataGrid:function(){return this.$refs.dataGrid.instance}}),methods:l(l({},Object(i.b)("Settings.permissions",["fetch","save","validateDuplicateName","resetState"])),{},{onSave:function(t){var e=this;this.$bus.emit("checkPin",(function(){return e.save(t)}))},cloneDeepData:function(){this.gridData=this.$mf.cloneDeep(this.permissions)}})},m=n("KHd+"),p=Object(m.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"settings-page"},[e("h2",{staticClass:"content-block"},[t._v("\n        "+t._s(t.$t("settings.permissions.title"))+"\n    ")]),t._v(" "),e("div",{staticClass:"content-block dx-card responsive-paddings"},[e("DxDataGrid",{ref:"dataGrid",attrs:{"data-source":t.gridData,"key-expr":"id","show-borders":!0,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",paging:{pageSize:10},headerFilter:{visible:!0},loadPanel:{enabled:!0},selection:{mode:"single"},editing:{allowAdding:!0,allowUpdating:!0,allowDeleting:!0,mode:"batch",startEditAction:"dblClick"}},on:{contentReady:function(e){return t.$mf.dataGridPreload(t.gridData,t.dataGrid)},saved:t.onSave},scopedSlots:t._u([{key:"commandCellTemplate",fn:function(n){var i=n.data;return[e("DxToolbar",{attrs:{items:[{locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"trash",hint:t.$t("buttons.delete"),text:t.$t("buttons.delete"),onClick:function(){t.dataGrid.deleteRow(i.rowIndex)}}}]}})]}}])},[e("DxColumn",{attrs:{fixed:!0,width:35,type:"buttons",cssClass:"dx-datagrid-command-column","cell-template":"commandCellTemplate",caption:t.$t("titles.commandHeaderTitleShort")}}),t._v(" "),e("DxColumn",{attrs:{"data-field":"name","header-filter":{allowSearch:!0},caption:t.$t("settings.permissions.name"),"validation-rules":t.validationRules.name}})],1)],1)])}),[],!1,null,"e4f07eca",null);e.default=p.exports}}]);