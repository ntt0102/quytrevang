import{a as c,D as v}from"./data-grid-3af07a90.js";import{x as w,y as b,z as D,A as x,H as C,c as P,e as n,w as u,B as i,C as k,D as o,r as y,o as _}from"./app-950811ac.js";import"./row_dragging-505d7467.js";import"./dialog-a4c4ca08.js";import"./exporter-6fc9ee04.js";const S={class:"content-block dx-card responsive-paddings"},A={__name:"Permissions",setup(R){const t=k(),{t:l}=w(),p=o("bus"),r=o("mt"),g=o("mf"),s=b(null),a=D({gridData:null,validationRules:{name:[{type:"required",message:l("settings.permissions.name")+r.validations.required},{type:"async",validationCallback:e=>t.dispatch("settingPermission/validateDuplicateName",e),message:l("settings.permissions.name")+r.validations.duplicate}]}});t.dispatch("settingPermission/getPermissions"),x(()=>t.state.settingPermission.permissions,e=>{a.gridData=g.cloneDeep(e)}),C(()=>t.dispatch("settingPermission/resetState"));function f(e){e.length&&p.emit("checkPin",()=>t.dispatch("settingPermission/save",e))}return(e,d)=>{const h=y("DxToolbar");return _(),P("div",S,[n(i(v),{ref_key:"dataGridRef",ref:s,"data-source":a.gridData,"key-expr":"id","show-borders":!0,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",paging:{pageSize:10},headerFilter:{visible:!0},loadPanel:{enabled:!0},selection:{mode:"single"},editing:{allowAdding:!0,allowUpdating:!0,allowDeleting:!0,mode:"batch",startEditAction:"dblClick"},onContentReady:d[0]||(d[0]=m=>e.$mf.dataGridPreload(a.gridData,s.value.instance)),onSaved:f},{commandCellTemplate:u(({data:m})=>[n(h,{items:[{locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"trash",hint:e.$t("buttons.delete"),text:e.$t("buttons.delete"),onClick:()=>{s.value.instance.deleteRow(m.rowIndex)}}}]},null,8,["items"])]),default:u(()=>[n(i(c),{fixed:!0,width:35,type:"buttons",cssClass:"dx-datagrid-command-column","cell-template":"commandCellTemplate",caption:e.$t("titles.commandHeaderTitleShort")},null,8,["caption"]),n(i(c),{"data-field":"name","header-filter":{allowSearch:!0},caption:e.$t("settings.permissions.name"),"validation-rules":a.validationRules.name},null,8,["caption","validation-rules"])]),_:1},8,["data-source"])])}}};export{A as default};
