import{_ as u,e5 as p,m as g,b as h,c as D,d as l,t as v,e as t,w as d,r as i,o as f}from"./app-28056b86.js";import{D as w,a as b}from"./data-grid-5f5ea2fc.js";import"./row_dragging-d40b1e01.js";import"./dialog-ce99b292.js";import"./exporter-d0e7996a.js";const x={components:{DxDataGrid:w,DxColumn:b},data(){return{gridData:null,validationRules:{name:[{type:"required",message:this.$t("settings.permissions.name")+this.$mt.validations.required},{type:"async",validationCallback:this.validateDuplicateName,message:this.$t("settings.permissions.name")+this.$mt.validations.duplicate}]}}},beforeCreate(){this.$store.registerModule("Settings.permissions",p)},created(){this.fetch()},destroyed(){this.$store.unregisterModule("Settings.permissions")},watch:{permissions(){this.cloneDeepData()}},computed:{...g("Settings.permissions",["permissions"]),dataGrid:function(){return this.$refs.dataGrid.instance}},methods:{...h("Settings.permissions",["fetch","save","validateDuplicateName","resetState"]),onSave(e){this.$bus.emit("checkPin",()=>this.save(e))},cloneDeepData(){this.gridData=this.$mf.cloneDeep(this.permissions)}}},_={class:"settings-page"},S={class:"content-block"},C={class:"content-block dx-card responsive-paddings"};function $(e,n,G,k,s,a){const o=i("DxColumn"),m=i("DxToolbar"),c=i("DxDataGrid");return f(),D("div",_,[l("h2",S,v(e.$t("settings.permissions.title")),1),l("div",C,[t(c,{ref:"dataGrid","data-source":s.gridData,"key-expr":"id","show-borders":!0,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",paging:{pageSize:10},headerFilter:{visible:!0},loadPanel:{enabled:!0},selection:{mode:"single"},editing:{allowAdding:!0,allowUpdating:!0,allowDeleting:!0,mode:"batch",startEditAction:"dblClick"},onContentReady:n[0]||(n[0]=r=>e.$mf.dataGridPreload(s.gridData,a.dataGrid)),onSaved:a.onSave},{commandCellTemplate:d(({data:r})=>[t(m,{items:[{locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"trash",hint:e.$t("buttons.delete"),text:e.$t("buttons.delete"),onClick:()=>{a.dataGrid.deleteRow(r.rowIndex)}}}]},null,8,["items"])]),default:d(()=>[t(o,{fixed:!0,width:35,type:"buttons",cssClass:"dx-datagrid-command-column","cell-template":"commandCellTemplate",caption:e.$t("titles.commandHeaderTitleShort")},null,8,["caption"]),t(o,{"data-field":"name","header-filter":{allowSearch:!0},caption:e.$t("settings.permissions.name"),"validation-rules":s.validationRules.name},null,8,["caption","validation-rules"])]),_:1},8,["data-source","onSaved"])])])}const N=u(x,[["render",$]]);export{N as default};
