import{a as s,D as f}from"./data-grid-0eec16c9.js";import{a as b}from"./dialog-24b6b308.js";import{x as _,y,z as h,A as v,B as w,r as D,c as $,d as x,e as n,w as d,D as o,o as k}from"./app-1d96e4f7.js";import"./row_dragging-39c76075.js";import"./exporter-1d49b0ae.js";const C={class:"settings-log-page content-block dx-card responsive-paddings"},A={__name:"Log",setup(B){const u=_(),{t:c}=y(),p=h("bus"),l=v(null),i=w({gridData:null});u.dispatch("setting/getLog").then(e=>i.gridData=e);function g(e){p.emit("checkPin",()=>{let t=JSON.stringify(e.attributes,void 0,4);b(`<pre>${m(t)}</pre>`,c("settings.log.propertiesTitle"))})}function m(e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var a="number";return/^"/.test(t)?/:$/.test(t)?a="key":a="string":/true|false/.test(t)?a="boolean":/null/.test(t)&&(a="null"),'<span class="'+a+'">'+t+"</span>"})}return(e,t)=>{const a=D("DxToolbar");return k(),$("div",C,[x("div",null,[n(o(f),{ref_key:"dataGridRef",ref:l,"data-source":i.gridData,"key-expr":"id","show-borders":!0,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",paging:{pageSize:10},headerFilter:{visible:!0},loadPanel:{enabled:!0},selection:{mode:"single"},onContentReady:t[0]||(t[0]=r=>e.$mf.dataGridPreload(i.gridData,l.value.instance))},{commandCellTemplate:d(({data:r})=>[n(a,{items:[{locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"info",hint:e.$t("settings.log.propertiesBtn"),text:e.$t("settings.log.propertiesBtn"),onClick:()=>g(r.data.properties)}}]},null,8,["items"])]),default:d(()=>[n(o(s),{fixed:!0,width:35,type:"buttons",cssClass:"dx-datagrid-command-column","cell-template":"commandCellTemplate",caption:e.$t("titles.commandHeaderTitleShort")},null,8,["caption"]),n(o(s),{"data-field":"created_at","data-type":"date",caption:e.$t("settings.log.createdAt")},null,8,["caption"]),n(o(s),{"data-field":"causer",caption:e.$t("settings.log.causer")},null,8,["caption"]),n(o(s),{"data-field":"subject",caption:e.$t("settings.log.subject")},null,8,["caption"]),n(o(s),{"data-field":"description",caption:e.$t("settings.log.description")},null,8,["caption"])]),_:1},8,["data-source"])])])}}};export{A as default};
