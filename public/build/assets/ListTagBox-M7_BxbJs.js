import{bx as X,T as V,by as q,aF as Q,bz as A,V as L,b0 as w,bq as J,$ as d,af as h,aT as D,ai as v,bk as Y,U as Z,bA as ee,bB as te,aC as N,W as f,bC as ne,bt as $,bD as ae,bE as ie,ay as M,aa as T,bF as le,bG as oe,bH as P,aG as G,aA as R,bI as se,bJ as re,X as ue,aX as de,bK as pe,Y as ce,Z as H,a2 as he,o as ge,p as me,g as _e}from"./app-DfwiD98S.js";var o={},C="dxTagData",ve="dx-tagbox",fe="dx-tag-container",S="dx-tag",k="dx-tagbox-multi-tag",j="dx-tag-custom",K="dx-tag-remove-button",Te="dx-tagbox-only-select",z="dx-tagbox-single-line",Ce="dx-tagbox-popup-wrapper",Se="dx-tag-content",be="dx-tagbox-default-template",xe="dx-tagbox-custom-template",ye="dx-texteditor-input-container",Ie=-.3,U=X.inherit({_supportedKeys:function(){var e=this.callBase(),t=a=>this._list._keyboardHandler(a),n=this.option("rtlEnabled");return V({},e,{backspace:function(a){if(this._isCaretAtTheStart()){this._processKeyboardEvent(a),this._isTagRemoved=!0;var i=this._$focusedTag||this._tagElements().last();this._$focusedTag&&this._moveTagFocus("prev",!0),i.length!==0&&(this._preserveFocusedTag=!0,this._removeTagElement(i),delete this._preserveFocusedTag)}},upArrow:(a,i)=>a.altKey||!this._list?e.upArrow.call(this,a):t(i),downArrow:(a,i)=>a.altKey||!this._list?e.downArrow.call(this,a):t(i),del:function(a){if(!(!this._$focusedTag||!this._isCaretAtTheStart())){this._processKeyboardEvent(a),this._isTagRemoved=!0;var i=this._$focusedTag;this._moveTagFocus("next",!0),this._preserveFocusedTag=!0,this._removeTagElement(i),delete this._preserveFocusedTag}},enter:function(a,i){var l=this._list&&this._list.option("focusedElement")!==null,s=this.option("acceptCustomValue")&&!l;if(s){a.preventDefault(),this._searchValue()!==""&&this._customItemAddedHandler(a);return}this.option("opened")&&(this._saveValueChangeEvent(a),t(i),a.preventDefault())},space:function(a,i){var l=this.option("opened"),s=this._shouldRenderSearchEvent();l&&!s&&(this._saveValueChangeEvent(a),t(i),a.preventDefault())},leftArrow:function(a){if(!(!this._isCaretAtTheStart()||this._isEmpty()||this._isEditable()&&n&&!this._$focusedTag)){a.preventDefault();var i=n?"next":"prev";this._moveTagFocus(i),!this.option("multiline")&&this._scrollContainer(i)}},rightArrow:function(a){if(!(!this._isCaretAtTheStart()||this._isEmpty()||this._isEditable()&&!n&&!this._$focusedTag)){a.preventDefault();var i=n?"prev":"next";this._moveTagFocus(i),!this.option("multiline")&&this._scrollContainer(i)}}})},_processKeyboardEvent:function(e){e.preventDefault(),e.stopPropagation(),this._saveValueChangeEvent(e)},_isEmpty:function(){return this._getValue().length===0},_updateTagsContainer:function(e){this._$tagsContainer=e.addClass(fe)},_allowSelectItemByTab:function(){return!1},_isCaretAtTheStart:function(){var e=q(this._input());return e.start===0&&e.end===0},_moveTagFocus:function(e,t){if(!this._$focusedTag){var n=this._tagElements();this._$focusedTag=e==="next"?n.first():n.last(),this._toggleFocusClass(!0,this._$focusedTag);return}var a=this._$focusedTag[e](".".concat(S));a.length>0?this._replaceFocusedTag(a):(t||e==="next"&&this._isEditable())&&this._clearTagFocus()},_replaceFocusedTag:function(e){this._toggleFocusClass(!1,this._$focusedTag),this._$focusedTag=e,this._toggleFocusClass(!0,this._$focusedTag)},_clearTagFocus:function(){this._$focusedTag&&(this._toggleFocusClass(!1,this._$focusedTag),delete this._$focusedTag)},_focusClassTarget:function(e){return e&&e.length&&e[0]!==this._focusTarget()[0]?e:this.callBase()},_getLabelContainer:function(){return this._$tagsContainer},_scrollContainer:function(e){if(!(this.option("multiline")||!Q())&&this._$tagsContainer){var t=this._getScrollPosition(e);this._$tagsContainer.scrollLeft(t)}},_getScrollPosition:function(e){return e==="start"||e==="end"?this._getBorderPosition(e):this._$focusedTag?this._getFocusedTagPosition(e):this._getBorderPosition("end")},_getBorderPosition:function(e){var t=this.option("rtlEnabled"),n=e==="end"^t,a=t?-1:1;return n^!t?0:a*(this._$tagsContainer.get(0).scrollWidth-A(this._$tagsContainer))},_getFocusedTagPosition:function(e){var t=this.option("rtlEnabled"),n=e==="next"^t,{left:a}=this._$focusedTag.position(),i=this._$tagsContainer.scrollLeft();return n&&(a+=A(this._$focusedTag,!0)-A(this._$tagsContainer)),n^a<0&&(i+=a),i},_setNextValue:L,_getDefaultOptions:function(){return V(this.callBase(),{value:[],showDropDownButton:!1,maxFilterQueryLength:1500,tagTemplate:"tag",selectAllText:w.format("dxList-selectAll"),hideSelectedItems:!1,selectedItems:[],selectAllMode:"page",onSelectAllValueChanged:null,maxDisplayedTags:void 0,showMultiTagOnly:!0,onMultiTagPreparing:null,multiline:!0,useSubmitBehavior:!0})},_init:function(){this.callBase(),this._selectedItems=[],this._initSelectAllValueChangedAction()},_initActions:function(){this.callBase(),this._initMultiTagPreparingAction()},_initMultiTagPreparingAction:function(){this._multiTagPreparingAction=this._createActionByOption("onMultiTagPreparing",{beforeExecute:(function(e){this._multiTagPreparingHandler(e.args[0])}).bind(this),excludeValidators:["disabled","readOnly"]})},_multiTagPreparingHandler:function(e){var{length:t}=this._getValue();this.option("showMultiTagOnly")?e.text=w.getFormatter("dxTagBox-selected")(t):e.text=w.getFormatter("dxTagBox-moreSelected")(t-this.option("maxDisplayedTags")+1)},_initDynamicTemplates:function(){this.callBase(),this._templateManager.addDefaultTemplates({tag:new J((e,t)=>{var n,a=d("<div>").addClass(Se);d("<span>").text((n=t.text)!==null&&n!==void 0?n:t).appendTo(a),d("<div>").addClass(K).appendTo(a),e.append(a)},["text"],this.option("integrationOptions.watchMethod"),{text:this._displayGetter})})},_toggleSubmitElement:function(e){e?(this._renderSubmitElement(),this._setSubmitValue()):(this._$submitElement&&this._$submitElement.remove(),delete this._$submitElement)},_renderSubmitElement:function(){this.option("useSubmitBehavior")&&(this._$submitElement=d("<select>").attr("multiple","multiple").css("display","none").appendTo(this.$element()))},_setSubmitValue:function(){if(this.option("useSubmitBehavior")){for(var e=this._getValue(),t=[],n=0,a=e.length;n<a;n++){var i=this._shouldUseDisplayValue(e[n]);t.push(d("<option>").val(i?this._displayGetter(e[n]):e[n]).attr("selected","selected"))}this._getSubmitElement().empty().append(t)}},_initMarkup:function(){this._tagElementsCache=d();var e=!this.option("multiline");this.$element().addClass(ve).toggleClass(Te,!(this.option("searchEnabled")||this.option("acceptCustomValue"))).toggleClass(z,e),this._initTagTemplate(),this.callBase()},_render:function(){this.callBase(),this._renderTagRemoveAction(),this._renderSingleLineScroll(),this._scrollContainer("start")},_initTagTemplate:function(){this._tagTemplate=this._getTemplateByOption("tagTemplate")},_renderField:function(){var e=!h(this.option("fieldTemplate"));this.$element().toggleClass(be,e).toggleClass(xe,!e),this.callBase()},_renderTagRemoveAction:function(){var e=this._createAction(this._removeTagHandler.bind(this)),t=D(de,"dxTagBoxTagRemove");v.off(this._$tagsContainer,t),v.on(this._$tagsContainer,t,".".concat(K),n=>{e({event:n})})},_renderSingleLineScroll:function(){var e=D("dxmousewheel",this.NAME),t=this.$element(),n=this.option("multiline");if(v.off(t,e),Y.real().deviceType!=="desktop"){this._$tagsContainer&&this._$tagsContainer.css("overflowX",n?"":"auto");return}n||v.on(t,e,this._tagContainerMouseWheelHandler.bind(this))},_tagContainerMouseWheelHandler:function(e){var t=this._$tagsContainer.scrollLeft(),n=e.delta*Ie;if(!Z(e)&&ee(this._$tagsContainer,n,!0))return this._$tagsContainer.scrollLeft(t+n),!1},_renderEvents:function(){this.callBase();var e=this._input(),t=D("keydown",this.NAME);v.on(e,t,n=>{var a=te(n);!this._isControlKey(a)&&this._isEditable()&&this._clearTagFocus()})},_popupWrapperClass:function(){return this.callBase()+" "+Ce},_renderInput:function(){this.callBase(),this._renderPreventBlurOnInputClick()},_renderPreventBlurOnInputClick:function(){var e=D("mousedown","dxTagBox");v.off(this._inputWrapper(),e),v.on(this._inputWrapper(),e,t=>{t.target!==this._input()[0]&&this._isFocused()&&t.preventDefault()})},_renderInputValueImpl:function(){return this._renderMultiSelect()},_loadInputValue:function(){return N()},_clearTextValue:function(){this._input().val(""),this._toggleEmptinessEventHandler(),this.option("text","")},_focusInHandler:function(e){this._preventNestedFocusEvent(e)||this._scrollContainer("end"),this.callBase(e)},_renderInputValue:function(){return this.option("displayValue",this._searchValue()),this.callBase()},_restoreInputText:function(e){e||this._clearTextValue()},_focusOutHandler:function(e){this._preventNestedFocusEvent(e)||(this._clearTagFocus(),this._scrollContainer("start")),this.callBase(e)},_getFirstPopupElement:function(){return this.option("showSelectionControls")?this._list.$element():this.callBase()},_initSelectAllValueChangedAction:function(){this._selectAllValueChangeAction=this._createActionByOption("onSelectAllValueChanged")},_renderList:function(){this.callBase(),this._setListDataSourceFilter(),this.option("showSelectionControls")&&(this._list.registerKeyHandler("tab",e=>this._popupElementTabHandler(e)),this._list.registerKeyHandler("escape",e=>this._popupElementEscHandler(e)))},_canListHaveFocus:function(){return this.option("applyValueMode")==="useButtons"},_listConfig:function(){var e=this.option("showSelectionControls")?"all":"multiple";return V(this.callBase(),{maxFilterLengthInRequest:this.option("maxFilterQueryLength"),selectionMode:e,selectAllText:this.option("selectAllText"),onSelectAllValueChanged:t=>{var{value:n}=t;this._selectAllValueChangeAction({value:n})},selectAllMode:this.option("selectAllMode"),selectedItems:this._selectedItems,onFocusedItemChanged:null})},_renderMultiSelect:function(){var e=new f;return this._updateTagsContainer(this._$textEditorInputContainer),this._renderInputSize(),this._renderTags().done(()=>{this._popup&&this._popup.refreshPosition(),e.resolve()}).fail(e.reject),e.promise()},_listItemClickHandler:function(e){!this.option("showSelectionControls")&&this._clearTextValue(),this.option("applyValueMode")!=="useButtons"&&(this.callBase(e),this._saveValueChangeEvent(void 0))},_shouldClearFilter:function(){var e=this.callBase(),t=this.option("showSelectionControls");return!t&&e},_renderInputSize:function(){var e=this._input(),t=e.val(),n=R(t)&&t,a="",i="",l=this.option("searchEnabled")||this.option("acceptCustomValue");if(n&&l){var s=ne(e,t,{includePaddings:!0});s.insertAfter(e),a=A(s)+5,s.remove()}else t||(i=1);e.css("width",a),e.attr("size",i)},_renderInputSubstitution:function(){this.callBase(),this._updateWidgetHeight()},_getValue:function(){return this.option("value")||[]},_multiTagRequired:function(){var e=this._getValue(),t=this.option("maxDisplayedTags");return h(t)&&e.length>t},_renderMultiTag:function(e){var t=d("<div>").addClass(S).addClass(k),n={multiTagElement:$(t),selectedItems:this.option("selectedItems")};return this._multiTagPreparingAction(n),n.cancel?!1:(t.data(C,n.text),t.insertBefore(e),this._tagTemplate.render({model:n.text,container:$(t)}),t)},_getFilter:function(e){var t=this._dataController.filter(),n=e.getCombinedFilter(this.option("valueExpr"),t),a=encodeURI(JSON.stringify(n)).length,i=this.option("maxFilterQueryLength");if(a<=i)return n;ae.log("W1019",i)},_getFilteredItems:function(e){var t,n;(t=this._loadFilteredItemsPromise)===null||t===void 0||t.reject();var a=new pe(e),i=(n=this._list)===null||n===void 0?void 0:n.option("selectedItems"),l=!!i&&this._list._dataController.isLoaded(),s=i||this.option("selectedItems"),g=a.getLocalFilter(this._valueGetter),r=s.filter(g),p=r.length===e.length,u=new f,c=this._dataController;if((!this._isDataSourceChanged||l)&&p)return u.resolve(r).promise();var{customQueryParams:m,expand:_,select:b}=c.loadOptions(),x=this._getFilter(a);return c.loadFromStore({filter:x,customQueryParams:m,expand:_,select:b}).done((y,I)=>{if(this._isDataSourceChanged=!1,this._disposed){u.reject();return}var{data:E}=ie(y,I),B=c.applyMapFunction(E);u.resolve(B.filter(g))}).fail(u.reject),this._loadFilteredItemsPromise=u,u.promise()},_createTagsData:function(e,t){var n=[],a={},i=this._valueGetterExpr()==="this",l={};t.forEach(r=>{var p=i?JSON.stringify(r):this._valueGetter(r);l[p]=r});var s=[];e.forEach((r,p)=>{var u=l[i?JSON.stringify(r):r];if(i&&!h(u))s.push(this._loadItem(r,a).always(m=>{var _=this._createTagData(m,r);n.splice(p,0,_)}));else{var c=this._createTagData(u,r);n.splice(p,0,c)}});var g=new f;return N.apply(this,s).always(function(){g.resolve(n)}),g.promise()},_createTagData:function(e,t){if(h(e))return this._selectedItems.push(e),e;var n=this.option("selectedItem"),a=this._valueGetter(n)===t?n:t;return a},_isGroupedData:function(){return this.option("grouped")&&!this._dataController.group()},_getItemsByValues:function(e){var t=[];return e.forEach((function(n){var a=this._getItemFromPlain(n);h(a)&&t.push(a)}).bind(this)),t},_getFilteredGroupedItems:function(e){var t=new f;return this._filteredGroupedItemsLoadPromise&&this._dataController.cancel(this._filteredGroupedItemsLoadPromise.operationId),this._dataController.items().length?t.resolve(this._getItemsByValues(e)):this._filteredGroupedItemsLoadPromise=this._dataController.load().done(()=>{t.resolve(this._getItemsByValues(e))}).fail(()=>{t.resolve([])}).always(()=>{this._filteredGroupedItemsLoadPromise=void 0}),t.promise()},_loadTagsData:function(){var e=this._getValue(),t=new f;this._selectedItems=[];var n=this._isGroupedData()?this._getFilteredGroupedItems(e):this._getFilteredItems(e);return n.done(a=>{var i=this._createTagsData(e,a);i.always(function(l){t.resolve(l)})}).fail(t.reject.bind(this)),t.promise()},_renderTags:function(){var e=new f,t=!1;return this._shouldGetItemsFromPlain(this._valuesToUpdate)&&(this._selectedItems=this._getItemsFromPlain(this._valuesToUpdate),this._selectedItems.length===this._valuesToUpdate.length&&(this._renderTagsImpl(this._selectedItems),t=!0,e.resolve())),t||this._loadTagsData().done(n=>{if(this._disposed){e.reject();return}this._renderTagsImpl(n),e.resolve()}).fail(e.reject),e.promise()},_renderTagsImpl:function(e){this._renderTagsCore(e),this._renderEmptyState(),this._preserveFocusedTag||this._clearTagFocus()},_shouldGetItemsFromPlain:function(e){return e&&this._dataController.isLoaded()&&e.length<=this._getPlainItems().length},_getItemsFromPlain:function(e){var t=this._getSelectedItemsFromList(e),n=t.length===0&&e.length>0||t.length<e.length;if(n){var a=this._getPlainItems();t=this._filterSelectedItems(a,e)}return t},_getSelectedItemsFromList:function(e){var t,n=(t=this._list)===null||t===void 0?void 0:t.option("selectedItems"),a=[];return e.length===(n==null?void 0:n.length)&&(a=this._filterSelectedItems(n,e)),a},_filterSelectedItems:function(e,t){var n=e.filter(a=>{for(var i,l=0;l<t.length;l++)if(i=t[l],M(i)){if(this._isValueEquals(a,i))return!0}else if(this._isValueEquals(this._valueGetter(a),i))return!0;return!1},this);return n},_integrateInput:function(){this._isInputReady.resolve(),this.callBase();var e=this.$element().find(".".concat(ye));this._updateTagsContainer(e),this._renderTagRemoveAction()},_renderTagsCore:function(e){var t;(t=this._isInputReady)===null||t===void 0||t.reject(),this._isInputReady=new f,this._renderField(),this.option("selectedItems",this._selectedItems.slice()),this._cleanTags(),this._input().length>0&&this._isInputReady.resolve(),N(this._isInputReady).done(()=>{this._renderTagsElements(e)})},_renderTagsElements(e){var t=this._multiTagRequired()&&this._renderMultiTag(this._input()),n=this.option("showMultiTagOnly"),a=this.option("maxDisplayedTags");e.forEach((i,l)=>{if(t&&n||t&&!n&&l-a>=-1)return!1;this._renderTag(i,t||this._input())}),this._isFocused()&&this._scrollContainer("end"),this._refreshTagElements()},_cleanTags:function(){if(this._multiTagRequired())this._tagElements().remove();else{var e=this._tagElements(),t=this._getValue();T(e,function(n,a){var i=d(a),l=i.data(C);t!=null&&t.includes(l)||i.remove()})}},_renderEmptyState:function(){var e=!(this._getValue().length||this._selectedItems.length||this._searchValue());this._toggleEmptiness(e),this._renderDisplayText()},_renderDisplayText:function(){this._renderInputSize()},_refreshTagElements:function(){this._tagElementsCache=this.$element().find(".".concat(S))},_tagElements:function(){return this._tagElementsCache},_applyTagTemplate:function(e,t){this._tagTemplate.render({model:e,container:$(t)})},_renderTag:function(e,t){var n=this._valueGetter(e);if(h(n)){var a=this._getTag(n),i=this._displayGetter(e),l=this._getItemModel(e,i);a?(h(i)&&(a.empty(),this._applyTagTemplate(l,a)),a.removeClass(j)):(a=this._createTag(n,t),h(e)?this._applyTagTemplate(l,a):(a.addClass(j),this._applyTagTemplate(n,a)))}},_getItemModel:function(e,t){return M(e)&&h(t)?e:le(t,"")},_getTag:function(e){for(var t=this._tagElements(),n=t.length,a=!1,i=0;i<n;i++){var l=t[i],s=oe(l,C);if(e===s||P(e,s)){a=d(l);break}}return a},_createTag:function(e,t){return d("<div>").addClass(S).data(C,e).insertBefore(t)},_toggleEmptinessEventHandler:function(){this._toggleEmptiness(!this._getValue().length&&!this._searchValue().length)},_customItemAddedHandler:function(e){this.callBase(e),this._clearTextValue()},_removeTagHandler:function(e){var t=e.event;t.stopPropagation(),this._saveValueChangeEvent(t);var n=d(t.target).closest(".".concat(S));this._removeTagElement(n)},_removeTagElement:function(e){if(e.hasClass(k)){this.option("showMultiTagOnly")?this.reset():this.option("value",this._getValue().slice(0,this.option("maxDisplayedTags")));return}var t=e.data(C);this._removeTagWithUpdate(t),this._refreshTagElements()},_updateField:L,_removeTagWithUpdate:function(e){var t=this._getValue().slice();this._removeTag(t,e),this.option("value",t),this.option("selectedItem",null),t.length===0&&this._clearTagFocus()},_getCurrentValue:function(){return this._lastValue()},_selectionChangeHandler:function(e){if(this.option("applyValueMode")!=="useButtons"){var t=this._getValue().slice();if(T(e.removedItems||[],(a,i)=>{this._removeTag(t,this._valueGetter(i))}),T(e.addedItems||[],(a,i)=>{this._addTag(t,this._valueGetter(i))}),this._updateWidgetHeight(),!P(this._list.option("selectedItemKeys"),this.option("value"))){var n=this._list._getSelectionChangeEvent();n&&this._saveValueChangeEvent(n),this.option("value",t)}this._list._saveSelectionChangeEvent(void 0)}},_removeTag:function(e,t){var n=this._valueIndex(t,e);n>=0&&e.splice(n,1)},_addTag:function(e,t){var n=this._valueIndex(t);n<0&&e.push(t)},_fieldRenderData:function(){return this._selectedItems.slice()},_completeSelection:function(e){this.option("showSelectionControls")||this._setValue(e)},_setValue:function(e){if(e!==null){var t=this.option("applyValueMode")==="useButtons",n=this._valueIndex(e),a=(t?this._list.option("selectedItemKeys"):this._getValue()).slice();n>=0?a.splice(n,1):a.push(e),this.option("applyValueMode")==="useButtons"?this._list.option("selectedItemKeys",a):this.option("value",a)}},_isSelectedValue:function(e,t){return this._valueIndex(e,null,t)>-1},_valueIndex:function(e,t,n){var a=-1;return n&&typeof e!="object"&&(n.indexByValues||(n.indexByValues={},t=t||this._getValue(),t.forEach(function(i,l){n.indexByValues[i]=l})),e in n.indexByValues)?n.indexByValues[e]:(t=t||this._getValue(),T(t,(i,l)=>{if(this._isValueEquals(e,l))return a=i,!1}),a)},_lastValue:function(){var e=this._getValue(),t=e[e.length-1];return t??null},_shouldRenderSearchEvent:function(){return this.option("searchEnabled")||this.option("acceptCustomValue")},_searchHandler:function(e){this.option("searchEnabled")&&e&&!this._isTagRemoved&&(this.callBase(arguments),this._setListDataSourceFilter()),this._updateWidgetHeight(),delete this._isTagRemoved},_updateWidgetHeight:function(){var e=this.$element(),t=G(e);this._renderInputSize();var n=G(e);this._popup&&this.option("opened")&&this._isEditable()&&n!==t&&this._popup.repaint()},_refreshSelected:function(){var e;!((e=this._list)===null||e===void 0)&&e.getDataSource()&&this._list.option("selectedItems",this._selectedItems)},_resetListDataSourceFilter:function(){var e=this._dataController;delete this._userFilter,e.filter(null),e.reload()},_setListDataSourceFilter:function(){if(!(!this.option("hideSelectedItems")||!this._list)){var e=this._dataController,t=this._valueGetterExpr();if(R(t)&&t!=="this"){var n=this._dataSourceFilterExpr();this._userFilter===void 0&&(this._userFilter=e.filter()||null),this._userFilter&&n.push(this._userFilter),n.length?e.filter(n):e.filter(null)}else e.filter(this._dataSourceFilterFunction.bind(this));e.load()}},_dataSourceFilterExpr:function(){var e=[];return this._getValue().forEach(t=>e.push(["!",[this._valueGetterExpr(),t]])),e},_dataSourceFilterFunction:function(e){var t=this._valueGetter(e),n=!0;return T(this._getValue(),(a,i)=>{if(this._isValueEquals(i,t))return n=!1,!1}),n},_dataSourceChangedHandler:function(){this._isDataSourceChanged=!0,this.callBase.apply(this,arguments)},_applyButtonHandler:function(e){this._saveValueChangeEvent(e.event),this.option("value",this._getSortedListValues()),this._clearTextValue(),this.callBase(),this._cancelSearchIfNeed()},_getSortedListValues:function(){var e=this._getListValues(),t=this.option("value")||[],n=e.length?se(t,e):[],a=n.length?re(e,t):e;return n.concat(a)},_getListValues:function(){return this._list?this._getPlainItems(this._list.option("selectedItems")).map(e=>this._valueGetter(e)):[]},_setListDataSource:function(){var e=this._getValue();this.callBase(),e!==this.option("value")&&this.option("value",e),this._refreshSelected()},_renderOpenedState:function(){this.callBase(),this.option("applyValueMode")==="useButtons"&&!this.option("opened")&&this._refreshSelected()},reset:function(){this._restoreInputText();var e=this._getDefaultOptions().value,t=this.option("value");e&&e.length===0&&t&&e.length===t.length||this.callBase()},_clean:function(){this.callBase(),delete this._defaultTagTemplate,delete this._valuesToUpdate,delete this._tagTemplate},_getSelectedItemsDifference(e,t){if(!e.length)return{addedItems:[],removedItems:t.slice()};if(!t.length)return{addedItems:e.slice(),removedItems:[]};var n=t.reduce((i,l)=>{var s=this._valueGetter(l);return i[s]=l,i},{}),a=[];return e.forEach(i=>{var l=this._valueGetter(i);n[l]||a.push(i),delete n[l]}),{addedItems:a,removedItems:Object.values(n)}},_optionChanged:function(e){var{name:t,value:n,previousValue:a}=e;switch(t){case"onSelectAllValueChanged":this._initSelectAllValueChangedAction();break;case"onMultiTagPreparing":this._initMultiTagPreparingAction(),this._renderTags();break;case"hideSelectedItems":n?this._setListDataSourceFilter():this._resetListDataSourceFilter();break;case"useSubmitBehavior":this._toggleSubmitElement(n);break;case"displayExpr":this.callBase(e),this._initTemplates(),this._invalidate();break;case"tagTemplate":this._initTagTemplate(),this._invalidate();break;case"selectAllText":this._setListOption("selectAllText",this.option("selectAllText"));break;case"readOnly":case"disabled":this.callBase(e),!n&&this._refreshEvents();break;case"value":this._valuesToUpdate=n,this.callBase(e),this._valuesToUpdate=void 0,this._setListDataSourceFilter();break;case"maxDisplayedTags":case"showMultiTagOnly":this._renderTags();break;case"selectAllMode":this._setListOption(t,n);break;case"selectedItem":break;case"selectedItems":this._selectionChangedAction(this._getSelectedItemsDifference(n,a));break;case"multiline":this.$element().toggleClass(z,!n),this._renderSingleLineScroll();break;case"maxFilterQueryLength":break;default:this.callBase(e)}},_getActualSearchValue:function(){return this.callBase()||this._searchValue()},_popupHidingHandler:function(){this.callBase(),this._clearFilter()}});ue("dxTagBox",U);const Ee=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"})),Be=ce(Ee);/*!
 * devextreme-vue
 * Version: 22.2.12
 * Build date: Mon Apr 29 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */var W;function Fe(){if(W)return o;W=1;var e=o&&o.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(o,"__esModule",{value:!0}),o.DxToolbarItem=o.DxTo=o.DxShow=o.DxPosition=o.DxOptions=o.DxOffset=o.DxMy=o.DxItem=o.DxHide=o.DxFrom=o.DxDropDownOptions=o.DxCollision=o.DxButton=o.DxBoundaryOffset=o.DxAt=o.DxAnimation=o.DxTagBox=void 0;var t=e(Be),n=H(),a=H(),i=n.createComponent({props:{acceptCustomValue:Boolean,accessKey:String,activeStateEnabled:Boolean,applyValueMode:String,buttons:Array,customItemCreateEvent:String,dataSource:{},deferRendering:Boolean,disabled:Boolean,displayExpr:[Function,String],dropDownButtonTemplate:{},dropDownOptions:Object,elementAttr:Object,fieldTemplate:{},focusStateEnabled:Boolean,grouped:Boolean,groupTemplate:{},height:[Function,Number,String],hideSelectedItems:Boolean,hint:String,hoverStateEnabled:Boolean,inputAttr:{},isValid:Boolean,items:Array,itemTemplate:{},label:String,labelMode:String,maxDisplayedTags:Number,maxFilterQueryLength:Number,maxLength:[Number,String],minSearchLength:Number,multiline:Boolean,name:String,noDataText:String,onChange:Function,onClosed:Function,onContentReady:Function,onCustomItemCreating:Function,onDisposing:Function,onEnterKey:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onInput:Function,onItemClick:Function,onKeyDown:Function,onKeyUp:Function,onMultiTagPreparing:Function,onOpened:Function,onOptionChanged:Function,onSelectAllValueChanged:Function,onSelectionChanged:Function,onValueChanged:Function,opened:Boolean,openOnFieldClick:Boolean,placeholder:String,readOnly:Boolean,rtlEnabled:Boolean,searchEnabled:Boolean,searchExpr:[Array,Function,String],searchMode:String,searchTimeout:Number,selectAllMode:String,selectAllText:String,selectedItems:Array,showClearButton:Boolean,showDataBeforeSearch:Boolean,showDropDownButton:Boolean,showMultiTagOnly:Boolean,showSelectionControls:Boolean,stylingMode:String,tabIndex:Number,tagTemplate:{},text:String,useItemTextAsTitle:Boolean,validationError:{},validationErrors:Array,validationMessageMode:String,validationMessagePosition:String,validationStatus:String,value:Array,valueChangeEvent:String,valueExpr:[Function,String],visible:Boolean,width:[Function,Number,String],wrapItemText:Boolean},emits:{"update:isActive":null,"update:hoveredElement":null,"update:acceptCustomValue":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:applyValueMode":null,"update:buttons":null,"update:customItemCreateEvent":null,"update:dataSource":null,"update:deferRendering":null,"update:disabled":null,"update:displayExpr":null,"update:dropDownButtonTemplate":null,"update:dropDownOptions":null,"update:elementAttr":null,"update:fieldTemplate":null,"update:focusStateEnabled":null,"update:grouped":null,"update:groupTemplate":null,"update:height":null,"update:hideSelectedItems":null,"update:hint":null,"update:hoverStateEnabled":null,"update:inputAttr":null,"update:isValid":null,"update:items":null,"update:itemTemplate":null,"update:label":null,"update:labelMode":null,"update:maxDisplayedTags":null,"update:maxFilterQueryLength":null,"update:maxLength":null,"update:minSearchLength":null,"update:multiline":null,"update:name":null,"update:noDataText":null,"update:onChange":null,"update:onClosed":null,"update:onContentReady":null,"update:onCustomItemCreating":null,"update:onDisposing":null,"update:onEnterKey":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onInput":null,"update:onItemClick":null,"update:onKeyDown":null,"update:onKeyUp":null,"update:onMultiTagPreparing":null,"update:onOpened":null,"update:onOptionChanged":null,"update:onSelectAllValueChanged":null,"update:onSelectionChanged":null,"update:onValueChanged":null,"update:opened":null,"update:openOnFieldClick":null,"update:placeholder":null,"update:readOnly":null,"update:rtlEnabled":null,"update:searchEnabled":null,"update:searchExpr":null,"update:searchMode":null,"update:searchTimeout":null,"update:selectAllMode":null,"update:selectAllText":null,"update:selectedItems":null,"update:showClearButton":null,"update:showDataBeforeSearch":null,"update:showDropDownButton":null,"update:showMultiTagOnly":null,"update:showSelectionControls":null,"update:stylingMode":null,"update:tabIndex":null,"update:tagTemplate":null,"update:text":null,"update:useItemTextAsTitle":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationMessagePosition":null,"update:validationStatus":null,"update:value":null,"update:valueChangeEvent":null,"update:valueExpr":null,"update:visible":null,"update:width":null,"update:wrapItemText":null},model:{prop:"value",event:"update:value"},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=t.default,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={button:{isCollectionItem:!0,optionName:"buttons"},dropDownOptions:{isCollectionItem:!1,optionName:"dropDownOptions"},item:{isCollectionItem:!0,optionName:"items"}}}});o.DxTagBox=i;var l=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:hide":null,"update:show":null},props:{hide:[Object,Number,String],show:[Object,Number,String]}});o.DxAnimation=l,l.$_optionName="animation",l.$_expectedChildren={hide:{isCollectionItem:!1,optionName:"hide"},show:{isCollectionItem:!1,optionName:"show"}};var s=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});o.DxAt=s,s.$_optionName="at";var g=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});o.DxBoundaryOffset=g,g.$_optionName="boundaryOffset";var r=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:location":null,"update:name":null,"update:options":null},props:{location:String,name:String,options:Object}});o.DxButton=r,r.$_optionName="buttons",r.$_isCollectionItem=!0,r.$_expectedChildren={options:{isCollectionItem:!1,optionName:"options"}};var p=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});o.DxCollision=p,p.$_optionName="collision";var u=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:animation":null,"update:bindingOptions":null,"update:closeOnOutsideClick":null,"update:container":null,"update:contentTemplate":null,"update:copyRootClassesToWrapper":null,"update:deferRendering":null,"update:disabled":null,"update:dragAndResizeArea":null,"update:dragEnabled":null,"update:dragOutsideBoundary":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:fullScreen":null,"update:height":null,"update:hideOnOutsideClick":null,"update:hideOnParentScroll":null,"update:hint":null,"update:hoverStateEnabled":null,"update:maxHeight":null,"update:maxWidth":null,"update:minHeight":null,"update:minWidth":null,"update:onContentReady":null,"update:onDisposing":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onHidden":null,"update:onHiding":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onResize":null,"update:onResizeEnd":null,"update:onResizeStart":null,"update:onShowing":null,"update:onShown":null,"update:onTitleRendered":null,"update:position":null,"update:resizeEnabled":null,"update:restorePosition":null,"update:rtlEnabled":null,"update:shading":null,"update:shadingColor":null,"update:showCloseButton":null,"update:showTitle":null,"update:tabIndex":null,"update:title":null,"update:titleTemplate":null,"update:toolbarItems":null,"update:visible":null,"update:width":null,"update:wrapperAttr":null},props:{accessKey:String,activeStateEnabled:Boolean,animation:Object,bindingOptions:Object,closeOnOutsideClick:[Boolean,Function],container:{},contentTemplate:{},copyRootClassesToWrapper:Boolean,deferRendering:Boolean,disabled:Boolean,dragAndResizeArea:{},dragEnabled:Boolean,dragOutsideBoundary:Boolean,elementAttr:{},focusStateEnabled:Boolean,fullScreen:Boolean,height:[Function,Number,String],hideOnOutsideClick:[Boolean,Function],hideOnParentScroll:Boolean,hint:String,hoverStateEnabled:Boolean,maxHeight:[Function,Number,String],maxWidth:[Function,Number,String],minHeight:[Function,Number,String],minWidth:[Function,Number,String],onContentReady:Function,onDisposing:Function,onFocusIn:Function,onFocusOut:Function,onHidden:Function,onHiding:Function,onInitialized:Function,onOptionChanged:Function,onResize:Function,onResizeEnd:Function,onResizeStart:Function,onShowing:Function,onShown:Function,onTitleRendered:Function,position:[Function,Object,String],resizeEnabled:Boolean,restorePosition:Boolean,rtlEnabled:Boolean,shading:Boolean,shadingColor:String,showCloseButton:Boolean,showTitle:Boolean,tabIndex:Number,title:String,titleTemplate:{},toolbarItems:Array,visible:Boolean,width:[Function,Number,String],wrapperAttr:{}}});o.DxDropDownOptions=u,u.$_optionName="dropDownOptions",u.$_expectedChildren={animation:{isCollectionItem:!1,optionName:"animation"},position:{isCollectionItem:!1,optionName:"position"},toolbarItem:{isCollectionItem:!0,optionName:"toolbarItems"}};var c=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}});o.DxFrom=c,c.$_optionName="from",c.$_expectedChildren={position:{isCollectionItem:!1,optionName:"position"}};var m=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}});o.DxHide=m,m.$_optionName="hide",m.$_expectedChildren={from:{isCollectionItem:!1,optionName:"from"},to:{isCollectionItem:!1,optionName:"to"}};var _=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:disabled":null,"update:html":null,"update:template":null,"update:text":null,"update:visible":null},props:{disabled:Boolean,html:String,template:{},text:String,visible:Boolean}});o.DxItem=_,_.$_optionName="items",_.$_isCollectionItem=!0;var b=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});o.DxMy=b,b.$_optionName="my";var x=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});o.DxOffset=x,x.$_optionName="offset";var y=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:bindingOptions":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:icon":null,"update:onClick":null,"update:onContentReady":null,"update:onDisposing":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:stylingMode":null,"update:tabIndex":null,"update:template":null,"update:text":null,"update:type":null,"update:useSubmitBehavior":null,"update:validationGroup":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,bindingOptions:Object,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Function,Number,String]}});o.DxOptions=y,y.$_optionName="options";var I=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:at":null,"update:boundary":null,"update:boundaryOffset":null,"update:collision":null,"update:my":null,"update:of":null,"update:offset":null},props:{at:[Object,String],boundary:{},boundaryOffset:[Object,String],collision:[Object,String],my:[Object,String],of:{},offset:[Object,String]}});o.DxPosition=I,I.$_optionName="position";var E=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}});o.DxShow=E,E.$_optionName="show";var B=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}});o.DxTo=B,B.$_optionName="to";var O=a.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:cssClass":null,"update:disabled":null,"update:html":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:options":null,"update:showText":null,"update:template":null,"update:text":null,"update:toolbar":null,"update:visible":null,"update:widget":null},props:{cssClass:String,disabled:Boolean,html:String,locateInMenu:String,location:String,menuItemTemplate:{},options:{},showText:String,template:{},text:String,toolbar:String,visible:Boolean,widget:String}});return o.DxToolbarItem=O,O.$_optionName="toolbarItems",O.$_isCollectionItem=!0,o.default=i,o}var Ae=Fe();const De=he(Ae),Ve={__name:"ListTagBox",props:{width:{type:Number,default:()=>300},height:{type:Number,default:()=>400},value:{type:Array,default:()=>[]},onValueChanged:{type:Function,default:()=>function(){}},dataSource:{type:Array,default:()=>[]},dataGridComponent:{type:Object,default:()=>{}}},setup(e){const t=e;function n(){t.dataGridComponent.updateDimensions()}return(a,i)=>(ge(),me(_e(De),{"data-source":e.dataSource,value:e.value,"show-selection-controls":!0,"max-displayed-tags":3,"show-multi-tag-only":!1,"on-value-changed":l=>e.onValueChanged(l.value),"on-selection-changed":n,"search-enabled":!0,dropDownOptions:{width:e.width,height:e.height}},null,8,["data-source","value","on-value-changed","dropDownOptions"]))}};export{Ve as _};
