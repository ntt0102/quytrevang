import{u as k,r as g,a as q,c as x,w as S,p as T,f as d,_,h as B,k as u,m as f,o as E,e as a,g as i,n}from"./app-DRvEsiQb.js";/* empty css            */const z={__name:"TrackStatisticPopup",setup(G,{expose:v}){const r=B(),{t:o}=k(),D=u("bus"),s=u("mt"),h=u("mf"),p=g(null),l=g(null),e=q({gridData:null,validationRules:{amount:[{type:"required",message:o("trading.derstats.amount")+s.validations.required}],scores:[{type:"required",message:o("trading.derstats.scores")+s.validations.required}],revenue:[{type:"required",message:o("trading.derstats.revenue")+s.validations.required}],loss:[{type:"required",message:o("trading.derstats.loss")+s.validations.required}],fees:[{type:"required",message:o("trading.derstats.fees")+s.validations.required}],date:[{type:"required",message:o("trading.derstats.date")+s.validations.required},{type:"async",validationCallback:t=>r.dispatch("tradingDerstat/validateDuplicateDate",t),message:o("trading.derstats.validations.date")}]}});x(()=>r.state.auth.user.permissions),S(()=>r.state.tradingDerstat.data,t=>{e.gridData=h.cloneDeep(t)});function w(){p.value.show()}function y(t){t.changes.length&&D.emit("checkPin",()=>r.dispatch("tradingDerstat/save",t))}function b(){r.dispatch("tradingDerstat/getData")}function C(){e.gridData=null}return v({show:w}),(t,c)=>{const R=f("DxToolbar"),$=f("DxScrollView");return E(),T(_,{ref_key:"popupRef",ref:p,title:t.$t("trading.derstats.buttons.addData"),onShown:b,onHidden:C},{default:d(()=>[a($,null,{default:d(()=>[a(i(n.DxDataGrid),{ref_key:"dataGridRef",ref:l,"data-source":e.gridData,"key-expr":"id","show-borders":!0,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",paging:{pageSize:8},headerFilter:{visible:!0},loadPanel:{enabled:!0},selection:{mode:"single"},editing:{allowAdding:!0,allowUpdating:!0,allowDeleting:!0,mode:"batch",startEditAction:"dblClick"},onContentReady:c[0]||(c[0]=m=>t.$mf.dataGridPreload(e.gridData,l.value.instance)),onSaved:y},{commandCellTemplate:d(({data:m})=>[a(R,{items:[{locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"trash",hint:t.$t("buttons.delete"),text:t.$t("buttons.delete"),onClick:()=>{l.value.instance.deleteRow(m.rowIndex)}}}]},null,8,["items"])]),default:d(()=>[a(i(n.DxColumn),{fixed:!0,visible:!1,width:35,type:"buttons",cssClass:"dx-datagrid-command-column","cell-template":"commandCellTemplate",caption:t.$t("titles.commandHeaderTitleShort")},null,8,["caption"]),a(i(n.DxColumn),{"data-field":"date","data-type":"date","editor-options":{dateSerializationFormat:t.$mc.DX_SERVER_DATE_FORMAT,showClearButton:"true",useMaskBehavior:"true",applyValueMode:"useButtons"},caption:t.$t("trading.derstats.date"),"validation-rules":e.validationRules.date},null,8,["editor-options","caption","validation-rules"]),a(i(n.DxColumn),{"data-field":"amount","data-type":"number",width:100,caption:t.$t("trading.derstats.amount"),"validation-rules":e.validationRules.amount},null,8,["caption","validation-rules"]),a(i(n.DxColumn),{"data-field":"scores","data-type":"number",format:"#0.#","editor-options":{step:"0.1",format:"#0.#"},caption:t.$t("trading.derstats.scores"),"validation-rules":e.validationRules.scores},null,8,["caption","validation-rules"]),a(i(n.DxColumn),{"data-field":"revenue","data-type":"number",format:"#,##0","editor-options":{step:"1",format:"#,##0"},caption:t.$t("trading.derstats.revenue"),"validation-rules":e.validationRules.revenue},null,8,["caption","validation-rules"]),a(i(n.DxColumn),{"data-field":"loss","data-type":"number",format:"#,##0","editor-options":{step:"1",format:"#,##0"},caption:t.$t("trading.derstats.loss"),"validation-rules":e.validationRules.loss},null,8,["caption","validation-rules"]),a(i(n.DxColumn),{"data-field":"fees","data-type":"number",format:"#,##0","editor-options":{step:"1",format:"#,##0"},caption:t.$t("trading.derstats.fees"),"validation-rules":e.validationRules.fees},null,8,["caption","validation-rules"])]),_:1},8,["data-source"])]),_:1})]),_:1},8,["title"])}}};export{z as default};
