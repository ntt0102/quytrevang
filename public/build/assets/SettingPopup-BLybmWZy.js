import{u as C,r as c,a as _,c as D,w as g,p as $,f as r,_ as k,h as I,k as u,m as R,o as B,e as t,d as p,g as a,z as l,v as V}from"./app-Bb_8_EAZ.js";const q={ref:"submitRef",class:"display-none"},M={__name:"SettingPopup",setup(N,{expose:m}){const s=I(),{t:n}=C(),f=u("bus"),d=u("mt"),v=u("mf"),i=c(null),b=c(null),o=_({formData:{},validationRules:{vpsCode:[{type:"required",message:n("models.copyist.vpsCode")+d.validations.required},{type:"async",validationCallback:e=>s.dispatch("userCopyist/validateVpsCode",e),message:n("models.copyist.vpsCode")+d.validations.duplicate}],volume:[{type:"required",message:n("models.copyist.volume")+d.validations.required}]}});D(()=>s.state.auth.user.permissions),g(()=>s.state.userCopyist.copyist,e=>{o.formData=v.cloneDeep(e)});function y(){i.value.show()}function h(){f.emit("checkPin",()=>{s.dispatch("userCopyist/save",o.formData).then(e=>{e&&i.value.hide()})})}function w(){s.dispatch("userCopyist/getCopyist")}function x(){}return m({show:y}),(e,z)=>{const S=R("DxScrollView");return B(),$(k,{ref_key:"popupRef",ref:i,title:e.$t("user.copyist.setting"),toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:e.$t("buttons.save"),onClick:()=>e.$refs.submitRef.click()}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:e.$t("buttons.cancel"),onClick:()=>i.value.hide()}}],onShown:w,onHidden:x},{default:r(()=>[t(S,null,{default:r(()=>[p("form",{onSubmit:V(h,["prevent"])},[p("button",q,null,512),t(a(l.DxForm),{ref_key:"formRef",ref:b,"form-data":o.formData,"col-count":2,"label-location":e.$screen.getScreenSizeInfo.isXSmall?"top":"left","scrolling-enabled":!0},{default:r(()=>[t(a(l.DxItem),{colSpan:2,"data-field":"allow_copy","editor-type":"dxSwitch",label:{text:e.$t("models.copyist.allowCopy")}},null,8,["label"]),t(a(l.DxItem),{colSpan:2,"data-field":"allow_share","editor-type":"dxSwitch",label:{text:e.$t("models.copyist.allowShare")}},null,8,["label"]),t(a(l.DxItem),{colSpan:2,"data-field":"vps_code","validation-rules":o.validationRules.vpsCode,label:{text:e.$t("models.copyist.vpsCode")}},null,8,["validation-rules","label"]),t(a(l.DxItem),{"data-field":"allow_max_vol","editor-type":"dxSwitch",label:{text:e.$t("models.copyist.allowMaxVol")}},null,8,["label"]),t(a(l.DxItem),{visible:!o.formData.allow_max_vol,"data-field":"volume","editor-type":"dxNumberBox","validation-rules":o.validationRules.volume,label:{text:e.$t("models.copyist.volume")}},null,8,["visible","validation-rules","label"])]),_:1},8,["form-data","label-location"])],32)]),_:1})]),_:1},8,["title","toolbarItems"])}}};export{M as default};
