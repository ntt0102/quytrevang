import B from"./Chart-CVb7WlZc.js";import{u as _,r as $,c as s,a as I,H as P,b as A,e as i,g as O,f as T,h as W,j as E,k as f,x as g,m as u,o as F}from"./app-B8skCkqp.js";import{s as L}from"./subYears-DUvuftU_.js";import"./lightweight-charts.esm.development-Bcn7_Fvc.js";/* empty css            */const M={class:"share-page content-block dx-card responsive-paddings"},U={__name:"Index",setup(R){const o=W(),m=E(),{t:n}=_(),d=f("bus"),w=f("devices"),r=$(null),D=s(()=>o.state.tradingShare.groups),p=s(()=>o.state.tradingShare.symbols.length),v=s(()=>o.state.tradingShare.source),b=s(()=>o.state.tradingShare.sources),t=I({group:m.query.list??"",showDatePicker:!1,fromDate:L(new Date,5),watchlistActions:[{icon:"far fa-heart-circle-plus small",text:n("trading.share.filterWatchList"),value:!0},{icon:"far fa-heart-circle-minus small",text:n("trading.share.deleteWatchList"),value:!1}]});o.dispatch("tradingShare/getGroups"),P(()=>{o.dispatch("tradingShare/resetState")});function l({component:e}){const a=e.option("value");t.group=a!==null?a.trim().toUpperCase():"",o.dispatch("tradingShare/getSymbols",t.group)}function h({value:e}){t.fromDate=e,r.value.getChartData(!0,e)}function k({item:e}){o.dispatch("tradingShare/setSource",e),r.value.getChartData(!0,t.fromDate)}function y({itemData:e}){d.emit("checkPin",()=>{const a={multi:!0,group:t.group,add:e.value};o.dispatch("tradingShare/changeWatchlist",a).then(c=>{r.value.updateWatchlist(c)})})}function S(){const e=t.group;if(!e)return g.warning(n("trading.share.filterGroupWarning"));const a=r.value.getFilterTimes();if(a.length<2)return g.warning(n("trading.share.filterTimeWarning"));d.emit("checkPin",()=>{o.dispatch("tradingShare/filterSymbols",{group:e,filterTimes:a})})}return(e,a)=>{const c=u("DxToolbar"),x=u("DxDateBox"),C=u("DxPopup");return F(),A("div",M,[i(c,{items:[{visible:e.$mf.isSet(e.$route.query),location:"before",widget:"dxButton",options:{icon:"far fa-arrow-left small",hint:e.$t("buttons.back"),onClick:()=>e.$router.go(-1)}},{location:"before",widget:"dxButton",options:{icon:"far fa-calendar small",hint:e.$t("trading.share.filterSymbols"),onClick:()=>t.showDatePicker=!0}},{location:"before",widget:"dxDateBox",options:{width:O(w).phone?"90":"120",type:"date",value:t.fromDate,onValueChanged:h}},{location:"before",widget:"dxAutocomplete",options:{width:"90",showClearButton:!0,openOnFieldClick:!0,minSearchLength:0,dataSource:D.value,value:t.group,elementAttr:{class:"symbol-group"},placeholder:e.$t("trading.share.group"),onEnterKey:l,onFocusOut:l,onItemClick:l}},{visible:p.value>0,location:"before",text:`(${p.value})`},{location:"after",widget:"dxDropDownButton",options:{showArrowIcon:!1,items:b.value,selectedItemKey:v.value,stylingMode:"text",useSelectMode:!0,width:"50",dropDownOptions:{width:"70"},elementAttr:{class:"source"},onSelectionChanged:k}},{location:"after",widget:"dxDropDownButton",options:{showArrowIcon:!1,items:t.watchlistActions,displayExpr:"text",keyExpr:"value",icon:"far fa-heart-circle-bolt small",dropDownOptions:{width:"220"},onItemClick:y}},{location:"after",widget:"dxButton",options:{icon:"far fa-filter small",hint:e.$t("trading.share.filterSymbols"),onClick:S}}]},null,8,["items"]),i(C,{visible:t.showDatePicker,closeOnOutsideClick:!0,title:"Chọn ngày",onHiding:a[0]||(a[0]=V=>t.showDatePicker=!1)},{default:T(()=>[i(x,{pickerType:"calendar",displayFormat:"yyyy-MM-dd",value:t.fromDate,onValueChanged:h},null,8,["value"])]),_:1},8,["visible"]),i(B,{fromDate:t.fromDate,group:t.group,ref_key:"chartRef",ref:r},null,8,["fromDate","group"])])}}};export{U as default};
