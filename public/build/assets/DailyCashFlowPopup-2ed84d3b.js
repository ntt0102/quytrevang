import{u as v,r as i,d as g,f as w,n as _,k as c,_ as S,o as D,j as V,h as n,A as k,B as F}from"./app-65b2071c.js";import{c as x}from"./lightweight-charts.esm.development-03366bac.js";const M=["title"],L={__name:"DailyCashFlowPopup",setup(B,{expose:p}){const h={localization:{dateFormat:"dd/MM/yyyy",locale:"vi-VN"},rightPriceScale:{visible:!0,scaleMargins:{top:.05,bottom:.4}},leftPriceScale:{visible:!1},layout:{backgroundColor:"#000000",textColor:"#CCCCCC"},grid:{vertLines:{color:"#1B1E27",style:2},horzLines:{color:"#1B1E27",style:2}},crosshair:{mode:0},timeScale:{timeVisible:!1,rightOffset:20,minBarSpacing:.01},watermark:{visible:!0,fontSize:50,horzAlign:"center",vertAlign:"center",color:"rgba(171, 71, 188, 0.2)"}},r=v(),l=i(null),o=i(null),a=g({symbol:"VN30F1M"});let e={chart:{},series:{price:{},avg:{},cash:{}}};function u(){l.value.show()}function d(t){if(a.symbol=="")return!1;a.symbol=a.symbol.toUpperCase(),r.dispatch("tradingOrder/cashflow",a.symbol).then(s=>{e.series.price.setData(s.price),e.series.avg.setData(s.avg),e.series.cash.setData(s.cash),e.chart.applyOptions({watermark:{text:a.symbol}}),t.target.blur()})}function f(t){t.target.select()}function m(){e.chart=x(o.value,h),r.dispatch("tradingOrder/cashflow",a.symbol).then(t=>{e.series.price=e.chart.addCandlestickSeries({upColor:"#26a69a",downColor:"#ef5350",borderVisible:!1,wickUpColor:"#26a69a",wickDownColor:"#ef5350",priceFormat:{minMove:.1}}),e.series.price.setData(t.price),e.series.avg=e.chart.addLineSeries({color:"#CCCCCC",priceFormat:{minMove:.1},lastValueVisible:!1,priceLineVisible:!1}),e.series.avg.setData(t.avg),e.series.cash=e.chart.addLineSeries({color:"#2962FF",priceScaleId:"cash",scaleMargins:{top:.61,bottom:.01},lastValueVisible:!1}),e.series.cash.setData(t.cash),e.chart.timeScale().fitContent(),e.chart.applyOptions({watermark:{text:a.symbol}})})}function C(){o.value.removeChild(o.value.lastChild)}return p({show:u}),(t,s)=>{const y=w("DxScrollView");return D(),_(S,{ref_key:"popupRef",ref:l,class:"cashflow-popup",title:t.$t("trading.orderChart.DailyCashFlowPopup.title"),fullScreen:!0,onShown:m,onHidden:C},{default:c(()=>[V(y,null,{default:c(()=>[n("div",{class:"cashflow-chart",style:{height:"calc(100vh - 64px)"},ref_key:"orderChartRef",ref:o},[k(n("input",{type:"text",class:"symbol-input",title:t.$t("trading.orderChart.DailyCashFlowPopup.symbol"),"onUpdate:modelValue":s[0]||(s[0]=b=>a.symbol=b),onChange:d,onFocus:f},null,40,M),[[F,a.symbol]])],512)]),_:1})]),_:1},8,["title"])}}};export{L as default};
