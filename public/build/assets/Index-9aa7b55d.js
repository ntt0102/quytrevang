import{m as g,a as b,n as h,e as fe,b as y,c as p,r as _e,i as be,g as Se,d as z,f as q,_ as Ce,D as xe,C as ye}from"./app-f37d1114.js";import{_ as Ne,a as De,B as we,R as $e,p as Te,n as Ae,o as R,b as H,c as W,g as Ee}from"./Trades-d7e1f9d4.js";import{T as Ie,a as Oe}from"./Finbooks-23a628a0.js";import{D as U,a as X}from"./data-grid-ec6370c3.js";import{a as Fe}from"./Contracts-306af99b.js";import{a as Le}from"./dialog-42ea61b6.js";import{E as Pe}from"./EditProfilePopup-4a31dc58.js";import{C as ke}from"./ContractDetailPopup-e6351046.js";import{u as ze}from"./Contract-e601a775.js";import"./ui.data_grid.row_dragging-72b50656.js";import"./moment-53db9517.js";function Re(){return{charts:{},copyRate:0}}const Be={charts:t=>t.charts,copyRate:t=>t.copyRate},je={getMonthChart({commit:t,dispatch:e,getters:n,state:a,rootGetters:o}){return new Promise((l,d)=>{axios.get("trade",{crypto:!0}).then(r=>{t("setState",r.data),l()})})}},Me={setState(t,e){t.charts=e.charts,t.copyRate=e.copyRate}},Ge={namespaced:!0,state:Re,getters:Be,actions:je,mutations:Me};const Ve={components:{DxChart:Ne},data(){return{}},beforeCreate(){this.$store.registerModule("User.trade",Ge)},created(){this.getMonthChart(),this.$bus.on("toggleMenu",()=>{setTimeout(()=>this.chart.render(),300)})},destroyed(){this.$store.unregisterModule("User.trade"),this.$bus.off("toggleMenu")},computed:{...g("User.trade",["charts","copyRate"]),chart(){return this.$refs.chart.instance}},methods:{...b("User.trade",["getMonthChart"])}};var qe=function(){var e=this,n=e._self._c;return n("div",{staticClass:"overview-week-trade dx-card responsive-paddings content-block"},[n("DxChart",{ref:"chart",attrs:{"data-source":e.charts,title:{text:e.$t("user.overview.monthTrade.title"),subtitle:{text:e.$t("user.overview.monthTrade.subtitle").replace("{copy}",e.copyRate)},horizontalAlignment:"center"},size:{width:"100%",height:300},series:[{valueField:"accumulatedProfit",argumentField:"time",type:"spline",color:"lime"}],valueAxis:[{name:"accumulatedProfit",synchronizedValue:0,label:{visible:!1},tick:{visible:!1},visible:!1}],legend:{visible:!1}}})],1)},He=[],We=h(Ve,qe,He,!1,null,null,null,null);const Ue=We.exports;const Xe=200,B=4,Ye={components:{},data(){return{interval:null,change:{},doneFlag:!1,day:0,week:0,month:0,quarter:0,year:0,all:0}},beforeCreate(){this.$store.registerModule("Trading.trades",De)},created(){this.getSummary()},destroyed(){this.$store.unregisterModule("Trading.trades")},computed:{...g("Trading.trades",["summary"])},watch:{summary(t){this.$mf.isSet(t)&&(this.calculateChange(),this.interval||(this.interval=setInterval(()=>{this.animatedNumber("day"),this.animatedNumber("week"),this.animatedNumber("month"),this.animatedNumber("quarter"),this.animatedNumber("year"),this.animatedNumber("all"),this.doneFlag&&(clearInterval(this.interval),this.interval=null)},B)))}},methods:{...b("Trading.trades",["getSummary","resetState"]),viewDetail(t){this.$router.push({name:"trades",query:{period:t}})},animatedNumber(t){Math.abs(this[t])<Math.abs(this.summary[t]-this.change[t])?(this[t]+=this.change[t],this.doneFlag=!1):(this[t]=this.summary[t],this.doneFlag=!0)},calculateChange(){let t=Xe/B;this.change.day=this.summary.day/t,this.change.week=this.summary.week/t,this.change.month=this.summary.month/t,this.change.quarter=this.summary.quarter/t,this.change.year=this.summary.year/t,this.change.all=this.summary.all/t}}};var Ke=function(){var e=this,n=e._self._c;return n("div",{staticClass:"overview-trading dx-card responsive-paddings content-block"},[n("div",{on:{click:function(a){return e.viewDetail("day")}}},[n("div",{staticClass:"period"},[e._v(" "+e._s(e.$t("trading.trades.selects.period.day"))+" ")]),e.$mf.isSet(e.summary)?n("div",{class:`quality ${e.summary.day>=0?"good":"bad"}`},[e.$devices.phone?e._e():n("i",{class:`far fa-long-arrow-alt-${e.summary.day>=0?"up":"down"}`}),e._v(" "+e._s(e._f("numberVnFormat")(e.day,1))+"% ")]):n("div",[e._v("-")])]),n("div",{on:{click:function(a){return e.viewDetail("week")}}},[n("div",{staticClass:"period"},[e._v(" "+e._s(e.$t("trading.trades.selects.period.week"))+" ")]),e.$mf.isSet(e.summary)?n("div",{class:`quality ${e.summary.week>=0?"good":"bad"}`},[e.$devices.phone?e._e():n("i",{class:`far fa-long-arrow-alt-${e.summary.week>=0?"up":"down"}`}),e._v(" "+e._s(e._f("numberVnFormat")(e.week,1))+"% ")]):n("div",[e._v("-")])]),n("div",{on:{click:function(a){return e.viewDetail("month")}}},[n("div",{staticClass:"period"},[e._v(" "+e._s(e.$t("trading.trades.selects.period.month"))+" ")]),e.$mf.isSet(e.summary)?n("div",{class:`quality ${e.summary.month>=0?"good":"bad"}`},[e.$devices.phone?e._e():n("i",{class:`far fa-long-arrow-alt-${e.summary.month>=0?"up":"down"}`}),e._v(" "+e._s(e._f("numberVnFormat")(e.month,0))+"% ")]):n("div",[e._v("-")])]),n("div",{on:{click:function(a){return e.viewDetail("quater")}}},[n("div",{staticClass:"period"},[e._v(" "+e._s(e.$t("trading.trades.selects.period.quarter"))+" ")]),e.$mf.isSet(e.summary)?n("div",{class:`quality ${e.summary.quarter>=0?"good":"bad"}`},[e.$devices.phone?e._e():n("i",{class:`far fa-long-arrow-alt-${e.summary.quarter>=0?"up":"down"}`}),e._v(" "+e._s(e._f("numberVnFormat")(e.quarter,0))+"% ")]):n("div",[e._v("-")])]),n("div",{on:{click:function(a){return e.viewDetail("year")}}},[n("div",{staticClass:"period"},[e._v(" "+e._s(e.$t("trading.trades.selects.period.year"))+" ")]),e.$mf.isSet(e.summary)?n("div",{class:`quality ${e.summary.year>=0?"good":"bad"}`},[e.$devices.phone?e._e():n("i",{class:`far fa-long-arrow-alt-${e.summary.year>=0?"up":"down"}`}),e._v(" "+e._s(e._f("numberVnFormat")(e.year,0))+"% ")]):n("div",[e._v("-")])]),n("div",{on:{click:function(a){return e.viewDetail("year")}}},[n("div",{staticClass:"period"},[e._v(" "+e._s(e.$t("trading.trades.selects.period.all"))+" ")]),e.$mf.isSet(e.summary)?n("div",{class:`quality ${e.summary.all>=0?"good":"bad"}`},[e.$devices.phone?e._e():n("i",{class:`far fa-long-arrow-alt-${e.summary.all>=0?"up":"down"}`}),e._v(" "+e._s(e._f("numberVnFormat")(e.all,0))+"% ")]):n("div",[e._v("-")])])])},Je=[],Qe=h(Ye,Ke,Je,!1,null,null,null,null);const Ze=Qe.exports;var i={},v=Number;function N(){this.setDomain(arguments[0],arguments[1]).setCodomain(arguments[2],arguments[3]).setInverted(!1)}N.prototype={constructor:N,setDomain:function(t,e){return this._domain1=v(t),this._domain2=v(e),this._domainDelta=this._domain2-this._domain1,this},setCodomain:function(t,e){return this._codomain1=v(t),this._codomain2=v(e),this._codomainDelta=this._codomain2-this._codomain1,this},setInverted(t){this.inverted=t},getDomain:function(){return[this._domain1,this._domain2]},getCodomain:function(){return[this._codomain1,this._codomain2]},getDomainStart:function(){return this._domain1},getDomainEnd:function(){return this._domain2},getCodomainStart:function(){return this._codomain1},getCodomainEnd:function(){return this._codomain2},getDomainRange:function(){return this._domainDelta},getCodomainRange:function(){return this._codomainDelta},translate:function(t){var e=(v(t)-this._domain1)/this._domainDelta;return this.inverted&&(e=1-e),0<=e&&e<=1?this._codomain1+e*this._codomainDelta:NaN},adjust:function(t){var e=(v(t)-this._domain1)/this._domainDelta,n=NaN;return e<0?n=this._domain1:e>1?n=this._domain2:0<=e&&e<=1&&(n=v(t)),n}};var{states:f}=W,j=W.pieSeriesSpacing,et=["startAngle","innerRadius","segmentsDirection","type"],tt=f.normalMark,nt=f.hoverMark,at=f.selectedMark,it=5,ot=[f.resetItem,f.applyHover,f.applySelected,f.applySelected];function rt(t){var e=tt;return t.forEach(n=>{var a,o=(a=n.series)===null||a===void 0?void 0:a.getOptions(),l=n.fullState;(o==null?void 0:o.hoverMode)==="none"&&(l&=~nt),(o==null?void 0:o.selectionMode)==="none"&&(l&=~at),e|=l}),ot[e]}function M(t){return be(t)?t>1?t=1:t<0&&(t=0):t=void 0,t}var G=function(){function t(a,o){return a.filter(function(l){return l!==o})}var e=[],n={};return{queue:function(a){var o=a.getSizeGroup();e=(l=e,d=a,t(l,d).concat(d));var l,d;clearTimeout(n[o]),n[o]=setTimeout(function(){(function(r,s){var c=s.filter(m=>m._isVisible()&&m.getSizeGroup()===r),_=Math.min.apply(null,c.map(m=>m.getSizeGroupLayout().radius)),S=c.filter(m=>m.getSizeGroupLayout().radius===_);c.forEach(m=>m.render({force:!0,sizeGroupLayout:S.length?S[0].getSizeGroupLayout():{}}))})(o,e)})},remove:function(a){e=t(e,a),e.length||(n={})}}}(),C=we.inherit({_themeSection:"pie",_layoutManagerOptions:function(){return fe(!0,{},this.callBase(),{piePercentage:M(this._themeManager.getOptions("diameter")),minPiePercentage:M(this._themeManager.getOptions("minDiameter"))})},_customChangesOrder:["CENTER_TEMPLATE"],_optionChangesMap:{diameter:"REINIT",minDiameter:"REINIT",sizeGroup:"REINIT",centerTemplate:"CENTER_TEMPLATE"},_change_CENTER_TEMPLATE(){this._renderCenterTemplate()},_disposeCore:function(){G.remove(this),this.callBase(),this._centerTemplateGroup.linkOff().dispose()},_groupSeries:function(){var t=this.series;this._groupsData={groups:[{series:t,valueOptions:{valueType:"numeric"}}],argumentOptions:t[0]&&t[0].getOptions()}},getArgumentAxis:function(){return null},_getValueAxis:function(){var t=new N().setCodomain(360,0);return{getTranslator:function(){return t},setBusinessRange:function(e){t.setDomain(e.min,e.max)}}},_populateBusinessRange:function(){this.series.map(function(t){var e=new $e;return e.addRange(t.getRangeData().val),t.getValueAxis().setBusinessRange(e),e})},_specialProcessSeries:function(){y(this.series,function(t,e){e.arrangePoints()})},_checkPaneName:function(){return!0},_processSingleSeries:function(t){this.callBase(t),t.arrangePoints()},_handleSeriesDataUpdated:function(){var t=0;this.series.forEach(function(e){t=Math.max(e.getPointsCount(),t)}),this.series.forEach(function(e){e.setMaxPointsCount(t)}),this.callBase()},_getLegendOptions:function(t){var e=this.callBase(t),n=e.legendData;return n.argument=t.argument,n.argumentIndex=t.argumentIndex,n.points=[t],e},_getLegendTargets:function(){var t=this,e={};(t.series||[]).forEach(function(a){a.getPoints().forEach(function(o){var l=o.argument.valueOf(),d=a.getPointsByArg(l).indexOf(o),r=l.valueOf().toString()+d;e[r]=e[r]||[];var s=e[r].push(o);o.index=e[r][s-2]?e[r][s-2].index:Object.keys(e).length-1,o.argumentIndex=d})});var n=[];return y(e,function(a,o){o.forEach(function(l,d){if(d===0){n.push(t._getLegendOptions(l));return}var r=n[n.length-1];r.legendData.points.push(l),r.visible||(r.visible=l.isVisible())})}),n},_getLayoutTargets:function(){return[{canvas:this._canvas}]},_getLayoutSeries:function(t,e){var n,a=this._canvas,o=!1;return n=this.layoutManager.applyPieChartSeriesLayout(a,t,!0),t.forEach(function(l){l.correctPosition(n,a),o=l.drawLabelsWOPoints()||o}),o&&(n=this.layoutManager.applyPieChartSeriesLayout(a,t,e.hideLayoutLabels)),t.forEach(function(l){l.hideLabels()}),this._sizeGroupLayout={x:n.centerX,y:n.centerY,radius:n.radiusOuter,drawOptions:e},n},_getLayoutSeriesForEqualPies:function(t,e){var n=this._canvas,a=this.layoutManager.applyEqualPieChartLayout(t,e);return t.forEach(function(o){o.correctPosition(a,n),o.drawLabelsWOPoints()}),this.layoutManager.correctPieLabelRadius(t,a,n),a},_updateSeriesDimensions:function(t){var e=this._getVisibleSeries(),n=e.length,a,o,l,d=t.sizeGroupLayout;n&&(l=d?this._getLayoutSeriesForEqualPies(e,d):this._getLayoutSeries(e,t),o=(l.radiusOuter-l.radiusInner-j*(n-1))/n,a=l.radiusInner,this._setGeometry(l),e.forEach(function(r){r.correctRadius({radiusInner:a,radiusOuter:a+o}),a+=o+j}))},_renderSeries:function(t,e,n){if(this._calculateSeriesLayout(t,e),!t.sizeGroupLayout&&this.getSizeGroup()){G.queue(this),this._clearCanvas();return}this._renderSeriesElements(t,n)},_createHtmlStructure(){this.callBase(),this._centerTemplateGroup=this._renderer.g().attr({class:"dxc-hole-template"}).linkOn(this._renderer.root,"center-template").css(Te(this._themeManager._font)).linkAppend()},_renderExtraElements(){this._requestChange(["CENTER_TEMPLATE"])},_renderCenterTemplate(){var t=this.option("centerTemplate"),e=this._centerTemplateGroup.clear();t&&(e.attr({visibility:"hidden"}),t=this._getTemplate(t),t.render({model:this,container:e.element,onRendered:()=>{var n=e,a=n.getBBox();n.move(this._center.x-(a.x+a.width/2),this._center.y-(a.y+a.height/2)),n.attr({visibility:"visible"})}}))},getInnerRadius(){return this._innerRadius},_getLegendCallBack:function(){var t=this,e=this._legend,n=this._getLegendTargets().map(function(a){return a.legendData});return function(a){n.forEach(function(o){var l=[],d=e.getActionCallback({index:o.id});t.series.forEach(function(r){var s=r.getPointsByKeys(o.argument,o.argumentIndex);l.push.apply(l,s)}),a&&a.argument===o.argument&&a.argumentIndex===o.argumentIndex&&l.push(a),d(rt(l))})}},_locateLabels(t){var e=0,n,a;do a=this._adjustSeriesLabels(t==="shift"),n=this._resolveLabelOverlapping(t);while((n||a)&&++e<it)},_adjustSeriesLabels:function(t){return this.series.reduce((e,n)=>n.adjustLabels(t)||e,!1)},_applyExtraSettings:p,_resolveLabelOverlappingShift:function(){var t=this,e=t.option("segmentsDirection")==="anticlockwise",n=t.series.reduce(function(r,s){return(r[s.getOptions().label.position]||r.outside).push(s),r},{inside:[],columns:[],outside:[]}),a=!1;return n.inside.length>0&&(a=l(n.inside.reduce(function(r,s){return s.getVisiblePoints().reduce(function(c,_){return c.left.push(_),c},r)},{left:[],right:[]}),d)||a),a=n.columns.reduce((r,s)=>l(o(s),d)||r,a),n.outside.length>0&&(a=l(n.outside.reduce(function(r,s){return o(s,r)},null),function(r,s){return Ee(r,-s,t._center)})||a),a;function o(r,s){return r.getVisiblePoints().reduce(function(c,_){var S=Ae(_.middleAngle);return(S<=90||S>=270?c.right:c.left).push(_),c},s||{left:[],right:[]})}function l(r,s){var c;return e&&(r.left.reverse(),r.right.reverse()),c=R.resolveLabelOverlappingInOneDirection(r.left,t._canvas,!1,!1,s),R.resolveLabelOverlappingInOneDirection(r.right,t._canvas,!1,!1,s)||c}function d(r,s){return{x:r.x,y:r.y-s}}},_setGeometry:function(t){var{centerX:e,centerY:n,radiusInner:a}=t;this._center={x:e,y:n},this._innerRadius=a},_disposeSeries(t){this.callBase.apply(this,arguments),this._abstractSeries=null},_legendDataField:"point",_legendItemTextField:"argument",_applyPointMarkersAutoHiding:p,_renderTrackers:p,_trackerType:"PieTracker",_createScrollBar:p,_updateAxesLayout:p,_applyClipRects:p,_appendAdditionalSeriesGroups:p,_prepareToRender:p,_isLegendInside:p,_renderAxes:p,_shrinkAxes:p,_isRotated:p,_seriesPopulatedHandlerCore:p,_reinitAxes:p,_correctAxes:p,_getExtraOptions:function(){return{startAngle:this.option("startAngle"),innerRadius:this.option("innerRadius"),segmentsDirection:this.option("segmentsDirection"),type:this.option("type")}},getSizeGroup:function(){return this._themeManager.getOptions("sizeGroup")},getSizeGroupLayout:function(){return this._sizeGroupLayout||{}}});y(et,function(t,e){C.prototype._optionChangesMap[e]="REFRESH_SERIES_DATA_INIT"});C.addPlugin(H.core);C.addPlugin(H.pieChart);_e("dxPieChart",C);const lt=Object.freeze(Object.defineProperty({__proto__:null,default:C},Symbol.toStringTag,{value:"Module"})),ut=Se(lt);/*!
 * devextreme-vue
 * Version: 21.2.13
 * Build date: Fri Apr 07 2023
 *
 * Copyright (c) 2012 - 2023 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */var st=z&&z.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(i,"__esModule",{value:!0});i.DxTooltipBorder=i.DxTooltip=i.DxTitle=i.DxSubtitle=i.DxSmallValuesGrouping=i.DxSize=i.DxShadow=i.DxSeriesTemplate=i.DxSeriesBorder=i.DxSeries=i.DxSelectionStyle=i.DxPieChartTitleSubtitle=i.DxPieChartTitle=i.DxMargin=i.DxLoadingIndicator=i.DxLegendTitleSubtitle=i.DxLegendTitle=i.DxLegend=i.DxLabel=i.DxImage=i.DxHoverStyle=i.DxHatching=i.DxFormat=i.DxFont=i.DxExport=i.DxConnector=i.DxCommonSeriesSettings=i.DxCommonAnnotationSettings=i.DxBorder=i.DxArgumentFormat=i.DxAnnotationBorder=i.DxAnnotation=i.DxAnimation=i.DxAdaptiveLayout=i.DxPieChart=void 0;var dt=st(ut),pt=q,u=q,Y=pt.createComponent({props:{adaptiveLayout:Object,animation:[Boolean,Object],annotations:Array,centerTemplate:{},commonAnnotationSettings:Object,commonSeriesSettings:{},customizeAnnotation:Function,customizeLabel:Function,customizePoint:Function,dataSource:{},diameter:Number,disabled:Boolean,elementAttr:Object,export:Object,innerRadius:Number,legend:Object,loadingIndicator:Object,margin:Object,minDiameter:Number,onDisposing:Function,onDone:Function,onDrawn:Function,onExported:Function,onExporting:Function,onFileSaving:Function,onIncidentOccurred:Function,onInitialized:Function,onLegendClick:Function,onOptionChanged:Function,onPointClick:Function,onPointHoverChanged:Function,onPointSelectionChanged:Function,onTooltipHidden:Function,onTooltipShown:Function,palette:[Array,String],paletteExtensionMode:String,pathModified:Boolean,pointSelectionMode:String,redrawOnResize:Boolean,resolveLabelOverlapping:String,rtlEnabled:Boolean,segmentsDirection:String,series:[Array,Object],seriesTemplate:Object,size:Object,sizeGroup:String,startAngle:Number,theme:String,title:[Object,String],tooltip:Object,type:String},emits:{"update:isActive":null,"update:hoveredElement":null,"update:adaptiveLayout":null,"update:animation":null,"update:annotations":null,"update:centerTemplate":null,"update:commonAnnotationSettings":null,"update:commonSeriesSettings":null,"update:customizeAnnotation":null,"update:customizeLabel":null,"update:customizePoint":null,"update:dataSource":null,"update:diameter":null,"update:disabled":null,"update:elementAttr":null,"update:export":null,"update:innerRadius":null,"update:legend":null,"update:loadingIndicator":null,"update:margin":null,"update:minDiameter":null,"update:onDisposing":null,"update:onDone":null,"update:onDrawn":null,"update:onExported":null,"update:onExporting":null,"update:onFileSaving":null,"update:onIncidentOccurred":null,"update:onInitialized":null,"update:onLegendClick":null,"update:onOptionChanged":null,"update:onPointClick":null,"update:onPointHoverChanged":null,"update:onPointSelectionChanged":null,"update:onTooltipHidden":null,"update:onTooltipShown":null,"update:palette":null,"update:paletteExtensionMode":null,"update:pathModified":null,"update:pointSelectionMode":null,"update:redrawOnResize":null,"update:resolveLabelOverlapping":null,"update:rtlEnabled":null,"update:segmentsDirection":null,"update:series":null,"update:seriesTemplate":null,"update:size":null,"update:sizeGroup":null,"update:startAngle":null,"update:theme":null,"update:title":null,"update:tooltip":null,"update:type":null},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=dt.default,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={adaptiveLayout:{isCollectionItem:!1,optionName:"adaptiveLayout"},animation:{isCollectionItem:!1,optionName:"animation"},annotation:{isCollectionItem:!0,optionName:"annotations"},commonAnnotationSettings:{isCollectionItem:!1,optionName:"commonAnnotationSettings"},commonSeriesSettings:{isCollectionItem:!1,optionName:"commonSeriesSettings"},export:{isCollectionItem:!1,optionName:"export"},legend:{isCollectionItem:!1,optionName:"legend"},loadingIndicator:{isCollectionItem:!1,optionName:"loadingIndicator"},margin:{isCollectionItem:!1,optionName:"margin"},pieChartTitle:{isCollectionItem:!1,optionName:"title"},series:{isCollectionItem:!0,optionName:"series"},seriesTemplate:{isCollectionItem:!1,optionName:"seriesTemplate"},size:{isCollectionItem:!1,optionName:"size"},title:{isCollectionItem:!1,optionName:"title"},tooltip:{isCollectionItem:!1,optionName:"tooltip"}}}});i.DxPieChart=Y;var K=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:height":null,"update:keepLabels":null,"update:width":null},props:{height:Number,keepLabels:Boolean,width:Number}});i.DxAdaptiveLayout=K;K.$_optionName="adaptiveLayout";var J=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:duration":null,"update:easing":null,"update:enabled":null,"update:maxPointCountSupported":null},props:{duration:Number,easing:String,enabled:Boolean,maxPointCountSupported:Number}});i.DxAnimation=J;J.$_optionName="animation";var x=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowDragging":null,"update:argument":null,"update:arrowLength":null,"update:arrowWidth":null,"update:border":null,"update:color":null,"update:customizeTooltip":null,"update:data":null,"update:description":null,"update:font":null,"update:height":null,"update:image":null,"update:location":null,"update:name":null,"update:offsetX":null,"update:offsetY":null,"update:opacity":null,"update:paddingLeftRight":null,"update:paddingTopBottom":null,"update:series":null,"update:shadow":null,"update:template":null,"update:text":null,"update:textOverflow":null,"update:tooltipEnabled":null,"update:tooltipTemplate":null,"update:type":null,"update:width":null,"update:wordWrap":null,"update:x":null,"update:y":null},props:{allowDragging:Boolean,argument:{},arrowLength:Number,arrowWidth:Number,border:Object,color:String,customizeTooltip:Function,data:{},description:String,font:Object,height:Number,image:[Object,String],location:String,name:String,offsetX:Number,offsetY:Number,opacity:Number,paddingLeftRight:Number,paddingTopBottom:Number,series:String,shadow:Object,template:{},text:String,textOverflow:String,tooltipEnabled:Boolean,tooltipTemplate:{},type:String,width:Number,wordWrap:String,x:Number,y:Number}});i.DxAnnotation=x;x.$_optionName="annotations";x.$_isCollectionItem=!0;x.$_expectedChildren={annotationBorder:{isCollectionItem:!1,optionName:"border"},border:{isCollectionItem:!1,optionName:"border"},font:{isCollectionItem:!1,optionName:"font"},image:{isCollectionItem:!1,optionName:"image"},shadow:{isCollectionItem:!1,optionName:"shadow"}};var Q=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:cornerRadius":null,"update:dashStyle":null,"update:opacity":null,"update:visible":null,"update:width":null},props:{color:String,cornerRadius:Number,dashStyle:String,opacity:Number,visible:Boolean,width:Number}});i.DxAnnotationBorder=Q;Q.$_optionName="border";var Z=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:currency":null,"update:formatter":null,"update:parser":null,"update:precision":null,"update:type":null},props:{currency:String,formatter:Function,parser:Function,precision:Number,type:String}});i.DxArgumentFormat=Z;Z.$_optionName="argumentFormat";var ee=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:cornerRadius":null,"update:dashStyle":null,"update:opacity":null,"update:visible":null,"update:width":null},props:{color:String,cornerRadius:Number,dashStyle:String,opacity:Number,visible:Boolean,width:Number}});i.DxBorder=ee;ee.$_optionName="border";var te=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:allowDragging":null,"update:argument":null,"update:arrowLength":null,"update:arrowWidth":null,"update:border":null,"update:color":null,"update:customizeTooltip":null,"update:data":null,"update:description":null,"update:font":null,"update:height":null,"update:image":null,"update:location":null,"update:offsetX":null,"update:offsetY":null,"update:opacity":null,"update:paddingLeftRight":null,"update:paddingTopBottom":null,"update:series":null,"update:shadow":null,"update:template":null,"update:text":null,"update:textOverflow":null,"update:tooltipEnabled":null,"update:tooltipTemplate":null,"update:type":null,"update:width":null,"update:wordWrap":null,"update:x":null,"update:y":null},props:{allowDragging:Boolean,argument:{},arrowLength:Number,arrowWidth:Number,border:Object,color:String,customizeTooltip:Function,data:{},description:String,font:Object,height:Number,image:[Object,String],location:String,offsetX:Number,offsetY:Number,opacity:Number,paddingLeftRight:Number,paddingTopBottom:Number,series:String,shadow:Object,template:{},text:String,textOverflow:String,tooltipEnabled:Boolean,tooltipTemplate:{},type:String,width:Number,wordWrap:String,x:Number,y:Number}});i.DxCommonAnnotationSettings=te;te.$_optionName="commonAnnotationSettings";var D=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:argumentField":null,"update:argumentType":null,"update:border":null,"update:color":null,"update:hoverMode":null,"update:hoverStyle":null,"update:label":null,"update:maxLabelCount":null,"update:minSegmentSize":null,"update:selectionMode":null,"update:selectionStyle":null,"update:smallValuesGrouping":null,"update:tagField":null,"update:valueField":null},props:{argumentField:String,argumentType:String,border:Object,color:String,hoverMode:String,hoverStyle:Object,label:Object,maxLabelCount:Number,minSegmentSize:Number,selectionMode:String,selectionStyle:Object,smallValuesGrouping:Object,tagField:String,valueField:String}});i.DxCommonSeriesSettings=D;D.$_optionName="commonSeriesSettings";D.$_expectedChildren={border:{isCollectionItem:!1,optionName:"border"},hoverStyle:{isCollectionItem:!1,optionName:"hoverStyle"},label:{isCollectionItem:!1,optionName:"label"},selectionStyle:{isCollectionItem:!1,optionName:"selectionStyle"},seriesBorder:{isCollectionItem:!1,optionName:"border"},smallValuesGrouping:{isCollectionItem:!1,optionName:"smallValuesGrouping"}};var ne=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:visible":null,"update:width":null},props:{color:String,visible:Boolean,width:Number}});i.DxConnector=ne;ne.$_optionName="connector";var ae=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:backgroundColor":null,"update:enabled":null,"update:fileName":null,"update:formats":null,"update:margin":null,"update:printingEnabled":null,"update:proxyUrl":null,"update:svgToCanvas":null},props:{backgroundColor:String,enabled:Boolean,fileName:String,formats:Array,margin:Number,printingEnabled:Boolean,proxyUrl:String,svgToCanvas:Function}});i.DxExport=ae;ae.$_optionName="export";var ie=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:family":null,"update:opacity":null,"update:size":null,"update:weight":null},props:{color:String,family:String,opacity:Number,size:[Number,String],weight:Number}});i.DxFont=ie;ie.$_optionName="font";var oe=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:currency":null,"update:formatter":null,"update:parser":null,"update:precision":null,"update:type":null},props:{currency:String,formatter:Function,parser:Function,precision:Number,type:String}});i.DxFormat=oe;oe.$_optionName="format";var re=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:direction":null,"update:opacity":null,"update:step":null,"update:width":null},props:{direction:String,opacity:Number,step:Number,width:Number}});i.DxHatching=re;re.$_optionName="hatching";var w=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:border":null,"update:color":null,"update:hatching":null},props:{border:Object,color:String,hatching:Object}});i.DxHoverStyle=w;w.$_optionName="hoverStyle";w.$_expectedChildren={border:{isCollectionItem:!1,optionName:"border"},hatching:{isCollectionItem:!1,optionName:"hatching"},seriesBorder:{isCollectionItem:!1,optionName:"border"}};var le=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:height":null,"update:url":null,"update:width":null},props:{height:Number,url:String,width:Number}});i.DxImage=le;le.$_optionName="image";var $=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:argumentFormat":null,"update:backgroundColor":null,"update:border":null,"update:connector":null,"update:customizeText":null,"update:font":null,"update:format":null,"update:position":null,"update:radialOffset":null,"update:rotationAngle":null,"update:textOverflow":null,"update:visible":null,"update:wordWrap":null},props:{argumentFormat:[Object,Function,String],backgroundColor:String,border:Object,connector:Object,customizeText:Function,font:Object,format:[Object,Function,String],position:String,radialOffset:Number,rotationAngle:Number,textOverflow:String,visible:Boolean,wordWrap:String}});i.DxLabel=$;$.$_optionName="label";$.$_expectedChildren={argumentFormat:{isCollectionItem:!1,optionName:"argumentFormat"},border:{isCollectionItem:!1,optionName:"border"},connector:{isCollectionItem:!1,optionName:"connector"},font:{isCollectionItem:!1,optionName:"font"},format:{isCollectionItem:!1,optionName:"format"},seriesBorder:{isCollectionItem:!1,optionName:"border"}};var T=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:backgroundColor":null,"update:border":null,"update:columnCount":null,"update:columnItemSpacing":null,"update:customizeHint":null,"update:customizeItems":null,"update:customizeText":null,"update:font":null,"update:horizontalAlignment":null,"update:hoverMode":null,"update:itemsAlignment":null,"update:itemTextPosition":null,"update:margin":null,"update:markerSize":null,"update:markerTemplate":null,"update:orientation":null,"update:paddingLeftRight":null,"update:paddingTopBottom":null,"update:rowCount":null,"update:rowItemSpacing":null,"update:title":null,"update:verticalAlignment":null,"update:visible":null},props:{backgroundColor:String,border:Object,columnCount:Number,columnItemSpacing:Number,customizeHint:Function,customizeItems:Function,customizeText:Function,font:Object,horizontalAlignment:String,hoverMode:String,itemsAlignment:String,itemTextPosition:String,margin:[Number,Object],markerSize:Number,markerTemplate:{},orientation:String,paddingLeftRight:Number,paddingTopBottom:Number,rowCount:Number,rowItemSpacing:Number,title:[Object,String],verticalAlignment:String,visible:Boolean}});i.DxLegend=T;T.$_optionName="legend";T.$_expectedChildren={annotationBorder:{isCollectionItem:!1,optionName:"border"},border:{isCollectionItem:!1,optionName:"border"},font:{isCollectionItem:!1,optionName:"font"},legendTitle:{isCollectionItem:!1,optionName:"title"},margin:{isCollectionItem:!1,optionName:"margin"},title:{isCollectionItem:!1,optionName:"title"}};var A=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:font":null,"update:horizontalAlignment":null,"update:margin":null,"update:placeholderSize":null,"update:subtitle":null,"update:text":null,"update:verticalAlignment":null},props:{font:Object,horizontalAlignment:String,margin:Object,placeholderSize:Number,subtitle:[Object,String],text:String,verticalAlignment:String}});i.DxLegendTitle=A;A.$_optionName="title";A.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"},legendTitleSubtitle:{isCollectionItem:!1,optionName:"subtitle"},margin:{isCollectionItem:!1,optionName:"margin"},subtitle:{isCollectionItem:!1,optionName:"subtitle"}};var E=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:font":null,"update:offset":null,"update:text":null},props:{font:Object,offset:Number,text:String}});i.DxLegendTitleSubtitle=E;E.$_optionName="subtitle";E.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"}};var I=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:backgroundColor":null,"update:enabled":null,"update:font":null,"update:show":null,"update:text":null},props:{backgroundColor:String,enabled:Boolean,font:Object,show:Boolean,text:String}});i.DxLoadingIndicator=I;I.$_optionName="loadingIndicator";I.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"}};var ue=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:bottom":null,"update:left":null,"update:right":null,"update:top":null},props:{bottom:Number,left:Number,right:Number,top:Number}});i.DxMargin=ue;ue.$_optionName="margin";var O=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:font":null,"update:horizontalAlignment":null,"update:margin":null,"update:placeholderSize":null,"update:subtitle":null,"update:text":null,"update:textOverflow":null,"update:verticalAlignment":null,"update:wordWrap":null},props:{font:Object,horizontalAlignment:String,margin:[Number,Object],placeholderSize:Number,subtitle:[Object,String],text:String,textOverflow:String,verticalAlignment:String,wordWrap:String}});i.DxPieChartTitle=O;O.$_optionName="title";O.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"},margin:{isCollectionItem:!1,optionName:"margin"},pieChartTitleSubtitle:{isCollectionItem:!1,optionName:"subtitle"},subtitle:{isCollectionItem:!1,optionName:"subtitle"}};var F=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:font":null,"update:offset":null,"update:text":null,"update:textOverflow":null,"update:wordWrap":null},props:{font:Object,offset:Number,text:String,textOverflow:String,wordWrap:String}});i.DxPieChartTitleSubtitle=F;F.$_optionName="subtitle";F.$_expectedChildren={font:{isCollectionItem:!1,optionName:"font"}};var L=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:border":null,"update:color":null,"update:hatching":null},props:{border:Object,color:String,hatching:Object}});i.DxSelectionStyle=L;L.$_optionName="selectionStyle";L.$_expectedChildren={border:{isCollectionItem:!1,optionName:"border"},hatching:{isCollectionItem:!1,optionName:"hatching"},seriesBorder:{isCollectionItem:!1,optionName:"border"}};var P=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:argumentField":null,"update:argumentType":null,"update:border":null,"update:color":null,"update:hoverMode":null,"update:hoverStyle":null,"update:label":null,"update:maxLabelCount":null,"update:minSegmentSize":null,"update:name":null,"update:selectionMode":null,"update:selectionStyle":null,"update:smallValuesGrouping":null,"update:tag":null,"update:tagField":null,"update:valueField":null},props:{argumentField:String,argumentType:String,border:Object,color:String,hoverMode:String,hoverStyle:Object,label:Object,maxLabelCount:Number,minSegmentSize:Number,name:String,selectionMode:String,selectionStyle:Object,smallValuesGrouping:Object,tag:{},tagField:String,valueField:String}});i.DxSeries=P;P.$_optionName="series";P.$_isCollectionItem=!0;var se=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:dashStyle":null,"update:visible":null,"update:width":null},props:{color:String,dashStyle:String,visible:Boolean,width:Number}});i.DxSeriesBorder=se;se.$_optionName="border";var de=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:customizeSeries":null,"update:nameField":null},props:{customizeSeries:Function,nameField:String}});i.DxSeriesTemplate=de;de.$_optionName="seriesTemplate";var pe=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:blur":null,"update:color":null,"update:offsetX":null,"update:offsetY":null,"update:opacity":null},props:{blur:Number,color:String,offsetX:Number,offsetY:Number,opacity:Number}});i.DxShadow=pe;pe.$_optionName="shadow";var ce=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:height":null,"update:width":null},props:{height:Number,width:Number}});i.DxSize=ce;ce.$_optionName="size";var me=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:groupName":null,"update:mode":null,"update:threshold":null,"update:topCount":null},props:{groupName:String,mode:String,threshold:Number,topCount:Number}});i.DxSmallValuesGrouping=me;me.$_optionName="smallValuesGrouping";var ge=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:font":null,"update:offset":null,"update:text":null,"update:textOverflow":null,"update:wordWrap":null},props:{font:Object,offset:Number,text:String,textOverflow:String,wordWrap:String}});i.DxSubtitle=ge;ge.$_optionName="subtitle";var he=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:font":null,"update:horizontalAlignment":null,"update:margin":null,"update:placeholderSize":null,"update:subtitle":null,"update:text":null,"update:textOverflow":null,"update:verticalAlignment":null,"update:wordWrap":null},props:{font:Object,horizontalAlignment:String,margin:Object,placeholderSize:Number,subtitle:[Object,String],text:String,textOverflow:String,verticalAlignment:String,wordWrap:String}});i.DxTitle=he;he.$_optionName="title";var k=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:argumentFormat":null,"update:arrowLength":null,"update:border":null,"update:color":null,"update:container":null,"update:contentTemplate":null,"update:cornerRadius":null,"update:customizeTooltip":null,"update:enabled":null,"update:font":null,"update:format":null,"update:interactive":null,"update:opacity":null,"update:paddingLeftRight":null,"update:paddingTopBottom":null,"update:shadow":null,"update:shared":null,"update:zIndex":null},props:{argumentFormat:[Object,Function,String],arrowLength:Number,border:Object,color:String,container:{},contentTemplate:{},cornerRadius:Number,customizeTooltip:Function,enabled:Boolean,font:Object,format:[Object,Function,String],interactive:Boolean,opacity:Number,paddingLeftRight:Number,paddingTopBottom:Number,shadow:Object,shared:Boolean,zIndex:Number}});i.DxTooltip=k;k.$_optionName="tooltip";k.$_expectedChildren={argumentFormat:{isCollectionItem:!1,optionName:"argumentFormat"},border:{isCollectionItem:!1,optionName:"border"},font:{isCollectionItem:!1,optionName:"font"},format:{isCollectionItem:!1,optionName:"format"},shadow:{isCollectionItem:!1,optionName:"shadow"},tooltipBorder:{isCollectionItem:!1,optionName:"border"}};var ve=u.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:color":null,"update:dashStyle":null,"update:opacity":null,"update:visible":null,"update:width":null},props:{color:String,dashStyle:String,opacity:Number,visible:Boolean,width:Number}});i.DxTooltipBorder=ve;ve.$_optionName="border";var ct=i.default=Y;const mt={components:{DxPieChart:ct,TransactionFinbookPopup:Ie},data(){return{sum:0}},beforeCreate(){this.$store.registerModule("Trading.finbooks",Oe)},created(){this.fetch(),this.$bus.on("toggleMenu",()=>{setTimeout(()=>this.pie.render(),300)})},destroyed(){this.$store.unregisterModule("Trading.finbooks"),this.$bus.off("toggleMenu")},computed:{...g("Trading.finbooks",["finbooks"]),pie:function(){return this.$refs.pie.instance}},watch:{finbooks(){this.sum=this.finbooks.reduce((t,e)=>t+e.balance,0),setTimeout(()=>this.pie.option("title.subtitle.text",`${this.$t("user.overview.finbook.subtitle")}: ${this.$options.filters.currency(this.sum)}`),0)}},methods:{...b("Trading.finbooks",["fetch"]),pointClickHandler({target:{data:t}}){this.$refs.transactionFinbookPopup.show(t)},legendClickHandler(t){const e=t.target,n=t.component.getAllSeries()[0].getPointsByArg(e)[0];n.isVisible()?n.hide():n.show()},toggleVisibility(t){t.isVisible()?t.hide():t.show()},customizeLabel(t){return`${this.$options.filters.currency(t.valueText)} (${(t.valueText/this.sum*100).toFixed(1)}%)`}}};var gt=function(){var e=this,n=e._self._c;return n("div",{staticClass:"finbook-chart dx-card responsive-paddings content-block"},[n("DxPieChart",{ref:"pie",attrs:{"data-source":e.finbooks,"resolve-label-overlapping":"shift",palette:"Bright",title:{text:e.$t("user.overview.finbook.title"),subtitle:{text:null}},legend:{horizontalAlignment:e.$devices.phone?"center":"right",itemTextPosition:"right"},series:{argumentField:"name",valueField:"balance",label:{visible:!0,customizeText:e.customizeLabel,connector:{visible:!0,width:1}}},size:{width:"100%",height:450},export:{enabled:!1}},on:{"point-click":e.pointClickHandler,"legend-click":e.legendClickHandler}}),n("TransactionFinbookPopup",{ref:"transactionFinbookPopup"})],1)},ht=[],vt=h(mt,gt,ht,!1,null,null,null,null);const ft=vt.exports;const _t={components:{DxDataGrid:U,DxColumn:X},data(){return{gridData:null}},beforeCreate(){this.$store.registerModule("Admin.contracts",Fe)},created(){this.getSummary().then(t=>this.gridData=t)},destroyed(){this.$store.unregisterModule("Admin.contracts")},computed:{dataGrid:function(){return this.$refs.dataGrid.instance}},methods:{...b("Admin.contracts",["getSummary"]),onCellDblClick(t){t.rowType=="data"&&(t.columnIndex==0?this.$router.push({name:"users",query:{code:t.data.code}}):this.$router.push({name:"contracts",query:{userCode:t.data.code}}))}}};var bt=function(){var e=this,n=e._self._c;return n("div",{staticClass:"overview-summary content-block"},[n("DxDataGrid",{ref:"dataGrid",attrs:{"data-source":e.gridData,"key-expr":"code","show-borders":!1,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",paging:{pageSize:10},headerFilter:{visible:!0},loadPanel:{enabled:!0},summary:{texts:{count:"{0} "+e.$t("user.overview.userName").toLowerCase(),sum:"{0}"},totalItems:[{column:"name",summaryType:"count"},{column:"principal",summaryType:"sum",valueFormat:"#,##0 ₫"}]},editing:{allowAdding:!1,allowUpdating:!1,allowDeleting:!1}},on:{contentReady:function(a){return e.$mf.dataGridPreload(e.gridData,e.dataGrid)},cellDblClick:e.onCellDblClick}},[n("DxColumn",{attrs:{"data-field":"name","data-type":"string","header-filter":{allowSearch:!0},caption:e.$t("user.overview.userName")}}),n("DxColumn",{attrs:{"data-field":"principal","data-type":"number",format:"#,##0 ₫","header-filter":{allowSearch:!0},caption:e.$t("user.overview.asset")}})],1)],1)},St=[],Ct=h(_t,bt,St,!1,null,null,null,null);const xt=Ct.exports;const yt={components:{DxForm:Ce,DxItem:xe},data(){return{}},computed:{...g("Auth",["email"]),popup(){return this.$refs.popup.instance}},methods:{...b("Auth",["resendEmail"]),show(){this.popup.show(),this.$mf.pushPopupToHistoryState(()=>this.popup.hide())},onSubmit(){this.resendEmail().then(()=>{this.popup.hide()})}}};var Nt=function(){var e=this,n=e._self._c;return n("div",[n("DxPopup",{ref:"popup",attrs:{width:300,height:270,showCloseButton:!0,title:e.$t("components.resendVerifyEmail.title"),"show-title":!0},on:{hiding:e.$mf.popRouteHistoryState},scopedSlots:e._u([{key:"content",fn:function(){return[n("form",{staticClass:"resend-email-form",on:{submit:function(a){return a.preventDefault(),e.onSubmit.apply(null,arguments)}}},[n("div",{staticClass:"description"},[e._v(" "+e._s(e.$t("components.resendVerifyEmail.description").format(e.email))+" ")]),n("DxForm",[n("DxItem",{attrs:{"item-type":"button","button-options":{width:"100%",type:"default",text:e.$t("components.resendVerifyEmail.resend"),useSubmitBehavior:!0}}})],1)],1)]},proxy:!0}])})],1)},Dt=[],wt=h(yt,Nt,Dt,!1,null,null,null,null);const $t=wt.exports;const Tt={components:{ResendVerifyEmailPopup:$t,EditProfilePopup:Pe,ChangePinPopup:ye},computed:{...g("Auth",["level"])},methods:{onLevelClick(t){switch(t){case 2:this.$refs.resendVerifyEmailPopup.show();break;case 3:this.$refs.changePinPopup.show();break;case 4:this.$refs.editProfilePopup.show();break;case 5:Le(this.$t("user.overview.signContractGuide"),this.$t("user.overview.levels.signContract"));break;case 6:this.$router.push({name:"contract",query:{redirect:this.$router.currentRoute.name}});break}}}};var At=function(){var e=this,n=e._self._c;return n("div",{staticClass:"level-bar content-block"},[n("center",[n("ul",{style:{counterReset:"levelNumber 0"}},e._l(e.$mf.getAccountLevelList(),function(a){return n("li",{key:a.level,class:{"is-active":a.level==e.level+1,"guiding-step-1":a.level==2,"guiding-step-2":a.level==3,"guiding-step-3":a.level==4},on:{click:function(o){a.level==e.level+1&&e.onLevelClick(a.level)}}},[e._v(" "+e._s(a.text)+" ")])}),0)]),n("ResendVerifyEmailPopup",{ref:"resendVerifyEmailPopup"}),n("EditProfilePopup",{ref:"editProfilePopup"}),n("ChangePinPopup",{ref:"changePinPopup"})],1)},Et=[],It=h(Tt,At,Et,!1,null,null,null,null);const Ot=It.exports;const Ft=100,V=4,Lt={components:{DxDataGrid:U,DxColumn:X,ContractDetailPopup:ke},data(){return{gridData:null,sum:{},interval:{},change:{},doneFlag:!1,asset:null,principal:null,interest:null}},beforeCreate(){this.$store.registerModule("User.contract",ze)},created(){this.fetch(!1).then(()=>{this.gridData=this.contracts,this.calculateSummary()})},destroyed(){this.$store.unregisterModule("User.contract")},computed:{...g("User.contract",["contracts"]),...g("Auth",["level"]),dataGrid:function(){return this.$refs.dataGrid.instance}},methods:{...b("User.contract",["fetch","resetState"]),onRowPrepared(t){t.rowType=="header"&&(t.rowElement.style.display="none")},getStatusClass(t){return`status-${t}`},calculateSummary(){this.sum=this.gridData.reduce((t,e)=>([2,3].includes(e.status)&&(t.principal+=e.principal,t.interest+=e.interest,t.asset+=e.total),t),{principal:0,interest:0,asset:0}),this.calculateChange(),this.interval=setInterval(()=>{this.animatedNumber("principal"),this.animatedNumber("interest"),this.animatedNumber("asset"),this.doneFlag&&clearInterval(this.interval)},V)},calculateChange(){let t=Ft/V;this.change={principal:this.sum.principal/t,interest:this.sum.interest/t,asset:this.sum.asset/t}},animatedNumber(t){this[t]<this.sum[t]-this.change[t]?(this[t]+=this.change[t],this.doneFlag=!1):(this[t]=this.sum[t],this.doneFlag=!0)}}};var Pt=function(){var e=this,n=e._self._c;return n("div",{staticClass:"overview-contracts"},[n("div",{staticClass:"sum dx-card responsive-paddings content-block"},[n("div",[n("div",{staticClass:"title"},[e._v(e._s(e.$t("user.overview.assetSum")))]),e.asset!=null?n("div",{staticClass:"currency"},[e._v(" "+e._s(e._f("currency")(e.asset.toFixed(0)))+" ")]):n("div",[e._v("-")])]),n("div",[n("div",{staticClass:"title"},[e._v(e._s(e.$t("user.overview.principalSum")))]),e.principal!=null?n("div",{staticClass:"currency"},[e._v(" "+e._s(e._f("currency")(e.principal.toFixed(0)))+" ")]):n("div",[e._v("-")])]),n("div",[n("div",{staticClass:"title"},[e._v(e._s(e.$t("user.overview.interestSum")))]),e.interest!=null?n("div",{staticClass:"currency interest"},[e._v(" "+e._s(e._f("currency")(e.interest.toFixed(0),"+ "))+" ")]):n("div",[e._v("-")])])]),n("div",{directives:[{name:"show",rawName:"v-show",value:e.level>=6,expression:"level >= 6"}],staticClass:"list content-block"},[n("DxDataGrid",{ref:"dataGrid",attrs:{"data-source":e.gridData,"key-expr":"id","show-borders":!1,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",paging:{pageSize:10},headerFilter:{visible:!0},loadPanel:{enabled:!0},editing:{allowAdding:!1,allowUpdating:!1,allowDeleting:!1},"data-row-template":"dataRowTemplate"},on:{contentReady:function(a){return e.$mf.dataGridPreload(e.gridData,e.dataGrid)},rowPrepared:e.onRowPrepared},scopedSlots:e._u([{key:"dataRowTemplate",fn:function({data:a}){return[n("tr",{staticClass:"item",attrs:{role:"cell"},on:{click:function(o){return e.$refs.contractDetailPopup.show(a.data)}}},[n("td",[n("div",{staticClass:"responsive-paddings",staticStyle:{position:"relative"}},[n("div",{class:["status",e.getStatusClass(a.data.status)]}),n("div",{staticClass:"info"},[n("div",[n("span",[e._v("#"+e._s(a.data.code))]),n("span",{staticClass:"interest-rate"},[e._v(" "+e._s(e._f("percentInterestRate")(a.data.interest_rate))+" ")])]),n("div",{staticClass:"date"},[n("div",[e._v(" "+e._s(e._f("formatDate")(a.data.paid_at))+" ~ "+e._s(e._f("formatDate")(a.data.withdrawn_at))+"   ")]),n("div",[e._v("("+e._s(a.data.duration)+")")])])]),n("div",{staticClass:"currency"},[n("div",{staticClass:"principal"},[e._v(" "+e._s(e._f("currency")(a.data.principal))+" ")]),n("div",{staticClass:"interest"},[e._v(" "+e._s(e._f("currency")(a.data.interest,"+ "))+" ")])])])])])]}}])},[n("DxColumn")],1)],1),n("ContractDetailPopup",{ref:"contractDetailPopup"})],1)},kt=[],zt=h(Lt,Pt,kt,!1,null,null,null,null);const Rt=zt.exports;const Bt={components:{MonthTrade:Ue,TradeSummary:Ze,Finbook:ft,Summary:xt,LevelBar:Ot,Contracts:Rt},computed:{...g("Auth",["level","permissions"])}};var jt=function(){var e=this,n=e._self._c;return n("div",{staticClass:"overview-page"},[n("h2",{staticClass:"content-block"},[e._v(" "+e._s(e.$t("user.overview.title"))+" ")]),e.permissions.includes("trades@view")?n("TradeSummary"):e._e(),e.level<6?n("LevelBar"):e._e(),e.level>1?n("MonthTrade"):e._e(),e.permissions.includes("finbooks@control")?n("Finbook"):e._e(),e.permissions.includes("contracts@control")?n("Summary"):e._e(),e.level>=6?n("Contracts"):e._e()],1)},Mt=[],Gt=h(Bt,jt,Mt,!1,null,null,null,null);const en=Gt.exports;export{en as default};
