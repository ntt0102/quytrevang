import{u as b,r as f,a as P,w as _,c as $,b as i,_ as C,d as x,i as k,e as v,o as T,f as e,g as o,D as R,h as n,j as B}from"./app-4d074802.js";/* empty css            */const H={__name:"CopyistStatusPopup",setup(G,{expose:g}){const s=x(),{t:c}=b(),y=k("mf"),p=f(null),u=f(null),a=P({gridData:null});_(()=>s.state.tradingDerivative.copyists,t=>{a.gridData=y.cloneDeep(t)});function w(){p.value.show()}function D(t){B(`${c("trading.derivative.copyistStatusPopup.closePosition")} ${t.vps_code}?`,c("titles.confirm")).then(r=>{r&&s.dispatch("tradingDerivative/closePosition",t.id)})}function m(){s.dispatch("tradingDerivative/getCopyistStatus")}function h(){a.gridData=null}return g({show:w}),(t,l)=>{const r=v("DxToolbar"),S=v("DxScrollView");return T(),$(C,{ref_key:"popupRef",ref:p,title:t.$t("trading.derivative.copyistStatusPopup.title"),toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:t.$t("buttons.reload"),icon:"far fa-sync-alt small",onClick:m}}],onShown:m,onHidden:h},{default:i(()=>[e(S,null,{default:i(()=>[e(o(R),{ref_key:"dataGridRef",ref:u,"data-source":a.gridData,"key-expr":"id","show-borders":!0,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",paging:{pageSize:8},headerFilter:{visible:!0},loadPanel:{enabled:!0},selection:{mode:"single"},onContentReady:l[0]||(l[0]=d=>t.$mf.dataGridPreload(a.gridData,u.value.instance))},{commandCellTemplate:i(({data:d})=>[e(r,{items:[{visible:d.data.position!=0,locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"far fa-times small",hint:t.$t("trading.derivative.copyistStatusPopup.closePosition"),text:t.$t("trading.derivative.copyistStatusPopup.closePosition"),onClick:()=>D(d.data)}}]},null,8,["items"])]),default:i(()=>[e(o(n),{fixed:!0,width:35,type:"buttons",cssClass:"dx-datagrid-command-column","cell-template":"commandCellTemplate",caption:t.$t("titles.commandHeaderTitleShort")},null,8,["caption"]),e(o(n),{"data-field":"vps_code","data-type":"string",caption:t.$t("trading.derivative.copyistStatusPopup.vpsCode")},null,8,["caption"]),e(o(n),{"data-field":"connection","data-type":"boolean",caption:t.$t("trading.derivative.copyistStatusPopup.connection")},null,8,["caption"]),e(o(n),{"data-field":"position","data-type":"number",caption:t.$t("trading.derivative.copyistStatusPopup.position")},null,8,["caption"])]),_:1},8,["data-source"])]),_:1})]),_:1},8,["title","toolbarItems"])}}};export{H as default};
