import{u as $,p as g,q as w,s as R,x,r as C,g as I,w as c,B as T,o as U,f as i,y as s,a as l,D as _}from"./app-9b98c2f0.js";const G={__name:"DeletedUsersPopup",setup(z,{expose:h}){const p=$(),v=g("bus"),r=g("mf"),n=w(null),f=w(null),d=R({gridData:null});x(()=>p.state.adminUser.deletedUsers,e=>{d.gridData=r.cloneDeep(e)});function y(){f.value.show()}function b(e){v.emit("checkPin",()=>{e.isDeleted=!0,p.dispatch("adminUser/save",e)})}function m(e){const o=n.value.instance.option("editing.changes").find(a=>a.type=="update"&&a.key==e);return r.isSet(o)}function k(e){let o=n.value.instance.option("editing.changes");o=o.filter(a=>!(a.type=="update"&&a.key==e)),n.value.instance.option("editing.changes",o)}function u(e){const o=n.value.instance.option("editing.changes").find(a=>a.type=="remove"&&a.key==e);return r.isSet(o)}function D(){}function S(){}return h({show:y}),(e,o)=>{const a=C("DxToolbar");return U(),I(T,{ref_key:"popupRef",ref:f,title:e.$t("admin.users.deletedUsers"),onShown:D,onHidden:S},{default:c(()=>[i(s(_),{ref_key:"dataGridRef",ref:n,"data-source":d.gridData,"key-expr":"id","show-borders":!0,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",paging:{pageSize:10},headerFilter:{visible:!0},loadPanel:{enabled:!0},editing:{allowUpdating:!0,allowDeleting:!0,confirmDelete:!1,mode:"batch"},onContentReady:o[0]||(o[0]=t=>e.$mf.dataGridPreload(d.gridData,n.value.instance)),onSaved:b},{commandCellTemplate:c(({data:t})=>[i(a,{items:[{locateInMenu:"auto",showText:"inMenu",location:"before",widget:"dxButton",options:{disabled:u(t.key),type:"default",icon:m(t.key)?"undo":"repeat",hint:e.$t("admin.users.buttons.revert"),text:e.$t("admin.users.buttons.revert"),onClick:()=>{m(t.key)?k(t.key):n.value.instance.cellValue(t.rowIndex,"deleted_at",null),n.value.instance.repaintRows(t.rowIndex)}}},{locateInMenu:"auto",showText:"inMenu",location:"before",widget:"dxButton",options:{type:"default",icon:u(t.key)?"undo":"clearsquare",hint:e.$t("admin.users.buttons.remove"),text:e.$t("admin.users.buttons.remove"),onClick:()=>{u(t.key)?n.value.instance.undeleteRow(t.rowIndex):n.value.instance.deleteRow(t.rowIndex)}}}]},null,8,["items"])]),default:c(()=>[i(s(l),{fixed:!0,width:e.$screen.getScreenSizeInfo.isXSmall?35:75,type:"buttons",cssClass:"dx-datagrid-command-column","cell-template":"commandCellTemplate",caption:e.$t(`titles.commandHeaderTitle${e.$screen.getScreenSizeInfo.isXSmall?"Short":""}`)},null,8,["width","caption"]),i(s(l),{"allow-editing":!1,"data-field":"code","data-type":"string",caption:e.$t("models.user.codeShort")},null,8,["caption"]),i(s(l),{"allow-editing":!1,"data-field":"name",caption:e.$t("models.user.name")},null,8,["caption"]),i(s(l),{"allow-editing":!1,"data-field":"phone",caption:e.$t("models.user.phone")},null,8,["caption"]),i(s(l),{"allow-editing":!1,visible:!1,"data-field":"deleted_at"})]),_:1},8,["data-source"])]),_:1},8,["title"])}}};export{G as default};
