import{h as A,r as _,o as k,b as R,d as C,Y as ae,$ as j,Z as N,a0 as V,a1 as ie,a2 as ue,a3 as se,L as re,N as K,u as de,c as E,a as pe,y as ce,w as me,e as I,g as he,J as fe,K as ge,G as W,j as be,k as H}from"./app-BeSVQYvw.js";import{c as ve,g as Ce,_ as Se,a as ye}from"./lightweight-charts.esm.development-vOsWvQ08.js";const xe=["title"],_e=C("i",{class:"far fa-grip-lines-vertical"},null,-1),De=[_e],Fe={__name:"FilterTimeTool",props:["filterTimeSeries"],emits:["hideContext"],setup(l,{expose:p,emit:a}){const o=A(),g=l,m=_(null);let s=[];const b=["#F44336","#FF9800","#4CAF50","#009688"];p({isSelected:c,draw:D,load:y,get:v});function c(){return m.value.classList.contains("selected")}function v(){return s.map(i=>i.time)}function h(i){const r=i.target.classList.contains("selected");document.querySelectorAll(".tool-area > .command:not(.drawless)").forEach(O=>O.classList.remove("selected")),r||(F(),i.target.classList.add("selected"))}function S(i){F(),i.target.classList.remove("selected")}function D({time:i}){const r=s.length;if(r&&i<=s[r-1].time)return!1;s.push({time:i,color:b[r],value:1}),g.filterTimeSeries.setData(s),o.dispatch("tradingShare/drawTools",{isRemove:!1,symbol:"",name:"filterTime",points:[r],data:[i]}),r===3&&m.value.classList.remove("selected")}function y(i){for(let r=0;r<i.length;r++)s.push({time:i[r],color:b[r],value:1});g.filterTimeSeries.setData(s)}function F(i=!0){i&&o.dispatch("tradingShare/drawTools",{isRemove:!0,symbol:"",name:"filterTime"}),g.filterTimeSeries.setData([]),s=[]}return(i,r)=>(k(),R("div",{ref_key:"filterTimeToolRef",ref:m,class:"command",title:i.$t("trading.share.tools.filterTime"),onClick:h,onContextmenu:S},De,40,xe))}},Oe=["title"],we=C("i",{class:"far fa-shield-check"},null,-1),Be=[we],Ee={__name:"CheckTool",emits:["checkSymbol"],setup(l,{expose:p,emit:a}){const o=A(),g=a,m=_(null);p({check:s});function s(c){o.dispatch("tradingShare/checkSymbol",c).then(v=>{console.log("check",v)})}function b(){g("checkSymbol")}return(c,v)=>(k(),R("div",{ref_key:"checkToolRef",ref:m,class:"command",title:c.$t("trading.share.tools.check"),onClick:b},Be,8,Oe))}};var e={},Ie="dx-autocomplete",Te="dx-autocomplete-popup-wrapper",G=ae.inherit({_supportedKeys:function(){var l=this._list?this._list.option("focusedElement"):null,p=this.callBase();return l=l&&j(l),N({},p,{upArrow:function(a){return!V(a)&&(a.preventDefault(),a.stopPropagation(),l&&!this._calcNextItem(-1))?(this._clearFocusedItem(),!1):!0},downArrow:function(a){return!V(a)&&(a.preventDefault(),a.stopPropagation(),l&&!this._calcNextItem(1))?(this._clearFocusedItem(),!1):!0},enter:function(a){l||this.close();var o=this.option("opened");return o&&a.preventDefault(),o}})},_getDefaultOptions:function(){return N(this.callBase(),{minSearchLength:1,maxItemCount:10,noDataText:"",showDropDownButton:!1,searchEnabled:!0})},_initMarkup:function(){this.callBase(),this.$element().addClass(Ie),this.setAria("autocomplete","inline")},_displayGetterExpr:function(){return this.option("valueExpr")},_closeOutsideDropDownHandler:function(l){var{target:p}=l;return!j(p).closest(this.$element()).length},_renderDimensions:function(){this.callBase(),this._updatePopupWidth(),this._updateListDimensions()},_popupWrapperClass:function(){return this.callBase()+" "+Te},_listConfig:function(){return N(this.callBase(),{pageLoadMode:"none",onSelectionChanged:l=>{this._setSelectedItem(l.addedItems[0])}})},_listItemClickHandler:function(l){this._saveValueChangeEvent(l.event);var p=this._displayGetter(l.itemData);this.option("value",p),this.close()},_setListDataSource:function(){this._list&&(this._list.option("selectedItems",[]),this.callBase())},_refreshSelected:ie,_searchCanceled:function(){this.callBase(),this.close()},_loadItem:function(l,p){var a=this._getItemFromPlain(l,p);return new ue().resolve(a).promise()},_dataSourceOptions:function(){return{paginate:!0,pageSize:this.option("maxItemCount")}},_searchDataSource:function(l){this._dataSource.pageSize(this.option("maxItemCount")),this.callBase(l),this._clearFocusedItem()},_clearFocusedItem:function(){this._list&&(this._list.option("focusedElement",null),this._list.option("selectedIndex",-1))},_renderValueEventName:function(){return"input keyup"},_valueChangeEventHandler:function(l){var p=this._input().val()||null;return this.callBase(l,p)},_optionChanged:function(l){switch(l.name){case"maxItemCount":this._searchDataSource();break;case"valueExpr":this._compileDisplayGetter(),this._setListOption("displayExpr",this._displayGetterExpr()),this.callBase(l);break;default:this.callBase(l)}},reset:function(){this.callBase(),this.close()}});se("dxAutocomplete",G);const Ne=Object.freeze(Object.defineProperty({__proto__:null,default:G},Symbol.toStringTag,{value:"Module"})),Ae=re(Ne);/*!
 * devextreme-vue
 * Version: 22.2.12
 * Build date: Mon Apr 29 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */var U;function ke(){if(U)return e;U=1;var l=e&&e.__importDefault||function(x){return x&&x.__esModule?x:{default:x}};Object.defineProperty(e,"__esModule",{value:!0}),e.DxToolbarItem=e.DxTo=e.DxShow=e.DxPosition=e.DxOptions=e.DxOffset=e.DxMy=e.DxItem=e.DxHide=e.DxFrom=e.DxDropDownOptions=e.DxCollision=e.DxButton=e.DxBoundaryOffset=e.DxAt=e.DxAnimation=e.DxAutocomplete=void 0;var p=l(Ae),a=K(),o=K(),g=a.createComponent({props:{accessKey:String,activeStateEnabled:Boolean,buttons:Array,dataSource:{},deferRendering:Boolean,disabled:Boolean,displayValue:String,dropDownButtonTemplate:{},dropDownOptions:Object,elementAttr:Object,focusStateEnabled:Boolean,grouped:Boolean,groupTemplate:{},height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,inputAttr:{},isValid:Boolean,items:Array,itemTemplate:{},label:String,labelMode:String,maxItemCount:Number,maxLength:[Number,String],minSearchLength:Number,name:String,onChange:Function,onClosed:Function,onContentReady:Function,onCopy:Function,onCut:Function,onDisposing:Function,onEnterKey:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onInput:Function,onItemClick:Function,onKeyDown:Function,onKeyUp:Function,onOpened:Function,onOptionChanged:Function,onPaste:Function,onSelectionChanged:Function,onValueChanged:Function,opened:Boolean,openOnFieldClick:Boolean,placeholder:String,readOnly:Boolean,rtlEnabled:Boolean,searchExpr:[Array,Function,String],searchMode:String,searchTimeout:Number,selectedItem:{},showClearButton:Boolean,showDropDownButton:Boolean,spellcheck:Boolean,stylingMode:String,tabIndex:Number,text:String,useItemTextAsTitle:Boolean,validationError:{},validationErrors:Array,validationMessageMode:String,validationMessagePosition:String,validationStatus:String,value:String,valueChangeEvent:String,valueExpr:[Function,String],visible:Boolean,width:[Function,Number,String],wrapItemText:Boolean},emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:buttons":null,"update:dataSource":null,"update:deferRendering":null,"update:disabled":null,"update:displayValue":null,"update:dropDownButtonTemplate":null,"update:dropDownOptions":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:grouped":null,"update:groupTemplate":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:inputAttr":null,"update:isValid":null,"update:items":null,"update:itemTemplate":null,"update:label":null,"update:labelMode":null,"update:maxItemCount":null,"update:maxLength":null,"update:minSearchLength":null,"update:name":null,"update:onChange":null,"update:onClosed":null,"update:onContentReady":null,"update:onCopy":null,"update:onCut":null,"update:onDisposing":null,"update:onEnterKey":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onInput":null,"update:onItemClick":null,"update:onKeyDown":null,"update:onKeyUp":null,"update:onOpened":null,"update:onOptionChanged":null,"update:onPaste":null,"update:onSelectionChanged":null,"update:onValueChanged":null,"update:opened":null,"update:openOnFieldClick":null,"update:placeholder":null,"update:readOnly":null,"update:rtlEnabled":null,"update:searchExpr":null,"update:searchMode":null,"update:searchTimeout":null,"update:selectedItem":null,"update:showClearButton":null,"update:showDropDownButton":null,"update:spellcheck":null,"update:stylingMode":null,"update:tabIndex":null,"update:text":null,"update:useItemTextAsTitle":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationMessagePosition":null,"update:validationStatus":null,"update:value":null,"update:valueChangeEvent":null,"update:valueExpr":null,"update:visible":null,"update:width":null,"update:wrapItemText":null},model:{prop:"value",event:"update:value"},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=p.default,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={button:{isCollectionItem:!0,optionName:"buttons"},dropDownOptions:{isCollectionItem:!1,optionName:"dropDownOptions"},item:{isCollectionItem:!0,optionName:"items"}}}});e.DxAutocomplete=g;var m=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:hide":null,"update:show":null},props:{hide:[Object,Number,String],show:[Object,Number,String]}});e.DxAnimation=m,m.$_optionName="animation",m.$_expectedChildren={hide:{isCollectionItem:!1,optionName:"hide"},show:{isCollectionItem:!1,optionName:"show"}};var s=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});e.DxAt=s,s.$_optionName="at";var b=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});e.DxBoundaryOffset=b,b.$_optionName="boundaryOffset";var c=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:location":null,"update:name":null,"update:options":null},props:{location:String,name:String,options:Object}});e.DxButton=c,c.$_optionName="buttons",c.$_isCollectionItem=!0,c.$_expectedChildren={options:{isCollectionItem:!1,optionName:"options"}};var v=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});e.DxCollision=v,v.$_optionName="collision";var h=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:animation":null,"update:bindingOptions":null,"update:closeOnOutsideClick":null,"update:container":null,"update:contentTemplate":null,"update:copyRootClassesToWrapper":null,"update:deferRendering":null,"update:disabled":null,"update:dragAndResizeArea":null,"update:dragEnabled":null,"update:dragOutsideBoundary":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:fullScreen":null,"update:height":null,"update:hideOnOutsideClick":null,"update:hideOnParentScroll":null,"update:hint":null,"update:hoverStateEnabled":null,"update:maxHeight":null,"update:maxWidth":null,"update:minHeight":null,"update:minWidth":null,"update:onContentReady":null,"update:onDisposing":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onHidden":null,"update:onHiding":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onResize":null,"update:onResizeEnd":null,"update:onResizeStart":null,"update:onShowing":null,"update:onShown":null,"update:onTitleRendered":null,"update:position":null,"update:resizeEnabled":null,"update:restorePosition":null,"update:rtlEnabled":null,"update:shading":null,"update:shadingColor":null,"update:showCloseButton":null,"update:showTitle":null,"update:tabIndex":null,"update:title":null,"update:titleTemplate":null,"update:toolbarItems":null,"update:visible":null,"update:width":null,"update:wrapperAttr":null},props:{accessKey:String,activeStateEnabled:Boolean,animation:Object,bindingOptions:Object,closeOnOutsideClick:[Boolean,Function],container:{},contentTemplate:{},copyRootClassesToWrapper:Boolean,deferRendering:Boolean,disabled:Boolean,dragAndResizeArea:{},dragEnabled:Boolean,dragOutsideBoundary:Boolean,elementAttr:{},focusStateEnabled:Boolean,fullScreen:Boolean,height:[Function,Number,String],hideOnOutsideClick:[Boolean,Function],hideOnParentScroll:Boolean,hint:String,hoverStateEnabled:Boolean,maxHeight:[Function,Number,String],maxWidth:[Function,Number,String],minHeight:[Function,Number,String],minWidth:[Function,Number,String],onContentReady:Function,onDisposing:Function,onFocusIn:Function,onFocusOut:Function,onHidden:Function,onHiding:Function,onInitialized:Function,onOptionChanged:Function,onResize:Function,onResizeEnd:Function,onResizeStart:Function,onShowing:Function,onShown:Function,onTitleRendered:Function,position:[Function,Object,String],resizeEnabled:Boolean,restorePosition:Boolean,rtlEnabled:Boolean,shading:Boolean,shadingColor:String,showCloseButton:Boolean,showTitle:Boolean,tabIndex:Number,title:String,titleTemplate:{},toolbarItems:Array,visible:Boolean,width:[Function,Number,String],wrapperAttr:{}}});e.DxDropDownOptions=h,h.$_optionName="dropDownOptions",h.$_expectedChildren={animation:{isCollectionItem:!1,optionName:"animation"},position:{isCollectionItem:!1,optionName:"position"},toolbarItem:{isCollectionItem:!0,optionName:"toolbarItems"}};var S=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}});e.DxFrom=S,S.$_optionName="from",S.$_expectedChildren={position:{isCollectionItem:!1,optionName:"position"}};var D=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}});e.DxHide=D,D.$_optionName="hide",D.$_expectedChildren={from:{isCollectionItem:!1,optionName:"from"},to:{isCollectionItem:!1,optionName:"to"}};var y=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:disabled":null,"update:html":null,"update:template":null,"update:text":null,"update:visible":null},props:{disabled:Boolean,html:String,template:{},text:String,visible:Boolean}});e.DxItem=y,y.$_optionName="items",y.$_isCollectionItem=!0;var F=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});e.DxMy=F,F.$_optionName="my";var i=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});e.DxOffset=i,i.$_optionName="offset";var r=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:bindingOptions":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:icon":null,"update:onClick":null,"update:onContentReady":null,"update:onDisposing":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:stylingMode":null,"update:tabIndex":null,"update:template":null,"update:text":null,"update:type":null,"update:useSubmitBehavior":null,"update:validationGroup":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,bindingOptions:Object,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Function,Number,String]}});e.DxOptions=r,r.$_optionName="options";var O=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:at":null,"update:boundary":null,"update:boundaryOffset":null,"update:collision":null,"update:my":null,"update:of":null,"update:offset":null},props:{at:[Object,String],boundary:{},boundaryOffset:[Object,String],collision:[Object,String],my:[Object,String],of:{},offset:[Object,String]}});e.DxPosition=O,O.$_optionName="position";var t=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}});e.DxShow=t,t.$_optionName="show";var u=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}});e.DxTo=u,u.$_optionName="to";var w=o.createConfigurationComponent({emits:{"update:isActive":null,"update:hoveredElement":null,"update:cssClass":null,"update:disabled":null,"update:html":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:options":null,"update:showText":null,"update:template":null,"update:text":null,"update:toolbar":null,"update:visible":null,"update:widget":null},props:{cssClass:String,disabled:Boolean,html:String,locateInMenu:String,location:String,menuItemTemplate:{},options:{},showText:String,template:{},text:String,toolbar:String,visible:Boolean,widget:String}});return e.DxToolbarItem=w,w.$_optionName="toolbarItems",w.$_isCollectionItem=!0,e.default=g,e}var Re=ke();const $e={class:"command symbol-input"},Me=["title"],Pe=["title"],je={__name:"Chart",props:["fromDate"],setup(l,{expose:p}){const a=A(),o=be();de();const g=H("devices"),m=H("mf"),s=_(null),b=_(null),c=_(null),v=_(null),h=_(null),S=_(null),D=l,y=E(()=>a.state.tradingShare.isLoading),F=E(()=>t.symbol),i=E(()=>t.watchlist.includes(t.symbol)),r=E(()=>a.state.tradingShare.symbols),O=E(()=>D.fromDate),t=pe({series:{},symbol:o.query.symbol??"VNINDEX",inputSymbol:o.query.symbol??"VNINDEX",watchlist:[]});let u={chart:{},series:{},crosshair:{}};ce(()=>{te(),B(!0),w(),new ResizeObserver(J).observe(s.value),document.addEventListener("keydown",Y)}),me(()=>a.state.tradingShare.chart,Q),p({getFilterTimes:M,getChartData:B,clearWatchlist:Z});function w(){const n={localization:{dateFormat:"dd/MM/yyyy",locale:"vi-VN"},rightPriceScale:{visible:!0,scaleMargins:{top:.5,bottom:.05}},leftPriceScale:{visible:!1},layout:{backgroundColor:"#000000",textColor:"#CCCCCC"},grid:{vertLines:{color:"#1B1E27",style:2},horzLines:{color:"#1B1E27",style:2}},crosshair:{mode:0},timeScale:{timeVisible:!1,rightOffset:20,minBarSpacing:.01},watermark:{visible:!0,fontSize:40,horzAlign:"center",vertAlign:"center",color:"rgba(54, 54, 64, 0.2)"}};u.chart=ve(b.value,n),u.chart.subscribeCrosshairMove(X),t.series.filterTime=u.chart.addHistogramSeries({priceScaleId:"filterTime",scaleMargins:{top:0,bottom:0},lastValueVisible:!1,priceLineVisible:!1}),u.series.vnindex=u.chart.addCandlestickSeries({priceScaleId:"vnindex",upColor:"#42946C",downColor:"#BC3E4A",borderVisible:!1,wickUpColor:"#42946C",wickDownColor:"#BC3E4A",priceFormat:{minMove:.01},scaleMargins:{top:.1,bottom:.55},lastValueVisible:!1}),u.series.price=u.chart.addCandlestickSeries({upColor:"#42946C",downColor:"#BC3E4A",borderVisible:!1,wickUpColor:"#42946C",wickDownColor:"#BC3E4A",priceFormat:{minMove:.01}})}function x(n){n.preventDefault(),n.stopPropagation()}function q(){h.value.isSelected()&&h.value.draw({time:u.crosshair.time})}function $(n){n.stopPropagation()}function M(){return h.value.get()}function X(n){if(n.time){let d=n.seriesPrices.get(u.series.price);u.crosshair.time=n.time,u.crosshair.price=d}else g.phone||(u.crosshair.time=null,u.crosshair.price=null);n.point!=null&&(u.crosshair.x=n.point.x,u.crosshair.y=n.point.y)}function J(){s.value&&(u.chart.resize(s.value.offsetWidth,s.value.offsetHeight),v.value.checkFullscreen())}function Y(n){if(n.ctrlKey||n.metaKey)switch(n.code){case"Numpad0":T(!0);break;case"Numpad1":T(!1);break;case"NumpadDecimal":P();break;case"Space":t.inputSymbol="",c.value.instance.focus();break}}function Z(){t.watchlist=[]}function P(){if(!t.symbol)return!1;const n={symbol:t.symbol,add:!i.value};a.dispatch("tradingShare/addWatchlist",n).then(d=>{console.log("watchlist",d),t.watchlist=m.isSet(d)?d:[]})}function Q(){u.series.price.setData(a.state.tradingShare.chart.price),u.chart.applyOptions({watermark:{text:t.symbol}})}function L(){if(!t.inputSymbol||!t.inputSymbol.trim()||(t.inputSymbol=t.inputSymbol.trim().toUpperCase(),t.symbol==t.inputSymbol))return!1;t.symbol=t.inputSymbol,c.value.instance.blur(),B()}function ee(){B()}function te(){a.dispatch("tradingShare/initChart").then(n=>{h.value.load(n.filterTime),t.watchlist=n.watchlist,t.vpsUser=n.vpsUser,t.vpsUser=n.vpsSession})}function B(n=!1,d=null){if(!t.symbol)return!1;d||(d=O.value),console.log(d),a.dispatch("tradingShare/getChartData",{symbol:t.symbol,from:Ce(d),withVnindex:n}).then(f=>{n&&u.series.vnindex.setData(f)})}function ne(){T()}function T(n=!0){if(y.value)return!1;const d=r.value;let f=d.findIndex(oe=>oe===t.symbol);f=f+(n?1:-1),f<0?f=d.length-1:f>=d.length&&(f=0);const z=d[f];if(!z)return!1;t.inputSymbol=z,t.symbol=t.inputSymbol,B()}function le(){if(!t.symbol||t.symbol==="VNINDEX")return!1;const n=M();S.value.check({symbol:t.symbol,filterTimes:n})}return(n,d)=>(k(),R("div",{ref_key:"chartContainerRef",ref:s,class:"share-chart",onClick:q,onContextmenu:x},[C("div",{ref_key:"chartRef",ref:b},null,512),C("div",{class:"area data-area",onClick:$,onContextmenu:x},[C("div",$e,[I(he(Re.DxAutocomplete),{ref_key:"symbolAutocompleteRef",ref:c,"data-source":r.value,"show-clear-button":!0,openOnFieldClick:!0,minSearchLength:0,maxItemCount:100,modelValue:t.inputSymbol,"onUpdate:modelValue":d[0]||(d[0]=f=>t.inputSymbol=f),onChange:L,onItemClick:L},null,8,["data-source","modelValue"])]),fe(C("div",{ref:"addWatchlistToolRef",class:W(["command far",{"fa-minus-circle":i.value,"fa-plus-circle":!i.value}]),title:n.$t("trading.share.addWatchlist"),onClick:P},null,10,Me),[[ge,F.value]]),C("div",{class:"command",title:n.$t("trading.share.reload"),onClick:ee,onContextmenu:ne},[C("i",{class:W(["far fa-sync-alt",{"fa-spin":y.value}])},null,2)],40,Pe)],32),C("div",{class:"area tool-area",onClick:$,onContextmenu:x},[I(Se,{ref_key:"fullscreenToolRef",ref:v,chartContainerRef:s.value},null,8,["chartContainerRef"]),I(ye,{ref:"tradingviewToolRef",vpsUser:t.vpsUser,vpsSession:t.vpsSession,chartContainerRef:s.value},null,8,["vpsUser","vpsSession","chartContainerRef"]),I(Fe,{ref_key:"filterTimeToolRef",ref:h,filterTimeSeries:t.series.filterTime},null,8,["filterTimeSeries"]),I(Ee,{ref_key:"checkToolRef",ref:S,onCheckSymbol:le},null,512)],32)],544))}};export{je as default};
