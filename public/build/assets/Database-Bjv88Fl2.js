import{u as g,r as D,a as x,b as F,e as a,f as l,g as o,h as S,k as _,o as v,d as s,a9 as u,a8 as n,v as p,s as w,t as f,x as y}from"./app-CnXTWEEI.js";import{a as $}from"./accordion-A1jRKN1Q.js";const B={class:"settings-database-page content-block dx-card responsive-paddings"},I={class:"upload-browser"},N={for:"restoreFile"},M=s("i",{class:"far fa-file-upload"},null,-1),E={__name:"Database",setup(R){const r=S(),{t:b}=g(),d=_("bus"),c=D("fileRef"),t=x({backupData:{sendMail:!0,download:!0},restoreFileName:null});function m(){d.emit("checkPin",()=>r.dispatch("setting/backupDatabase",t.backupData))}function h(){d.emit("checkPin",()=>{let e=new FormData;e.append("file",c.value.files[0]),r.dispatch("setting/restoreDatabase",e)})}function k(e){var i=e.target.files[0].name;i.split(".").pop()==="sql"?t.restoreFileName=i:y.show(b("settings.database.notMatchExtension"))}return(e,i)=>(v(),F("div",B,[a(o($.DxAccordion),{collapsible:!0,items:[{title:e.$t("settings.database.backup"),template:"backupTemplate"},{title:e.$t("settings.database.restore"),template:"restoreTemplate"}]},{backupTemplate:l(()=>[s("form",{onSubmit:p(m,["prevent"])},[a(o(u),{ref:"backupFormRef","form-data":t.backupData,"label-location":e.$screen.getScreenSizeInfo.isXSmall?"top":"left","scrolling-enabled":!0},{default:l(()=>[a(o(n.DxItem),{"data-field":"sendMail","editor-type":"dxCheckBox",label:{location:"left",text:e.$t("settings.database.sendMail")}},null,8,["label"]),a(o(n.DxItem),{"data-field":"download","editor-type":"dxCheckBox",label:{location:"left",text:e.$t("settings.database.download")}},null,8,["label"]),a(o(n.DxItem),{"item-type":"button","button-options":{disabled:!t.backupData.sendMail&&!t.backupData.download,width:150,left:0,type:"default",icon:"far fa-copy",text:e.$t("buttons.backup"),useSubmitBehavior:!0}},null,8,["button-options"])]),_:1},8,["form-data","label-location"])],32)]),restoreTemplate:l(()=>[s("form",{onSubmit:p(h,["prevent"])},[a(o(u),{ref:"restoreFormRef","form-data":t.backupData,"label-location":e.$screen.getScreenSizeInfo.isXSmall?"top":"left","scrolling-enabled":!0},{default:l(()=>[a(o(n.DxItem),null,{default:l(()=>[s("div",I,[s("input",{type:"file",id:"restoreFile",ref_key:"fileRef",ref:c,accept:"sql",onChange:k},null,544),s("label",N,[M,w(" "+f(e.$t("buttons.chooseFile")),1)]),s("span",null,f(t.restoreFileName),1)])]),_:1}),a(o(n.DxItem),{"item-type":"button","button-options":{disabled:!t.restoreFileName,width:150,left:0,type:"default",icon:"far fa-undo",text:e.$t("buttons.restore"),useSubmitBehavior:!0}},null,8,["button-options"])]),_:1},8,["form-data","label-location"])],32)]),_:1},8,["items"])]))}};export{E as default};
