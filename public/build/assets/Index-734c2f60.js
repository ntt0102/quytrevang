import{u as w,r as b,a as C,c as S,w as D,b as T,e as a,f as p,g as t,h as $,k as d,m as k,o as x,D as o,n as _}from"./app-d08d6809.js";const R={class:"copyists-page content-block dx-card responsive-paddings"},E={__name:"Index",setup(I){const l=$(),{t:n}=w(),m=d("bus"),s=d("mt"),f=d("mf"),r=b(null),i=C({gridData:null,validationRules:{user:[{type:"required",message:n("admin.copyists.user")+s.validations.required},{type:"async",validationCallback:e=>l.dispatch("adminCopyist/validateDuplicateUser",e),message:n("admin.copyists.user")+s.validations.duplicate}],vpsCode:[{type:"required",message:n("admin.copyists.vpsCode")+s.validations.required}]}}),v=S(()=>l.state.adminCopyist.users);l.dispatch("adminCopyist/getCopyists"),D(()=>l.state.adminCopyist.copyists,e=>{console.log("value",e),i.gridData=f.cloneDeep(e)});function h(e){console.log("onSave",e),m.emit("checkPin",()=>l.dispatch("adminCopyist/save",e))}function y(e){}return(e,c)=>{const g=k("DxToolbar");return x(),T("div",R,[a(t(_),{ref_key:"dataGridRef",ref:r,"data-source":i.gridData,"key-expr":"id","show-borders":!0,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-chooser":{enabled:!0,mode:"select",allowSearch:!0},"column-resizing-mode":"widget",paging:{pageSize:10},headerFilter:{visible:!0},loadPanel:{enabled:!0},selection:{mode:"single"},editing:{allowAdding:!0,allowUpdating:!0,allowDeleting:!0,confirmDelete:!1,mode:"batch"},onContentReady:c[0]||(c[0]=u=>e.$mf.dataGridPreload(i.gridData,r.value.instance)),onToolbarPreparing:y,onSaved:h},{commandCellTemplate:p(({data:u})=>[a(g,{items:[{locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"trash",hint:e.$t("buttons.delete"),text:e.$t("buttons.delete"),onClick:()=>r.value.instance.deleteRow(u.rowIndex)}}]},null,8,["items"])]),default:p(()=>[a(t(o),{fixed:!0,width:e.$screen.getScreenSizeInfo.isXSmall?35:125,alignment:"center",type:"buttons",cssClass:"dx-datagrid-command-column","cell-template":"commandCellTemplate",caption:e.$t(`titles.commandHeaderTitle${e.$screen.getScreenSizeInfo.isXSmall?"Short":""}`)},null,8,["width","caption"]),a(t(o),{"data-field":"user_code",dataType:"number",name:"userCode","header-filter":{allowSearch:!0},caption:e.$t("admin.copyists.user"),"validation-rules":i.validationRules.user,lookup:{dataSource:v.value,displayExpr:"name",valueExpr:"code",searchEnabled:!0,searchExpr:["code","name"]}},null,8,["caption","validation-rules","lookup"]),a(t(o),{"data-field":"vps_code",dataType:"string","header-filter":{allowSearch:!0},caption:e.$t("admin.copyists.vpsCode"),"validation-rules":i.validationRules.vpsCode},null,8,["caption","validation-rules"]),a(t(o),{"data-field":"allow_share",dataType:"boolean","header-filter":{allowSearch:!0},caption:e.$t("admin.copyists.allowShare")},null,8,["caption"]),a(t(o),{visible:!1,"data-field":"volume",dataType:"number","header-filter":{allowSearch:!0},caption:e.$t("admin.copyists.volume")},null,8,["caption"]),a(t(o),{visible:!1,"data-field":"allow_max_vol",dataType:"boolean","header-filter":{allowSearch:!0},caption:e.$t("admin.copyists.allowMaxVol")},null,8,["caption"]),a(t(o),{visible:!1,"data-field":"allow_copy",dataType:"boolean","header-filter":{allowSearch:!0},caption:e.$t("admin.copyists.allowCopy")},null,8,["caption"])]),_:1},8,["data-source"])])}}};export{E as default};
