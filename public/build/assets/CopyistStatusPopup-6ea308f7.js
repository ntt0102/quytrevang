import{u as D,c as _,i as f,r as g,d as $,w as v,f as h,n as x,k as n,_ as k,o as T,j as o,l as e,m as R,D as i,H as B}from"./app-4a0d3cc1.js";const I={__name:"CopyistStatusPopup",setup(G,{expose:y}){const s=D(),{t:u}=_();f("bus");const C=f("mf"),c=g(null),p=g(null),a=$({gridData:null});v(()=>s.state.tradingOrder.copyists,t=>{a.gridData=C.cloneDeep(t)});function w(){c.value.show()}function S(t){B(`${u("trading.orderChart.copyistStatusPopup.closePosition")} ${t.vps_code}?`,u("titles.confirm")).then(l=>{l&&s.dispatch("tradingOrder/closePosition",t.id)})}function m(){s.dispatch("tradingOrder/getCopyistStatus")}function b(){a.gridData=null}return y({show:w}),(t,r)=>{const l=h("DxToolbar"),P=h("DxScrollView");return T(),x(k,{ref_key:"popupRef",ref:c,title:t.$t("trading.orderChart.copyistStatusPopup.title"),toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:t.$t("buttons.reload"),icon:"far fa-sync-alt small",onClick:m}}],onShown:m,onHidden:b},{default:n(()=>[o(P,null,{default:n(()=>[o(e(R),{ref_key:"dataGridRef",ref:p,"data-source":a.gridData,"key-expr":"id","show-borders":!0,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",paging:{pageSize:8},headerFilter:{visible:!0},loadPanel:{enabled:!0},selection:{mode:"single"},onContentReady:r[0]||(r[0]=d=>t.$mf.dataGridPreload(a.gridData,p.value.instance))},{commandCellTemplate:n(({data:d})=>[o(l,{items:[{visible:d.data.position!=0,locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"far fa-times small",hint:t.$t("trading.orderChart.copyistStatusPopup.closePosition"),text:t.$t("trading.orderChart.copyistStatusPopup.closePosition"),onClick:()=>S(d.data)}}]},null,8,["items"])]),default:n(()=>[o(e(i),{fixed:!0,width:35,type:"buttons",cssClass:"dx-datagrid-command-column","cell-template":"commandCellTemplate",caption:t.$t("titles.commandHeaderTitleShort")},null,8,["caption"]),o(e(i),{"data-field":"vps_code","data-type":"string",caption:t.$t("trading.orderChart.copyistStatusPopup.vpsCode")},null,8,["caption"]),o(e(i),{"data-field":"connection","data-type":"boolean",caption:t.$t("trading.orderChart.copyistStatusPopup.connection")},null,8,["caption"]),o(e(i),{"data-field":"position","data-type":"number",caption:t.$t("trading.orderChart.copyistStatusPopup.position")},null,8,["caption"])]),_:1},8,["data-source"])]),_:1})]),_:1},8,["title","toolbarItems"])}}};export{I as default};
