import{_ as g,b as m,c as f,d as n,t as h,e as o,w as c,r as i,o as _}from"./app-7d2890ad.js";import{D,a as b}from"./data-grid-fa375ee2.js";import{a as $}from"./dialog-81c627ab.js";import{a as x}from"./index-fb36e198.js";import"./row_dragging-58358548.js";import"./exporter-840113be.js";const y={components:{DxDataGrid:D,DxColumn:b},data(){return{gridData:null}},beforeCreate(){this.$store.registerModule("Settings",x)},created(){this.fetchLog().then(e=>this.gridData=e)},destroyed(){this.$store.unregisterModule("Settings")},computed:{dataGrid:function(){return this.$refs.dataGrid.instance}},methods:{...m("Settings",["fetchLog"]),showProperties(e){this.$bus.emit("checkPin",()=>{let t=JSON.stringify(e.attributes,void 0,4);$(`<pre>${this.syntaxHighlight(t)}</pre>`,this.$t("settings.log.propertiesTitle"))})},syntaxHighlight(e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(t){var a="number";return/^"/.test(t)?/:$/.test(t)?a="key":a="string":/true|false/.test(t)?a="boolean":/null/.test(t)&&(a="null"),'<span class="'+a+'">'+t+"</span>"})}}},w={class:"settings-page"},C={class:"content-block"},v={class:"content-block dx-card responsive-paddings"};function G(e,t,a,S,r,l){const s=i("DxColumn"),p=i("DxToolbar"),u=i("DxDataGrid");return _(),f("div",w,[n("h2",C,h(e.$t("settings.log.title")),1),n("div",v,[n("div",null,[o(u,{ref:"dataGrid","data-source":r.gridData,"key-expr":"id","show-borders":!0,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",paging:{pageSize:10},headerFilter:{visible:!0},loadPanel:{enabled:!0},selection:{mode:"single"},onContentReady:t[0]||(t[0]=d=>e.$mf.dataGridPreload(r.gridData,l.dataGrid))},{commandCellTemplate:c(({data:d})=>[o(p,{items:[{locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"info",hint:e.$t("settings.log.propertiesBtn"),text:e.$t("settings.log.propertiesBtn"),onClick:()=>l.showProperties(d.data.properties)}}]},null,8,["items"])]),default:c(()=>[o(s,{fixed:!0,width:35,type:"buttons",cssClass:"dx-datagrid-command-column","cell-template":"commandCellTemplate",caption:e.$t("titles.commandHeaderTitleShort")},null,8,["caption"]),o(s,{"data-field":"created_at","data-type":"date",caption:e.$t("settings.log.createdAt")},null,8,["caption"]),o(s,{"data-field":"causer",caption:e.$t("settings.log.causer")},null,8,["caption"]),o(s,{"data-field":"subject",caption:e.$t("settings.log.subject")},null,8,["caption"]),o(s,{"data-field":"description",caption:e.$t("settings.log.description")},null,8,["caption"])]),_:1},8,["data-source"])])])])}const M=g(y,[["render",G],["__scopeId","data-v-e8c877de"]]);export{M as default};
