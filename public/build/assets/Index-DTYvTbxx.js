import{u as w,r as C,a as b,c as S,w as D,b as x,e as a,f as p,g as t,h as T,k as d,m as $,o as k,n as o}from"./app-DnUEluiP.js";const R={class:"copyists-page content-block dx-card responsive-paddings"},_={__name:"Index",setup(E){const l=T(),{t:i}=w(),m=d("bus"),s=d("mt"),f=d("mf"),r=C(null),n=b({gridData:null,validationRules:{user:[{type:"required",message:i("admin.copyists.user")+s.validations.required},{type:"async",validationCallback:e=>l.dispatch("adminCopyist/validateDuplicateUser",e),message:i("admin.copyists.user")+s.validations.duplicate}],vpsCode:[{type:"required",message:i("admin.copyists.vpsCode")+s.validations.required}]}}),v=S(()=>l.state.adminCopyist.users);l.dispatch("adminCopyist/getCopyists"),D(()=>l.state.adminCopyist.copyists,e=>{console.log("value",e),n.gridData=f.cloneDeep(e)});function h(e){console.log("onSave",e),m.emit("checkPin",()=>l.dispatch("adminCopyist/save",e))}function y(e){}return(e,u)=>{const g=$("DxToolbar");return k(),x("div",R,[a(t(o.DxDataGrid),{ref_key:"dataGridRef",ref:r,"data-source":n.gridData,"key-expr":"id","show-borders":!0,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-chooser":{enabled:!0,mode:"select",allowSearch:!0},"column-resizing-mode":"widget",paging:{pageSize:10},headerFilter:{visible:!0},loadPanel:{enabled:!0},selection:{mode:"single"},editing:{allowAdding:!0,allowUpdating:!0,allowDeleting:!0,confirmDelete:!1,mode:"batch"},onContentReady:u[0]||(u[0]=c=>e.$mf.dataGridPreload(n.gridData,r.value.instance)),onToolbarPreparing:y,onSaved:h},{commandCellTemplate:p(({data:c})=>[a(g,{items:[{locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"trash",hint:e.$t("buttons.delete"),text:e.$t("buttons.delete"),onClick:()=>r.value.instance.deleteRow(c.rowIndex)}}]},null,8,["items"])]),default:p(()=>[a(t(o.DxColumn),{fixed:!0,width:e.$screen.getScreenSizeInfo.isXSmall?35:125,alignment:"center",type:"buttons",cssClass:"dx-datagrid-command-column","cell-template":"commandCellTemplate",caption:e.$t(`titles.commandHeaderTitle${e.$screen.getScreenSizeInfo.isXSmall?"Short":""}`)},null,8,["width","caption"]),a(t(o.DxColumn),{"data-field":"user_code",dataType:"number",name:"userCode","header-filter":{allowSearch:!0},caption:e.$t("admin.copyists.user"),"validation-rules":n.validationRules.user,lookup:{dataSource:v.value,displayExpr:"name",valueExpr:"code",searchEnabled:!0,searchExpr:["code","name"]}},null,8,["caption","validation-rules","lookup"]),a(t(o.DxColumn),{"data-field":"vps_code",dataType:"string","header-filter":{allowSearch:!0},caption:e.$t("admin.copyists.vpsCode"),"validation-rules":n.validationRules.vpsCode},null,8,["caption","validation-rules"]),a(t(o.DxColumn),{"data-field":"allow_share",dataType:"boolean","header-filter":{allowSearch:!0},caption:e.$t("admin.copyists.allowShare")},null,8,["caption"]),a(t(o.DxColumn),{visible:!1,"data-field":"volume",dataType:"number","header-filter":{allowSearch:!0},caption:e.$t("admin.copyists.volume")},null,8,["caption"]),a(t(o.DxColumn),{visible:!1,"data-field":"allow_max_vol",dataType:"boolean","header-filter":{allowSearch:!0},caption:e.$t("admin.copyists.allowMaxVol")},null,8,["caption"]),a(t(o.DxColumn),{visible:!1,"data-field":"allow_copy",dataType:"boolean","header-filter":{allowSearch:!0},caption:e.$t("admin.copyists.allowCopy")},null,8,["caption"])]),_:1},8,["data-source"])])}}};export{_ as default};
