import{u as x,r as c,a as g,c as k,w as $,n as D,f as r,_ as R,h as B,k as u,l as V,o as I,e as t,d as p,g as l,a2 as q,a3 as s,s as N}from"./app-28f4813b.js";const H={ref:"submitRef",class:"display-none"},z={__name:"SettingPopup",setup(M,{expose:m}){const a=B(),{t:n}=x(),f=u("bus"),d=u("mt"),v=u("mf"),i=c(null),b=c(null),o=g({formData:{},validationRules:{vpsCode:[{type:"required",message:n("models.copyist.vpsCode")+d.validations.required},{type:"async",validationCallback:e=>a.dispatch("userCopyist/validateVpsCode",e),message:n("models.copyist.vpsCode")+d.validations.duplicate}],volume:[{type:"required",message:n("models.copyist.volume")+d.validations.required}]}}),y=k(()=>a.state.auth.user.permissions);$(()=>a.state.userCopyist.copyist,e=>{o.formData=v.cloneDeep(e)});function h(){i.value.show()}function w(){f.emit("checkPin",()=>{a.dispatch("userCopyist/save",o.formData).then(e=>{e&&i.value.hide()})})}function _(){a.dispatch("userCopyist/getCopyist")}function S(){}return m({show:h}),(e,P)=>{const C=V("DxScrollView");return I(),D(R,{ref_key:"popupRef",ref:i,title:e.$t("user.copyist.setting"),toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:e.$t("buttons.save"),onClick:()=>e.$refs.submitRef.click()}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:e.$t("buttons.cancel"),onClick:()=>i.value.hide()}}],onShown:_,onHidden:S},{default:r(()=>[t(C,null,{default:r(()=>[p("form",{onSubmit:N(w,["prevent"])},[p("button",H,null,512),t(l(q),{ref_key:"formRef",ref:b,"form-data":o.formData,"col-count":2,"label-location":e.$screen.getScreenSizeInfo.isXSmall?"top":"left","scrolling-enabled":!0},{default:r(()=>[t(l(s),{colSpan:2,"data-field":"allow_copy","editor-type":"dxSwitch",label:{text:e.$t("models.copyist.allowCopy")}},null,8,["label"]),t(l(s),{visible:y.value.includes("stock@order"),colSpan:2,"data-field":"allow_share","editor-type":"dxSwitch",label:{text:e.$t("models.copyist.allowShare")}},null,8,["visible","label"]),t(l(s),{colSpan:2,"data-field":"vps_code","validation-rules":o.validationRules.vpsCode,label:{text:e.$t("models.copyist.vpsCode")}},null,8,["validation-rules","label"]),t(l(s),{"data-field":"allow_max_vol","editor-type":"dxSwitch",label:{text:e.$t("models.copyist.allowMaxVol")}},null,8,["label"]),t(l(s),{visible:!o.formData.allow_max_vol,"data-field":"volume","editor-type":"dxNumberBox","validation-rules":o.validationRules.volume,label:{text:e.$t("models.copyist.volume")}},null,8,["visible","validation-rules","label"])]),_:1},8,["form-data","label-location"])],32)]),_:1})]),_:1},8,["title","toolbarItems"])}}};export{z as default};
