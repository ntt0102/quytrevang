import F from"./Chart-Dlu5G0cm.js";import{h as b,u as W,k as E,r as o,c as S,a as q,w as G,o as w,p as x,f as v,d as P,v as L,e as a,g,D as j,z as I,_ as O,m as R,n as y,b as $,F as C,A as V,B as z,q as K}from"./app-lx-tJYrI.js";import"./lightweight-charts.esm.development-C7fZXAhj.js";/* empty css            */const U={ref:"submitRef",class:"display-none"},J={__name:"SettingPopup",setup(k,{expose:s}){const c=b(),{t:n}=W(),l=E("mt"),i=o(null),d=o(null),p=S(()=>c.state.tradingDerivative.config),r=q({formData:{},validationRules:{tpDefault:[{type:"required",message:n("trading.derivative.settingPopup.tpDefault")+l.validations.required}],slDefault:[{type:"required",message:n("trading.derivative.settingPopup.slDefault")+l.validations.required}]}});G(p,f);function u(){i.value.show()}function h(){c.dispatch("tradingDerivative/setting",r.formData).then(t=>{t?i.value.hide():(f(p.value),e())})}function f(t){r.formData={tpDefault:t.tpDefault,slDefault:t.slDefault}}function e(){setTimeout(()=>{d.value.instance.getEditor("tpDefault").focus()},0)}function m(){f(p.value),e()}function _(){}return s({show:u}),(t,B)=>(w(),x(O,{ref_key:"popupRef",ref:i,width:300,height:260,class:"der-setting-popup",title:t.$t("trading.derivative.buttons.setting"),toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:t.$t("buttons.save"),onClick:()=>t.$refs.submitRef.click()}}],onShown:m,onHidden:_},{default:v(()=>[P("form",{onSubmit:L(h,["prevent"])},[P("button",U,null,512),a(g(j),{ref_key:"formRef",ref:d,labelLocation:"left","form-data":r.formData},{default:v(()=>[a(g(I.DxItem),{name:"tpDefault","data-field":"tpDefault","editor-type":"dxNumberBox","editor-options":{stylingMode:"outlined",showSpinButtons:!0},"validation-rules":r.validationRules.tpDefault,label:{text:t.$t("trading.derivative.settingPopup.tpDefault")}},null,8,["validation-rules","label"]),a(g(I.DxItem),{name:"slDefault","data-field":"slDefault","editor-type":"dxNumberBox","editor-options":{stylingMode:"outlined",showSpinButtons:!0},"validation-rules":r.validationRules.slDefault,label:{text:t.$t("trading.derivative.settingPopup.slDefault")}},null,8,["validation-rules","label"])]),_:1},8,["form-data"])],32)]),_:1},8,["title","toolbarItems"]))}},Q={__name:"PendingOrdersPopup",emits:["closeAllOrders"],setup(k,{expose:s,emit:c}){const n=b(),l=c,i=S(()=>n.state.tradingDerivative.status.pendingOrders),d=o(null),p=[{field:"time",minWidth:100},{field:"type",minWidth:70},{field:"side",minWidth:90},{field:"volume",minWidth:70},{field:"price",minWidth:130}];function r(){d.value.show()}function u(){}function h(){}function f(){l("closeAllOrders")}return s({show:r}),(e,m)=>{const _=R("DxScrollView");return w(),x(O,{ref_key:"popupRef",ref:d,class:"der-matched-orders-popup",title:e.$t("trading.derivative.pendingOrdersPopup.title"),toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:e.$t("trading.derivative.orderContext.closeAll"),onClick:f}}],onShown:u,onHidden:h},{default:v(()=>[a(_,null,{default:v(()=>[a(g(y.DxDataGrid),{"data-source":i.value,"key-expr":"orderNo","show-borders":!0},{default:v(()=>[(w(),$(C,null,V(p,t=>a(g(y.DxColumn),{"data-field":t.field,minWidth:t.minWidth,caption:e.$t(`trading.derivative.pendingOrdersPopup.${t.field}`)},null,8,["data-field","minWidth","caption"])),64))]),_:1},8,["data-source"])]),_:1})]),_:1},8,["title","toolbarItems"])}}},X={__name:"MatchedOrdersPopup",setup(k,{expose:s}){const c=b(),n=o(null),l=o([]),i=[{field:"orderTime",minWidth:100},{field:"side",minWidth:100},{field:"volume",minWidth:100},{field:"matchVolume",minWidth:100},{field:"showPrice",minWidth:150},{field:"avgPrice",minWidth:100}];function d(){n.value.show()}function p(){c.dispatch("tradingDerivative/getMatchedOrders").then(u=>{l.value=u})}function r(){}return s({show:d}),(u,h)=>{const f=R("DxScrollView");return w(),x(O,{ref_key:"popupRef",ref:n,class:"der-matched-orders-popup",title:u.$t("trading.derivative.matchedOrdersPopup.title"),onShown:p,onHidden:r},{default:v(()=>[a(f,null,{default:v(()=>[a(g(y.DxDataGrid),{"data-source":l.value,"key-expr":"orderNo","show-borders":!0},{default:v(()=>[(w(),$(C,null,V(i,e=>a(g(y.DxColumn),{"data-field":e.field,minWidth:e.minWidth,caption:u.$t(`trading.derivative.matchedOrdersPopup.${e.field}`)},null,8,["data-field","minWidth","caption"])),64))]),_:1},8,["data-source"])]),_:1})]),_:1},8,["title"])}}},Y={__name:"VpsOtpPopup",setup(k,{expose:s}){const c=b(),n=o(null),l=o(null),i=o(!1),d=o("");function p(){n.value.show(),setTimeout(r,500)}function r(){navigator.clipboard&&navigator.clipboard.readText().then(e=>{e=e.replace(/\s+/g,""),/^\d{6}$/.test(e)&&l.value.fillInput(e)})}function u(e){c.dispatch("tradingDerivative/loginVps",e).then(m=>{m&&n.value.hide(),l.value.clearInput()})}function h(){i.value=!0}function f(){i.value=!1}return s({show:p}),(e,m)=>(w(),x(O,{ref_key:"popupRef",ref:n,width:400,height:190,class:"vps-otp-popup",title:e.$t("trading.derivative.buttons.loginVps"),onShown:h,onHidden:f},{default:v(()=>[i.value?(w(),x(g(z),{key:0,ref_key:"otpInputRef",ref:l,value:d.value,"onUpdate:value":m[0]||(m[0]=_=>d.value=_),"input-classes":"otp-input",separator:"-","num-inputs":6,"should-auto-focus":!0,"input-type":"letter-numeric",onOnComplete:u},null,8,["value"])):K("",!0)]),_:1},8,["title"]))}},Z={class:"derivative-page content-block dx-card responsive-paddings"},ae={__name:"Index",setup(k){const s=b(),{t:c}=W(),n=E("bus"),l=S(()=>s.state.tradingDerivative.config.source),i=o(null),d=o(null),p=o(null),r=o(null),u=o(null),h=o([{text:c("trading.derivative.buttons.downloadExport"),value:"download",icon:"far fa-cloud-arrow-down"},{text:c("trading.derivative.buttons.cloneExport"),value:"clone",icon:"far fa-file-export"}]),f=o([{name:"FIREANT",icon:"far fa-database small"},{name:"DNSE",icon:"far fa-database small"},{name:"VPS",icon:"far fa-database small"}]);function e(){d.value.show()}function m(){p.value.show()}function _(){r.value.show()}function t(){n.emit("checkPin",()=>s.dispatch("tradingDerivative/report"))}function B(){u.value.show()}function A(){n.emit("checkPin",()=>s.dispatch("tradingDerivative/export","download"))}function M({itemData:D}){n.emit("checkPin",()=>s.dispatch("tradingDerivative/export",D.value))}function N({item:{name:D}}){i.value.connectSocket(),s.dispatch("tradingDerivative/setSource",D)}function H(){i.value.closeAllOrders()}return(D,ee)=>{const T=R("DxToolbar");return w(),$(C,null,[P("div",Z,[a(T,{items:[{location:"before",widget:"dxButton",options:{icon:"far fa-gear small",hint:D.$t("trading.derivative.buttons.setting"),onClick:e}},{location:"before",widget:"dxButton",options:{icon:"far fa-file-chart-pie small",hint:D.$t("trading.derivative.buttons.report"),onClick:t}},{location:"before",widget:"dxDropDownButton",options:{splitButton:!0,items:h.value,displayExpr:"text",keyExpr:"value",icon:"far fa-cloud-arrow-down small",hint:D.$t("trading.derivative.buttons.downloadExport"),width:"60",dropDownOptions:{width:"160"},elementAttr:{class:"export"},onButtonClick:A,onItemClick:M}},{location:"after",widget:"dxDropDownButton",options:{showArrowIcon:!1,items:f.value,displayExpr:"name",keyExpr:"name",selectedItemKey:l.value,stylingMode:"text",useSelectMode:!0,width:"130",elementAttr:{class:"source"},onSelectionChanged:N}}]},null,8,["items"]),a(F,{ref_key:"chartRef",ref:i,onShowPendingOrders:m,onShowMatchedOrders:_,onShowVpsOtpPopup:B},null,512)]),a(J,{ref_key:"settingPopupRef",ref:d},null,512),a(Q,{ref_key:"pendingOrdersPopupRef",ref:p,onCloseAllOrders:H},null,512),a(X,{ref_key:"matchedOrdersPopupRef",ref:r},null,512),a(Y,{ref_key:"vpsOtpPopupRef",ref:u},null,512)],64)}}};export{ae as default};
