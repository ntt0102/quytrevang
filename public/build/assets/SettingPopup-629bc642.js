import{u as C,r as c,a as x,c as g,w as $,n as k,f as r,_ as D,h as R,k as u,l as B,o as V,e as t,d as p,g as a,a5 as I,a6 as s,s as q}from"./app-699e0ad7.js";const N={ref:"submitRef",class:"display-none"},j={__name:"SettingPopup",setup(H,{expose:m}){const l=R(),{t:n}=C(),f=u("bus"),d=u("mt"),v=u("mf"),i=c(null),b=c(null),o=x({formData:{},validationRules:{vpsCode:[{type:"required",message:n("models.copyist.vpsCode")+d.validations.required},{type:"async",validationCallback:e=>l.dispatch("userCopyist/validateVpsCode",e),message:n("models.copyist.vpsCode")+d.validations.duplicate}],volume:[{type:"required",message:n("models.copyist.volume")+d.validations.required}]}});g(()=>l.state.auth.user.permissions),$(()=>l.state.userCopyist.copyist,e=>{o.formData=v.cloneDeep(e)});function y(){i.value.show()}function h(){f.emit("checkPin",()=>{l.dispatch("userCopyist/save",o.formData).then(e=>{e&&i.value.hide()})})}function w(){l.dispatch("userCopyist/getCopyist")}function _(){}return m({show:y}),(e,M)=>{const S=B("DxScrollView");return V(),k(D,{ref_key:"popupRef",ref:i,title:e.$t("user.copyist.setting"),toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:e.$t("buttons.save"),onClick:()=>e.$refs.submitRef.click()}},{toolbar:"bottom",location:"after",widget:"dxButton",options:{text:e.$t("buttons.cancel"),onClick:()=>i.value.hide()}}],onShown:w,onHidden:_},{default:r(()=>[t(S,null,{default:r(()=>[p("form",{onSubmit:q(h,["prevent"])},[p("button",N,null,512),t(a(I),{ref_key:"formRef",ref:b,"form-data":o.formData,"col-count":2,"label-location":e.$screen.getScreenSizeInfo.isXSmall?"top":"left","scrolling-enabled":!0},{default:r(()=>[t(a(s),{colSpan:2,"data-field":"allow_copy","editor-type":"dxSwitch",label:{text:e.$t("models.copyist.allowCopy")}},null,8,["label"]),t(a(s),{colSpan:2,"data-field":"allow_share","editor-type":"dxSwitch",label:{text:e.$t("models.copyist.allowShare")}},null,8,["label"]),t(a(s),{colSpan:2,"data-field":"vps_code","validation-rules":o.validationRules.vpsCode,label:{text:e.$t("models.copyist.vpsCode")}},null,8,["validation-rules","label"]),t(a(s),{"data-field":"allow_max_vol","editor-type":"dxSwitch",label:{text:e.$t("models.copyist.allowMaxVol")}},null,8,["label"]),t(a(s),{visible:!o.formData.allow_max_vol,"data-field":"volume","editor-type":"dxNumberBox","validation-rules":o.validationRules.volume,label:{text:e.$t("models.copyist.volume")}},null,8,["visible","validation-rules","label"])]),_:1},8,["form-data","label-location"])],32)]),_:1})]),_:1},8,["title","toolbarItems"])}}};export{j as default};
