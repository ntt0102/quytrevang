import C from"./Chart-DxHecb4s.js";import{u as S,r as w,c,a as D,b as y,e as u,g as $,h as x,j as _,k as d,x as f,m as B,o as W}from"./app-mp4NwPCF.js";import{s as T}from"./subYears-7eJv4-Ji.js";import"./lightweight-charts.esm.development-zgss8az2.js";/* empty css            */const F={class:"share-page content-block dx-card responsive-paddings"},E={__name:"Index",setup(I){const o=x(),g=_(),{t:s}=S(),i=d("bus"),h=d("devices"),r=w(null),m=c(()=>o.state.tradingShare.groups),l=c(()=>o.state.tradingShare.symbols.length),t=D({group:g.query.list??"",fromDate:T(new Date,5)});o.dispatch("tradingShare/getGroups");function n({component:e}){const a=e.option("value");t.group=a!==null?a.trim().toUpperCase():"",o.dispatch("tradingShare/getSymbols",t.group)}function p({value:e}){t.fromDate=e,r.value.getChartData(!0,e)}function b(){i.emit("checkPin",()=>o.dispatch("tradingShare/deleteWatchlist").then(()=>{r.value.clearWatchlist()}))}function v(){const e=t.group,a=r.value.getFilterTimes();if(!e)return f.warning(s("trading.share.filterGroupWarning"));if(a.length!==4)return f.warning(s("trading.share.filterTimeWarning"));i.emit("checkPin",()=>{o.dispatch("tradingShare/filterSymbols",{group:e,filterTimes:a})})}return(e,a)=>{const k=B("DxToolbar");return W(),y("div",F,[u(k,{items:[{visible:e.$mf.isSet(e.$route.query),location:"before",widget:"dxButton",options:{icon:"far fa-arrow-left small",hint:e.$t("buttons.back"),onClick:()=>e.$router.go(-1)}},{location:"before",widget:"dxDateBox",options:{width:$(h).phone?"90":"120",type:"date",value:t.fromDate,onValueChanged:p}},{location:"before",widget:"dxAutocomplete",options:{width:"90",showClearButton:!0,openOnFieldClick:!0,minSearchLength:0,dataSource:m.value,value:t.group,elementAttr:{class:"symbol-group"},placeholder:e.$t("trading.share.group"),onEnterKey:n,onFocusOut:n,onItemClick:n}},{visible:l.value>0,location:"before",text:`(${l.value})`},{location:"after",widget:"dxButton",options:{icon:"far fa-trash-xmark small",hint:e.$t("trading.share.deleteWatchList"),onClick:b}},{location:"after",widget:"dxButton",options:{icon:"far fa-filter small",hint:e.$t("trading.share.filterSymbols"),onClick:v}}]},null,8,["items"]),u(C,{fromDate:t.fromDate,ref_key:"chartRef",ref:r},null,8,["fromDate"])])}}};export{E as default};
