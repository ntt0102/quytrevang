import{m as i,a as o,n as s}from"./app-089c7b72.js";import{D as r,a as d}from"./data-grid-9e4dd793.js";import{T as l,a as c}from"./Finbooks-4d42d40c.js";import"./ui.data_grid.row_dragging-13991560.js";import"./dialog-e8748e84.js";import"./moment-590927ad.js";const u={components:{DxDataGrid:r,DxColumn:d,TransactionFinbookPopup:l},data(){return{gridData:null,validationRules:{},validationRules:{name:[{type:"required",message:this.$t("trading.finbooks.name")+this.$mt.validations.required}],balance:[{type:"required",message:this.$t("trading.finbooks.balance")+this.$mt.validations.required}],lastTransaction:[{type:"required",message:this.$t("trading.finbooks.lastTransaction")+this.$mt.validations.required}],display:[{type:"required",message:this.$t("trading.finbooks.display")+this.$mt.validations.required}]}}},beforeCreate(){this.$store.registerModule("Trading.finbooks",c)},created(){this.fetch()},destroyed(){this.$store.unregisterModule("Trading.finbooks")},computed:{...i("Trading.finbooks",["finbooks"]),dataGrid:function(){return this.$refs.dataGrid.instance}},watch:{finbooks(){this.cloneDeepData()}},methods:{...o("Trading.finbooks",["fetch","save","resetState"]),onSave(a){this.$bus.emit("checkPin",()=>this.save({changes:a.changes}))},cloneDeepData(){this.gridData=this.$mf.cloneDeep(this.finbooks)},onInitNewRow(a){a.data.last_transaction=this.$t("trading.finbooks.openNewBook")}}};var m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"finbooks-page"},[e("h2",{staticClass:"content-block"},[t._v(" "+t._s(t.$t("trading.finbooks.title"))+" ")]),e("div",{staticClass:"content-block dx-card responsive-paddings"},[e("DxDataGrid",{ref:"dataGrid",attrs:{"data-source":t.gridData,"key-expr":"id","show-borders":!0,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",paging:{pageSize:10},headerFilter:{visible:!0},loadPanel:{enabled:!0},selection:{mode:"single"},editing:{allowAdding:!0,allowUpdating:!0,allowDeleting:!0,confirmDelete:!1,mode:"batch"}},on:{contentReady:function(n){return t.$mf.dataGridPreload(t.gridData,t.dataGrid)},"init-new-row":t.onInitNewRow,saved:t.onSave},scopedSlots:t._u([{key:"commandCellTemplate",fn:function({data:n}){return[e("DxToolbar",{attrs:{items:[{locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"far fa-envelope-open-dollar small",hint:t.$t("trading.finbooks.createTransaction"),text:t.$t("trading.finbooks.createTransaction"),onClick:()=>t.$refs.transactionFinbookPopup.show(n.data)}},{visible:n.data.balance==0,locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"trash",hint:t.$t("buttons.delete"),text:t.$t("buttons.delete"),onClick:()=>t.dataGrid.deleteRow(n.rowIndex)}}]}})]}}])},[e("DxColumn",{attrs:{fixed:!0,width:t.$devices.phone?35:70,alignment:"center",type:"buttons",cssClass:"dx-datagrid-command-column","cell-template":"commandCellTemplate",caption:t.$t(`titles.commandHeaderTitle${t.$devices.phone?"Short":""}`)}}),e("DxColumn",{attrs:{"data-field":"display",dataType:"number",caption:t.$t("trading.finbooks.display"),"validation-rules":t.validationRules.display}}),e("DxColumn",{attrs:{"data-field":"name",dataType:"string","header-filter":{allowSearch:!0},caption:t.$t("trading.finbooks.name"),"validation-rules":t.validationRules.name}}),e("DxColumn",{attrs:{"data-field":"balance","data-type":"number",format:"#,##0 ₫","editor-options":{step:"1000000",format:"#,##0 ₫"},"header-filter":{allowSearch:!0},caption:t.$t("trading.finbooks.balance"),"validation-rules":t.validationRules.balance}}),e("DxColumn",{attrs:{"data-field":"last_transaction",dataType:"string","header-filter":{allowSearch:!0},caption:t.$t("trading.finbooks.lastTransaction"),"validation-rules":t.validationRules.lastTransaction}}),e("DxColumn",{attrs:{"allow-editing":!1,"data-field":"updated_at","data-type":"date","editor-options":{dateSerializationFormat:t.$mc.DX_SERVER_DATE_FORMAT},caption:t.$t("trading.finbooks.updatedAt")}})],1)],1),e("TransactionFinbookPopup",{ref:"transactionFinbookPopup"})],1)},p=[],f=s(u,m,p,!1,null,null,null,null);const $=f.exports;export{$ as default};
