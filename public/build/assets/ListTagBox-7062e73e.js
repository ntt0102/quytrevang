import{a4 as Y,Z as E,ay as Z,az as ee,aA as S,a1 as O,aB as x,aj as te,$ as u,am as p,ar as b,at as h,ah as ae,a0 as le,aC as ie,aD as ne,ap as A,a2 as c,aE as se,aq as B,aF as re,aG as oe,aH as D,ad as v,aI as ue,aJ as de,aK as pe,aL as V,ax as w,aM as N,aN as he,aO as ce,a3 as ge,as as me,aP as _e,M as ve,O as r,o as fe,p as Te,g as Se}from"./app-a379b0c5.js";function C(e,t){return(e||t)&&!(e&&t)}var f="dxTagData",be="dx-tagbox",Ce="dx-tag-container",T="dx-tag",L="dx-tagbox-multi-tag",$="dx-tag-custom",M="dx-tag-remove-button",ye="dx-tagbox-only-select",P="dx-tagbox-single-line",Ie="dx-tagbox-popup-wrapper",Ee="dx-tag-content",xe="dx-tagbox-default-template",Ae="dx-tagbox-custom-template",Be="dx-texteditor-input-container",Fe=-.3,G=Y.inherit({_supportedKeys(){var e=this.callBase(),t=l=>this._list._keyboardHandler(l),a=this.option("rtlEnabled");return E({},e,{backspace(l){if(this._isCaretAtTheStart()){this._processKeyboardEvent(l),this._isTagRemoved=!0;var i=this._$focusedTag||this._tagElements().last();this._$focusedTag&&this._moveTagFocus("prev",!0),i.length!==0&&(this._preserveFocusedTag=!0,this._removeTagElement(i),delete this._preserveFocusedTag)}},upArrow:(l,i)=>l.altKey||!this._list?e.upArrow.call(this,l):t(i),downArrow:(l,i)=>l.altKey||!this._list?e.downArrow.call(this,l):t(i),del(l){if(!(!this._$focusedTag||!this._isCaretAtTheStart())){this._processKeyboardEvent(l),this._isTagRemoved=!0;var i=this._$focusedTag;this._moveTagFocus("next",!0),this._preserveFocusedTag=!0,this._removeTagElement(i),delete this._preserveFocusedTag}},enter(l,i){var n=this._list&&this._list.option("focusedElement")!==null,s=this.option("acceptCustomValue")&&!n;if(s){l.preventDefault(),this._searchValue()!==""&&this._customItemAddedHandler(l);return}this.option("opened")&&(this._saveValueChangeEvent(l),t(i),l.preventDefault())},space(l,i){var n=this.option("opened"),s=this._shouldRenderSearchEvent();n&&!s&&(this._saveValueChangeEvent(l),t(i),l.preventDefault())},leftArrow(l){if(!(!this._isCaretAtTheStart()||this._isEmpty()||this._isEditable()&&a&&!this._$focusedTag)){l.preventDefault();var i=a?"next":"prev";this._moveTagFocus(i),!this.option("multiline")&&this._scrollContainer(i)}},rightArrow(l){if(!(!this._isCaretAtTheStart()||this._isEmpty()||this._isEditable()&&!a&&!this._$focusedTag)){l.preventDefault();var i=a?"prev":"next";this._moveTagFocus(i),!this.option("multiline")&&this._scrollContainer(i)}}})},_processKeyboardEvent(e){e.preventDefault(),e.stopPropagation(),this._saveValueChangeEvent(e)},_isEmpty(){return this._getValue().length===0},_updateTagsContainer(e){this._$tagsContainer=e.addClass(Ce)},_allowSelectItemByTab:()=>!1,_isCaretAtTheStart(){var e=Z(this._input());return(e==null?void 0:e.start)===0&&e.end===0},_updateInputAriaActiveDescendant(e){this.setAria("activedescendant",e,this._input())},_moveTagFocus(e,t){if(!this._$focusedTag){var a=this._tagElements();this._$focusedTag=e==="next"?a.first():a.last(),this._toggleFocusClass(!0,this._$focusedTag),this._updateInputAriaActiveDescendant(this._$focusedTag.attr("id"));return}var l=this._$focusedTag[e](".".concat(T));l.length>0?(this._replaceFocusedTag(l),this._updateInputAriaActiveDescendant(l.attr("id"))):(t||e==="next"&&this._isEditable())&&(this._clearTagFocus(),this._updateInputAriaActiveDescendant())},_replaceFocusedTag(e){this._toggleFocusClass(!1,this._$focusedTag),this._$focusedTag=e,this._toggleFocusClass(!0,this._$focusedTag)},_clearTagFocus(){this._$focusedTag&&(this._toggleFocusClass(!1,this._$focusedTag),this._updateInputAriaActiveDescendant(),delete this._$focusedTag)},_focusClassTarget(e){return e&&e.length&&e[0]!==this._focusTarget()[0]?e:this.callBase()},_getLabelContainer(){return this._$tagsContainer},_getFieldElement(){return this._input()},_scrollContainer(e){if(!(this.option("multiline")||!ee())&&this._$tagsContainer){var t=this._getScrollPosition(e);this._$tagsContainer.scrollLeft(t)}},_getScrollPosition(e){return e==="start"||e==="end"?this._getBorderPosition(e):this._$focusedTag?this._getFocusedTagPosition(e):this._getBorderPosition("end")},_getBorderPosition(e){var t=this.option("rtlEnabled"),a=C(e==="end",t),l=t?-1:1;return C(a,!t)?0:l*(this._$tagsContainer.get(0).scrollWidth-S(this._$tagsContainer))},_getFocusedTagPosition(e){var t=this.option("rtlEnabled"),a=C(e==="next",t),{left:l}=this._$focusedTag.position(),i=this._$tagsContainer.scrollLeft();return a&&(l+=S(this._$focusedTag,!0)-S(this._$tagsContainer)),C(a,l<0)&&(i+=l),i},_setNextValue:O,_getDefaultOptions(){return E(this.callBase(),{value:[],showDropDownButton:!1,maxFilterQueryLength:1500,tagTemplate:"tag",selectAllText:x.format("dxList-selectAll"),hideSelectedItems:!1,selectedItems:[],selectAllMode:"page",onSelectAllValueChanged:null,maxDisplayedTags:void 0,showMultiTagOnly:!0,onMultiTagPreparing:null,multiline:!0,useSubmitBehavior:!0})},_init(){this.callBase(),this._selectedItems=[],this._initSelectAllValueChangedAction()},_initActions(){this.callBase(),this._initMultiTagPreparingAction()},_initMultiTagPreparingAction(){this._multiTagPreparingAction=this._createActionByOption("onMultiTagPreparing",{beforeExecute:e=>{this._multiTagPreparingHandler(e.args[0])},excludeValidators:["disabled","readOnly"]})},_multiTagPreparingHandler(e){var{length:t}=this._getValue();this.option("showMultiTagOnly")?e.text=x.getFormatter("dxTagBox-selected")(t):e.text=x.getFormatter("dxTagBox-moreSelected")(t-this.option("maxDisplayedTags")+1)},_initDynamicTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({tag:new te((e,t)=>{var a,l=u("<div>").addClass(Ee);u("<span>").text((a=t.text)!==null&&a!==void 0?a:t).appendTo(l),u("<div>").addClass(M).appendTo(l),e.append(l)},["text"],this.option("integrationOptions.watchMethod"),{text:this._displayGetter})})},_toggleSubmitElement(e){e?(this._renderSubmitElement(),this._setSubmitValue()):(this._$submitElement&&this._$submitElement.remove(),delete this._$submitElement)},_renderSubmitElement(){this.option("useSubmitBehavior")&&(this._$submitElement=u("<select>").attr({multiple:"multiple","aria-label":"Selected items"}).css("display","none").appendTo(this.$element()))},_setSubmitValue(){if(this.option("useSubmitBehavior")){for(var e=this._getValue(),t=[],a=0,l=e.length;a<l;a++){var i=this._shouldUseDisplayValue(e[a]);t.push(u("<option>").val(i?this._displayGetter(e[a]):e[a]).attr("selected","selected"))}this._getSubmitElement().empty().append(t)}},_initMarkup(){this._tagElementsCache=u();var e=!this.option("multiline");this.$element().addClass(be).toggleClass(ye,!(this.option("searchEnabled")||this.option("acceptCustomValue"))).toggleClass(P,e),this.setAria({role:"group",roledescription:"tagbox"},this.$element()),this._initTagTemplate(),this.callBase()},_getNewLabelId(e,t,a){return e?a?e===t?void 0:e.split(" ").filter(l=>l!==t).join(" "):"".concat(e," ").concat(t):t},_updateElementAria(e,t){var a=!e;if(a){this.setAria("labelledby",void 0,this.$element());return}var l=this.$element().attr("aria-labelledby"),i=this._getNewLabelId(l,e,t);this.setAria("labelledby",i,this.$element())},_render(){this.callBase(),this._renderTagRemoveAction(),this._renderSingleLineScroll(),this._scrollContainer("start")},_initTagTemplate(){this._tagTemplate=this._getTemplateByOption("tagTemplate")},_renderField(){var e=!p(this.option("fieldTemplate"));this.$element().toggleClass(xe,e).toggleClass(Ae,!e),this.callBase()},_renderTagRemoveAction(){var e=this._createAction(this._removeTagHandler.bind(this)),t=b(me,"dxTagBoxTagRemove");h.off(this._$tagsContainer,t),h.on(this._$tagsContainer,t,".".concat(M),a=>{e({event:a})})},_renderSingleLineScroll(){var e=b("dxmousewheel",this.NAME),t=this.$element(),a=this.option("multiline");if(h.off(t,e),ae.real().deviceType!=="desktop"){this._$tagsContainer&&this._$tagsContainer.css("overflowX",a?"":"auto");return}a||h.on(t,e,this._tagContainerMouseWheelHandler.bind(this))},_tagContainerMouseWheelHandler(e){var t=this._$tagsContainer.scrollLeft(),a=e.delta*Fe;if(!le(e)&&ie(this._$tagsContainer,a,!0))return this._$tagsContainer.scrollLeft(t+a),!1},_renderEvents(){this.callBase();var e=this._input(),t=b("keydown",this.NAME);h.on(e,t,a=>{var l=ne(a);!this._isControlKey(l)&&this._isEditable()&&this._clearTagFocus()})},_popupWrapperClass(){return"".concat(this.callBase()," ").concat(Ie)},_renderInput(){this.callBase(),this._renderPreventBlurOnInputClick()},_renderPreventBlurOnInputClick(){var e=b("mousedown","dxTagBox");h.off(this._inputWrapper(),e),h.on(this._inputWrapper(),e,t=>{t.target!==this._input()[0]&&this._isFocused()&&t.preventDefault()})},_renderInputValueImpl(){return this._renderMultiSelect()},_loadInputValue:()=>A(),_clearTextValue(){this._input().val(""),this._toggleEmptinessEventHandler(),this.option("text","")},_focusInHandler(e){this._preventNestedFocusEvent(e)||this._scrollContainer("end"),this.callBase(e)},_renderInputValue(){return this.option("displayValue",this._searchValue()),this.callBase()},_restoreInputText(e){e||this._clearTextValue()},_focusOutHandler(e){this._preventNestedFocusEvent(e)||(this._clearTagFocus(),this._scrollContainer("start")),this.callBase(e)},_initSelectAllValueChangedAction(){this._selectAllValueChangeAction=this._createActionByOption("onSelectAllValueChanged")},_renderList(){this.callBase(),this._setListDataSourceFilter()},_canListHaveFocus(){return this.option("applyValueMode")==="useButtons"},_listConfig(){var e=this.option("showSelectionControls")?"all":"multiple";return E(this.callBase(),{maxFilterLengthInRequest:this.option("maxFilterQueryLength"),selectionMode:e,selectAllText:this.option("selectAllText"),onSelectAllValueChanged:t=>{var{value:a}=t;this._selectAllValueChangeAction({value:a})},selectAllMode:this.option("selectAllMode"),selectedItems:this._selectedItems,onFocusedItemChanged:null})},_renderMultiSelect(){var e=c();return this._updateTagsContainer(this._$textEditorInputContainer),this._renderInputSize(),this._renderTags().done(()=>{this._popup&&this._popup.refreshPosition(),e.resolve()}).fail(e.reject),e.promise()},_listItemClickHandler(e){!this.option("showSelectionControls")&&this._clearTextValue(),this.option("applyValueMode")!=="useButtons"&&(this.callBase(e),this._saveValueChangeEvent(void 0))},_shouldClearFilter(){var e=this.callBase(),t=this.option("showSelectionControls");return!t&&e},_renderInputSize(){var e=this._input(),t=e.val(),a=N(t)&&t,l="",i,n=this.option("searchEnabled")||this.option("acceptCustomValue");if(a&&n){var s=se(e,t,{includePaddings:!0});s.insertAfter(e),l=S(s)+5,s.remove()}else t||(i=1);e.css("width",l),e.attr("size",i??"")},_renderInputSubstitution(){this.callBase(),this._updateWidgetHeight()},_getValue(){return this.option("value")||[]},_multiTagRequired(){var e=this._getValue(),t=this.option("maxDisplayedTags");return p(t)&&e.length>t},_renderMultiTag(e){var t=u("<div>").addClass(T).addClass(L),a={multiTagElement:B(t),selectedItems:this.option("selectedItems")};return this._multiTagPreparingAction(a),a.cancel?!1:(t.data(f,a.text),t.insertBefore(e),this._tagTemplate.render({model:a.text,container:B(t)}),t)},_getFilter(e){var t=this._dataController.filter(),a=e.getCombinedFilter(this.option("valueExpr"),t),l=encodeURI(JSON.stringify(a)).length,i=this.option("maxFilterQueryLength");if(l<=i)return a;re.log("W1019",i)},_getFilteredItems(e){var t,a;(t=this._loadFilteredItemsPromise)===null||t===void 0||t.reject();var l=new _e(e),i=(a=this._list)===null||a===void 0?void 0:a.option("selectedItems"),n=!!i&&this._list._dataController.isLoaded(),s=i||this.option("selectedItems"),m=l.getLocalFilter(this._valueGetter),o=s.filter(m),g=o.length===e.length,d=c(),_=this._dataController;if((!this._isDataSourceChanged||n)&&g)return d.resolve(o).promise();var{customQueryParams:y,expand:I,select:W}=_.loadOptions(),U=this._getFilter(l);return _.loadFromStore({filter:U,customQueryParams:y,expand:I,select:W}).done((X,Q)=>{if(this._isDataSourceChanged=!1,this._disposed){d.reject();return}var{data:q}=oe(X,Q),J=_.applyMapFunction(q);d.resolve(J.filter(m))}).fail(d.reject),this._loadFilteredItemsPromise=d,d.promise()},_createTagsData(e,t){var a=[],l={},i=this._valueGetterExpr()==="this",n={};t.forEach(o=>{var g=i?JSON.stringify(o):this._valueGetter(o);n[g]=o});var s=[];e.forEach((o,g)=>{var d=n[i?JSON.stringify(o):o];if(i&&!p(d))s.push(this._loadItem(o,l).always(y=>{var I=this._createTagData(y,o);a.splice(g,0,I)}));else{var _=this._createTagData(d,o);a.splice(g,0,_)}});var m=c();return A.apply(this,s).always(()=>{m.resolve(a)}),m.promise()},_createTagData(e,t){if(p(e))return this._selectedItems.push(e),e;var a=this.option("selectedItem"),l=this._valueGetter(a)===t?a:t;return l},_isGroupedData(){return this.option("grouped")&&!this._dataController.group()},_getItemsByValues(e){var t=[];return e.forEach(a=>{var l=this._getItemFromPlain(a);p(l)&&t.push(l)}),t},_getFilteredGroupedItems(e){var t=c();return this._filteredGroupedItemsLoadPromise&&this._dataController.cancel(this._filteredGroupedItemsLoadPromise.operationId),this._dataController.items().length?t.resolve(this._getItemsByValues(e)):this._filteredGroupedItemsLoadPromise=this._dataController.load().done(()=>{t.resolve(this._getItemsByValues(e))}).fail(()=>{t.resolve([])}).always(()=>{this._filteredGroupedItemsLoadPromise=void 0}),t.promise()},_loadTagsData(){var e=this._getValue(),t=c();this._selectedItems=[];var a=this._isGroupedData()?this._getFilteredGroupedItems(e):this._getFilteredItems(e);return a.done(l=>{var i=this._createTagsData(e,l);i.always(n=>{t.resolve(n)})}).fail(t.reject.bind(this)),t.promise()},_renderTags(){var e=c(),t=!1;return this._shouldGetItemsFromPlain(this._valuesToUpdate)&&(this._selectedItems=this._getItemsFromPlain(this._valuesToUpdate),this._selectedItems.length===this._valuesToUpdate.length&&(this._renderTagsImpl(this._selectedItems),t=!0,e.resolve())),t||this._loadTagsData().done(a=>{if(this._disposed){e.reject();return}this._renderTagsImpl(a),e.resolve()}).fail(e.reject),e.promise()},_renderTagsImpl(e){this._renderTagsCore(e),this._renderEmptyState(),this._preserveFocusedTag||this._clearTagFocus()},_shouldGetItemsFromPlain(e){return e&&this._dataController.isLoaded()&&e.length<=this._getPlainItems().length},_getItemsFromPlain(e){var t=this._getSelectedItemsFromList(e),a=t.length===0&&e.length>0||t.length<e.length;if(a){var l=this._getPlainItems();t=this._filterSelectedItems(l,e)}return t},_getSelectedItemsFromList(e){var t,a=(t=this._list)===null||t===void 0?void 0:t.option("selectedItems"),l=[];return e.length===(a==null?void 0:a.length)&&(l=this._filterSelectedItems(a,e)),l},_filterSelectedItems(e,t){var a=e.filter(l=>{for(var i,n=0;n<t.length;n++)if(i=t[n],D(i)){if(this._isValueEquals(l,i))return!0}else if(this._isValueEquals(this._valueGetter(l),i))return!0;return!1},this);return a},_integrateInput(){this._isInputReady.resolve(),this.callBase();var e=this.$element().find(".".concat(Be));this._updateTagsContainer(e),this._renderTagRemoveAction()},_renderTagsCore(e){var t;(t=this._isInputReady)===null||t===void 0||t.reject(),this._isInputReady=c(),this._renderField(),this.option("selectedItems",this._selectedItems.slice()),this._cleanTags(),this._input().length>0&&this._isInputReady.resolve(),A(this._isInputReady).done(()=>{this._renderTagsElements(e)})},_renderTagsElements(e){var t=this._multiTagRequired()&&this._renderMultiTag(this._input()),a=this.option("showMultiTagOnly"),l=this.option("maxDisplayedTags");e.forEach((i,n)=>{if(t&&a||t&&!a&&n-l>=-1)return!1;this._renderTag(i,t||this._input())}),this._isFocused()&&this._scrollContainer("end"),this._refreshTagElements()},_cleanTags(){if(this._multiTagRequired())this._tagElements().remove();else{var e=this._tagElements(),t=this._getValue();v(e,(a,l)=>{var i=u(l),n=i.data(f);t!=null&&t.includes(n)||i.remove()})}this._updateElementAria()},_renderEmptyState(){var e=!(this._getValue().length||this._selectedItems.length||this._searchValue());this._toggleEmptiness(e),this._renderDisplayText()},_renderDisplayText(){this._renderInputSize()},_refreshTagElements(){this._tagElementsCache=this.$element().find(".".concat(T))},_tagElements(){return this._tagElementsCache},_applyTagTemplate(e,t){this._tagTemplate.render({model:e,container:B(t)})},_renderTag(e,t){var a=this._valueGetter(e);if(p(a)){var l=this._getTag(a),i=this._displayGetter(e),n=this._getItemModel(e,i);if(l)p(i)&&(l.empty(),this._applyTagTemplate(n,l)),l.removeClass($),this._updateElementAria(l.attr("id"));else{var s="dx-".concat(new ue);l=this._createTag(a,t,s),p(e)?this._applyTagTemplate(n,l):(l.addClass($),this._applyTagTemplate(a,l)),this._updateElementAria(s)}}},_getItemModel(e,t){return D(e)&&p(t)?e:de(t,"")},_getTag(e){for(var t=this._tagElements(),a=t.length,l=!1,i=0;i<a;i++){var n=t[i],s=pe(n,f);if(e===s||V(e,s)){l=u(n);break}}return l},_createTag:(e,t,a)=>u("<div>").attr("id",a).addClass(T).data(f,e).insertBefore(t),_toggleEmptinessEventHandler(){this._toggleEmptiness(!this._getValue().length&&!this._searchValue().length)},_customItemAddedHandler(e){this.callBase(e),this._clearTextValue()},_removeTagHandler(e){var t=e.event;t.stopPropagation(),this._saveValueChangeEvent(t);var a=u(t.target).closest(".".concat(T));this._removeTagElement(a)},_removeTagElement(e){if(e.hasClass(L)){this.option("showMultiTagOnly")?this.clear():this.option("value",this._getValue().slice(0,this.option("maxDisplayedTags")));return}var t=e.data(f),a=e.attr("id");this._removeTagWithUpdate(t),this._updateElementAria(a,!0),this._refreshTagElements()},_updateField:O,_removeTagWithUpdate(e){var t=this._getValue().slice();this._removeTag(t,e),this.option("value",t),this.option("selectedItem",null),t.length===0&&this._clearTagFocus()},_getCurrentValue(){return this._lastValue()},_selectionChangeHandler(e){if(this.option("applyValueMode")!=="useButtons"){var t=this._getValue().slice();if(v(e.removedItems||[],(l,i)=>{this._removeTag(t,this._valueGetter(i))}),v(e.addedItems||[],(l,i)=>{this._addTag(t,this._valueGetter(i))}),this._updateWidgetHeight(),!V(this._list.option("selectedItemKeys"),this.option("value"))){var a=this._list._getSelectionChangeEvent();a&&this._saveValueChangeEvent(a),this.option("value",t)}this._list._saveSelectionChangeEvent(void 0)}},_removeTag(e,t){var a=this._valueIndex(t,e);a>=0&&e.splice(a,1)},_addTag(e,t){var a=this._valueIndex(t);a<0&&e.push(t)},_fieldRenderData(){return this._selectedItems.slice()},_completeSelection(e){this.option("showSelectionControls")||this._setValue(e)},_setValue(e){var t,a;if(e!==null){var l=this.option("applyValueMode")==="useButtons",i=this._valueIndex(e),n=(l?((t=this._list)===null||t===void 0?void 0:t.option("selectedItemKeys"))||[]:this._getValue()).slice();i>=0?n.splice(i,1):n.push(e),l?(a=this._list)===null||a===void 0||a.option("selectedItemKeys",n):this.option("value",n)}},_isSelectedValue(e,t){return this._valueIndex(e,null,t)>-1},_valueIndex(e,t,a){var l=-1;return a&&typeof e!="object"&&(a.indexByValues||(a.indexByValues={},t=t||this._getValue(),t.forEach((i,n)=>{a.indexByValues[i]=n})),e in a.indexByValues)?a.indexByValues[e]:(t=t||this._getValue(),v(t,(i,n)=>{if(this._isValueEquals(e,n))return l=i,!1}),l)},_lastValue(){var e=this._getValue(),t=e[e.length-1];return t??null},_shouldRenderSearchEvent(){return this.option("searchEnabled")||this.option("acceptCustomValue")},_searchHandler(e){this.option("searchEnabled")&&e&&!this._isTagRemoved&&(this.callBase(arguments),this._setListDataSourceFilter()),this._updateWidgetHeight(),delete this._isTagRemoved},_updateWidgetHeight(){var e=this.$element(),t=w(e);this._renderInputSize();var a=w(e);this._popup&&this.option("opened")&&this._isEditable()&&a!==t&&this._popup.repaint()},_refreshSelected(){var e;!((e=this._list)===null||e===void 0)&&e.getDataSource()&&this._list.option("selectedItems",this._selectedItems)},_resetListDataSourceFilter(){var e=this._dataController;delete this._userFilter,e.filter(null),e.reload()},_setListDataSourceFilter(){if(!(!this.option("hideSelectedItems")||!this._list)){var e=this._dataController,t=this._valueGetterExpr();if(N(t)&&t!=="this"){var a=this._dataSourceFilterExpr();this._userFilter===void 0&&(this._userFilter=e.filter()||null),this._userFilter&&a.push(this._userFilter),a.length?e.filter(a):e.filter(null)}else e.filter(this._dataSourceFilterFunction.bind(this));e.load()}},_dataSourceFilterExpr(){var e=[];return this._getValue().forEach(t=>e.push(["!",[this._valueGetterExpr(),t]])),e},_dataSourceFilterFunction(e){var t=this._valueGetter(e),a=!0;return v(this._getValue(),(l,i)=>{if(this._isValueEquals(i,t))return a=!1,!1}),a},_dataSourceChangedHandler(){this._isDataSourceChanged=!0,this.callBase.apply(this,arguments)},_applyButtonHandler(e){this._saveValueChangeEvent(e.event),this.option("value",this._getSortedListValues()),this._clearTextValue(),this.callBase(),this._cancelSearchIfNeed()},_getSortedListValues(){var e=this._getListValues(),t=this.option("value")||[],a=e.length?he(t,e):[],l=a.length?ce(e,t):e;return a.concat(l)},_getListValues(){return this._list?this._getPlainItems(this._list.option("selectedItems")).map(e=>this._valueGetter(e)):[]},_setListDataSource(){var e=this._getValue();this.callBase(),e!==this.option("value")&&this.option("value",e),this._refreshSelected()},_renderOpenedState(){this.callBase(),this.option("applyValueMode")==="useButtons"&&!this.option("opened")&&this._refreshSelected()},clear(){this._restoreInputText();var e=this._getDefaultOptions().value,t=this.option("value");e&&e.length===0&&t&&e.length===t.length||this.callBase()},_clean(){this.callBase(),delete this._defaultTagTemplate,delete this._valuesToUpdate,delete this._tagTemplate},_getSelectedItemsDifference(e,t){if(!e.length)return{addedItems:[],removedItems:t.slice()};if(!t.length)return{addedItems:e.slice(),removedItems:[]};var a=t.reduce((i,n)=>{var s=this._valueGetter(n);return i[s]=n,i},{}),l=[];return e.forEach(i=>{var n=this._valueGetter(i);a[n]||l.push(i),delete a[n]}),{addedItems:l,removedItems:Object.values(a)}},_optionChanged(e){var{name:t,value:a,previousValue:l}=e;switch(t){case"onSelectAllValueChanged":this._initSelectAllValueChangedAction();break;case"onMultiTagPreparing":this._initMultiTagPreparingAction(),this._renderTags();break;case"hideSelectedItems":a?this._setListDataSourceFilter():this._resetListDataSourceFilter();break;case"useSubmitBehavior":this._toggleSubmitElement(a);break;case"displayExpr":this.callBase(e),this._initTemplates(),this._invalidate();break;case"tagTemplate":this._initTagTemplate(),this._invalidate();break;case"selectAllText":this._setListOption("selectAllText",this.option("selectAllText"));break;case"readOnly":case"disabled":this.callBase(e),!a&&this._refreshEvents();break;case"value":this._valuesToUpdate=a,this.callBase(e),this._valuesToUpdate=void 0,this._setListDataSourceFilter();break;case"maxDisplayedTags":case"showMultiTagOnly":this._renderTags();break;case"selectAllMode":this._setListOption(t,a);break;case"selectedItem":break;case"selectedItems":this._selectionChangedAction(this._getSelectedItemsDifference(a,l));break;case"multiline":this.$element().toggleClass(P,!a),this._renderSingleLineScroll();break;case"maxFilterQueryLength":break;default:this.callBase(e)}},_getActualSearchValue(){return this.callBase()||this._searchValue()},_popupHidingHandler(){this.callBase(),this._clearFilter()}});ge("dxTagBox",G);/*!
 * devextreme-vue
 * Version: 23.2.10
 * Build date: Mon Oct 28 2024
 *
 * Copyright (c) 2012 - 2024 Developer Express Inc. ALL RIGHTS RESERVED
 *
 * This software may be modified and distributed under the terms
 * of the MIT license. See the LICENSE file in the root of the project for details.
 *
 * https://github.com/DevExpress/devextreme-vue
 */var Oe=ve({props:{acceptCustomValue:Boolean,accessKey:String,activeStateEnabled:Boolean,applyValueMode:String,buttons:Array,customItemCreateEvent:String,dataSource:{},deferRendering:Boolean,disabled:Boolean,displayExpr:[Function,String],dropDownButtonTemplate:{},dropDownOptions:Object,elementAttr:Object,fieldTemplate:{},focusStateEnabled:Boolean,grouped:Boolean,groupTemplate:{},height:[Function,Number,String],hideSelectedItems:Boolean,hint:String,hoverStateEnabled:Boolean,inputAttr:{},isDirty:Boolean,isValid:Boolean,items:Array,itemTemplate:{},label:String,labelMode:String,maxDisplayedTags:Number,maxFilterQueryLength:Number,maxLength:[Number,String],minSearchLength:Number,multiline:Boolean,name:String,noDataText:String,onChange:Function,onClosed:Function,onContentReady:Function,onCustomItemCreating:Function,onDisposing:Function,onEnterKey:Function,onFocusIn:Function,onFocusOut:Function,onInitialized:Function,onInput:Function,onItemClick:Function,onKeyDown:Function,onKeyUp:Function,onMultiTagPreparing:Function,onOpened:Function,onOptionChanged:Function,onSelectAllValueChanged:Function,onSelectionChanged:Function,onValueChanged:Function,opened:Boolean,openOnFieldClick:Boolean,placeholder:String,readOnly:Boolean,rtlEnabled:Boolean,searchEnabled:Boolean,searchExpr:[Array,Function,String],searchMode:String,searchTimeout:Number,selectAllMode:String,selectAllText:String,selectedItems:Array,showClearButton:Boolean,showDataBeforeSearch:Boolean,showDropDownButton:Boolean,showMultiTagOnly:Boolean,showSelectionControls:Boolean,stylingMode:String,tabIndex:Number,tagTemplate:{},text:String,useItemTextAsTitle:Boolean,validationError:{},validationErrors:Array,validationMessageMode:String,validationMessagePosition:String,validationStatus:String,value:Array,valueChangeEvent:String,valueExpr:[Function,String],visible:Boolean,width:[Function,Number,String],wrapItemText:Boolean},emits:{"update:isActive":null,"update:hoveredElement":null,"update:acceptCustomValue":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:applyValueMode":null,"update:buttons":null,"update:customItemCreateEvent":null,"update:dataSource":null,"update:deferRendering":null,"update:disabled":null,"update:displayExpr":null,"update:dropDownButtonTemplate":null,"update:dropDownOptions":null,"update:elementAttr":null,"update:fieldTemplate":null,"update:focusStateEnabled":null,"update:grouped":null,"update:groupTemplate":null,"update:height":null,"update:hideSelectedItems":null,"update:hint":null,"update:hoverStateEnabled":null,"update:inputAttr":null,"update:isDirty":null,"update:isValid":null,"update:items":null,"update:itemTemplate":null,"update:label":null,"update:labelMode":null,"update:maxDisplayedTags":null,"update:maxFilterQueryLength":null,"update:maxLength":null,"update:minSearchLength":null,"update:multiline":null,"update:name":null,"update:noDataText":null,"update:onChange":null,"update:onClosed":null,"update:onContentReady":null,"update:onCustomItemCreating":null,"update:onDisposing":null,"update:onEnterKey":null,"update:onFocusIn":null,"update:onFocusOut":null,"update:onInitialized":null,"update:onInput":null,"update:onItemClick":null,"update:onKeyDown":null,"update:onKeyUp":null,"update:onMultiTagPreparing":null,"update:onOpened":null,"update:onOptionChanged":null,"update:onSelectAllValueChanged":null,"update:onSelectionChanged":null,"update:onValueChanged":null,"update:opened":null,"update:openOnFieldClick":null,"update:placeholder":null,"update:readOnly":null,"update:rtlEnabled":null,"update:searchEnabled":null,"update:searchExpr":null,"update:searchMode":null,"update:searchTimeout":null,"update:selectAllMode":null,"update:selectAllText":null,"update:selectedItems":null,"update:showClearButton":null,"update:showDataBeforeSearch":null,"update:showDropDownButton":null,"update:showMultiTagOnly":null,"update:showSelectionControls":null,"update:stylingMode":null,"update:tabIndex":null,"update:tagTemplate":null,"update:text":null,"update:useItemTextAsTitle":null,"update:validationError":null,"update:validationErrors":null,"update:validationMessageMode":null,"update:validationMessagePosition":null,"update:validationStatus":null,"update:value":null,"update:valueChangeEvent":null,"update:valueExpr":null,"update:visible":null,"update:width":null,"update:wrapItemText":null},model:{prop:"value",event:"update:value"},computed:{instance:function(){return this.$_instance}},beforeCreate:function(){this.$_WidgetClass=G,this.$_hasAsyncTemplate=!0,this.$_expectedChildren={button:{isCollectionItem:!0,optionName:"buttons"},dropDownOptions:{isCollectionItem:!1,optionName:"dropDownOptions"},item:{isCollectionItem:!0,optionName:"items"}}}}),R=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:hide":null,"update:show":null},props:{hide:[Object,Number,String],show:[Object,Number,String]}});R.$_optionName="animation";R.$_expectedChildren={hide:{isCollectionItem:!1,optionName:"hide"},show:{isCollectionItem:!1,optionName:"show"}};var De=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});De.$_optionName="at";var Ve=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});Ve.$_optionName="boundaryOffset";var F=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:location":null,"update:name":null,"update:options":null},props:{location:String,name:String,options:Object}});F.$_optionName="buttons";F.$_isCollectionItem=!0;F.$_expectedChildren={options:{isCollectionItem:!1,optionName:"options"}};var we=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});we.$_optionName="collision";var H=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:animation":null,"update:bindingOptions":null,"update:closeOnOutsideClick":null,"update:container":null,"update:contentTemplate":null,"update:copyRootClassesToWrapper":null,"update:deferRendering":null,"update:disabled":null,"update:dragAndResizeArea":null,"update:dragEnabled":null,"update:dragOutsideBoundary":null,"update:elementAttr":null,"update:enableBodyScroll":null,"update:focusStateEnabled":null,"update:fullScreen":null,"update:height":null,"update:hideOnOutsideClick":null,"update:hideOnParentScroll":null,"update:hint":null,"update:hoverStateEnabled":null,"update:maxHeight":null,"update:maxWidth":null,"update:minHeight":null,"update:minWidth":null,"update:onContentReady":null,"update:onDisposing":null,"update:onHidden":null,"update:onHiding":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:onResize":null,"update:onResizeEnd":null,"update:onResizeStart":null,"update:onShowing":null,"update:onShown":null,"update:onTitleRendered":null,"update:position":null,"update:resizeEnabled":null,"update:restorePosition":null,"update:rtlEnabled":null,"update:shading":null,"update:shadingColor":null,"update:showCloseButton":null,"update:showTitle":null,"update:tabIndex":null,"update:title":null,"update:titleTemplate":null,"update:toolbarItems":null,"update:visible":null,"update:width":null,"update:wrapperAttr":null},props:{accessKey:String,animation:Object,bindingOptions:Object,closeOnOutsideClick:[Boolean,Function],container:{},contentTemplate:{},copyRootClassesToWrapper:Boolean,deferRendering:Boolean,disabled:Boolean,dragAndResizeArea:{},dragEnabled:Boolean,dragOutsideBoundary:Boolean,elementAttr:{},enableBodyScroll:Boolean,focusStateEnabled:Boolean,fullScreen:Boolean,height:[Function,Number,String],hideOnOutsideClick:[Boolean,Function],hideOnParentScroll:Boolean,hint:String,hoverStateEnabled:Boolean,maxHeight:[Function,Number,String],maxWidth:[Function,Number,String],minHeight:[Function,Number,String],minWidth:[Function,Number,String],onContentReady:Function,onDisposing:Function,onHidden:Function,onHiding:Function,onInitialized:Function,onOptionChanged:Function,onResize:Function,onResizeEnd:Function,onResizeStart:Function,onShowing:Function,onShown:Function,onTitleRendered:Function,position:[Function,Object,String],resizeEnabled:Boolean,restorePosition:Boolean,rtlEnabled:Boolean,shading:Boolean,shadingColor:String,showCloseButton:Boolean,showTitle:Boolean,tabIndex:Number,title:String,titleTemplate:{},toolbarItems:Array,visible:Boolean,width:[Function,Number,String],wrapperAttr:{}}});H.$_optionName="dropDownOptions";H.$_expectedChildren={animation:{isCollectionItem:!1,optionName:"animation"},position:{isCollectionItem:!1,optionName:"position"},toolbarItem:{isCollectionItem:!0,optionName:"toolbarItems"}};var k=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}});k.$_optionName="from";k.$_expectedChildren={position:{isCollectionItem:!1,optionName:"position"}};var j=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}});j.$_optionName="hide";j.$_expectedChildren={from:{isCollectionItem:!1,optionName:"from"},to:{isCollectionItem:!1,optionName:"to"}};var K=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:disabled":null,"update:html":null,"update:template":null,"update:text":null,"update:visible":null},props:{disabled:Boolean,html:String,template:{},text:String,visible:Boolean}});K.$_optionName="items";K.$_isCollectionItem=!0;var Ne=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:String,y:String}});Ne.$_optionName="my";var Le=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:x":null,"update:y":null},props:{x:Number,y:Number}});Le.$_optionName="offset";var $e=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:accessKey":null,"update:activeStateEnabled":null,"update:bindingOptions":null,"update:disabled":null,"update:elementAttr":null,"update:focusStateEnabled":null,"update:height":null,"update:hint":null,"update:hoverStateEnabled":null,"update:icon":null,"update:onClick":null,"update:onContentReady":null,"update:onDisposing":null,"update:onInitialized":null,"update:onOptionChanged":null,"update:rtlEnabled":null,"update:stylingMode":null,"update:tabIndex":null,"update:template":null,"update:text":null,"update:type":null,"update:useSubmitBehavior":null,"update:validationGroup":null,"update:visible":null,"update:width":null},props:{accessKey:String,activeStateEnabled:Boolean,bindingOptions:Object,disabled:Boolean,elementAttr:Object,focusStateEnabled:Boolean,height:[Function,Number,String],hint:String,hoverStateEnabled:Boolean,icon:String,onClick:Function,onContentReady:Function,onDisposing:Function,onInitialized:Function,onOptionChanged:Function,rtlEnabled:Boolean,stylingMode:String,tabIndex:Number,template:{},text:String,type:String,useSubmitBehavior:Boolean,validationGroup:String,visible:Boolean,width:[Function,Number,String]}});$e.$_optionName="options";var Me=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:at":null,"update:boundary":null,"update:boundaryOffset":null,"update:collision":null,"update:my":null,"update:of":null,"update:offset":null},props:{at:[Object,String],boundary:{},boundaryOffset:[Object,String],collision:[Object,String],my:[Object,String],of:{},offset:[Object,String]}});Me.$_optionName="position";var Pe=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:complete":null,"update:delay":null,"update:direction":null,"update:duration":null,"update:easing":null,"update:from":null,"update:staggerDelay":null,"update:start":null,"update:to":null,"update:type":null},props:{complete:Function,delay:Number,direction:String,duration:Number,easing:String,from:Object,staggerDelay:Number,start:Function,to:Object,type:String}});Pe.$_optionName="show";var Ge=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:left":null,"update:opacity":null,"update:position":null,"update:scale":null,"update:top":null},props:{left:Number,opacity:Number,position:Object,scale:Number,top:Number}});Ge.$_optionName="to";var z=r({emits:{"update:isActive":null,"update:hoveredElement":null,"update:cssClass":null,"update:disabled":null,"update:html":null,"update:locateInMenu":null,"update:location":null,"update:menuItemTemplate":null,"update:options":null,"update:showText":null,"update:template":null,"update:text":null,"update:toolbar":null,"update:visible":null,"update:widget":null},props:{cssClass:String,disabled:Boolean,html:String,locateInMenu:String,location:String,menuItemTemplate:{},options:{},showText:String,template:{},text:String,toolbar:String,visible:Boolean,widget:String}});z.$_optionName="toolbarItems";z.$_isCollectionItem=!0;const He={__name:"ListTagBox",props:{width:{type:Number,default:()=>300},height:{type:Number,default:()=>400},value:{type:Array,default:()=>[]},onValueChanged:{type:Function,default:()=>function(){}},dataSource:{type:Array,default:()=>[]},dataGridComponent:{type:Object,default:()=>{}}},setup(e){const t=e;function a(){t.dataGridComponent.updateDimensions()}return(l,i)=>(fe(),Te(Se(Oe),{"data-source":e.dataSource,value:e.value,"show-selection-controls":!0,"max-displayed-tags":3,"show-multi-tag-only":!1,"on-value-changed":n=>e.onValueChanged(n.value),"on-selection-changed":a,"search-enabled":!0,dropDownOptions:{width:e.width,height:e.height}},null,8,["data-source","value","on-value-changed","dropDownOptions"]))}};export{He as _};
