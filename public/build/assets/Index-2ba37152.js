import{z as Ft,r as R,w as Te,x as Lt,o as q,b as z,l as rt,d as S,t as me,e as te,f as gt,F as Ke,A as yt,g as Ie,c as he,a as _t,p as Fe,B as G,n as Ve,C as Mr,E as Wr,u as Er,G as Ar,v as B,H as ae,I as $r,J as pe,h as Yr,j as Vr,k as $e,y as wt,K as Ir}from"./app-c0bc33ca.js";import Nr from"./LineContextMenu-75be9098.js";import{_ as Br}from"./select-box-c30a0772.js";import Zr from"./VpsOtpPopup-f883837a.js";import{c as qr}from"./lightweight-charts.esm.development-03366bac.js";import"./text-box-1c929243.js";const Hr=[{price:[[0,100],[50,30],[120,90],[170,50],[200,70],[300,0]],volume:[[0,180],[50,160],[120,200],[170,140],[200,170],[300,100]],et:[[217,50],[237,50]],sl:[[190,70],[210,70]],tp1:[[160,50],[180,50],2],time:170},{price:[[0,100],[50,30],[90,60],[110,40],[140,90],[170,60],[200,80],[300,0]],volume:[[0,200],[50,140],[90,180],[110,160],[140,190],[170,150],[200,170],[300,100]],et:[[215,60],[235,60]],sl:[[190,80],[210,80]],tp1:[[160,60],[180,60],2],time:170},{price:[[0,100],[50,30],[90,90],[130,40],[170,80],[200,50],[230,70],[300,0]],volume:[[0,200],[50,140],[90,180],[130,160],[170,190],[200,150],[230,170],[300,100]],et:[[240,50],[260,50]],sl:[[220,70],[240,70]],tp1:[[120,40],[140,40],2],time:200},{price:[[0,100],[70,20],[110,90],[170,35],[185,70],[200,50],[215,80],[230,40],[245,60],[300,0]],volume:[[0,140],[40,180],[70,120],[110,190],[170,150],[215,170],[300,100]],et:[[255,40],[275,40]],sl:[[235,60],[255,60]],tp1:[[160,35],[180,35],1],time:70},{price:[[0,100],[40,40],[70,60],[110,20],[150,70],[200,50],[240,80],[300,0]],volume:[[0,200],[40,130],[70,160],[110,140],[150,170],[200,150],[240,180],[300,100]]},{price:[[0,100],[40,40],[70,60],[110,20],[150,80],[180,40],[200,60],[220,50],[250,70],[300,0]],volume:[[0,200],[40,130],[70,160],[110,140],[150,170],[180,150],[250,180],[300,100]]},{price:[[0,100],[40,70],[70,80],[110,20],[150,70],[160,40],[180,60],[200,30],[250,80],[300,0]],volume:[[0,200],[40,130],[70,160],[110,140],[150,170],[200,150],[240,180],[300,100]]},{price:[[0,100],[40,60],[70,85],[110,45],[150,65],[200,30],[240,45],[300,0]],volume:[[0,200],[40,130],[70,160],[110,140],[150,170],[200,150],[240,180],[300,100]]}],Xr=[{price:[[0,30],[50,0],[100,100],[130,60],[150,75],[170,60],[190,80],[220,40],[250,60],[300,0]],volume:[[0,190],[50,170],[100,200],[130,130],[190,160],[220,120],[250,140],[300,100]],et:[[257,40],[277,40]],sl:[[240,60],[260,60]],tp1:[[210,40],[230,40],2],time:130},{price:[[0,40],[50,10],[100,90],[120,60],[140,80],[170,40],[200,100],[230,60],[250,90],[300,0]],volume:[[0,190],[50,170],[100,200],[170,130],[200,160],[230,140],[250,150],[300,100]],et:[[257,60],[277,60]],sl:[[240,90],[260,90]],tp1:[[160,40],[180,40],.5],tp2:[[40,10],[60,10]],time:170},{price:[[0,80],[40,20],[70,60],[110,0],[140,50],[180,10],[210,40],[250,20],[300,100]],volume:[[0,180],[40,100],[70,130],[110,110],[140,145],[180,125],[210,160],[250,140],[300,200]]},{price:[[0,80],[40,0],[70,60],[110,10],[140,50],[180,20],[210,40],[250,30],[300,100]],volume:[[0,180],[40,100],[70,130],[110,110],[140,145],[180,125],[210,160],[250,140],[300,200]]},{price:[[0,80],[40,20],[70,60],[110,10],[140,60],[180,0],[210,70],[250,50],[300,100]],volume:[[0,180],[40,100],[70,130],[110,110],[140,145],[180,125],[210,160],[250,140],[300,200]]}],et={continueData:Hr,reversalData:Xr};const jr={__name:"Pattern",props:["pattern"],setup(n){const r=n,t=R(null),o=R(r.pattern);Te(()=>r.pattern,y=>{o.value=y,c(!0)}),Lt(()=>setTimeout(()=>{c()},0));function c(y=!1){if(!o.value)return!1;const h=t.value,v=h.getContext("2d");y&&v.clearRect(0,0,h.width,h.height);const m=o.value.price,O=o.value.volume,T=o.value.et,k=o.value.sl,M=o.value.tp1,$=o.value.tp2,ne=o.value.time;v.beginPath(),v.strokeStyle="white",v.lineWidth=2,v.setLineDash([1,0]),v.moveTo(m[0][0],m[0][1]);for(let H=1;H<m.length;H++)v.lineTo(m[H][0],m[H][1]);v.stroke(),v.beginPath(),v.strokeStyle="orange",v.moveTo(O[0][0],O[0][1]);for(let H=1;H<O.length;H++)v.lineTo(O[H][0],O[H][1]);v.stroke(),T&&(v.beginPath(),v.strokeStyle="yellow",v.moveTo(T[0][0],T[0][1]),v.lineTo(T[1][0],T[1][1]),v.stroke()),k&&(v.beginPath(),v.strokeStyle="red",v.moveTo(k[0][0],k[0][1]),v.lineTo(k[1][0],k[1][1]),v.stroke()),M&&(v.beginPath(),v.strokeStyle="lime",v.moveTo(M[0][0],M[0][1]),v.lineTo(M[1][0],M[1][1]),v.stroke(),v.font="15px Arial",v.fillStyle="lime",v.fillText(M[2],M[1][0]+5,M[1][1]+5)),$&&(v.beginPath(),v.strokeStyle="lime",v.moveTo($[0][0],$[0][1]),v.lineTo($[1][0],$[1][1]),v.stroke()),ne&&(v.beginPath(),v.strokeStyle="red",v.setLineDash([5,10]),v.moveTo(ne,0),v.lineTo(ne,200),v.stroke())}return(y,h)=>(q(),z("canvas",{ref_key:"canvasRef",ref:t,width:"300",height:"200"},null,512))}},tt=Ft(jr,[["__scopeId","data-v-251fbed0"]]);const Qr=S("div",{class:"triangle-shadow"},null,-1),Jr=S("div",{class:"triangle"},null,-1),zr={class:"container"},Gr={class:"continue"},Ur={class:"title"},Kr={class:"name"},en={class:"reversal"},tn={class:"title"},rn={class:"name"},nn={__name:"Index",setup(n){function r(t){t.stopPropagation()}return(t,o)=>{const c=rt("DxScrollView");return q(),z("div",{class:"pattern-popup",onClick:r,title:""},[Qr,Jr,S("div",zr,[S("div",Gr,[S("div",Ur,me(t.$t("trading.derivative.patternContextMenu.continue")),1),te(c,{class:"items"},{default:gt(()=>[(q(!0),z(Ke,null,yt(Ie(et).continueData,(y,h)=>(q(),z("div",{key:h},[S("div",Kr,me(h+1)+".",1),te(tt,{pattern:y},null,8,["pattern"])]))),128))]),_:1})]),S("div",en,[S("div",tn,me(t.$t("trading.derivative.patternContextMenu.reversal")),1),te(c,{class:"items"},{default:gt(()=>[(q(!0),z(Ke,null,yt(Ie(et).reversalData,(y,h)=>(q(),z("div",{key:h},[S("div",rn,me(h+1)+".",1),te(tt,{pattern:y},null,8,["pattern"])]))),128))]),_:1})])])])}}};const an={key:0,class:"tree-node"},on={key:0,class:"text"},sn={key:2},ln=["innerHTML"],cn={__name:"TreeNode",props:["node","index","modelValue"],emits:["update:modelValue"],setup(n,{emit:r}){const t=n,o=r,c=he(()=>Array.isArray(t.node.items)),y=he(()=>Array.isArray(t.node.items)&&t.node.items.length>1),h=_t({selectedChild:t.node.items[t.modelValue[t.index]],childValue:t.modelValue,hasChild:!1});h.hasChild=!!h.selectedChild;let v=!1;Te(()=>t.modelValue,T=>{v=!0,h.selectedChild=t.node.items[T[t.index]],h.childValue=T,h.hasChild=!!h.selectedChild,setTimeout(()=>v=!1,1e3)}),Te(()=>t.node,T=>{v=!0,h.selectedChild=T.items[h.childValue[t.index]],h.hasChild=!!h.selectedChild,setTimeout(()=>v=!1,1e3)});function m(){if(v)return!1;h.hasChild=!1,setTimeout(()=>{h.selectedChild&&(h.hasChild=!0)},0);const T=t.node.items.findIndex(k=>k===h.selectedChild);T==-1?h.childValue=h.childValue.slice(0,t.index):(h.childValue=h.childValue.slice(0,t.index+1),h.childValue[t.index]=T),o("update:modelValue",h.childValue)}function O(T){o("update:modelValue",T)}return(T,k)=>{const M=rt("TreeNode",!0);return n.node.items?(q(),z("div",an,[n.index==0?(q(),z("div",on,me(T.$t("trading.derivative.progressContextMenu.start")),1)):Fe("",!0),S("i",{class:G(`arrow far fa-chevron-${y.value?"double-":""}down`)},null,2),c.value?(q(),Ve(Ie(Br),{key:1,items:n.node.items,modelValue:h.selectedChild,"onUpdate:modelValue":k[0]||(k[0]=$=>h.selectedChild=$),displayExpr:"name",stylingMode:"outlined","show-clear-button":!0,showDropDownButton:!1,placeholder:T.$t("titles.dxSelectPlacehoder"),onValueChanged:m},null,8,["items","modelValue","placeholder"])):(q(),z("div",sn,[S("span",{class:"text",innerHTML:n.node.items},null,8,ln),n.node.pattern?(q(),Ve(tt,{key:0,pattern:Ie(et)[n.node.pattern[0]][n.node.pattern[1]-1]},null,8,["pattern"])):Fe("",!0)])),h.hasChild?(q(),Ve(M,{key:3,node:h.selectedChild,index:n.index+1,modelValue:h.childValue,"onUpdate:modelValue":[k[1]||(k[1]=$=>h.childValue=$),O]},null,8,["node","index","modelValue"])):Fe("",!0)])):Fe("",!0)}}},dn=Ft(cn,[["__scopeId","data-v-d485f979"]]);const un=S("div",{class:"triangle-shadow"},null,-1),pn=S("div",{class:"triangle"},null,-1),fn={__name:"Index",props:["modelValue"],emits:["update:modelValue","change"],setup(n,{emit:r}){const t=n,o=r,c=R(null),y=R(!1),h=R({});Mr(Object.assign({"../../../../lang/vi/derivative.js":()=>Wr(()=>import("./derivative-15b4c4bd.js"),[])}),`../../../../lang/${window.lang}/derivative.js`).then(T=>{h.value=T.default,y.value=!0});const v=R(t.modelValue);Te(()=>t.modelValue,T=>v.value=T);function m(T){o("update:modelValue",T),o("change",T),setTimeout(()=>{c.value.scrollTop=c.value.scrollHeight},0)}function O(T){T.stopPropagation()}return(T,k)=>(q(),z("div",{class:"progress-popup",onClick:O,title:""},[un,pn,S("div",{ref_key:"scrollContainer",ref:c,class:"container"},[y.value?(q(),Ve(dn,{key:0,node:h.value,index:0,modelValue:v.value,"onUpdate:modelValue":[k[0]||(k[0]=M=>v.value=M),m]},null,8,["node","modelValue"])):Fe("",!0)],512)]))}},Rt=6048e5,hn=864e5,mn=36e5,bt=Symbol.for("constructDateFrom");function re(n,r){return typeof n=="function"?n(r):n&&typeof n=="object"&&bt in n?n[bt](r):n instanceof Date?new n.constructor(r):new Date(r)}function Q(n,r){return re(r||n,n)}function vn(n,r,t){return re((t==null?void 0:t.in)||n,+Q(n)+r)}function Ge(n,r,t){return vn(n,r*mn,t)}let gn={};function Be(){return gn}function Le(n,r){var v,m,O,T;const t=Be(),o=(r==null?void 0:r.weekStartsOn)??((m=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:m.weekStartsOn)??t.weekStartsOn??((T=(O=t.locale)==null?void 0:O.options)==null?void 0:T.weekStartsOn)??0,c=Q(n,r==null?void 0:r.in),y=c.getDay(),h=(y<o?7:0)+y-o;return c.setDate(c.getDate()-h),c.setHours(0,0,0,0),c}function Ne(n,r){return Le(n,{...r,weekStartsOn:1})}function Mt(n,r){const t=Q(n,r==null?void 0:r.in),o=t.getFullYear(),c=re(t,0);c.setFullYear(o+1,0,4),c.setHours(0,0,0,0);const y=Ne(c),h=re(t,0);h.setFullYear(o,0,4),h.setHours(0,0,0,0);const v=Ne(h);return t.getTime()>=y.getTime()?o+1:t.getTime()>=v.getTime()?o:o-1}function St(n){const r=Q(n),t=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return t.setUTCFullYear(r.getFullYear()),+n-+t}function yn(n,...r){const t=re.bind(null,n||r.find(o=>typeof o=="object"));return r.map(t)}function xt(n,r){const t=Q(n,r==null?void 0:r.in);return t.setHours(0,0,0,0),t}function wn(n,r,t){const[o,c]=yn(t==null?void 0:t.in,n,r),y=xt(o),h=xt(c),v=+y-St(y),m=+h-St(h);return Math.round((v-m)/hn)}function bn(n,r){const t=Mt(n,r),o=re((r==null?void 0:r.in)||n,0);return o.setFullYear(t,0,4),o.setHours(0,0,0,0),Ne(o)}function Sn(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function xn(n){return!(!Sn(n)&&typeof n!="number"||isNaN(+Q(n)))}function Tn(n,r){const t=Q(n,r==null?void 0:r.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Dn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},kn=(n,r,t)=>{let o;const c=Dn[n];return typeof c=="string"?o=c:r===1?o=c.one:o=c.other.replace("{{count}}",r.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+o:o+" ago":o};function Ue(n){return(r={})=>{const t=r.width?String(r.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const Cn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},On={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Pn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Fn={date:Ue({formats:Cn,defaultWidth:"full"}),time:Ue({formats:On,defaultWidth:"full"}),dateTime:Ue({formats:Pn,defaultWidth:"full"})},Ln={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},_n=(n,r,t,o)=>Ln[n];function Oe(n){return(r,t)=>{const o=t!=null&&t.context?String(t.context):"standalone";let c;if(o==="formatting"&&n.formattingValues){const h=n.defaultFormattingWidth||n.defaultWidth,v=t!=null&&t.width?String(t.width):h;c=n.formattingValues[v]||n.formattingValues[h]}else{const h=n.defaultWidth,v=t!=null&&t.width?String(t.width):n.defaultWidth;c=n.values[v]||n.values[h]}const y=n.argumentCallback?n.argumentCallback(r):r;return c[y]}}const Rn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Mn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Wn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},En={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},An={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},$n={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Yn=(n,r)=>{const t=Number(n),o=t%100;if(o>20||o<10)switch(o%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},Vn={ordinalNumber:Yn,era:Oe({values:Rn,defaultWidth:"wide"}),quarter:Oe({values:Mn,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Oe({values:Wn,defaultWidth:"wide"}),day:Oe({values:En,defaultWidth:"wide"}),dayPeriod:Oe({values:An,defaultWidth:"wide",formattingValues:$n,defaultFormattingWidth:"wide"})};function Pe(n){return(r,t={})=>{const o=t.width,c=o&&n.matchPatterns[o]||n.matchPatterns[n.defaultMatchWidth],y=r.match(c);if(!y)return null;const h=y[0],v=o&&n.parsePatterns[o]||n.parsePatterns[n.defaultParseWidth],m=Array.isArray(v)?Nn(v,k=>k.test(h)):In(v,k=>k.test(h));let O;O=n.valueCallback?n.valueCallback(m):m,O=t.valueCallback?t.valueCallback(O):O;const T=r.slice(h.length);return{value:O,rest:T}}}function In(n,r){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&r(n[t]))return t}function Nn(n,r){for(let t=0;t<n.length;t++)if(r(n[t]))return t}function Bn(n){return(r,t={})=>{const o=r.match(n.matchPattern);if(!o)return null;const c=o[0],y=r.match(n.parsePattern);if(!y)return null;let h=n.valueCallback?n.valueCallback(y[0]):y[0];h=t.valueCallback?t.valueCallback(h):h;const v=r.slice(c.length);return{value:h,rest:v}}}const Zn=/^(\d+)(th|st|nd|rd)?/i,qn=/\d+/i,Hn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Xn={any:[/^b/i,/^(a|c)/i]},jn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Qn={any:[/1/i,/2/i,/3/i,/4/i]},Jn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},zn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Gn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Un={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Kn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},ei={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ti={ordinalNumber:Bn({matchPattern:Zn,parsePattern:qn,valueCallback:n=>parseInt(n,10)}),era:Pe({matchPatterns:Hn,defaultMatchWidth:"wide",parsePatterns:Xn,defaultParseWidth:"any"}),quarter:Pe({matchPatterns:jn,defaultMatchWidth:"wide",parsePatterns:Qn,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Pe({matchPatterns:Jn,defaultMatchWidth:"wide",parsePatterns:zn,defaultParseWidth:"any"}),day:Pe({matchPatterns:Gn,defaultMatchWidth:"wide",parsePatterns:Un,defaultParseWidth:"any"}),dayPeriod:Pe({matchPatterns:Kn,defaultMatchWidth:"any",parsePatterns:ei,defaultParseWidth:"any"})},ri={code:"en-US",formatDistance:kn,formatLong:Fn,formatRelative:_n,localize:Vn,match:ti,options:{weekStartsOn:0,firstWeekContainsDate:1}};function ni(n,r){const t=Q(n,r==null?void 0:r.in);return wn(t,Tn(t))+1}function ii(n,r){const t=Q(n,r==null?void 0:r.in),o=+Ne(t)-+bn(t);return Math.round(o/Rt)+1}function Wt(n,r){var T,k,M,$;const t=Q(n,r==null?void 0:r.in),o=t.getFullYear(),c=Be(),y=(r==null?void 0:r.firstWeekContainsDate)??((k=(T=r==null?void 0:r.locale)==null?void 0:T.options)==null?void 0:k.firstWeekContainsDate)??c.firstWeekContainsDate??(($=(M=c.locale)==null?void 0:M.options)==null?void 0:$.firstWeekContainsDate)??1,h=re((r==null?void 0:r.in)||n,0);h.setFullYear(o+1,0,y),h.setHours(0,0,0,0);const v=Le(h,r),m=re((r==null?void 0:r.in)||n,0);m.setFullYear(o,0,y),m.setHours(0,0,0,0);const O=Le(m,r);return+t>=+v?o+1:+t>=+O?o:o-1}function ai(n,r){var v,m,O,T;const t=Be(),o=(r==null?void 0:r.firstWeekContainsDate)??((m=(v=r==null?void 0:r.locale)==null?void 0:v.options)==null?void 0:m.firstWeekContainsDate)??t.firstWeekContainsDate??((T=(O=t.locale)==null?void 0:O.options)==null?void 0:T.firstWeekContainsDate)??1,c=Wt(n,r),y=re((r==null?void 0:r.in)||n,0);return y.setFullYear(c,0,o),y.setHours(0,0,0,0),Le(y,r)}function oi(n,r){const t=Q(n,r==null?void 0:r.in),o=+Le(t,r)-+ai(t,r);return Math.round(o/Rt)+1}function P(n,r){const t=n<0?"-":"",o=Math.abs(n).toString().padStart(r,"0");return t+o}const oe={y(n,r){const t=n.getFullYear(),o=t>0?t:1-t;return P(r==="yy"?o%100:o,r.length)},M(n,r){const t=n.getMonth();return r==="M"?String(t+1):P(t+1,2)},d(n,r){return P(n.getDate(),r.length)},a(n,r){const t=n.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,r){return P(n.getHours()%12||12,r.length)},H(n,r){return P(n.getHours(),r.length)},m(n,r){return P(n.getMinutes(),r.length)},s(n,r){return P(n.getSeconds(),r.length)},S(n,r){const t=r.length,o=n.getMilliseconds(),c=Math.trunc(o*Math.pow(10,t-3));return P(c,r.length)}},xe={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Tt={G:function(n,r,t){const o=n.getFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return t.era(o,{width:"abbreviated"});case"GGGGG":return t.era(o,{width:"narrow"});case"GGGG":default:return t.era(o,{width:"wide"})}},y:function(n,r,t){if(r==="yo"){const o=n.getFullYear(),c=o>0?o:1-o;return t.ordinalNumber(c,{unit:"year"})}return oe.y(n,r)},Y:function(n,r,t,o){const c=Wt(n,o),y=c>0?c:1-c;if(r==="YY"){const h=y%100;return P(h,2)}return r==="Yo"?t.ordinalNumber(y,{unit:"year"}):P(y,r.length)},R:function(n,r){const t=Mt(n);return P(t,r.length)},u:function(n,r){const t=n.getFullYear();return P(t,r.length)},Q:function(n,r,t){const o=Math.ceil((n.getMonth()+1)/3);switch(r){case"Q":return String(o);case"QQ":return P(o,2);case"Qo":return t.ordinalNumber(o,{unit:"quarter"});case"QQQ":return t.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(o,{width:"wide",context:"formatting"})}},q:function(n,r,t){const o=Math.ceil((n.getMonth()+1)/3);switch(r){case"q":return String(o);case"qq":return P(o,2);case"qo":return t.ordinalNumber(o,{unit:"quarter"});case"qqq":return t.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(o,{width:"wide",context:"standalone"})}},M:function(n,r,t){const o=n.getMonth();switch(r){case"M":case"MM":return oe.M(n,r);case"Mo":return t.ordinalNumber(o+1,{unit:"month"});case"MMM":return t.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(o,{width:"wide",context:"formatting"})}},L:function(n,r,t){const o=n.getMonth();switch(r){case"L":return String(o+1);case"LL":return P(o+1,2);case"Lo":return t.ordinalNumber(o+1,{unit:"month"});case"LLL":return t.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(o,{width:"wide",context:"standalone"})}},w:function(n,r,t,o){const c=oi(n,o);return r==="wo"?t.ordinalNumber(c,{unit:"week"}):P(c,r.length)},I:function(n,r,t){const o=ii(n);return r==="Io"?t.ordinalNumber(o,{unit:"week"}):P(o,r.length)},d:function(n,r,t){return r==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):oe.d(n,r)},D:function(n,r,t){const o=ni(n);return r==="Do"?t.ordinalNumber(o,{unit:"dayOfYear"}):P(o,r.length)},E:function(n,r,t){const o=n.getDay();switch(r){case"E":case"EE":case"EEE":return t.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(o,{width:"short",context:"formatting"});case"EEEE":default:return t.day(o,{width:"wide",context:"formatting"})}},e:function(n,r,t,o){const c=n.getDay(),y=(c-o.weekStartsOn+8)%7||7;switch(r){case"e":return String(y);case"ee":return P(y,2);case"eo":return t.ordinalNumber(y,{unit:"day"});case"eee":return t.day(c,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(c,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(c,{width:"short",context:"formatting"});case"eeee":default:return t.day(c,{width:"wide",context:"formatting"})}},c:function(n,r,t,o){const c=n.getDay(),y=(c-o.weekStartsOn+8)%7||7;switch(r){case"c":return String(y);case"cc":return P(y,r.length);case"co":return t.ordinalNumber(y,{unit:"day"});case"ccc":return t.day(c,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(c,{width:"narrow",context:"standalone"});case"cccccc":return t.day(c,{width:"short",context:"standalone"});case"cccc":default:return t.day(c,{width:"wide",context:"standalone"})}},i:function(n,r,t){const o=n.getDay(),c=o===0?7:o;switch(r){case"i":return String(c);case"ii":return P(c,r.length);case"io":return t.ordinalNumber(c,{unit:"day"});case"iii":return t.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(o,{width:"short",context:"formatting"});case"iiii":default:return t.day(o,{width:"wide",context:"formatting"})}},a:function(n,r,t){const c=n.getHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return t.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(c,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(c,{width:"wide",context:"formatting"})}},b:function(n,r,t){const o=n.getHours();let c;switch(o===12?c=xe.noon:o===0?c=xe.midnight:c=o/12>=1?"pm":"am",r){case"b":case"bb":return t.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(c,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(c,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(c,{width:"wide",context:"formatting"})}},B:function(n,r,t){const o=n.getHours();let c;switch(o>=17?c=xe.evening:o>=12?c=xe.afternoon:o>=4?c=xe.morning:c=xe.night,r){case"B":case"BB":case"BBB":return t.dayPeriod(c,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(c,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(c,{width:"wide",context:"formatting"})}},h:function(n,r,t){if(r==="ho"){let o=n.getHours()%12;return o===0&&(o=12),t.ordinalNumber(o,{unit:"hour"})}return oe.h(n,r)},H:function(n,r,t){return r==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):oe.H(n,r)},K:function(n,r,t){const o=n.getHours()%12;return r==="Ko"?t.ordinalNumber(o,{unit:"hour"}):P(o,r.length)},k:function(n,r,t){let o=n.getHours();return o===0&&(o=24),r==="ko"?t.ordinalNumber(o,{unit:"hour"}):P(o,r.length)},m:function(n,r,t){return r==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):oe.m(n,r)},s:function(n,r,t){return r==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):oe.s(n,r)},S:function(n,r){return oe.S(n,r)},X:function(n,r,t){const o=n.getTimezoneOffset();if(o===0)return"Z";switch(r){case"X":return kt(o);case"XXXX":case"XX":return fe(o);case"XXXXX":case"XXX":default:return fe(o,":")}},x:function(n,r,t){const o=n.getTimezoneOffset();switch(r){case"x":return kt(o);case"xxxx":case"xx":return fe(o);case"xxxxx":case"xxx":default:return fe(o,":")}},O:function(n,r,t){const o=n.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+Dt(o,":");case"OOOO":default:return"GMT"+fe(o,":")}},z:function(n,r,t){const o=n.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+Dt(o,":");case"zzzz":default:return"GMT"+fe(o,":")}},t:function(n,r,t){const o=Math.trunc(+n/1e3);return P(o,r.length)},T:function(n,r,t){return P(+n,r.length)}};function Dt(n,r=""){const t=n>0?"-":"+",o=Math.abs(n),c=Math.trunc(o/60),y=o%60;return y===0?t+String(c):t+String(c)+r+P(y,2)}function kt(n,r){return n%60===0?(n>0?"-":"+")+P(Math.abs(n)/60,2):fe(n,r)}function fe(n,r=""){const t=n>0?"-":"+",o=Math.abs(n),c=P(Math.trunc(o/60),2),y=P(o%60,2);return t+c+r+y}const Ct=(n,r)=>{switch(n){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},Et=(n,r)=>{switch(n){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},si=(n,r)=>{const t=n.match(/(P+)(p+)?/)||[],o=t[1],c=t[2];if(!c)return Ct(n,r);let y;switch(o){case"P":y=r.dateTime({width:"short"});break;case"PP":y=r.dateTime({width:"medium"});break;case"PPP":y=r.dateTime({width:"long"});break;case"PPPP":default:y=r.dateTime({width:"full"});break}return y.replace("{{date}}",Ct(o,r)).replace("{{time}}",Et(c,r))},li={p:Et,P:si},ci=/^D+$/,di=/^Y+$/,ui=["D","DD","YY","YYYY"];function pi(n){return ci.test(n)}function fi(n){return di.test(n)}function hi(n,r,t){const o=mi(n,r,t);if(console.warn(o),ui.includes(n))throw new RangeError(o)}function mi(n,r,t){const o=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${r}\`) for formatting ${o} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const vi=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gi=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,yi=/^'([^]*?)'?$/,wi=/''/g,bi=/[a-zA-Z]/;function Ye(n,r,t){var T,k,M,$,ne,H,_e,Re;const o=Be(),c=(t==null?void 0:t.locale)??o.locale??ri,y=(t==null?void 0:t.firstWeekContainsDate)??((k=(T=t==null?void 0:t.locale)==null?void 0:T.options)==null?void 0:k.firstWeekContainsDate)??o.firstWeekContainsDate??(($=(M=o.locale)==null?void 0:M.options)==null?void 0:$.firstWeekContainsDate)??1,h=(t==null?void 0:t.weekStartsOn)??((H=(ne=t==null?void 0:t.locale)==null?void 0:ne.options)==null?void 0:H.weekStartsOn)??o.weekStartsOn??((Re=(_e=o.locale)==null?void 0:_e.options)==null?void 0:Re.weekStartsOn)??0,v=Q(n,t==null?void 0:t.in);if(!xn(v))throw new RangeError("Invalid time value");let m=r.match(gi).map(E=>{const A=E[0];if(A==="p"||A==="P"){const se=li[A];return se(E,c.formatLong)}return E}).join("").match(vi).map(E=>{if(E==="''")return{isToken:!1,value:"'"};const A=E[0];if(A==="'")return{isToken:!1,value:Si(E)};if(Tt[A])return{isToken:!0,value:E};if(A.match(bi))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:E}});c.localize.preprocessor&&(m=c.localize.preprocessor(v,m));const O={firstWeekContainsDate:y,weekStartsOn:h,locale:c};return m.map(E=>{if(!E.isToken)return E.value;const A=E.value;(!(t!=null&&t.useAdditionalWeekYearTokens)&&fi(A)||!(t!=null&&t.useAdditionalDayOfYearTokens)&&pi(A))&&hi(A,r,String(n));const se=Tt[A[0]];return se(v,A,c.localize,O)}).join("")}function Si(n){const r=n.match(yi);return r?r[1].replace(wi,"'"):n}function Z(n){return Math.trunc(+Q(n)/1e3)}const xi={class:"content-block dx-card responsive-paddings"},Ti=["title"],Di=["title"],ki=["title"],Ci=["title"],Oi=["title"],Pi=["title"],Fi=["title"],Li=["title"],_i=["title"],Ri=S("i",{class:"far fa-heart-rate"},null,-1),Mi=[Ri],Wi=["title"],Ei=S("i",{class:"far fa-grip-lines-vertical"},null,-1),Ai=[Ei],$i=["title"],Yi=S("i",{class:"far fa-horizontal-rule"},null,-1),Vi=["title"],Ii=S("i",{class:"far fa-line-height"},null,-1),Ni=[Ii],Bi=["title"],Zi=S("i",{class:"far fa-percent"},null,-1),qi=[Zi],Hi=["title"],Xi=S("i",{class:"far fa-heart-rate"},null,-1),ji=["title"],Qi=["src"],Ot=3,Pt=2,Ji="wss://tradestation.fireant.vn/quote?access_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6IkdYdExONzViZlZQakdvNERWdjV4QkRITHpnSSIsImtpZCI6IkdYdExONzViZlZQakdvNERWdjV4QkRITHpnSSJ9.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmZpcmVhbnQudm4iLCJhdWQiOiJodHRwczovL2FjY291bnRzLmZpcmVhbnQudm4vcmVzb3VyY2VzIiwiZXhwIjoxODg5NjIyNTMwLCJuYmYiOjE1ODk2MjI1MzAsImNsaWVudF9pZCI6ImZpcmVhbnQudHJhZGVzdGF0aW9uIiwic2NvcGUiOlsiYWNhZGVteS1yZWFkIiwiYWNhZGVteS13cml0ZSIsImFjY291bnRzLXJlYWQiLCJhY2NvdW50cy13cml0ZSIsImJsb2ctcmVhZCIsImNvbXBhbmllcy1yZWFkIiwiZmluYW5jZS1yZWFkIiwiaW5kaXZpZHVhbHMtcmVhZCIsImludmVzdG9wZWRpYS1yZWFkIiwib3JkZXJzLXJlYWQiLCJvcmRlcnMtd3JpdGUiLCJwb3N0cy1yZWFkIiwicG9zdHMtd3JpdGUiLCJzZWFyY2giLCJzeW1ib2xzLXJlYWQiLCJ1c2VyLWRhdGEtcmVhZCIsInVzZXItZGF0YS13cml0ZSIsInVzZXJzLXJlYWQiXSwianRpIjoiMjYxYTZhYWQ2MTQ5Njk1ZmJiYzcwODM5MjM0Njc1NWQifQ.dA5-HVzWv-BRfEiAd24uNBiBxASO-PAyWeWESovZm_hj4aXMAZA1-bWNZeXt88dqogo18AwpDQ-h6gefLPdZSFrG5umC1dVWaeYvUnGm62g4XS29fj6p01dhKNNqrsu5KrhnhdnKYVv9VdmbmqDfWR8wDgglk5cJFqalzq6dJWJInFQEPmUs9BW_Zs8tQDn-i5r4tYq2U8vCdqptXoM7YgPllXaPVDeccC9QNu2Xlp9WUvoROzoQXg25lFub1IYkTrM66gJ6t9fJRZToewCt495WNEOQFa_rwLCZ1QwzvL0iYkONHS_jZ0BOhBCdW9dWSawD6iF1SIQaFROvMDH1rg",ra={__name:"Index",setup(n){const r={localization:{dateFormat:"dd/MM/yyyy",locale:"vi-VN"},rightPriceScale:{visible:!0,scaleMargins:{top:.25,bottom:.25}},leftPriceScale:{visible:!1},layout:{backgroundColor:"#000000",textColor:"#CCCCCC"},grid:{vertLines:{color:"#1B1E27",style:2},horzLines:{color:"#1B1E27",style:2}},crosshair:{mode:0},timeScale:{timeVisible:!0,rightOffset:1e3,minBarSpacing:.01,barSpacing:.05}},t=Ye(new Date,"yyyy-MM-dd"),o={START:Z(new Date(`${t}T08:45:00Z`)),ATO:Z(new Date(`${t}T09:00:00Z`)),ATC:Z(new Date(`${t}T14:30:00Z`)),END:Z(new Date(`${t}T14:45:00Z`))},c=Yr(),y=Vr(),{t:h}=Er(),v=$e("devices"),m=$e("mf"),O=$e("bus"),T=$e("filters"),k=R(null),M=R(null),$=R(null),ne=R(null),H=R(null),_e=R(null),Re=R(null),E=R(null),A=R(null),se=R(null),Ze=R(null),Me=R(null),qe=R(null),At=R(null),le=R(null),De=R(null),nt=R(null);let e={chart:{},series:{},data:{whitespace:[],price:[],volume:[]},tools:{},crosshair:{},interval:null,interval60:null,websocket:null,isAutoOrdering:!1,socketStop:!1,socketSendData:null,currentSeconds:Z(Ge(new Date,7))};ce();const w=_t({chartDate:y.query.date??t,clock:Ye(new Date,"HH:mm:ss"),isFullscreen:!1,isSocketWarning:!1,isOrderWarning:!1,isAutoScan:!1,lineColor:"#F44336",lineTitle:"",progress:[],showLineContext:!1,showSampleContext:!1,showProgressContext:!1,showTradingView:!1}),X=he(()=>c.state.tradingDerivative.status),U=he(()=>c.state.tradingDerivative.config),it=he(()=>c.state.tradingDerivative.tools),$t=he(()=>X.value.position!=0||!!X.value.pending||!!it.value.order),Yt=he(()=>`https://chart.vps.com.vn/tv/?u=${U.value.vpsUser}&s=${U.value.vpsSession}&symbol=VN30F1M&resolution=1&lang=vi`);c.dispatch("tradingDerivative/initChart").then(()=>{console.log("inSession()",K()),K()&&He(),!y.query.date&&U.value.lastOpeningDate&&(w.chartDate=U.value.lastOpeningDate),c.dispatch("tradingDerivative/getChartData",{date:w.chartDate}).then(i=>{i&&c.dispatch("tradingDerivative/getTools")})}),e.interval=setInterval(Qt,1e3),e.interval60=setInterval(()=>{K()?(c.dispatch("tradingDerivative/getStatus"),U.value.autoScan&&ze()):clearInterval(e.interval60)},6e4),Lt(()=>{e.chart=qr(M.value,r),e.chart.subscribeCrosshairMove(Nt),e.chart.subscribeCustomPriceLineDragged(Bt),e.series.whitespace=e.chart.addHistogramSeries({priceScaleId:"whitespace",scaleMargins:{top:0,bottom:0},color:"#808080",lastValueVisible:!1,priceLineVisible:!1}),e.series.timeRange=e.chart.addHistogramSeries({priceScaleId:"range",scaleMargins:{top:0,bottom:0},lastValueVisible:!1,priceLineVisible:!1}),e.series.volume=e.chart.addLineSeries({priceScaleId:"volume",scaleMargins:{top:.86,bottom:.01},color:"#FFD700",lastValueVisible:!1,visible:!1}),e.series.price=e.chart.addLineSeries({color:"#F5F5F5",priceFormat:{minMove:.1}}),new ResizeObserver(Zt).observe(k.value),document.addEventListener("keydown",st),document.addEventListener("fullscreenchange",lt)}),Ar(()=>{document.removeEventListener("keydown",st),document.removeEventListener("fullscreenchange",lt),clearInterval(e.interval),clearInterval(e.interval60),e.websocket&&(e.websocket.close(),e.websocket=null),e.socketStop=!0}),Te(()=>c.state.tradingDerivative.chartData,Xt),Te(()=>it.value,Ht);function Vt(i){w.showLineContext=!1,w.showSampleContext=!1,Ae(!1),E.value.classList.contains("selected")?Ut():Ze.value.classList.contains("selected")?mr():Me.value.classList.contains("selected")?pr():qe.value.classList.contains("selected")?tr():A.value.classList.contains("selected")?yr():se.value.classList.contains("selected")&&lr()}function It(i){Ae(!0),i.preventDefault()}function at(i){i.stopPropagation()}function ot(i){i.preventDefault(),i.stopPropagation()}function Nt(i){if(i.time){let l=i.seriesPrices.get(e.series.price);e.crosshair.time=i.time,e.crosshair.price=l}else v.phone||(e.crosshair.time=null,e.crosshair.price=null);i.point!=null&&(e.crosshair.x=i.point.x,e.crosshair.y=i.point.y)}function Bt(i){let l=i.customPriceLine,a=l.options();a.price=parseFloat(a.price.toFixed(1));const s=+i.fromPriceString,u=a.price;switch(a.lineType){case"order":if(u!=s){let f=!1;a.kind=="entry"?X.value.position||(f=!0,e.tools.order[a.kind].price=u,c.dispatch("tradingDerivative/executeOrder",{action:"entry",etData:{cmd:"change",price:e.tools.order.entry.price}}).then(d=>{d.isOk?(ge([a.kind]),B.success(h("trading.derivative.changeEntrySuccess"))):(l.applyOptions({price:s}),j(d.message))})):(f=!0,e.tools.order[a.kind].price=u,a.kind=="tp"?c.dispatch("tradingDerivative/executeOrder",{action:"tp",tpData:{cmd:"change",price:e.tools.order.tp.price}}).then(d=>{d.isOk?(ge([a.kind]),B.success(h("trading.derivative.changeTpSuccess"))):(l.applyOptions({price:s}),j(d.message))}):c.dispatch("tradingDerivative/executeOrder",{action:"sl",slData:{cmd:"change",price:e.tools.order.sl.price}}).then(d=>{d.isOk?(ge([a.kind]),B.success(h("trading.derivative.changeSlSuccess"))):(l.applyOptions({price:s}),j(d.message))})),f||(l.applyOptions({price:s}),B.show(h("trading.derivative.noChangeOrderLine")))}break;case"line":c.dispatch("tradingDerivative/drawTools",{isRemove:!0,name:"line",point:s}),c.dispatch("tradingDerivative/drawTools",{isRemove:!1,name:"line",points:[u],data:[a]}),E.value.classList.remove("selected");break;case"target":if(m.isSet(e.tools.target.B)){let f={isRemove:!1,name:"target",points:[],data:[]},d,p,b=+e.tools.target.A.options().price,D=+e.tools.target.B.options().price,x=D-b;if(d="A",a.point=="A")x=+e.tools.target.B.options().title,D=b+x;else if(a.point!="B"){let F=0;switch(a.point){case"X":F=1.5;break;case"Y":F=2;break;case"Z":F=3;break}x=parseFloat(((D-u)/F).toFixed(1)),b=D-x,p={price:b},e.tools.target[d].applyOptions(p)}f.points.push(d),f.data.push(e.tools.target[d].options()),d="B",p={price:D,title:x.toFixed(1)},a.point==d&&delete p.price,e.tools.target[d].applyOptions(p),f.points.push(d),f.data.push(e.tools.target[d].options()),d="X",p={price:parseFloat((b-.5*x).toFixed(1)),title:(-.5*x).toFixed(1)},a.point==d&&delete p.price,e.tools.target[d].applyOptions(p),f.points.push(d),f.data.push(e.tools.target[d].options()),d="Y",p={price:parseFloat((b-x).toFixed(1)),title:(-x).toFixed(1)},a.point==d&&delete p.price,e.tools.target[d].applyOptions(p),f.points.push(d),f.data.push(e.tools.target[d].options()),d="Z",p={price:parseFloat((b-2*x).toFixed(1)),title:(-2*x).toFixed(1)},a.point==d&&delete p.price,e.tools.target[d].applyOptions(p),f.points.push(d),f.data.push(e.tools.target[d].options()),c.dispatch("tradingDerivative/drawTools",f)}break;case"rr":if(m.isSet(e.tools.rr.TP)){let f={isRemove:!1,symbol:w.symbol,name:"rr",points:[],data:[]},d;const p=+e.tools.rr.EP.options().price,b=+e.tools.rr.SL.options().price,D=+e.tools.rr.TP.options().price;if(a.point=="EP")d="SL",e.tools.rr[d].applyOptions({price:p+b-s}),f.points.push(d),f.data.push(e.tools.rr[d].options()),d="TP",e.tools.rr[d].applyOptions({price:p+D-s}),f.points.push(d),f.data.push(e.tools.rr[d].options());else{const x=b-p,F=D-p;if(F/x>0)return l.applyOptions({price:s}),!1;const _=Math.abs(F)/Math.abs(x);d="EP",e.tools.rr[d].applyOptions({title:`RR=${_.toFixed(1)}`}),f.points.push(d),f.data.push(e.tools.rr[d].options()),d="SL",e.tools.rr[d].applyOptions({title:`SL=${x.toFixed(1)}`}),f.points.push(d),f.data.push(e.tools.rr[d].options()),d="TP",e.tools.rr[d].applyOptions({title:`TP=${F.toFixed(1)}`}),f.points.push(d),f.data.push(e.tools.rr[d].options())}c.dispatch("tradingDerivative/drawTools",f)}break;case"pattern":if(m.isSet(e.tools.pattern.B)){let f={isRemove:!1,name:"pattern",points:[],data:[]},d,p;const b=e.tools.pattern.A.options(),D=e.tools.pattern.B.options(),x=e.tools.pattern.C.options(),F={A:{time:+b.time,price:+b.price},B:{price:+D.price},C:{price:+x.price}},_=a.point=="D"?+e.tools.pattern.D.options().price:null,{pattern:L,timeRS1:W,info:{tr1:V,tr2:g,tr3:C,pr1:ie,pr2:N,pr3:J,fibo:I,sp:ee,X:ue,Y:Se,Z:vt}}=ke(F,_);we(W,!0,!0),be([L],!0),d="A",p={title:`A ${V} ${ie}`},e.tools.pattern[d].applyOptions(p),f.points.push(d),f.data.push(e.tools.pattern[d].options()),d="B",p={title:`B ${g} ${N}`},e.tools.pattern[d].applyOptions(p),f.points.push(d),f.data.push(e.tools.pattern[d].options()),d="C",p={title:`C ${C} ${J}`},e.tools.pattern[d].applyOptions(p),f.points.push(d),f.data.push(e.tools.pattern[d].options()),d="D",p={price:ee,title:"F "+I},a.point==d&&delete p.price,e.tools.pattern[d].applyOptions(p),f.points.push(d),f.data.push(e.tools.pattern[d].options()),d="X",p={price:parseFloat((ee+ue).toFixed(1)),title:"T "+parseFloat(ue.toFixed(1))},e.tools.pattern[d].applyOptions(p),f.points.push(d),f.data.push(e.tools.pattern[d].options()),d="Y",p={price:parseFloat((ee+Se).toFixed(1)),title:"T "+parseFloat(Se.toFixed(1))},e.tools.pattern[d].applyOptions(p),f.points.push(d),f.data.push(e.tools.pattern[d].options()),d="Z",p={price:parseFloat((ee+vt).toFixed(1)),title:"T "+parseFloat(vt.toFixed(1))},e.tools.pattern[d].applyOptions(p),f.points.push(d),f.data.push(e.tools.pattern[d].options()),c.dispatch("tradingDerivative/drawTools",f)}break}}function Zt(){k.value&&(e.chart.resize(k.value.offsetWidth,k.value.offsetHeight),k.value.classList.contains("fullscreen")&&(document.querySelector(".dx-drawer-panel-content").style.visibility="hidden",document.querySelector(".header-component").style.visibility="hidden",document.querySelector(".sc-launcher").style.visibility="hidden",document.querySelector(".dx-drawer-content").style.transform="unset"))}function st(i){if(i.ctrlKey)switch(i.keyCode){case 219:e.chart.timeScale().applyOptions({barSpacing:e.chart.options().timeScale.barSpacing-.01});break;case 221:e.chart.timeScale().applyOptions({barSpacing:e.chart.options().timeScale.barSpacing+.01});break}if(i.altKey)switch(i.keyCode){case 219:e.chart.timeScale().scrollToPosition(e.chart.timeScale().scrollPosition()-50);break;case 221:e.chart.timeScale().scrollToPosition(e.chart.timeScale().scrollPosition()+50);break}}function lt(){k.value&&(document.fullscreenElement?(w.isFullscreen=!0,k.value.classList.add("fullscreen"),document.querySelector(".dx-drawer-panel-content").style.visibility="hidden",document.querySelector(".header-component").style.visibility="hidden",document.querySelector(".sc-launcher").style.visibility="hidden",document.querySelector(".dx-drawer-content").style.transform="unset"):(w.isFullscreen=!1,k.value.classList.remove("fullscreen"),document.querySelector(".dx-drawer-panel-content").style.visibility="unset",document.querySelector(".header-component").style.visibility="unset",document.querySelector(".sc-launcher").style.visibility="unset",document.querySelector(".dx-drawer-content").style.transform="translate(0px, 0px)"))}function qt(){document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()}function Ht(i){Sr(),Object.entries(i).forEach(([l,a])=>{switch(l){case"order":Object.entries(a).forEach(([s,u])=>{e.tools.order.side=u.side,e.tools.order[s].price=u.price,e.tools.order[s].line=e.series.price.createPriceLine(u)});break;case"line":Object.values(a).forEach(s=>e.tools.lines.push(e.series.price.createPriceLine(s)));break;case"tr":we(Object.values(a));break;case"progress":be(Object.values(a)[0]);break;case"target":case"pattern":Object.entries(a).forEach(([s,u])=>e.tools[l][s]=e.series.price.createPriceLine(u));break;case"auto":rr(i.auto,!("pattern"in i),!("tr"in i));break}})}function Xt(i){w.chartDate==t&&K()||(!i.isDay&&i.price.length>0&&(e.data.whitespace=ve(e.data.whitespace,dt(w.chartDate))),e.series.whitespace.setData(e.data.whitespace),e.data.price=ve(e.data.price,i.price),e.series.price.setData(e.data.price),e.data.volume=ve(e.data.volume,i.volume),e.series.volume.setData(e.data.volume))}function ct(i,l){let a=[],s=[];if(l==null){if(e.data.volume.length==0)return!1;l=e.data.volume.at(-1).value}i.forEach(u=>{const f=Z(Ge(new Date(u.date),7));a.push({time:f,value:u.price}),l+=(u.side=="B"?1:u.side=="S"?-1:0)*u.volume,s.push({time:f,value:l})}),a.length>1?(e.data.price=ve(e.data.price,a),e.series.price.setData(e.data.price),e.data.volume=ve(e.data.volume,s),e.series.volume.setData(e.data.volume)):(e.data.price.push(a[0]),e.series.price.update(a[0]),e.data.volume.push(s[0]),e.series.volume.update(s[0]))}function dt(i){const l=Z(new Date(`${i}T09:00:00Z`)),a=Z(new Date(`${i}T11:30:00Z`)),s=Z(new Date(`${i}T13:00:00Z`)),u=Z(new Date(`${i}T14:30:00Z`)),f=Z(new Date(`${i}T14:00:00Z`));let d=[];for(let p=l;p<=u;p++){if(p>a&&p<s)continue;let b={time:p};(p==f||p==u)&&(b.value=1),d.push(b)}return d}function ve(i,l){return Array.from(new Map([...i,...l].sort((a,s)=>a.time-s.time).map(a=>[a.time,a])).values())}function He(){c.dispatch("tradingDerivative/setChartLoading",!0),e.websocket=new WebSocket(Ji),e.websocket.onopen=i=>{let l='{"protocol":"json","version":1}';e.websocket.send(l),l='{"arguments":["VN30F1M"],"invocationId":"0","target":"SubscribeTrades","type":1}',e.websocket.send(l),e.socketSendData=l},e.websocket.onclose=i=>{!e.socketStop&&K()&&(w.isSocketWarning=!0,He())},e.websocket.onmessage=i=>{w.isSocketWarning=!1,jt(i.data).forEach(a=>{if(!a)return!1;a.type==3?(c.dispatch("tradingDerivative/getTools"),e.data.whitespace=ve(e.data.whitespace,dt(t)),e.series.whitespace.setData(e.data.whitespace),ct(a.result,0),c.dispatch("tradingDerivative/setChartLoading",!1)):a.type==1&&a.target=="UpdateTrades"&&a.arguments[0]=="VN30F1M"&&(kr(a.arguments[1].at(-1).price),ct(a.arguments[1]))})}}function jt(i){let l=[];return i.split("").forEach(a=>{const s=a.indexOf("{"),u=a.lastIndexOf("}");let f=null;if(s!==-1&&u!==-1&&u>s){const d=a.substring(s,u+1);d!="{}"&&(f=JSON.parse(d))}l.push(f)}),l}function Qt(){e.currentSeconds=Z(Ge(new Date,7)),K()&&(X.value.position&&e.currentSeconds>o.ATC-5*60&&(w.isOrderWarning=!0,e.currentSeconds>o.ATC-15&&m.isSet(e.tools.order.tp.line)&&c.dispatch("tradingDerivative/executeOrder",{action:"cancel",tpData:{cmd:"cancel"},slData:{cmd:"delete"}}).then(i=>{i.isOk?(ye(["entry","tp","sl"]),B.success(h("trading.derivative.autoCancelTpSlSuccess"))):j(i.message)})),U.value.openingMarket&&e.currentSeconds==o.START&&He()),w.clock=Ye(new Date,"HH:mm:ss")}function ge(i){const l="order";let a={isRemove:!1,name:l,points:[],data:[]},s,u;i.forEach(f=>{switch(f){case"entry":s="yellow",u=e.tools.order.side>0?"LONG":"SHORT";break;case"tp":s="lime",u=parseFloat(Math.abs(e.tools.order.tp.price-e.tools.order.entry.price).toFixed(1));break;case"sl":s="red",u=parseFloat(Math.abs(e.tools.order.sl.price-e.tools.order.entry.price).toFixed(1));break}if(a.points.push(f),m.isSet(e.tools.order[f].line))e.tools.order[f].line.applyOptions({price:e.tools.order[f].price,title:u}),a.data.push(e.tools.order[f].line.options());else{const d={lineType:l,kind:f,side:e.tools.order.side,price:e.tools.order[f].price,color:s,lineWidth:1,lineStyle:0,title:u,draggable:!0};e.tools.order[f].line=e.series.price.createPriceLine(d),a.data.push(d)}}),c.dispatch("tradingDerivative/drawTools",a)}function ye(i,l=!0){l&&c.dispatch("tradingDerivative/drawTools",{isRemove:!0,name:"order"}),i.forEach(a=>{m.isSet(e.tools.order[a].line)&&(e.series.price.removePriceLine(e.tools.order[a].line),delete e.tools.order[a].line)})}function Jt(i){w.showTradingView=!w.showTradingView,i.stopPropagation()}function zt(i){w.showLineContext=!1;const l=i.target.classList.contains("selected");document.querySelectorAll(".tool-area > .command:not(.drawless)").forEach(a=>a.classList.remove("selected")),l||i.target.classList.add("selected")}function Gt(i){w.showLineContext=!w.showLineContext,w.showSampleContext=!1,w.showProgressContext=!1}function Ut(){const i="line",l=Ce(e.crosshair.y),a=e.tools.lines.length;if(e.tools.lines=e.tools.lines.filter(s=>{const u=s.options(),f=u.type=l==+u.price;return f&&(e.series.price.removePriceLine(s),c.dispatch("tradingDerivative/drawTools",{isRemove:!0,name:i,point:l})),!f}),e.tools.lines.length==a){const s={lineType:i,price:l,color:w.lineColor,title:w.lineTitle,lineWidth:1,lineStyle:1,draggable:!0};e.tools.lines.push(e.series.price.createPriceLine(s)),c.dispatch("tradingDerivative/drawTools",{isRemove:!1,name:i,points:[l],data:[s]})}E.value.classList.remove("selected")}function ut(i=!0){e.tools.lines.length>0&&(i&&c.dispatch("tradingDerivative/drawTools",{isRemove:!0,name:"line"}),e.tools.lines.forEach(l=>e.series.price.removePriceLine(l)),ce(["lines"]))}function Kt(i){w.showLineContext=!1;const l=i.target.classList.contains("selected");document.querySelectorAll(".tool-area > .command:not(.drawless)").forEach(a=>a.classList.remove("selected")),l||(ar(),We(!1),Ee(!1),Qe(!1),i.target.classList.add("selected"))}function er(i){c.dispatch("tradingDerivative/setAutoScan",!U.value.autoScan),i.target.classList.remove("selected")}function tr(){qe.value.classList.remove("selected");const i=e.crosshair.time?e.data.price.filter(d=>d.time<=e.crosshair.time):e.data.price;let l={isRemove:!1,name:"auto",points:[],data:[]};const a=nr(i);if(!m.isSet(a))return!1;const{pattern:s,timeRS1:u,info:f}=ke(a);we(u,!0),be([s]),We(!1),pt(a,f),JSON.stringify(e.tools.auto)!=JSON.stringify(a)&&(e.tools.auto=a,Object.entries(a).forEach(([d,p])=>{l.points.push(d),l.data.push(p)}),c.dispatch("tradingDerivative/drawTools",l))}function rr(i,l=!0,a=!0){if(!l)return!1;const s=m.cloneDeep(i);e.tools.auto=s;const{pattern:u,timeRS1:f,info:d}=ke(s);if(!m.isSet(s))return!1;a&&we(f,!0),be([u]),pt(s,d)}function nr(i){let l,[a,s,u,f,d]=Array(5).fill({});for(let p=i.length-1;p>=0;p--){const b=i[p].value,D=i[p].time,x=de(D);if(x==-1)break;if(p==i.length-1&&(f={index:x,time:D,price:b},[u,s,a,d]=Array(4).fill(null).map(()=>m.cloneDeep(f))),l==null){if(b==f.price)continue;l=f.price>b}if(!Y(s.price,l,f.price)&&Y(b,!l,u.price)&&(u={index:x,time:D,price:b}),Y(b,l,s.price)&&(Y(a.price,!l,u.price)?([f,u,s]=[u,s,a].map(F=>m.cloneDeep(F)),a={index:x,time:D,price:b},d=m.cloneDeep(a),l=!l):f.index-u.index<=20?(f=m.cloneDeep(u),s=m.cloneDeep(u),u={index:x,time:D,price:b},l=!l):s={index:x,time:D,price:b}),Y(b,!l,a.price)?(a={index:x,time:D,price:b},d=m.cloneDeep(a)):d.index=x,Y(b,l,d.price)&&(d={index:x,time:D,price:b}),u.index>a.index){const F=Math.abs(s.price-u.price);if(F>=1.5&&(a.index-d.index>u.index-s.index||Math.abs(a.price-d.price)>F))break}}return ir({A:a,B:s,C:u,D:f})}function ir(i){const l={};return Object.entries(i).forEach(([a,s])=>{const{index:u,...f}=s;l[a]=f}),l}function ar(i=!0){i&&c.dispatch("tradingDerivative/drawTools",{isRemove:!0,name:"auto"}),ce(["auto"])}function or(i){w.showLineContext=!1;const l=i.target.classList.contains("selected");document.querySelectorAll(".tool-area > .command:not(.drawless)").forEach(a=>a.classList.remove("selected")),l||i.target.classList.add("selected")}function sr(i){i.target.classList.remove("selected"),We(!0),Ee(!0),Qe(!0)}function lr(){const i="pattern",l=Ce(e.crosshair.y),a=e.crosshair.time;let s={lineType:i,price:l,lineWidth:1,lineStyle:1,draggable:!0},u={isRemove:!1,name:i,points:[],data:[]};if(m.isSet(e.tools.pattern.A)){const f=e.tools.pattern.A.options();if(m.isSet(e.tools.pattern.B)){const d=e.tools.pattern.B.options();if(m.isSet(e.tools.pattern.C)){let p,b;const D=e.tools.pattern.C.options(),x={A:{time:a,price:l},B:{price:+d.price},C:{price:+D.price}},{pattern:F,timeRS1:_,info:{tr1:L,tr2:W,tr3:V,pr1:g,pr2:C,pr3:ie,fibo:N,sp:J,X:I,Y:ee,Z:ue}}=ke(x);we(_,!0,!0),be([F],!0),p="A",b={price:l,time:a,title:`A ${L} ${g}`},e.tools.pattern[p].applyOptions(b),u.points.push(p),u.data.push(e.tools.pattern[p].options()),p="B",b={title:`B ${W} ${C}`},e.tools.pattern[p].applyOptions(b),u.points.push(p),u.data.push(e.tools.pattern[p].options()),p="C",b={title:`C ${V} ${ie}`},e.tools.pattern[p].applyOptions(b),u.points.push(p),u.data.push(e.tools.pattern[p].options()),p="D",b={price:J,title:"F "+N},e.tools.pattern[p].applyOptions(b),u.points.push(p),u.data.push(e.tools.pattern[p].options()),p="X",b={price:parseFloat((J+I).toFixed(1)),title:"T "+parseFloat(I.toFixed(1))},e.tools.pattern[p].applyOptions(b),u.points.push(p),u.data.push(e.tools.pattern[p].options()),p="Y",b={price:parseFloat((J+ee).toFixed(1)),title:"T "+parseFloat(ee.toFixed(1))},e.tools.pattern[p].applyOptions(b),u.points.push(p),u.data.push(e.tools.pattern[p].options()),p="Z",b={price:parseFloat((J+ue).toFixed(1)),title:"T "+parseFloat(ue.toFixed(1))},e.tools.pattern[p].applyOptions(b),u.points.push(p),u.data.push(e.tools.pattern[p].options())}else{const p={A:{time:+f.time,price:+f.price},B:{price:+d.price},C:{price:l}},{pattern:b,timeRS1:D,info:{tr1:x,tr2:F,tr3:_,pr1:L,pr2:W,pr3:V,fibo:g,sp:C,X:ie,Y:N,Z:J}}=ke(p);we(D,!0,!0),be([b],!0);let I="A";e.tools.pattern[I].applyOptions({title:`A ${x} ${L}`}),u.points.push(I),u.data.push(e.tools.pattern[I].options()),I="B",e.tools.pattern[I].applyOptions({title:`B ${F} ${W}`}),u.points.push(I),u.data.push(e.tools.pattern[I].options()),s.point="C",s.title=`C ${_} ${V}`,s.color="#FF9800",e.tools.pattern[s.point]=e.series.price.createPriceLine(s),u.points.push(s.point),u.data.push(m.cloneDeep(s)),s.point="D",s.price=C,s.title="F "+g,s.color="#4CAF50",e.tools.pattern[s.point]=e.series.price.createPriceLine(s),u.points.push(s.point),u.data.push(m.cloneDeep(s)),s.point="X",s.price=parseFloat((C+ie).toFixed(1)),s.title="T "+parseFloat(ie.toFixed(1)),s.color="#2196F3",s.draggable=!1,e.tools.pattern[s.point]=e.series.price.createPriceLine(s),u.points.push(s.point),u.data.push(m.cloneDeep(s)),s.point="Y",s.price=parseFloat((C+N).toFixed(1)),s.title="T "+parseFloat(N.toFixed(1)),s.color="#673AB7",s.draggable=!1,e.tools.pattern[s.point]=e.series.price.createPriceLine(s),u.points.push(s.point),u.data.push(m.cloneDeep(s)),s.point="Z",s.price=parseFloat((C+J).toFixed(1)),s.title="T "+parseFloat(J.toFixed(1)),s.color="#9C27B0",s.draggable=!1,e.tools.pattern[s.point]=e.series.price.createPriceLine(s),u.points.push(s.point),u.data.push(m.cloneDeep(s))}se.value.classList.remove("selected")}else s.point="B",s.title="B 0 0",s.color="#009688",e.tools.pattern[s.point]=e.series.price.createPriceLine(s),u.points.push(s.point),u.data.push(m.cloneDeep(s))}else s.point="A",s.title="A 0 0",s.color="#F44336",s.time=a,e.tools.pattern[s.point]=e.series.price.createPriceLine(s),u.points.push(s.point),u.data.push(m.cloneDeep(s));c.dispatch("tradingDerivative/drawTools",u)}function pt({A:i,B:l,C:a},{tr1:s,tr2:u,tr3:f,pr1:d,pr2:p,pr3:b,fibo:D,sp:x,X:F,Y:_,Z:L},W=!1){if(!e.data.price.length)return!1;const V="pattern";let g={lineType:V,lineWidth:1,lineStyle:1,draggable:!0},C={isRemove:!1,name:V,points:[],data:[]};g.point="A",g.title=`A ${s} ${d}`,g.color="#F44336",g.price=i.price,g.time=i.time,e.tools.pattern[g.point]=e.series.price.createPriceLine(g),C.points.push(g.point),C.data.push(m.cloneDeep(g)),g.point="B",g.title=`B ${u} ${p}`,g.color="#009688",g.price=l.price,e.tools.pattern[g.point]=e.series.price.createPriceLine(g),C.points.push(g.point),C.data.push(m.cloneDeep(g)),g.point="C",g.price=a.price,g.title=`C ${f} ${b}`,g.color="#FF9800",e.tools.pattern[g.point]=e.series.price.createPriceLine(g),C.points.push(g.point),C.data.push(m.cloneDeep(g)),g.point="D",g.price=x,g.title="F "+D,g.color="#4CAF50",e.tools.pattern[g.point]=e.series.price.createPriceLine(g),C.points.push(g.point),C.data.push(m.cloneDeep(g)),g.point="X",g.price=parseFloat((x+F).toFixed(1)),g.title="T "+parseFloat(F.toFixed(1)),g.color="#2196F3",g.draggable=!1,e.tools.pattern[g.point]=e.series.price.createPriceLine(g),C.points.push(g.point),C.data.push(m.cloneDeep(g)),g.point="Y",g.price=parseFloat((x+_).toFixed(1)),g.title="T "+parseFloat(_.toFixed(1)),g.color="#673AB7",g.draggable=!1,e.tools.pattern[g.point]=e.series.price.createPriceLine(g),C.points.push(g.point),C.data.push(m.cloneDeep(g)),g.point="Z",g.price=parseFloat((x+L).toFixed(1)),g.title="T "+parseFloat(L.toFixed(1)),g.color="#9C27B0",g.draggable=!1,e.tools.pattern[g.point]=e.series.price.createPriceLine(g),C.points.push(g.point),C.data.push(m.cloneDeep(g)),W&&c.dispatch("tradingDerivative/drawTools",C)}function ke(i,l=null){const a=Xe(i.A,i.B),s=Xe(a.R,i.C,a.tr),u=Xe(s.R,s.S,a.tr),f=[a.R1.time,a.S1.time],d=i.C.price-i.B.price,p=i.A.price-i.B.price,b=d>0,D=a.S1.price-a.R1.price,x=s.R1.price-s.S1.price,F=u.S1.price-u.R1.price;let[_,L,W,V,g,C]=Array(6).fill(0);V=parseInt(D/p*100),Y(a.R1.price,b,i.B.price)&&Y(a.S1.price,!b,i.C.price)&&(_=1),Math.abs(d)>1.5&&Y(d,b,D)&&(g=parseInt(x/d*100),g>50&&(s.count==1?L=1:d/p<.5&&(s.count>1||s.over)?L=2:_==1&&Y(s.S1.price,!b,a.R1.price)&&Y(s.R1.price,b,a.S1.price)&&(L=3)),C=parseInt(F/d*100),C>40&&(u.count==1?W=1:d/p<.5&&(u.count>1||u.over)&&(W=2)),L==0&&g>50&&W==0&&C>50&&s.tr>.5*a.tr&&s.pr>.5*a.pr&&u.R.index-u.S.index>=a.tr&&Math.abs(u.S.price-u.R1.price)>=a.pr&&(L=4));const ie=cr(L,W,g,C);let N=l;if(!N){let Se=0;N=i.B.price,L>0&&Y(x,b,Se)&&(Se=x,N=L<4?s.S1.price:u.S1.price),W>0&&Y(F,b,Se)&&(N=u.R1.price)}const J=parseInt((L==4?(N-u.R1.price)/(i.C.price-u.R1.price):(i.C.price-N)/d)*100),I=N-(L==4?u.R1.price:i.C.price),ee=.5*I,ue=2*I;return{pattern:ie,timeRS1:f,info:{tr1:_,tr2:L,tr3:W,pr1:V,pr2:g,pr3:C,fibo:J,sp:N,X:ee,Y:I,Z:ue}}}function Xe(i,l,a=0){let s=m.cloneDeep(i),u=m.cloneDeep(l);const f=u.price>s.price;let d={},p={};e.data.price.filter(x=>x.time>=s.time).every((x,F)=>{const _=x.value,L=x.time,W=de(L);if(W==-1)return!1;if((F==0||_==s.price)&&(d={R:{index:W,time:L,price:_},S:{index:W,time:L,price:_}},p={R:d.R,S:d.S,pr:0,tr:0,count:0,over:!1}),Y(_,f,d.R.price)){const V=d.S.index-d.R.index,g=Math.abs(d.S.price-d.R.price);V>=p.tr&&g>=p.pr&&(p.tr=V,p.pr=g,p.R=d.R,p.S=d.S,a>0&&V>=a&&(p.count++,V>=3*a&&(p.over=!0))),d={R:{index:W,time:L,price:_},S:{index:W,time:L,price:_}},g>=2*p.pr&&(p={R:d.R,S:d.S,pr:0,tr:0,count:0,over:!1})}else d.S.index=W,d.S.time=L,Y(_,!f,d.S.price)&&(d.S.price=_);return Y(_,!f,s.price)?(d.S.price=s.price,!1):!!Y(_,!f,u.price)});const b=d.S.index-d.R.index,D=Math.abs(d.S.price-d.R.price);return(b>=p.tr&&D>=p.pr||D>=2*p.pr)&&(p.tr=b,p.pr=D,p.R=d.R,p.S=d.S,a>0&&b>=a&&(p.count++,b>=3*a&&(p.over=!0))),u.time=d.S.time,s.index=de(s.time),u.index=de(u.time),{tr:p.tr,pr:p.pr,count:p.count,over:p.over,S1:p.S,R1:p.R,S:s,R:u}}function cr(i,l,a,s){if(a>=s){if(i>0)return i<4?0:2;if(l>0)return 1}else{if(l>0)return 1;if(i>0)return i<4?0:2}return 3}function We(i=!0,l=!1){i&&c.dispatch("tradingDerivative/drawTools",{isRemove:!0,name:"pattern"}),l||(m.isSet(e.tools.pattern.A)&&(e.series.price.removePriceLine(e.tools.pattern.A),m.isSet(e.tools.pattern.B)&&(e.series.price.removePriceLine(e.tools.pattern.B),m.isSet(e.tools.pattern.C)&&(e.series.price.removePriceLine(e.tools.pattern.C),e.series.price.removePriceLine(e.tools.pattern.D),e.series.price.removePriceLine(e.tools.pattern.X),e.series.price.removePriceLine(e.tools.pattern.Y),e.series.price.removePriceLine(e.tools.pattern.Z)))),ce(["pattern"]))}function dr(i){w.showLineContext=!1;const l=i.target.classList.contains("selected");document.querySelectorAll(".tool-area > .command:not(.drawless)").forEach(a=>a.classList.remove("selected")),l||i.target.classList.add("selected")}function ur(i){Ee(),i.target.classList.remove("selected")}function pr(){let i={isRemove:!1,name:"tr",points:[],data:[]},l={time:e.crosshair.time,value:1};switch(e.tools.timeRange.length){case 0:l.color="OrangeRed",e.tools.timeRange[0]=l,i.points.push(0),i.data.push(l);break;case 1:l.color="lime",e.tools.timeRange[1]=l,i.points.push(1),i.data.push(l),Me.value.classList.remove("selected");break;default:const a=de(e.tools.timeRange[0].time),s=de(e.tools.timeRange[1].time),f=de(l.time)+(s-a);l.color="OrangeRed",e.tools.timeRange[0]=m.cloneDeep(l),i.points.push(0),i.data.push(m.cloneDeep(l)),l.time=e.data.whitespace[f].time,l.color="lime",e.tools.timeRange[1]=l,i.points.push(1),i.data.push(l),Me.value.classList.remove("selected");break}e.series.timeRange.setData(e.tools.timeRange),c.dispatch("tradingDerivative/drawTools",i)}function we(i,l=!1,a=!1){l&&(i=[{time:i[0],value:1,color:"OrangeRed"},{time:i[1],value:1,color:"lime"}]),e.tools.timeRange=i,e.series.timeRange.setData(i),a&&c.dispatch("tradingDerivative/drawTools",{isRemove:!1,name:"tr",points:[0,1],data:i})}function Ee(i=!0,l=!1){i&&c.dispatch("tradingDerivative/drawTools",{isRemove:!0,name:"tr"}),l||(e.series.timeRange.setData([]),ce(["tr"]))}function fr(i){w.showLineContext=!1;const l=i.target.classList.contains("selected");document.querySelectorAll(".tool-area > .command:not(.drawless)").forEach(a=>a.classList.remove("selected")),l||(i.target.classList.add("selected"),je())}function hr(i){je(),i.target.classList.remove("selected")}function mr(){const i="target",l=Ce(e.crosshair.y);let a={lineType:i,price:l,lineWidth:1,lineStyle:1,draggable:!0},s={isRemove:!1,name:i,points:[],data:[]};if(m.isSet(e.tools.target.A)){const u=+e.tools.target.A.options().price,f=l-u;a.point="B",a.title=parseFloat(f.toFixed(1)),a.color="#F44336",e.tools.target[a.point]=e.series.price.createPriceLine(a),s.points.push(a.point),s.data.push(m.cloneDeep(a)),a.point="X",a.price=parseFloat((u-.5*f).toFixed(1)),a.title=parseFloat((-.5*f).toFixed(1)),a.color="#2196F3",e.tools.target[a.point]=e.series.price.createPriceLine(a),s.points.push(a.point),s.data.push(m.cloneDeep(a)),a.point="Y",a.price=parseFloat((u-f).toFixed(1)),a.title=parseFloat(-f.toFixed(1)),a.color="#673AB7",e.tools.target[a.point]=e.series.price.createPriceLine(a),s.points.push(a.point),s.data.push(m.cloneDeep(a)),a.point="Z",a.price=parseFloat((u-2*f).toFixed(1)),a.title=parseFloat((-2*f).toFixed(1)),a.color="#9C27B0",e.tools.target[a.point]=e.series.price.createPriceLine(a),s.points.push(a.point),s.data.push(m.cloneDeep(a)),Ze.value.classList.remove("selected")}else a.point="A",a.title="0",a.color="#FF9800",e.tools.target[a.point]=e.series.price.createPriceLine(a),s.points.push(a.point),s.data.push(m.cloneDeep(a));c.dispatch("tradingDerivative/drawTools",s)}function je(i=!0){i&&c.dispatch("tradingDerivative/drawTools",{isRemove:!0,name:"target"}),m.isSet(e.tools.target.A)&&(e.series.price.removePriceLine(e.tools.target.A),m.isSet(e.tools.target.B)&&(e.series.price.removePriceLine(e.tools.target.B),e.series.price.removePriceLine(e.tools.target.X),e.series.price.removePriceLine(e.tools.target.Y),e.series.price.removePriceLine(e.tools.target.Z))),ce(["target"])}function vr(i){w.showLineContext=!1;const l=i.target.classList.contains("selected");document.querySelectorAll(".tool-area > .command:not(.drawless)").forEach(a=>a.classList.remove("selected")),l||(i.target.classList.add("selected"),ft())}function gr(i){ft(),i.target.classList.remove("selected")}function yr(){const i="rr",l=Ce(e.crosshair.y);let a={lineType:i,price:l,lineWidth:1,lineStyle:1,draggable:!0},s={isRemove:!1,name:i,points:[],data:[]};if(m.isSet(e.tools.rr.EP)){const u=+e.tools.rr.EP.options().price;if(m.isSet(e.tools.rr.SL)){const f=+e.tools.rr.SL.options().price,d=f-u;let p=l-u;if(p/d>0){const x=u-(f-u);a.price=x,p=x-u}a.point="TP",a.title=`TP=${p.toFixed(1)}`,a.color="lime",e.tools.rr[a.point]=e.series.price.createPriceLine(a),s.points.push(a.point),s.data.push(m.cloneDeep(a));const b=Math.abs(p)/Math.abs(d),D="EP";e.tools.rr[D].applyOptions({title:`RR=${b.toFixed(1)}`}),s.points.push(D),s.data.push(e.tools.rr[D].options()),A.value.classList.remove("selected")}else{const f=l-u;a.point="SL",a.title=`SL=${f.toFixed(1)}`,a.color="red",e.tools.rr[a.point]=e.series.price.createPriceLine(a),s.points.push(a.point),s.data.push(m.cloneDeep(a))}}else a.point="EP",a.title="RR=",a.color="yellow",e.tools.rr[a.point]=e.series.price.createPriceLine(a),s.points.push(a.point),s.data.push(m.cloneDeep(a));c.dispatch("tradingDerivative/drawTools",s)}function ft(i=!0){i&&c.dispatch("tradingDerivative/drawTools",{isRemove:!0,name:"rr"}),m.isSet(e.tools.rr.EP)&&(e.series.price.removePriceLine(e.tools.rr.EP),m.isSet(e.tools.rr.SL)&&(e.series.price.removePriceLine(e.tools.rr.SL),m.isSet(e.tools.rr.TP)&&e.series.price.removePriceLine(e.tools.rr.TP))),ce(["rr"])}function wr(){w.showSampleContext=!w.showSampleContext,w.showProgressContext=!1,w.showLineContext=!1}function br(){w.showProgressContext=!w.showProgressContext,w.showSampleContext=!1,w.showLineContext=!1}function be(i,l=!1){w.progress=i,l&&Je(w.progress)}function Qe(i=!0,l=!1){i&&Je([]),l||(w.progress=[])}function Je(i){c.dispatch("tradingDerivative/drawTools",{isRemove:!i.length,name:"progress",points:[""],data:[i]})}function Sr(){ye(["entry","tp","sl"],!1),ut(!1),je(!1),Ee(!1),Qe(!1),We(!1)}function Ae(i){if(i){if(K()&&(m.isSet(e.tools.order.tp.line)||X.value.position&&e.currentSeconds>o.ATO&&e.currentSeconds<o.ATC&&(De.value.style.left=+(e.crosshair.x+(e.crosshair.x>innerWidth-61?-61:1))+"px",De.value.style.top=+(e.crosshair.y+(e.crosshair.y>innerHeight-51?-51:1))+"px",De.value.style.display="block"),!m.isSet(e.tools.order.entry.line))){let l=null,a=0;X.value.position?(e.currentSeconds<o.ATO?l="ATO":e.currentSeconds>o.ATC&&(l="ATC"),l&&(e.tools.order.entry.price=l,a=-X.value.position)):e.currentSeconds>o.ATO&&e.currentSeconds<o.ATC&&(l=Ce(e.crosshair.y),a=l>=e.data.price.at(-1).value?1:-1,e.tools.order.side=a,e.tools.order.entry.price=l),a&&(le.value.style.left=+(e.crosshair.x+(e.crosshair.x>innerWidth-71?-71:1))+"px",le.value.style.top=+(e.crosshair.y+(e.crosshair.y>innerHeight-61?-61:1))+"px",le.value.style.background=a>0?"green":"red",le.value.innerText=`${a>0?"LONG":"SHORT"} ${l}`,le.value.style.display="block")}}else le.value.style.display="none",De.value.style.display="none"}function xr(){K()&&(e.currentSeconds<o.ATO?wt(h("trading.derivative.atoOrder"),h("titles.confirm")).then(l=>{l&&c.dispatch("tradingDerivative/executeOrder",{action:"exit",exitData:{cmd:"new",price:"ATO"}}).then(a=>{a.isOk?B.success(h("trading.derivative.atoOrderSuccess")):j(a.message)})}):e.currentSeconds<o.ATC?c.dispatch("tradingDerivative/executeOrder",{action:"entry",etData:{cmd:"new",side:e.tools.order.side,price:e.tools.order.entry.price}}).then(i=>{i.isOk?(ge(["entry"]),B.success(h("trading.derivative.newEntrySuccess"))):j(i.message)}):wt(h("trading.derivative.atcOrder"),h("titles.confirm")).then(l=>{l&&c.dispatch("tradingDerivative/executeOrder",{action:"exit",exitData:{cmd:"new",price:"ATC"}}).then(a=>{a.isOk?B.success(h("trading.derivative.atcOrderSuccess")):j(a.message)})}))}function Tr(){e.tools.order.tp.price=e.tools.order.entry.price+e.tools.order.side*Ot,e.tools.order.sl.price=e.tools.order.entry.price-e.tools.order.side*Pt,c.dispatch("tradingDerivative/executeOrder",{action:"tpsl",tpData:{cmd:"new",price:e.tools.order.tp.price},slData:{cmd:"new",price:e.tools.order.sl.price}}).then(i=>{i.isOk?(e.tools.order.entry.line.applyOptions({draggable:!1}),ge(["entry","tp","sl"]),B.success(h("trading.derivative.newTpSlSuccess"))):j(i.message)})}function Dr(){m.isSet(e.tools.order.entry.line)?m.isSet(e.tools.order.tp.line)?c.dispatch("tradingDerivative/executeOrder",{action:"exit",tpData:{cmd:"cancel"},slData:{cmd:"delete"},exitData:{cmd:"new",price:"MTL"}}).then(i=>{i.isOk?(ye(["entry","tp","sl"]),B.success(h("trading.derivative.exitSuccess"))):j(i.message)}):c.dispatch("tradingDerivative/executeOrder",{action:"entry",etData:{cmd:"delete"}}).then(i=>{i.isOk?(ye(["entry"]),B.success(h("trading.derivative.deleteEntrySuccess"))):j(i.message)}):ze()}function kr(i){m.isSet(e.tools.order.entry.line)&&(m.isSet(e.tools.order.tp.line)?((e.tools.order.side>0&&i>=e.tools.order.tp.price||e.tools.order.side<0&&i<=e.tools.order.tp.price)&&(e.isAutoOrdering||(e.isAutoOrdering=!0,c.dispatch("tradingDerivative/executeOrder",{action:"sl",slData:{cmd:"delete"}}).then(l=>{l.isOk?(ye(["entry","tp","sl"]),B.success(h("trading.derivative.deleteTpSuccess")),Ae(!1)):j(l.message),e.isAutoOrdering=!1}))),(e.tools.order.side>0&&i<=e.tools.order.sl.price||e.tools.order.side<0&&i>=e.tools.order.sl.price)&&(e.isAutoOrdering||(e.isAutoOrdering=!0,c.dispatch("tradingDerivative/executeOrder",{action:"tp",tpData:{cmd:"cancel"}}).then(l=>{l.isOk?(ye(["entry","tp","sl"]),B.success(h("trading.derivative.deleteSlSuccess")),Ae(!1)):j(l.message),e.isAutoOrdering=!1})))):(e.tools.order.side>0&&i>=e.tools.order.entry.price||e.tools.order.side<0&&i<=e.tools.order.entry.price)&&(e.isAutoOrdering||(e.isAutoOrdering=!0,setTimeout(()=>{e.tools.order.tp.price=e.tools.order.entry.price+e.tools.order.side*Ot,e.tools.order.sl.price=e.tools.order.entry.price-e.tools.order.side*Pt,c.dispatch("tradingDerivative/executeOrder",{action:"tpsl",tpData:{cmd:"new",price:e.tools.order.tp.price},slData:{cmd:"new",price:e.tools.order.sl.price}}).then(l=>{l.isOk?(e.tools.order.entry.line.applyOptions({draggable:!1}),ge(["entry","tp","sl"]),B.success(h("trading.derivative.autoNewTpSlSuccess"))):j(l.message),e.isAutoOrdering=!1})},1e3))))}function Cr(){e.chart.timeScale().scrollToRealTime()}function K(){return U.value.openingMarket&&e.currentSeconds>=o.START&&e.currentSeconds<=o.END}function Ce(i){return parseFloat(e.series.price.coordinateToPrice(i).toFixed(1))}function j(i){i||(i="unknown"),B.error(h(`trading.derivative.${i}`))}function Or(){if(!w.chartDate)return!1;c.dispatch("tradingDerivative/getChartData",{date:w.chartDate})}function ht(){K()&&e.websocket.send(e.socketSendData)}function mt(i){e.data.whitespace=[],e.data.price=[],e.data.volume=[],ht(),c.dispatch("tradingDerivative/getChartData",{date:w.chartDate,isDay:i})}function ze(){c.dispatch("tradingDerivative/getTools")}function ce(i){i==null&&(i=["order","lines","rr","target","tr","pattern","auto"]),i.includes("order")&&(e.tools.order={side:0,entry:{},tp:{},sl:{}}),i.includes("lines")&&(e.tools.lines=[]),i.includes("rr")&&(e.tools.rr={EP:{},SL:{},TP:{}}),i.includes("target")&&(e.tools.target={A:{},B:{},X:{},Y:{},Z:{}}),i.includes("tr")&&(e.tools.timeRange=[]),i.includes("pattern")&&(e.tools.pattern={A:{},B:{},C:{},D:{},X:{},Y:{},Z:{}}),i.includes("auto")&&(e.tools.auto={})}function Pr(){c.dispatch("tradingDerivative/getAccountInfo").then(i=>{let l="";l+='<div style="width: 200px;">',l+=`<div style="display: flex;"><div style="flex: 0 0 75px;">${h("trading.derivative.nav")}</div><div>: ${T.currency(i.nav)}</div></div>`,l+=`<div style="display: flex;"><div style="flex: 0 0 75px;">${h("trading.derivative.maxVol")}</div><div>: ${T.numberVnFormat(i.maxVol)}</div></div>`,l+=`<div style="display: flex;"><div style="flex: 0 0 75px;">${h("trading.derivative.vm")}</div><div>: ${T.currency(i.vm)}</div></div>`,l+=`<div style="display: flex;"><div style="flex: 0 0 75px;">${h("trading.derivative.fee")}</div><div>: ${T.currency(i.fee)}</div></div>`,l+="</div>",Ir(l,h("trading.derivative.accountInfo"))})}function Fr(){O.emit("checkPin",()=>c.dispatch("tradingDerivative/report"))}function Lr(){O.emit("checkPin",()=>c.dispatch("tradingDerivative/export",w.chartDate))}function _r(){nt.value.show()}function Rr(){O.emit("checkPin",()=>c.dispatch("tradingDerivative/loginDnse"))}function Y(i,l,a,s=!1){return l?s?i>=a:i>a:s?i<=a:i<a}function de(i){let l=e.data.whitespace.findIndex(a=>a.time==i);if(l==-1){const a=Ye(new Date(i*1e3),"yyyy-MM-dd"),s=Z(new Date(`${a}T11:30:00Z`)),u=Z(new Date(`${a}T13:00:00Z`)),f=Z(new Date(`${a}T14:30:00Z`));i>s&&i<u?i=s:i>f&&(i=f),l=e.data.whitespace.findIndex(d=>d.time==i)}return l}return(i,l)=>{const a=rt("DxToolbar");return q(),z(Ke,null,[S("div",xi,[te(a,{items:[{location:"before",widget:"dxButton",options:{icon:"far fa-file-chart-pie small",hint:i.$t("trading.derivative.buttons.report"),onClick:Fr}},{location:"before",widget:"dxButton",options:{icon:"far fa-cloud-arrow-down small",hint:i.$t("trading.derivative.buttons.export"),onClick:Lr}},{location:"before",widget:"dxButton",options:{icon:"far fa-arrow-right-to-arc small",hint:i.$t("trading.derivative.buttons.loginVps"),onClick:_r}},{visible:!1,location:"before",widget:"dxButton",options:{icon:"far fa-sign-in-alt small",hint:i.$t("trading.derivative.buttons.loginDnse"),onClick:Rr}}]},null,8,["items"]),S("div",{class:"order-chart-container",ref_key:"chartContainerRef",ref:k,onClick:Vt,onContextmenu:It},[S("div",{class:"chart-wrapper",ref_key:"orderChartRef",ref:M},[S("div",{class:"area data-area",onClick:at,onContextmenu:ot},[S("div",{ref_key:"connectionRef",ref:$,class:G(["command",{yellow:X.value.pending}]),title:i.$t("trading.derivative.connection"),onClick:l[0]||(l[0]=()=>i.$store.dispatch("tradingDerivative/getStatus"))},[S("i",{class:G(["far",{"fa-link-simple":X.value.connection,"fa-link-simple-slash":!X.value.connection,blink:w.isSocketWarning}])},null,2)],10,Ti),S("div",{class:G(["command status",{green:X.value.position>0,red:X.value.position<0}]),title:i.$t("trading.derivative.position"),onClick:Pr},me(X.value.position),11,Di),S("div",{class:"command clock",onClick:ht},me(w.clock),1),ae(S("input",{type:"date",class:"chart-date command",title:i.$t("trading.derivative.date"),"onUpdate:modelValue":l[1]||(l[1]=s=>w.chartDate=s),onChange:Or},null,40,ki),[[$r,w.chartDate]]),S("div",{ref_key:"reloadToolRef",ref:_e,class:"command",title:i.$t("trading.derivative.reload"),onClick:l[2]||(l[2]=()=>mt(!1)),onContextmenu:l[3]||(l[3]=()=>mt(!0))},[S("i",{class:G(["far fa-sync-alt",{"fa-spin":i.$store.state.tradingDerivative.isChartLoading}])},null,2)],40,Ci)],32),S("div",{class:"area tool-area",onClick:at,onContextmenu:ot},[S("div",{ref_key:"fullscreenToolRef",ref:ne,class:"command",title:i.$t("trading.derivative.fullscreen"),onClick:qt},[S("i",{class:G(["far",{"fa-compress":w.isFullscreen,"fa-expand":!w.isFullscreen}])},null,2)],8,Oi),S("div",{ref_key:"tradingviewRef",ref:Re,class:"command far fa-chart-candlestick",title:i.$t("trading.derivative.tradingview"),onClick:Jt,onContextmenu:ze},null,40,Pi),S("div",{class:G(["popup command",{green:w.progress[0]<=2,red:w.progress[0]>2}]),title:i.$t("trading.derivative.progressTool"),onClick:br},[S("i",{class:G(["far",{"fa-badge-check":!w.progress.length,[`fa-circle-${w.progress[0]+1}`]:w.progress.length}])},null,2),ae(te(fn,{class:"contextmenu",modelValue:w.progress,"onUpdate:modelValue":l[4]||(l[4]=s=>w.progress=s),onChange:Je},null,8,["modelValue"]),[[pe,w.showProgressContext]])],10,Fi),S("div",{ref_key:"autoScanToolRef",ref:qe,class:"command",title:i.$t("trading.derivative.autoScanTool"),onClick:Kt,onContextmenu:er},[S("i",{class:G(["far fa-bolt-auto",{blink:U.value.autoScan}])},null,2)],40,Li),S("div",{ref_key:"patternToolRef",ref:se,class:"command",title:i.$t("trading.derivative.patternTool"),onClick:or,onContextmenu:sr},Mi,40,_i),S("div",{ref_key:"timeRangeToolRef",ref:Me,class:"command",title:i.$t("trading.derivative.timeRangeTool"),onClick:dr,onContextmenu:ur},Ai,40,Wi),S("div",{ref_key:"lineToolRef",ref:E,class:"popup command",title:i.$t("trading.derivative.lineTool"),onClick:zt,onContextmenu:Gt},[Yi,ae(te(Nr,{class:"contextmenu",enable:w.showLineContext,title:w.lineTitle,"onUpdate:title":l[5]||(l[5]=s=>w.lineTitle=s),color:w.lineColor,"onUpdate:color":l[6]||(l[6]=s=>w.lineColor=s),onDeleteAllLine:ut},null,8,["enable","title","color"]),[[pe,w.showLineContext]])],40,$i),S("div",{ref_key:"targetToolRef",ref:Ze,class:"command",title:i.$t("trading.derivative.targetTool"),onClick:fr,onContextmenu:hr},Ni,40,Vi),ae(S("div",{ref_key:"rrToolRef",ref:A,class:"command",title:i.$t("trading.derivative.rrTool"),onClick:vr,onContextmenu:gr},qi,40,Bi),[[pe,!1]]),ae(S("div",{class:"popup command",title:i.$t("trading.derivative.sampleTool"),onClick:wr},[Xi,ae(te(nn,{class:"contextmenu"},null,512),[[pe,w.showSampleContext]])],8,Hi),[[pe,!1]]),ae(S("div",{ref_key:"cancelOrderRef",ref:At,class:"cancel-order command",title:i.$t("trading.derivative.cancelTool"),onClick:Dr},[S("i",{class:G(["far fa-trash-alt",{blink:w.isOrderWarning}])},null,2)],8,ji),[[pe,$t.value]])],32),S("div",null,[S("div",{ref_key:"entryOrderRef",ref:le,class:"order-button entry",onClick:xr}," Entry ",512),S("div",{ref_key:"tpslOrderRef",ref:De,class:"order-button tpsl",onClick:Tr}," TP/SL ",512),S("div",{class:"chart-top command far fa-angle-double-right",onClick:Cr})]),ae(S("iframe",{ref_key:"tradingviewChartRef",ref:H,class:"tradingview-chart",src:Yt.value},null,8,Qi),[[pe,w.showTradingView]])],512)],544)]),te(Zr,{ref_key:"vpsOtpPopupRef",ref:nt},null,512)],64)}}};export{ra as default};
