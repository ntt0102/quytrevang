import k from"./Chart-BQ3quqNg.js";import{u as v,r as C,c,a as S,b as D,e as u,h as w,j as y,k as $,x as d,m as x,o as _}from"./app-C-PcG-xc.js";import{s as B}from"./subYears-CxWNnzon.js";import"./lightweight-charts.esm.development-DN_Fxg3C.js";const W={class:"share-page content-block dx-card responsive-paddings"},j={__name:"Index",setup(T){const o=w(),f=y(),{t:s}=v(),i=$("bus"),r=C(null),g=c(()=>o.state.tradingShare.groups),l=c(()=>o.state.tradingShare.symbols.length),t=S({group:f.query.list??"",fromDate:B(new Date,5)});o.dispatch("tradingShare/getGroups");function n({component:e}){const a=e.option("value");t.group=a!==null?a.trim().toUpperCase():"",o.dispatch("tradingShare/getSymbols",t.group)}function m({value:e}){t.fromDate=e,r.value.getChartData(!0,e)}function h(){i.emit("checkPin",()=>o.dispatch("tradingShare/deleteWatchlist").then(()=>{r.value.clearWatchlist()}))}function p(){const e=t.group,a=r.value.getFilterTimes();if(!e)return d.warning(s("trading.share.filterGroupWarning"));if(a.length!==4)return d.warning(s("trading.share.filterTimeWarning"));i.emit("checkPin",()=>{o.dispatch("tradingShare/filterSymbols",{group:e,filterTimes:a})})}return(e,a)=>{const b=x("DxToolbar");return _(),D("div",W,[u(b,{items:[{visible:e.$mf.isSet(e.$route.query),location:"before",widget:"dxButton",options:{icon:"far fa-arrow-left small",hint:e.$t("buttons.back"),onClick:()=>e.$router.go(-1)}},{location:"before",widget:"dxDateBox",options:{type:"date",value:t.fromDate,onValueChanged:m}},{location:"before",widget:"dxAutocomplete",options:{width:"100",showClearButton:!0,openOnFieldClick:!0,minSearchLength:0,dataSource:g.value,value:t.group,elementAttr:{class:"symbol-group"},placeholder:e.$t("trading.share.group"),onEnterKey:n,onFocusOut:n,onItemClick:n}},{visible:l.value>0,location:"before",text:`(${l.value})`},{location:"after",widget:"dxButton",options:{icon:"far fa-trash-xmark small",hint:e.$t("trading.share.deleteWatchList"),onClick:h}},{location:"after",widget:"dxButton",options:{icon:"far fa-filter small",hint:e.$t("trading.share.filterSymbols"),onClick:p}}]},null,8,["items"]),u(k,{fromDate:t.fromDate,ref_key:"chartRef",ref:r},null,8,["fromDate"])])}}};export{j as default};
