import{u as _,c as b,i as u,r as g,d as q,e as $,w as x,f,n as k,k as r,_ as P,o as R,j as a,l as n,m as T,D as d}from"./app-5fb94146.js";const B={__name:"CopyistStatusPopup",setup(G,{expose:y}){const i=_(),{t}=b();u("bus");const o=u("mt"),v=u("mf"),p=g(null),l=g(null),s=q({gridData:null,editPermission:"trades@edit",validationRules:{amount:[{type:"required",message:t("trading.trades.amount")+o.validations.required}],scores:[{type:"required",message:t("trading.trades.scores")+o.validations.required}],revenue:[{type:"required",message:t("trading.trades.revenue")+o.validations.required}],loss:[{type:"required",message:t("trading.trades.loss")+o.validations.required}],fees:[{type:"required",message:t("trading.trades.fees")+o.validations.required}],date:[{type:"required",message:t("trading.trades.date")+o.validations.required},{type:"async",validationCallback:e=>i.dispatch("tradingStatistic/validateDuplicateDate",e),message:t("trading.trades.validations.date")}]}});$(()=>i.state.auth.user.permissions),x(()=>i.state.tradingOrder.copyists,e=>{s.gridData=v.cloneDeep(e)});function h(){p.value.show()}function w(){i.dispatch("tradingOrder/getCopyistStatus")}function C(){s.gridData=null}return y({show:h}),(e,c)=>{const D=f("DxToolbar"),S=f("DxScrollView");return R(),k(P,{ref_key:"popupRef",ref:p,title:e.$t("trading.orderChart.copyistStatusPopup.title"),onShown:w,onHidden:C},{default:r(()=>[a(S,null,{default:r(()=>[a(n(T),{ref_key:"dataGridRef",ref:l,"data-source":s.gridData,"key-expr":"id","show-borders":!0,"column-auto-width":!0,"allow-column-reordering":!0,"allow-column-resizing":!0,"column-resizing-mode":"widget",paging:{pageSize:8},headerFilter:{visible:!0},loadPanel:{enabled:!0},selection:{mode:"single"},onContentReady:c[0]||(c[0]=m=>e.$mf.dataGridPreload(s.gridData,l.value.instance))},{commandCellTemplate:r(({data:m})=>[a(D,{items:[{locateInMenu:"auto",showText:"inMenu",location:"center",widget:"dxButton",options:{type:"default",icon:"trash",hint:e.$t("buttons.delete"),text:e.$t("buttons.delete"),onClick:()=>{l.value.instance.deleteRow(m.rowIndex)}}}]},null,8,["items"])]),default:r(()=>[a(n(d),{fixed:!0,width:35,type:"buttons",cssClass:"dx-datagrid-command-column","cell-template":"commandCellTemplate",caption:e.$t("titles.commandHeaderTitleShort")},null,8,["caption"]),a(n(d),{"data-field":"vps_code","data-type":"string",caption:e.$t("trading.orderChart.copyistStatusPopup.vpsCode")},null,8,["caption"]),a(n(d),{"data-field":"connection","data-type":"boolean",caption:e.$t("trading.orderChart.copyistStatusPopup.connection")},null,8,["caption"]),a(n(d),{"data-field":"position","data-type":"number",caption:e.$t("trading.orderChart.copyistStatusPopup.position")},null,8,["caption"])]),_:1},8,["data-source"])]),_:1})]),_:1},8,["title"])}}};export{B as default};
